<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Comprehensive Knowledge of C++(V18.05)</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #cccccc; background-color: #303030; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ffcfaf; } /* Alert */
    code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #dca3a3; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #f0dfaf; } /* ControlFlow */
    code span.ch { color: #dca3a3; } /* Char */
    code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
    code span.co { color: #7f9f7f; } /* Comment */
    code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
    code span.do { color: #7f9f7f; } /* Documentation */
    code span.dt { color: #dfdfbf; } /* DataType */
    code span.dv { color: #dcdccc; } /* DecVal */
    code span.er { color: #c3bf9f; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #c0bed1; } /* Float */
    code span.fu { color: #efef8f; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
    code span.kw { color: #f0dfaf; } /* Keyword */
    code span.op { color: #f0efd0; } /* Operator */
    code span.ot { color: #efef8f; } /* Other */
    code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
    code span.sc { color: #dca3a3; } /* SpecialChar */
    code span.ss { color: #cc9393; } /* SpecialString */
    code span.st { color: #cc9393; } /* String */
    code span.va { } /* Variable */
    code span.vs { color: #cc9393; } /* VerbatimString */
    code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

    body {
        margin: 0 auto;
        max-width: none;
        width: 1000px;
        padding-left: 50px;
        padding-right: 50px;
        padding-top: 50px;
        padding-bottom: 50px;
        hyphens: auto;
        overflow-wrap: break-word;
        text-rendering: optimizeLegibility;
        font-kerning: normal;
    }

    table {
        border-collapse: collapse;
    }

    table, th, td {
        border: 2px solid black;
    }

    header {
        margin-bottom: 4em;
        text-align: center;
        color: white;
        background-color: lightblue;
    }

    h1:not(:first-of-type) {
        page-break-before: always;
    }

  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Comprehensive Knowledge of C++(V18.05)</h1>
<p class="author">autor:ichiroprogrammer</p>
</header>
<!-- ./md/sample_code.md -->
<h1 id="sample-code">Sample Code <a id="SS_23"></a></h1>
<h2 id="vim">vim <a id="SS_23_1"></a></h2>
<h3 id="vim_configreadme.html">vim_config/README.md
<a id="SS_23_1_1"></a></h3>
<pre class="vim"><code>          1 # このリポジトリの目的
          2 wsl-ubuntu vim/nvim、cygwin vim、windows gvim/nvim/nvim-qtの設定方法や設定ファイルを保存する。
          3 
          4 
          5 # このリポジトリのファイル
          6 ## README.md
          7 このファイル。
          8 
          9 ## ./nvimディレクトリ
         10 
         11 |ファイル名        |内容                              |
         12 |:-----------------|:---------------------------------|
         13 |nvim/init.vim     |nvimから最初に読み込まれる        |
         14 |nvim/org.vim      |オリジナルの設定                  |
         15 |nvim/package.vim  |deinを使用した外部パッケージの設定|
         16 |nvim/plugin/      |自作プラグイン                    |
         17 |nvim/autoload/    |自作プラグインのオートロード      |
         18 |nvim/rplugin/     |自作プラグイン                    |
         19 |nvim/ftplugin/    |filetype別プラグイン              |
         20 |nvim/cheatsheet.md|自分用ヘルプ。:Cheatで表示        |
         21 
         22 ## ./vimディレクトリ
         23 |ファイル名|内容                                             |
         24 |:---------|:------------------------------------------------|
         25 |vim/vimrc |~/.vimrcにコピーかシンボリックリンクを張って使用 |
         26 |vim/gimrc |~/.gvimrcにコピーかシンボリックリンクを張って使用|
         27 
         28 ## その他
         29 |ファイル名|内容                                                                                 |
         30 |:---------|:------------------------------------------------------------------------------------|
         31 |vim.sh    |bashrc等からsource                                                                   |
         32 |inputrc   |readline(gdb)を使用するアプリケーションのrcファイル。~/.inputrcにコピーして使用する。|
         33 
         34 
         35 # 環境変数
         36 ここで説明する環境変数は下記のvim系プログラムを初期設定をするためのものである。
         37 * ubuntu上のvim、nvim
         38 * cygwin上のvim
         39 * windows上のgvim、nvim、nvim-qt
         40 * cygwinターミナルから起動されたwindows上のgvim、nvim、nvim-qt
         41 
         42 下記の環境変数XDG_CONFIG_HOMEはすべて同一の実態(ディレクトリ)を指している。
         43 
         44 環境変数VIMやVIMRUNTIMEは設定しない。設定しない場合、
         45 * windows版gvimでは、
         46     * VIMは、&#39;$HOME/.vim&#39;がセットされる。
         47     * VIMRUNTIMEは、&#39;$HOME/.vim/vimNN&#39;がセットされる。
         48 
         49 * windows版nvim-qでは、Neovimにバンドルされているパッケージが入っているディレクトリが
         50   VIMやVIMRUNTIMEにセットされる。
         51 
         52 ## wsl-ubuntu
         53 * .bashrcに下記を追加する。
         54 
         55         export XDG_CONFIG_HOME=~/.config
         56         source $XDG_CONFIG_HOME/vim.sh
         57 
         58 ## cygwin
         59 * .bashrcに下記を追加する。
         60 
         61         # LINUX_HOMEはubuntuのホームディレクトリを指定
         62         export LINUX_HOME=/cygdrive/c/XXX
         63         export XDG_CONFIG_HOME=$LINUX_HOME/.config
         64         source $XDG_CONFIG_HOME/vim.sh
         65 
         66 ## windows
         67 * 環境変数に以下を追加する
         68 
         69         # XXXは上記と同じものを指定
         70         # YYYはcygwinのホームディレクトリを指定
         71         XDG_CONFIG_HOME C:\XXX\.config
         72         HOME C:\cygwin64\home\YYY
         73 
         74 
         75 # インストール
         76 1. 上記「環境変数」に従って環境変数、bashrcを設定
         77 2. このリポジトリを&#39;$LINUX_HOME/.confg&#39;にgit clone
         78 3. https://github.com/Shougo/dein.vim
         79    に従ってdeinを&#39;$LINUX_HOME/.config/nvim_pkg/dein&#39;にインストール
         80 4. 外部パッケージのインストールのために、wsl-ubuntu nvim立ち上げて:call deine#install()を実行
         81 5. cygwin vimの設定として、&#39;$LINUX_HOME/.confg/vim/vimrc&#39;をcygwinのホームディレクトリの
         82    .vimrcにコピーするかシンボリックリンクを張る。
         83 6. windows gvimの設定として、&#39;$LINUX_HOME/.confg/vim/gvimrc&#39;をcygwinのホームディレクトリの
         84    .gvimrcにコピーするかシンボリックリンクを張る。
         85 
         86 
         87 # 現在の問題点
         88 * パス形式の違いでwindows nvim/nvim-qtから動作しないプラグインがある。
         89 * cygwin vimはpython3対応でコンパイルされていないため、pythonが必要なプラグインは動作しない。
         90 * deinから設定したvim-fugitiveはcygwin vimでは動作しないため、
         91   https://github.com/tpope/vim-fugitive
         92   に書いてある設定が必要である。
         93 
         94 
         95 # スクリプト読み込みのデバッグ
         96 |コマンド                      |意味                                      |
         97 |:-----------------------------|:-----------------------------------------|
         98 |:echo $MYVIMRC                |最初に読み込まれる設定ファイルの表示      |
         99 |:scriptnames                  |現在読み込まれているスクリプトファイル一覧|
        100 |:let @a=execute(&#39;scriptnames&#39;)|scriptnamesの出力をレジスタaに取り込む    |
        101 |:checkhealt                   |足りないパッケージや設定等のチェック      |</code></pre>
<h3 id="vim_configinputrc">vim_config/inputrc
<a id="SS_23_1_2"></a></h3>
<pre class="vim"><code>          1 set editing-mode vi
          2 set completion-ignore-case on
          3 set show-all-if-unmodified on</code></pre>
<h3
id="vim_confignvimautoloadbuffers.vim">vim_config/nvim/autoload/buffers.vim
<a id="SS_23_1_3"></a></h3>
<pre class="vim"><code>          1 let s:buffers_buffer = &#39;Buffers&#39;
          2 
          3 function! s:line(num, buff_name)
          4     if a:buff_name == s:buffers_buffer
          5         return printf(&quot;%3d [%s]\n&quot;, a:num, a:buff_name)
          6     else
          7         return printf(&quot;%3d %s\n&quot;, a:num, a:buff_name)
          8     endif
          9 endfunction
         10 
         11 function! s:load_buffers_list()
         12     let l:line = line(&#39;.&#39;)
         13     let l:col = col(&#39;.&#39;)
         14 
         15     let buffs = split(execute(&#39;buffers&#39;), &quot;\n&quot;)
         16 
         17     setlocal modifiable
         18 
         19     silent execute &#39;:%delete&#39;
         20     for b in buffs
         21         let new_b = substitute(b, &#39;^ *\(\d\+\).*\&quot;\(.*\)\&quot;.*&#39;, { m -&gt; s:line(m[1], m[2])}, &#39;g&#39;)
         22         silent execute &#39;:normal i&#39; . new_b 
         23     endfor
         24     silent execute &#39;:$delete&#39;
         25 
         26     setlocal modifiable
         27     call cursor(l:line, l:col)
         28 endfunction
         29 
         30 function! buffers#close_buff(force)
         31     let word = expand(&quot;&lt;cword&gt;&quot;)
         32 
         33     if word =~ &#39;\d\+&#39;
         34         let to_delete = bufname(str2nr(word))
         35     elseif word =~ &#39;.\+&#39;
         36         let to_delete = word
         37     else
         38         echo &#39;no file&#39;
         39         return
         40     endif
         41 
         42     if to_delete == s:buffers_buffer
         43         execute &#39;bdelete!&#39; . word
         44     else
         45         let bwipeout = &#39;bwipeout&#39; . (a:force == 0 ? &#39; &#39; : &#39;! &#39;)
         46         execute bwipeout . word
         47         call s:load_buffers_list()
         48     endif
         49 endfunction
         50 
         51 function! buffers#open_buff()
         52     let word = expand(&quot;&lt;cword&gt;&quot;)
         53 
         54     if word =~ &#39;\d\+&#39;
         55         execute &#39;buffer &#39; . word
         56     elseif word =~ &#39;.\+&#39;
         57         execute &#39;buffer &#39; . word
         58     else
         59         echo &#39;no file&#39;
         60     endif
         61 endfunction
         62 
         63 function! s:key_map() abort
         64     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(buffers-delete) :call buffers#close_buff(0)&lt;CR&gt;
         65     nmap &lt;buffer&gt; d &lt;Plug&gt;(buffers-delete)
         66 
         67     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(buffers-delete-force) :call buffers#close_buff(1)&lt;CR&gt;
         68     nmap &lt;buffer&gt; D &lt;Plug&gt;(buffers-delete-force)
         69 
         70     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(buffers-open) :call buffers#open_buff()&lt;CR&gt;
         71     nmap &lt;buffer&gt; o &lt;Plug&gt;(buffers-open)
         72 
         73     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(buffers-reload) :call buffers#begin()&lt;CR&gt;
         74     nmap &lt;buffer&gt; r &lt;Plug&gt;(buffers-reload)
         75 endfunction
         76 
         77 function! buffers#begin()
         78     let winid = bufwinid(s:buffers_buffer)
         79     if winid isnot# -1
         80         call win_gotoid(winid)
         81     else
         82         execute &#39;new&#39; s:buffers_buffer
         83         set buftype=nofile
         84         set noswapfile
         85         call s:key_map()
         86     endif
         87     call s:load_buffers_list()
         88 endfunction</code></pre>
<h3 id="vim_confignvimautoloadcd.vim">vim_config/nvim/autoload/cd.vim
<a id="SS_23_1_4"></a></h3>
<pre class="vim"><code>          1 function! s:is_term()
          2     let bn = bufname(&quot;%&quot;)
          3     if bn =~ &#39;term://&#39;
          4         return 1
          5     else
          6         return 0
          7     endif
          8 endfunction
          9 
         10 function! cd#find_dir_candidate()
         11     for i in range(50)
         12         silent execute &#39;normal &quot;uyy&#39;
         13         let reg=@u
         14         if reg =~ &#39;ichiro@[^ ]\+ \~.*&#39;
         15             return substitute(reg, &#39;ichiro@[^ ]\+&#39;, &#39;&#39;, &#39;&#39;) 
         16         endif
         17         silent execute &#39;normal k&#39;
         18     endfor
         19 
         20     return &#39;&#39;
         21 endfunction
         22 
         23 
         24 function! cd#change_dir()
         25     if s:is_term() == 1
         26         let dir_candidate=cd#find_dir_candidate()
         27 
         28         if dir_candidate == &#39;&#39;
         29             echo &quot;no dir candidate&quot;
         30         else
         31             silent execute &#39;:cd &#39; . dir_candidate
         32         endif
         33     else
         34         silent execute &#39;:cd %:h&#39;
         35     endif
         36 endfunction</code></pre>
<h3
id="vim_confignvimautoloadgit_diff.vim">vim_config/nvim/autoload/git_diff.vim
<a id="SS_23_1_5"></a></h3>
<pre class="vim"><code>          1 let s:git_diff_buffer = &#39;GIT DIFF&#39;
          2 let s:git_diff_buffer_cur =&#39;&#39;
          3 let s:git_diff_buffer_new =&#39;&#39;   &quot; .newと表示されるが実際には改定前ファイル
          4 
          5 set patchexpr=git_diff#patch()
          6 
          7 function! git_diff#patch() abort
          8     silent execute &#39;!patch -R  -o &#39; . v:fname_out .  &#39; &#39; . v:fname_in . &#39; &lt; &#39; . v:fname_diff
          9 endfunction
         10 
         11 function! s:echo_err(msg) abort
         12   echohl ErrorMsg
         13   echomsg &#39;git_diff.vim:&#39; a:msg
         14   echohl None
         15 endfunction
         16 
         17 &quot; pattern : 0       just changed
         18 &quot;         : 1       change filename
         19 function! s:modified_pattern(pattern) abort
         20     if  a:pattern == 0
         21         return &#39;^[ADMU? ][DMU? ] \+&#39;
         22     elseif  a:pattern == 1
         23         return &#39;R[M ] \+.* -&gt; &#39;
         24     endif
         25     call s:echo_err(&#39;modified_pattern wrong&#39;)
         26 endfunction
         27 
         28 function! s:get_target_name() abort
         29     let l:line=getline(&quot;.&quot;)
         30 
         31     if match(l:line, s:modified_pattern(0)) isnot# -1
         32         return substitute(l:line, s:modified_pattern(0), &quot;&quot;, &quot;&quot;)
         33     elseif match(l:line, s:modified_pattern(1)) isnot# -1
         34         return substitute(l:line, s:modified_pattern(1), &quot;&quot;, &quot;&quot;)
         35     else
         36         call s:echo_err(l:line . &#39; :this file is not modefied&#39;)
         37         return &#39;&#39;
         38     endif
         39 endfunction
         40 
         41 function! s:git_diff(patch_target, patch_file_name, from_head) abort
         42     if a:from_head == 0
         43         silent execute &#39;!git diff &#39; .  a:patch_target .  &#39; &gt; &#39; .  a:patch_file_name
         44     else
         45         silent execute &#39;!git diff HEAD &#39; .  a:patch_target .  &#39; &gt; &#39; .  a:patch_file_name
         46     endif
         47 endfunction
         48 
         49 function! s:each(line1, line2, func_ref) abort
         50     let l:col = col(&#39;.&#39;)
         51 
         52     for i in range(a:line1, a:line2)
         53         call cursor(i, l:col)
         54         call a:func_ref()
         55     endfor
         56 endfunction
         57 
         58 function! s:launch_file() abort
         59     let l:target=s:get_target_name()
         60 
         61     if g:os == &#39;linux&#39;
         62         silent execute &#39;!wslstart &#39; .  l:target
         63     else 
         64         if g:os == &#39;cygwin&#39;
         65             silent execute &#39;!wslstart &#39; .  l:target
         66         else
         67             echo &#39;not support launch&#39;
         68         endif
         69     endif
         70 endfunction
         71 
         72 function! git_diff#launch_file(line1, line2) abort
         73     call s:each(a:line1, a:line2, function(&#39;s:launch_file&#39;))
         74 endfunction
         75 
         76 
         77 function! s:git_add() abort
         78     let l:target=s:get_target_name()
         79 
         80     silent execute &#39;!git add &#39; .  l:target
         81     call git_diff#make_list_load()
         82 endfunction
         83 
         84 function! git_diff#git_add(line1, line2) abort
         85     call s:each(a:line1, a:line2, function(&#39;s:git_add&#39;))
         86 endfunction
         87 
         88 function! s:git_reset() abort
         89     let l:target=s:get_target_name()
         90 
         91     if len(l:target) == 0
         92         return
         93     endif
         94 
         95     silent execute &#39;!git reset &#39; .  l:target
         96     call git_diff#make_list_load()
         97 endfunction
         98 
         99 function! git_diff#git_reset(line1, line2) abort
        100     call s:each(a:line1, a:line2, function(&#39;s:git_reset&#39;))
        101 endfunction
        102 
        103 function! git_diff#make_list_load() abort
        104     setlocal modifiable
        105 
        106     let l:line = line(&#39;.&#39;)
        107     let l:col = col(&#39;.&#39;)
        108     silent execute &#39;:%delete&#39;
        109     silent execute &#39;r! git status -s&#39;
        110     silent execute &#39;:1delete&#39;
        111     call cursor(l:line, l:col)
        112 
        113     setlocal nomodifiable
        114 endfunction
        115 
        116 function! s:key_map_end() abort
        117     delcommand GitAdd
        118     delcommand GitReset
        119 endfunction
        120 
        121 function! s:key_map_begin() abort
        122     command! -range GitAdd :call git_diff#git_add(&lt;line1&gt;, &lt;line2&gt;)
        123     map &lt;silent&gt; &lt;buffer&gt; a :GitAdd&lt;CR&gt;
        124 
        125     command! -range LauchFile :call git_diff#launch_file(&lt;line1&gt;, &lt;line2&gt;)
        126     map &lt;silent&gt; &lt;buffer&gt; L :LauchFile&lt;CR&gt;
        127 
        128     command! -range GitReset :call git_diff#git_reset(&lt;line1&gt;, &lt;line2&gt;)
        129     map &lt;silent&gt; &lt;buffer&gt; r :GitReset&lt;CR&gt;
        130 
        131     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-open) :&lt;C-u&gt;call git_diff#show_diff(0, 0)&lt;CR&gt;
        132     nmap &lt;buffer&gt; d &lt;Plug&gt;(diff-open)
        133 
        134     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-open-V) :&lt;C-u&gt;call git_diff#show_diff(1, 0)&lt;CR&gt;
        135     nmap &lt;buffer&gt; vd &lt;Plug&gt;(diff-open-V)
        136 
        137     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-open-h) :&lt;C-u&gt;call git_diff#show_diff(0, 1)&lt;CR&gt;
        138     nmap &lt;buffer&gt; h &lt;Plug&gt;(diff-open-h)
        139 
        140     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-open-Vh) :&lt;C-u&gt;call git_diff#show_diff(1, 1)&lt;CR&gt;
        141     nmap &lt;buffer&gt; vh &lt;Plug&gt;(diff-open-Vh)
        142 
        143     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-list-close) :&lt;C-u&gt;call git_diff#end()&lt;CR&gt;
        144     nmap &lt;buffer&gt; &lt;C-Q&gt; &lt;Plug&gt;(diff-list-close)
        145 
        146     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(diff-reload) :&lt;C-u&gt;call git_diff#make_list_load()&lt;CR&gt;
        147     nmap &lt;buffer&gt; s &lt;Plug&gt;(diff-reload)
        148 
        149     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(git-commit) :!git commit -m 
        150     nmap &lt;buffer&gt; c &lt;Plug&gt;(git-commit)
        151 endfunction
        152 
        153 &quot;vertial    : 0 normal split to show diff buffers
        154 &quot;           : 1 virtial split to show diff buffers
        155 &quot;from_head  : 0 git diff 
        156 &quot;           : 1 git diff HEAD
        157 function! git_diff#show_diff(vertical, from_head) abort
        158     call git_diff#show_diff_off()
        159 
        160     let l:target=s:get_target_name()
        161 
        162     if getftime(l:target) == -1
        163         s:echo_err(&#39;file not exits&#39;)
        164     endif
        165 
        166     let s:git_diff_buffer_cur = l:target
        167     let s:git_diff_buffer_new = l:target . &#39;.new&#39;
        168 
        169     let l:temp_file = tempname()
        170     call s:git_diff(l:target, l:temp_file, a:from_head)
        171 
        172     execute &#39;:sp&#39;
        173     execute &#39;:e &#39; . l:target
        174 
        175     if a:vertical == 0
        176         execute &#39;:diffpatch &#39; . l:temp_file
        177 
        178         &quot; 上バッファがオリジナル。下バッファが変更後ファイル
        179         execute &quot;normal \&lt;C-w&gt;j&quot;
        180     else
        181         execute &#39;:vert diffpatch &#39; . l:temp_file
        182 
        183         &quot; 左バッファがオリジナル。右バッファが変更後ファイル
        184         execute &quot;normal \&lt;C-w&gt;l&quot;
        185     endif
        186 
        187     call delete(l:temp_file)
        188 endfunction
        189 
        190 function! git_diff#show_diff_off()
        191     execute &#39;:diffoff!&#39;
        192 
        193     if s:git_diff_buffer_cur != &#39;&#39;
        194         let winid = bufwinid(s:git_diff_buffer_cur)
        195 
        196         if winid isnot# -1
        197             call win_gotoid(winid)
        198             :quit
        199         endif
        200 
        201         let s:git_diff_buffer_cur = &#39;&#39;
        202     endif
        203 
        204     if s:git_diff_buffer_new != &#39;&#39;
        205         let winid = bufwinid(s:git_diff_buffer_new)
        206 
        207         if winid isnot# -1
        208             call win_gotoid(winid)
        209             execute &#39;bwipeout! &#39; . s:git_diff_buffer_new
        210         endif
        211 
        212         let s:git_diff_buffer_new = &#39;&#39;
        213     endif
        214 endfunction
        215 
        216 function! git_diff#begin(resize) abort
        217     let winid = bufwinid(s:git_diff_buffer)
        218     if winid isnot# -1
        219         call win_gotoid(winid)
        220     else
        221         execute &#39;edit&#39; s:git_diff_buffer
        222         set buftype=nofile
        223         set noswapfile
        224         setlocal nomodifiable
        225 
        226         call s:key_map_begin()
        227         call git_diff#make_list_load()
        228     endif
        229 
        230     if a:resize != 0
        231         execute &quot;:only&quot;
        232         let l:lines=&amp;lines
        233         echo l:lines
        234         if l:lines &lt; 50
        235             execute &quot;:set lines=50&quot;
        236         endif
        237         execute &quot;:set columns=201&quot;
        238     endif
        239 
        240 endfunction
        241 
        242 function! git_diff#end()
        243     call git_diff#show_diff_off()
        244     call s:key_map_end()
        245     bwipeout!
        246 endfunction
        247 </code></pre>
<h3
id="vim_confignvimautoloadgit_session.vim">vim_config/nvim/autoload/git_session.vim
<a id="SS_23_1_6"></a></h3>
<pre class="vim"><code>          1 function! s:get_git_top()
          2     let top = system(&#39;git rev-parse --show-toplevel&#39;)
          3     return substitute(top, &quot;\n&quot;, &#39;/&#39;, &#39;g&#39;)
          4 endfunction
          5 
          6 let s:git_session_top = s:get_git_top()
          7 let s:git_session_file = s:git_session_top . &#39;Session.vim&#39;
          8 
          9 function! s:get_dirs() abort
         10     &quot; ディレクトリのみを抽出
         11     let dir_filter = &#39;|sed -e /^[^/]\\+$/d  -e  s\@/[^/]\\+$\@\@g | sort | uniq&#39;
         12     let dirs_str = system(&quot;git ls-files --full-name &quot; . s:git_session_top . dir_filter)
         13 
         14     let dirs_list = split(dirs_str, &quot;\n&quot;)
         15 
         16     let full_dirs = map(dirs_list, &#39;s:git_session_top . v:val&#39;)
         17 
         18     call add(full_dirs, s:git_session_top)
         19 
         20     return full_dirs
         21 endfunction
         22 
         23 function! git_session#set_path()
         24     let dirs = s:get_dirs()
         25     let &amp;path =&#39;./,/usr/include/c++/9/,&#39; . join(dirs, &#39;,&#39;) 
         26 
         27     let tag_dirs = map(dirs, &#39;v:val . &quot;tags&quot;&#39;)
         28     let &amp;tags =&#39;tags,./tags,&#39; .  join(tag_dirs, &#39;,&#39;)
         29 endfunction
         30 
         31 function! git_session#begin() abort
         32     let top = s:get_git_top()
         33 
         34     if top != s:git_session_top
         35         echo &#39;must be on the dir under &#39; . s:git_session_top
         36         return
         37     endif
         38 
         39     try
         40         execute &#39;source &#39; . s:git_session_file
         41     catch
         42         echo &#39;no session file&#39;
         43     endtry
         44     call git_session#set_path()
         45 endfunction
         46 
         47 function! git_session#dir() abort
         48     echo s:git_session_top
         49 endfunction
         50 
         51 function! git_session#make() abort
         52     let top = s:get_git_top()
         53 
         54     if top != s:git_session_top
         55         echo &#39;must be on the dir under &#39; . s:git_session_top
         56         return
         57     endif
         58 
         59     execute &#39;mksession! &#39; . s:git_session_file
         60 endfunction
         61 
         62 function! git_session#new_session() abort
         63     let s:git_session_top = s:get_git_top()
         64     let s:git_session_file = s:git_session_top . &#39;Session.vim&#39;
         65     call git_session#begin()
         66 endfunction</code></pre>
<h3
id="vim_confignvimautoloadgrep.vim">vim_config/nvim/autoload/grep.vim
<a id="SS_23_1_7"></a></h3>
<pre class="vim"><code>          1 function s:grep(target, args_for_dir)
          2     let ignore_case=&amp;ic
          3     if l:ignore_case == 0
          4         let ic_str = &#39;&#39;
          5     else
          6         let ic_str = &#39;-i &#39;
          7     end
          8     execute &#39;:grep -R &#39; . l:ic_str . a:args_for_dir . &#39; &quot;&#39; . a:target . &#39;&quot;&#39; 
          9 endfunction
         10 
         11 function grep#grep(...)
         12     let args_for_dir = s:make_args_for_dir(a:000)
         13     let l:target=@/
         14     call s:grep(l:target, args_for_dir)
         15 endfunction
         16 
         17 function grep#grepp(pattern, ...)
         18     let args_for_dir = s:make_args_for_dir(a:000)
         19     call s:grep(a:pattern, args_for_dir)
         20 endfunction
         21 
         22 function s:make_include(array)
         23     let beg=&#39;--include=&quot;*.&#39;
         24     let end=&#39;&quot;&#39;
         25     let inc = map(a:array,  &#39;l:beg . v:val . l:end&#39;)
         26     return join(inc)
         27 endfunction
         28 
         29 function! s:make_args_for_dir(args)
         30   let res = []
         31   call extend(res, a:args)
         32 
         33   if len(res) == 0
         34     return s:make_include([&#39;[chCH]&#39;, &#39;cpp&#39;, &#39;sh&#39;, &#39;rb&#39;, &#39;py&#39;, &#39;vim&#39;, &#39;md&#39;, &#39;pu&#39;])
         35   else
         36     if len(res) == 1 &amp;&amp; res[0] == &#39;-&#39;
         37         return &#39;--exclude-dir=&quot;.git&quot;&#39;
         38     else
         39         return s:make_include(res)
         40     endif
         41   end
         42 endfunction
         43 </code></pre>
<h3
id="vim_confignvimautoloadmulti_hl.vim">vim_config/nvim/autoload/multi_hl.vim
<a id="SS_23_1_8"></a></h3>
<pre class="vim"><code>          1 function! multi_hl#add_word(word, row)
          2 
          3     let curr = @/
          4     if a:row
          5         let new_word = a:word
          6     else
          7         let new_word = &#39;\&lt;&#39; . a:word . &#39;\&gt;&#39;
          8     endif
          9 
         10     if len(curr) != 0
         11         let search = curr . &#39;\|&#39; . new_word
         12     else
         13         let search = new_word
         14     endif
         15 
         16     let @/ = search
         17 
         18 endfunction
         19 
         20 function! multi_hl#clear()
         21     let @/ = &#39;&#39;
         22 endfunction</code></pre>
<h3
id="vim_confignvimautoloadnext_file.vim">vim_config/nvim/autoload/next_file.vim
<a id="SS_23_1_9"></a></h3>
<pre class="vim"><code>          1 &quot; カレントファイルがxxx_yyy_zzz.cppだったとすると、
          2 &quot;   del_num     :0      エクステンションを取ったxxx_yyy_zzzに*を付けてglob
          3 &quot;               :5      xxx_yyy_z*をglob
          4 
          5 function! s:make_stem(curr_file, del_num) abort
          6     if a:del_num == 0
          7         let stem = expand(&#39;%:r&#39;)
          8     else
          9         let name_len = len(a:curr_file)
         10 
         11         if name_len &gt; a:del_num
         12             let name_len -= a:del_num
         13         else
         14             let name_len = 1
         15         endif
         16 
         17         let stem = expand(&#39;%&#39;)[0 : name_len]
         18     endif
         19 
         20     &quot; ファイル名がxxx_ut.(cpp|h)だった場合の調整
         21     return substitute(stem, &quot;_ut$&quot;, &quot;&quot;, &quot;&quot;)
         22 endfunction
         23 
         24 function! s:get_next_file(curr_file, stem) abort
         25     let candidates = glob(a:stem . &quot;*&quot;, 1, 1)
         26     let candi_num = len(candidates)
         27 
         28     if candi_num &lt; 2
         29         return &#39;&#39;
         30     endif
         31 
         32     for i in range(candi_num)
         33         if a:curr_file == candidates[i]
         34             let i = i + 1
         35             if i &lt; candi_num
         36                 return candidates[i]
         37             else
         38                 return candidates[0]
         39             endif
         40         endif
         41     endfor
         42 
         43     echomsg &#39;mybe bug found in next_file.vim:&#39;
         44 endfunction
         45 
         46 let s:last_file = &#39;&#39;
         47 let s:last_del_num = 0
         48 
         49 function! next_file#change(del_num) abort
         50     let curr_file = expand(&#39;%&#39;)
         51 
         52     if s:last_file == curr_file &amp;&amp; a:del_num == 0
         53         let del_num = s:last_del_num
         54     else
         55         let del_num = a:del_num
         56     endif
         57 
         58     let stem = s:make_stem(curr_file, del_num)
         59     echo stem . &#39;*  :&#39; . del_num
         60 
         61     let next_file = s:get_next_file(curr_file, stem)
         62     if next_file == &#39;&#39;
         63         let s:last_file = curr_file
         64         let s:last_del_num = del_num &lt; 6 ? 6 : del_num + 1
         65     else
         66         let s:last_file = next_file
         67         let s:last_del_num = del_num
         68         execute &#39;edit&#39; next_file
         69     endif
         70 endfunction
         71 </code></pre>
<h3
id="vim_confignvimautoloadterm.vim">vim_config/nvim/autoload/term.vim
<a id="SS_23_1_10"></a></h3>
<pre class="vim"><code>          1 let s:term_num = -1
          2 
          3 function! s:start_term() abort
          4 &quot;    silent execute &#39;new&#39;
          5     silent execute &#39;terminal&#39;
          6 
          7     let s:term_num = bufnr()
          8 endfunction
          9 
         10 function! term#start() abort
         11     if s:term_num == -1
         12         call s:start_term()
         13     else
         14         try
         15             execute &quot;buffer &quot; . s:term_num
         16         catch
         17             &quot; bufferが閉じられていた
         18             call s:start_term()
         19         endtry
         20     endif
         21 endfunction
         22 
         23 </code></pre>
<h3
id="vim_confignvimautoloadtermdbg.vim">vim_config/nvim/autoload/termdbg.vim
<a id="SS_23_1_11"></a></h3>
<pre class="vim"><code>          1 &quot;:Run [args]    [args] または以前の引数でプログラムを実行する
          2 &quot;:Arguments     {args}  次の :Run のために引数を設定する
          3 &quot;:Break         カーソル位置にブレークポイントを設定する。
          4 &quot;:Break         {position}
          5 &quot;               指定位置にブレークポイントを設定する。
          6 &quot;:Clear         カーソル位置のブレークポイントを削除する
          7 &quot;:Step          gdb の &quot;step&quot; コマンドを実行する
          8 &quot;:Over          gdb の &quot;next&quot; コマンドを実行する
          9 &quot;               (:Next だと Vim のコマンドとかぶるので)
         10 &quot;:Finish        gdb の &quot;finish&quot; コマンドを実行する
         11 &quot;:Continue      gdb の &quot;continue&quot; コマンドを実行する
         12 &quot;:Stop          プログラムを中断する
         13 
         14 
         15 &quot; todo
         16 &quot;  b    をトグルにしたい
         17 &quot;
         18 function! termdbg#key_map() abort
         19     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-run) :Run&lt;CR&gt;
         20     nmap &lt;buffer&gt; R &lt;Plug&gt;(gdb-run)
         21 
         22     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-break) :Break&lt;CR&gt;
         23     nmap &lt;buffer&gt; B &lt;Plug&gt;(gdb-break)
         24 
         25     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-continue) :Continue&lt;CR&gt;
         26     nmap &lt;buffer&gt; C &lt;Plug&gt;(gdb-continue)
         27 
         28     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-break-clear) :Clear&lt;CR&gt;
         29     nmap &lt;buffer&gt; D &lt;Plug&gt;(gdb-break-clear)
         30 
         31     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-finish) :Finish&lt;CR&gt;
         32     nmap &lt;buffer&gt; F &lt;Plug&gt;(gdb-finish)
         33 
         34     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-next) :Over&lt;CR&gt;
         35     nmap &lt;buffer&gt; N &lt;Plug&gt;(gdb-next)
         36 
         37     nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;Plug&gt;(gdb-step) :Step&lt;CR&gt;
         38     nmap &lt;buffer&gt; S &lt;Plug&gt;(gdb-step)
         39 
         40 endfunction
         41 
         42 function! termdbg#start(program)
         43     silent execute &#39;:packadd termdebug&#39;
         44     silent execute &#39;:Termdebug &#39; . a:program
         45 endfunction
         46 </code></pre>
<h3 id="vim_confignvimcheatsheet.html">vim_config/nvim/cheatsheet.md
<a id="SS_23_1_12"></a></h3>
<pre class="vim"><code>          1 # My CheatSheet
          2 
          3 ## dein
          4 * https://github.com/Shougo/dein.vimからdeinとダウンロードしてセットアップ
          5     * curl ... &gt; installer.sh   # インストーラのダウンロード
          6     * sh ./installer.sh ~/$XDG_CONFIG_HOME/nvim_pkg/dein    # deinのダウンロード
          7 * :call dein#install()          # 他のパッケージインストール
          8 
          9 ## terminal(windows app)操作
         10 * Alt-space -&gt; x    最大化
         11 * Alt-space -&gt; r    元のサイズに戻す
         12 * Alt-space -&gt; n    最小化
         13 * Alt-space -&gt; m    ウィンドウの移動
         14 * Alt-space -&gt; s    ウィンドウのサイズ変更
         15 * window-m          全アプリの最小化
         16 * window-d          デスクトップの表示/全アプリの表示
         17 
         18 
         19 ## 正規表現
         20 [正規表現アトム](https://vim-jp.org/vimdoc-ja/pattern.html#pattern-atoms)
         21 
         22 \_.         改行含むすべての文字にマッチ
         23 
         24 ## NextFile 
         25 &lt;M-q&gt;           現在のファイル名を@qに代入
         26 &lt;Num&gt;&lt;C-q&gt;      現在のファイル名を&lt;Num&gt;文字消して、&quot;その文字列.\*&quot;とマッチしたファイルを開く
         27                 Numが省略された場合&lt;Num&gt;は0として処理する
         28                 Numが0であった場合、&quot;サフィックスを削除した文字列.\*&quot;とマッチしたファイルを開く
         29 
         30 ## MultiHl
         31 :MultiHlAdd     現在のカーソルの下のwordを&#39;\&lt;word\&gt;にして、@/に追加。
         32 :MultiHlAddR    現在のカーソルの下のwordをそのまま@/に追加。
         33 :MultiHlAddI    &lt;WORD&gt; WORDをそのまま@/に追加。
         34 :MultiHlClear   @/に&quot;&quot;を入力。
         35 
         36 ## git diff
         37 :GitDiff        : gitリポジトリのdiffリスト
         38 :GitDiffResize  : 画面をリサイズして、gitリポジトリのdiffリスト
         39 :GitDiffOff     : \*.newをbwipeoutしてdiffモード終了
         40 {Visual}a       : git add from &#39;&lt; to &#39;&gt;
         41 c&quot;              : git commit -m &quot;までコマンドラインに入力
         42 d               : 水平分割diff表示
         43 vd              : 垂直分割diff表示
         44 h               : HEADとの水平分割diff表示
         45 vh              : HEADとの垂直分割diff表示
         46 &lt;C-Q&gt;           : git diffモード終了
         47 {Visual}L       : cygstart/wslstart from &#39;&lt; to &#39;&gt;
         48 {Visual}r       : git reset from &#39;&lt; to &#39;&gt;
         49 s               : diffリストの再ロード
         50 
         51 ## grep
         52 :Grep [suffix ...]          : grep -R --include=\*.suffix ... @/
         53 :GrepP pattern [suffix ...] : grep -R --include=\*.suffix ... pattern
         54 
         55 suffixを省略した場合、cpp c h rb py vimがsuffixになる。
         56 全体をgrepしたい場合は - を指定する。
         57 :Grep、:Grepp実行後はquick fixウインドが開いて結果を見ることができる。
         58 &lt;C-g&gt;&lt;C-n&gt;で次へ移動、&lt;C-g&gt;&lt;C-p&gt;で前に移動できる。
         59 
         60 :set ignorecaseが行われていた場合には、grepのオプションに-iが追加される。
         61 :Grepが行われた場合に実際に起動されるgrepコマンドは、:grepである。
         62 :grepが行われた場合に実際に起動されるgrepコマンドは、:set grepprg=...で設定されている。
         63 
         64 
         65 ## :terminalの使い方
         66 * &lt;C-q&gt;                                     vimモード
         67 * a, i等の通常のinsertモード移行で          terminalモード
         68 
         69 でソースコード全体からの補完ができるらしいので調べる。
         70 
         71 ## termdebug
         72 * nvim-gdbはやめて、こちらにした。
         73 
         74 :DbgStart &lt;prog&gt;    termdebugをロードして、gdb &lt;prog&gt;
         75 :DbgKey             下記mapをバッファローカルでmap
         76 
         77 オリジナルコマンド  map
         78 :Run [args]         R   [args] または以前の引数でプログラムを実行する
         79 :Arguments              {args}  次の :Run のために引数を設定する
         80 :Break              B   カーソル位置にブレークポイントを設定する。
         81 :Clear              D   カーソル位置のブレークポイントを削除する
         82 :Step               S   gdb の &quot;step&quot; コマンドを実行する
         83 :Over               N   gdb の &quot;next&quot; コマンドを実行する
         84 :Finish             F   gdb の &quot;finish&quot; コマンドを実行する
         85 :Continue           C   gdb の &quot;continue&quot; コマンドを実行する
         86 :Stop                   プログラムを中断する
         87 
         88 ## Session
         89 * gitプロジェクトの全ディレクトリを使用してpathやtabsをセットする。
         90 * mksessionでgitリポジトリのトップにSession.vimを作る。
         91 
         92 :ProjectBegin       Session.vimをsourceして、path、tabsをセットする。
         93 :ProjectDir         現在のセッションが使用しているgitリポジトリの
         94                     トップディレクトリを表示。
         95 :ProjectMake        Session.vimを作る。
         96 :ProjectNew         現在のセッションをカレントディレクトリを含む
         97                     gitリポジトリにする。
         98   
         99 ## PathSet
        100 * pathにカレントディレクトリ以下のディレクトリをセットする。
        101 
        102 :PathAdd            pathにディレクトリを追加する
        103 :PathClear          pathを./のみにする
        104 :PathSet            PathClearしてからPathAddする
        105 
        106 ## Buff
        107 軽いのが取り柄のバッファエクスプローラ。
        108 
        109 :Buff               :buffersの情報からBuffers問う名前のバッファを開く。
        110 o                   プロンプトの下のバッファを開く。
        111 d                   プロンプトの下のバッファをスワイプアウトする。
        112 D                   プロンプトの下のバッファを強制スワイプアウトする。
        113 
        114 ## チップス
        115 * 現在のrcフィルの確認
        116         :echo $MYGVIMRC
        117 
        118 * マップの定義位置
        119         :verbose map &lt;C-Q&gt;
        120 
        121 * vimコマンドの出力の取り込み
        122         :let @a=execute(&#39;scriptnames&#39;)  &quot;scriptnamesの出力をレジスタaに入れる。
        123 
        124 * globalで行に移動し、そこでコマンド実行
        125         :global/^&lt;/normal AHEHE     &quot;先頭が&quot;&lt;&quot;である行の末尾に&quot;HEHE&quot;を追加する。
        126 
        127 * コマンドの繰り返し数の注意
        128         :map &lt;C-A&gt;  3w
        129   とした場合、 
        130         2&lt;C-A&gt;
        131   は
        132         23w
        133   となるため、このコマンドは23ワードの移動になるが、それはおそらく意図したものではない。
        134   &lt;Num&gt;&lt;C-A&gt;を&lt;C-A&gt;の&lt;Num&gt;回の繰り返しにしたい場合、式レジスタを使い以下のように書く。
        135         :map &lt;C-A&gt;  @=&#39;3w&#39;&lt;CR&gt;
        136 
        137 ### todo
        138 * 言語サポート
        139     * gdbのpでSTLコンテナのきれいな表示がしたい。
        140     * rtag.vim
        141     * Tagbar: a class outline viewer for Vim
        142 
        143 * そのうち調べる
        144     * コメントフォーマット。&#39;formatoptions&#39; の設定
        145     * &#39;showcmd&#39;、&#39;backspace&#39;
        146     * 関数escape(@&quot;, &#39;\\/&#39;)
        147     * packadd! matchit  「と」のマッチング
        148     * colorscheme evening
        149     * :mksession、:wviminfo、:rviminfo
        150     * terminal 端末通信 call/drop</code></pre>
<h3 id="vim_confignvimftpluginc.vim">vim_config/nvim/ftplugin/c.vim
<a id="SS_23_1_13"></a></h3>
<pre class="vim"><code>          1 setlocal tabstop=4
          2 setlocal shiftwidth=4
          3 setlocal expandtab
          4 setlocal tags=tags,./tags
          5 
          6 &quot; paren and etc matching
          7 set matchpairs+=&lt;:&gt;
          8 hi MatchParen ctermbg=0 cterm=bold,reverse
          9 </code></pre>
<h3
id="vim_confignvimftpluginpython.vim">vim_config/nvim/ftplugin/python.vim
<a id="SS_23_1_14"></a></h3>
<pre class="vim"><code>          1 setlocal tabstop=4
          2 setlocal shiftwidth=4
          3 setlocal expandtab
          4 setlocal tags=tags,./tags
          5 </code></pre>
<h3
id="vim_confignvimftpluginruby.vim">vim_config/nvim/ftplugin/ruby.vim
<a id="SS_23_1_15"></a></h3>
<pre class="vim"><code>          1 setlocal tabstop=2
          2 setlocal shiftwidth=2
          3 setlocal expandtab
          4 setlocal tags=tags,./tags</code></pre>
<h3 id="vim_confignviminit.vim">vim_config/nvim/init.vim
<a id="SS_23_1_16"></a></h3>
<pre class="vim"><code>          1 if exists(&#39;s:loaded&#39;)
          2     finish
          3 else
          4     let s:loaded = 1
          5 endif
          6 
          7 function! s:get_os()
          8     if isdirectory(&#39;c:/&#39;)
          9         if isdirectory(&#39;/usr&#39;)
         10             return &#39;cygwin&#39;
         11         else
         12             return &#39;windows&#39;
         13         endif
         14     endif
         15 
         16     let old=&amp;ignorecase
         17     let uname=system(&#39;uname&#39;)
         18 
         19     let &amp;ignorecase = 1
         20 
         21     if uname =~ &quot;.*linux.*&quot;
         22         let ret = &#39;linux&#39;
         23     else
         24         let ret = &#39;unknown&#39;
         25     endif
         26 
         27     let &amp;ignorecase = old
         28     return ret
         29 endfunction
         30 
         31 let g:os=s:get_os()
         32 
         33 let s:dir=expand(&#39;&lt;sfile&gt;:p:h&#39;)
         34 
         35 execute &#39;source &#39; . s:dir . &#39;/&#39; . &#39;org.vim&#39;
         36 execute &#39;source &#39; . s:dir . &#39;/&#39; . &#39;package.vim&#39;
         37 
         38 if !has(&#39;nvim&#39;)
         39     execute &#39;set runtimepath+=&#39; . s:dir
         40     if g:os == &#39;linux&#39;
         41         set runtimepath+=/usr/share/vim/
         42     elseif g:os == &#39;cygwin&#39;
         43         set runtimepath+=/usr/share/vim/vim82
         44     elseif g:os == &#39;windows&#39;
         45 
         46     endif
         47 endif</code></pre>
<h3 id="vim_confignvimorg.vim">vim_config/nvim/org.vim
<a id="SS_23_1_17"></a></h3>
<pre class="vim"><code>          1 &quot; misc
          2 set hidden
          3 set ruler
          4 set hlsearch
          5 set nowrapscan
          6 set laststatus=2
          7 set noequalalways
          8 set backspace=indent,eol,start
          9 set incsearch
         10 set background=dark
         11 set statusline=%&lt;%f[%n]%h%m%r%=%l,%c%V\ %P
         12 set fileformats=unix,dos,mac
         13 set printoptions=number:y
         14 
         15 set virtualedit=block
         16 
         17 &quot; Makefileやbashスクリプトでgfを効かせるため
         18 set isfname-=:
         19 set isfname-=,
         20 set isfname-=\=
         21 
         22 &quot; encoding
         23 &quot;set encoding=utf-8
         24 set fileencoding=utf-8
         25 set fileencodings=iso-2022-jp,euc-jp,sjis,utf-8
         26 
         27 &quot;
         28 syntax on
         29 
         30 &quot; to use quick fix
         31 &quot;make setting
         32 set makeprg=/usr/bin/make
         33 set errorformat+=In\ file\ included\ from\ %f:%l:%m     &quot;gcc
         34 set errorformat+=%f:%l:%m                               &quot;gcc
         35 set errorformat+=%f\|%l\|%m                             &quot;grep from vim
         36 set errorformat+=%t\\,%f\\,%l\\,%c\\,%m
         37 
         38 &quot;grep setting
         39 set grepprg=/usr/bin/grep\ -nH
         40 
         41 let &amp;makeef = expand(&#39;&lt;sfile&gt;:p:h&#39;) . &#39;/&#39; . getpid()
         42 
         43 &quot; default text
         44 set tabstop=4
         45 set shiftwidth=4
         46 set expandtab
         47 set nowrap
         48 set cindent
         49 &quot;set iskeyword+=-</code></pre>
<h3 id="vim_confignvimpackage.vim">vim_config/nvim/package.vim
<a id="SS_23_1_18"></a></h3>
<pre class="vim"><code>          1 if &amp;compatible
          2     set nocompatible &quot; Be iMproved
          3 endif
          4 
          5 &quot; このファイルのあるディレクトリ/../nvim_pkg/deinにパッケージを入れる。
          6 let g:pkg_dir=simplify(expand(&#39;&lt;sfile&gt;:p:h&#39;) . &#39;/../nvim_pkg/dein&#39;)
          7 
          8 &quot; Required:
          9 &quot; Add the dein installation directory into runtimepath
         10 execute &#39;set runtimepath+=&#39; . g:pkg_dir . &#39;/repos/github.com/Shougo/dein.vim&#39;
         11 execute &#39;set runtimepath+=&#39; . g:pkg_dir . &#39;/repos/github.com/&#39;
         12 
         13 &quot; Required:
         14 call dein#begin(g:pkg_dir)
         15 
         16 &quot; Let dein manage dein
         17 &quot; Required:
         18 call dein#add(g:pkg_dir . &#39;/repos/github.com/Shougo/dein.vim&#39;)
         19 if !has(&#39;nvim&#39;)
         20     call dein#add(&#39;roxma/nvim-yarp&#39;)
         21     call dein#add(&#39;roxma/vim-hug-neovim-rpc&#39;)
         22 endif
         23 
         24 call dein#add(&#39;Shougo/deoplete.nvim&#39;)
         25 call dein#add(&#39;zchee/deoplete-clang&#39;)
         26 
         27 &quot; Add or remove your plugins here like this:
         28 call dein#add(&#39;Shougo/neosnippet.vim&#39;)
         29 call dein#add(&#39;Shougo/neosnippet-snippets&#39;)
         30 call dein#add(&#39;Shougo/neoinclude.vim&#39;)
         31 
         32 call dein#add(&#39;tpope/vim-fugitive&#39;)
         33 call dein#add(&#39;reireias/vim-cheatsheet&#39;)
         34 call dein#add(&#39;mattn/vim-maketable&#39;)
         35 call dein#add(&#39;aklt/plantuml-syntax&#39;)
         36 
         37 &quot; Required:
         38 call dein#end()
         39 
         40 &quot; Required:
         41 filetype plugin indent on
         42 syntax enable
         43 
         44 let g:cheatsheet#cheat_file = expand(&#39;&lt;sfile&gt;:p:h&#39;) . &#39;/cheatsheet.md&#39;
         45 let g:table_mode_corner = &#39;|&#39;
         46 
         47 if g:os == &#39;windows&#39;
         48     let g:python_host_prog  = &#39;C:\cygwin64\bin\python2.7.exe&#39;
         49     let g:python3_host_prog  = &#39;C:\cygwin64\bin\python3.8.exe&#39;
         50 elseif g:os == &#39;cygwin&#39;
         51 
         52 elseif g:os == &#39;linux&#39;
         53     let g:ruby_host_prog = &#39;/usr/local/bin/neovim-ruby-host&#39;
         54     let g:python_host_prog  = &#39;/usr/bin/python2&#39;
         55     let g:python3_host_prog  = &#39;/usr/bin/python3&#39;
         56 else
         57     echo &#39;unkown os&#39;
         58 endif
         59 
         60 &quot; deoplete
         61 if has(&#39;python3&#39;)
         62     let g:deoplete#enable_at_startup = 1
         63     let g:deoplete#sources#clang#libclang_path = &#39;/usr/lib/llvm-10/lib/libclang.so&#39;
         64     let g:deoplete#sources#clang#clang_header = &#39;/usr/lib/llvm-10/lib/clang/&#39;
         65     let g:deoplete#sources#clang#clang_complete_database = &#39;./&#39;
         66     &quot;g:deoplete#sources#clang#flags See this section    No
         67     &quot;g:deoplete#sources#clang#sort_algo &#39;&#39;  No
         68     &quot;g:deoplete#sources#clang#include_default_arguments False   No
         69     &quot;g:deoplete#sources#clang#filter_availability_kinds
         70 endif</code></pre>
<h3
id="vim_confignvimpluginbuffers.vim">vim_config/nvim/plugin/buffers.vim
<a id="SS_23_1_19"></a></h3>
<pre class="vim"><code>          1 command! -nargs=0 Buff     call buffers#begin()</code></pre>
<h3 id="vim_confignvimplugincd.vim">vim_config/nvim/plugin/cd.vim
<a id="SS_23_1_20"></a></h3>
<pre class="vim"><code>          1 command! -nargs=0 Cd    call cd#change_dir()
          2 nmap &lt;C-c&gt;       :Cd&lt;CR&gt;
          3 
          4 nmap &lt;S-c&gt;       :cd ..&lt;CR&gt;:pwd&lt;CR&gt;
          5 </code></pre>
<h3
id="vim_confignvimpluginclear_undo.vim">vim_config/nvim/plugin/clear_undo.vim
<a id="SS_23_1_21"></a></h3>
<pre class="vim"><code>          1 function! ClearUndo()
          2     let old_undolevels = &amp;undolevels
          3     set undolevels=-1
          4     exe &quot;normal a \&lt;BS&gt;\&lt;Esc&gt;&quot;
          5     let &amp;undolevels = old_undolevels
          6     unlet old_undolevels
          7 endfunction
          8 
          9 command! -nargs=0 ClearUndo call ClearUndo()
         10 
         11 </code></pre>
<h3
id="vim_confignvimpluginctags_ext.vim">vim_config/nvim/plugin/ctags_ext.vim
<a id="SS_23_1_22"></a></h3>
<pre class="vim"><code>          1 function! CTags(...)
          2     if a:0 == 0
          3         let l:dir=&quot;.&quot;
          4     else
          5         let l:dir=a:1
          6     end
          7     silent execute &#39;!ctags -R --extras=+q &#39; . l:dir
          8 endfunction
          9 
         10 command!  -nargs=? -complete=dir Ctags call CTags(&lt;f-args&gt;)
         11 </code></pre>
<h3
id="vim_confignvimplugindev_env.vim">vim_config/nvim/plugin/dev_env.vim
<a id="SS_23_1_23"></a></h3>
<pre class="vim"><code>          1 function! dev_env#setup()
          2     execute &quot;:only&quot;
          3     execute &quot;:set lines=62&quot;
          4     execute &quot;:set columns=201&quot;
          5     
          6     &quot;少し待たないとカラムが増える前にvsplitしてしまう
          7     execute &quot;:sleep 300m&quot;   
          8     execute &quot;:vsplit&quot;
          9     execute &quot;:split&quot;
         10     execute &quot;normal \&lt;C-W&gt;l&quot;
         11     execute &quot;:split&quot;
         12     execute &quot;normal \&lt;C-W&gt;j&quot;
         13     execute &quot;:Term&quot;
         14     execute &quot;normal \&lt;C-W&gt;h&quot;
         15     execute &quot;normal \&lt;C-W&gt;k&quot;
         16     set textwidth=100
         17 endfunction
         18 
         19 command! -nargs=0 DevEnv     call dev_env#setup()</code></pre>
<h3
id="vim_confignvimplugingit_diff.vim">vim_config/nvim/plugin/git_diff.vim
<a id="SS_23_1_24"></a></h3>
<pre class="vim"><code>          1 command! -nargs=0 GitDiff       call git_diff#begin(0)
          2 command! -nargs=0 GitDiffResize call git_diff#begin(1)
          3 command! -nargs=0 GitDiffOff    call git_diff#show_diff_off()</code></pre>
<h3
id="vim_confignvimplugingit_session.vim">vim_config/nvim/plugin/git_session.vim
<a id="SS_23_1_25"></a></h3>
<pre class="vim"><code>          1 command! -nargs=0 SessionBegin  call git_session#begin()
          2 command! -nargs=0 SessionDir    call git_session#dir()
          3 command! -nargs=0 SessionMake   call git_session#make()
          4 command! -nargs=0 SessionNew    call git_session#new_session()
          5 command! -nargs=0 SessionPath   call git_session#set_path()</code></pre>
<h3 id="vim_confignvimplugingrep.vim">vim_config/nvim/plugin/grep.vim
<a id="SS_23_1_26"></a></h3>
<pre class="vim"><code>          1 command!  -nargs=? Grep call grep#grep(&lt;f-args&gt;)
          2 command!  -nargs=+ Grepp call grep#grepp(&lt;f-args&gt;)
          3 </code></pre>
<h3
id="vim_confignvimpluginkeybind.vim">vim_config/nvim/plugin/keybind.vim
<a id="SS_23_1_27"></a></h3>
<pre class="vim"><code>          1 &quot;Set up key binding
          2 
          3 &quot; window control
          4 nmap ;   4&lt;C-W&gt;+
          5 nmap -   4&lt;C-W&gt;-
          6 noremap L   &lt;C-L&gt;
          7 nmap &gt;   &lt;C-W&gt;&gt;
          8 nmap &lt;   &lt;C-W&gt;&lt;
          9 nmap &lt;C-k&gt;   &lt;C-W&gt;k
         10 nmap &lt;C-j&gt;   &lt;C-W&gt;j
         11 nmap &lt;C-h&gt;   &lt;C-W&gt;h
         12 nmap &lt;C-l&gt;   &lt;C-W&gt;l
         13 nmap &lt;C-p&gt;   &lt;C-o&gt;
         14 
         15 &quot;next/prev file
         16 nmap &lt;C-n&gt;   :bn&lt;CR&gt;
         17 nmap &lt;C-p&gt;   :bp&lt;CR&gt;
         18 
         19 &quot;next/prev quick fix
         20 nmap &lt;C-g&gt;&lt;C-n&gt;  :cn&lt;CR&gt;
         21 nmap &lt;C-g&gt;&lt;C-p&gt;  :cp&lt;CR&gt;
         22 </code></pre>
<h3
id="vim_confignvimpluginmulti_hl.vim">vim_config/nvim/plugin/multi_hl.vim
<a id="SS_23_1_28"></a></h3>
<pre class="vim"><code>          1 command! -nargs=0 MultiHlAdd    call multi_hl#add_word(expand(&#39;&lt;cword&gt;&#39;), 0)
          2 command! -nargs=0 MultiHlAddR   call multi_hl#add_word(expand(&#39;&lt;cword&gt;&#39;), 1)
          3 command! -nargs=1 MultiHlAddI      call multi_hl#add_word(&lt;q-args&gt;, 1)
          4 command! -nargs=0 MultiHlClear     call multi_hl#clear()</code></pre>
<h3
id="vim_confignvimpluginnext_file.vim">vim_config/nvim/plugin/next_file.vim
<a id="SS_23_1_29"></a></h3>
<pre class="vim"><code>          1 if g:os == &#39;linux&#39;
          2     nmap &lt;M-q&gt;      :let @q=expand(&#39;%&#39;)&lt;CR&gt;
          3 else
          4     nmap &lt;S-C-q&gt;    :let @q=expand(&#39;%&#39;)&lt;CR&gt;
          5 endif
          6 
          7 command!  -count NF call next_file#change(&lt;count&gt;)
          8 nmap &lt;C-q&gt;      :NF&lt;CR&gt;</code></pre>
<h3
id="vim_confignvimpluginpath_set.vim">vim_config/nvim/plugin/path_set.vim
<a id="SS_23_1_30"></a></h3>
<pre class="vim"><code>          1 function! path_set#add()
          2     let temp = system(&#39;find $(pwd) -type d&#39;)
          3     let dirs = split(temp, &quot;\n&quot;)
          4     let paths = &amp;path . &#39;,&#39; . join(dirs, &#39;,&#39;)
          5     let &amp;path = paths
          6 endfunction
          7 
          8 function! path_set#clear()
          9     let &amp;path = &#39;./&#39;
         10 endfunction
         11 
         12 function! path_set#set()
         13     call path_set#clear()
         14     call path_set#add()
         15 endfunction
         16 
         17 command! -nargs=0 PathAdd  call path_set#add()
         18 command! -nargs=0 PathClear  call path_set#clear()
         19 command! -nargs=0 PathSet  call path_set#set()</code></pre>
<h3
id="vim_confignvimpluginscratch.vim">vim_config/nvim/plugin/scratch.vim
<a id="SS_23_1_31"></a></h3>
<pre class="vim"><code>          1 let s:scratch_buffer = &#39;Scratch&#39;
          2 
          3 function! scratch#begin()
          4     let winid = bufwinid(s:scratch_buffer)
          5     if winid isnot# -1
          6         call win_gotoid(winid)
          7     else
          8         execute &#39;new&#39; s:scratch_buffer
          9         set buftype=nofile
         10         set noswapfile
         11     endif
         12 endfunction
         13 
         14 command! -nargs=0 Scratch     call scratch#begin()
         15 </code></pre>
<h3 id="vim_confignvimpluginterm.vim">vim_config/nvim/plugin/term.vim
<a id="SS_23_1_32"></a></h3>
<pre class="vim"><code>          1 if g:os == &#39;windows&#39;
          2     set shell=C:/cygwin64/bin/bash.exe
          3 else
          4     set shell=/bin/bash
          5 endif
          6 
          7 set shellpipe=\|&amp;\ tee
          8 set shellcmdflag=-c
          9 set shellslash
         10 
         11 tnoremap &lt;silent&gt; &lt;C-q&gt; &lt;C-\&gt;&lt;C-n&gt;
         12 command! -nargs=0 Term     call term#start()
         13 </code></pre>
<h3
id="vim_confignvimplugintermdbg.vim">vim_config/nvim/plugin/termdbg.vim
<a id="SS_23_1_33"></a></h3>
<pre class="vim"><code>          1 command! -nargs=1 -complete=file DbgStart   call termdbg#start(&lt;q-args&gt;)
          2 command! -nargs=0 DbgKey     call termdbg#key_map()
          3 
          4 </code></pre>
<h3
id="vim_confignvimrpluginpython3next_file.py">vim_config/nvim/rplugin/python3/next_file.py
<a id="SS_23_1_34"></a></h3>
<pre class="vim"><code>          1 import pynvim
          2 import glob
          3 
          4 @pynvim.plugin
          5 class NextFile(object):
          6 
          7     def __init__(self, nvim):
          8         self.nvim = nvim
          9         self.delete_len = 0
         10         self.latest_file = None
         11         self.file_list = []
         12 
         13     @pynvim.command(&#39;NextFile&#39;, nargs=&#39;?&#39;, range=&#39;&#39;, sync = True)
         14     def next_file(self, args, range):
         15         if len(args) != 0 :
         16             try :
         17                 self.delete_len = int(args[0])
         18             except:
         19                 self.delete_len = 0
         20 
         21         curr_filename = self.nvim.eval(&quot;expand(&#39;%&#39;)&quot;)
         22         next_filename = self._next_filename(curr_filename)
         23         self.nvim.command(f&quot;edit {next_filename}&quot;)
         24 
         25     def _next_filename(self, filename) :
         26 
         27         if self.delete_len == 0 :
         28             body, *_ = filename.split(&quot;.&quot;)
         29         else:
         30             body = filename[0 : len(filename) - self.delete_len]
         31             self.latest_file = None
         32 
         33         if self.latest_file != filename :
         34             self.file_list = glob.glob(body + &quot;*&quot;)
         35 
         36         for i, f in enumerate(self.file_list) :
         37             if filename == f :
         38                 self.latest_file = self.file_list[(i + 1) % len(self.file_list)]
         39 
         40                 return self.latest_file
         41 </code></pre>
<h3 id="vim_configvim.sh">vim_config/vim.sh <a id="SS_23_1_35"></a></h3>
<pre class="vim"><code>          1 function os_name()
          2 {
          3     local -r uname=$(uname)
          4 
          5     if [[ $uname =~ .*[lL]inux.* ]]; then
          6         echo linux
          7     elif [[ $uname =~ .*CYGWIN_NT.* ]]; then
          8         echo cygwin
          9     else
         10         echo unknown
         11     fi
         12 }
         13 
         14 readonly OS=$(os_name)
         15 
         16 if [[ $OS == &#39;cygwin&#39; ]]; then
         17     function gvim()
         18     {
         19         (
         20             gvim_prog=$(which gvim)
         21             export XDG_CONFIG_HOME=$(cygpath -w $XDG_CONFIG_HOME)
         22             $gvim_prog &quot;$@&quot;
         23         )
         24     }
         25 
         26     function _nvim_qt()
         27     {
         28         (
         29             export XDG_CONFIG_HOME=$(cygpath -w $XDG_CONFIG_HOME)
         30             nvim-qt &quot;$@&quot;
         31         )
         32     }
         33 
         34     function _nvim()
         35     {
         36         (
         37             export XDG_CONFIG_HOME=$(cygpath -w $XDG_CONFIG_HOME)
         38             nvim &quot;$@&quot;
         39         )
         40     }
         41     alias nvim-qt=_nvim_qt
         42     alias nvim=_nvim
         43 
         44 elif [[ $OS == &#39;linux&#39; ]]; then
         45     function tnvim()
         46     {
         47         /mnt/c/Users/ichiro.inoue/AppData/Local/wsltty/bin/mintty.exe \
         48             --WSL= \
         49             --configdir=&#39;C:\Users\ichiro.inoue\AppData\Roaming\wsltty&#39; \
         50             nvim &quot;$@&quot;
         51     }
         52 
         53     alias tn=tnvim
         54 fi</code></pre>
<h3 id="vim_configvimgvimrc">vim_config/vim/gvimrc
<a id="SS_23_1_36"></a></h3>
<pre class="vim"><code>          1 &quot;このファイルは$HOME/.gvimrcにコピーするかシンボリックリンクを張る。
          2 
          3 set guifont=ＭＳ_ゴシック:h10:cSHIFTJIS
          4 
          5 let g:bg_coler=&#39;black&#39;
          6 highlight Normal guibg=&#39;black&#39; guifg=&#39;white&#39;
          7 </code></pre>
<h3 id="vim_configvimvimrc">vim_config/vim/vimrc
<a id="SS_23_1_37"></a></h3>
<pre class="vim"><code>          1 &quot;このファイルは$HOME/.vimrcにコピーするかシンボリックリンクを張る。
          2 
          3 source $XDG_CONFIG_HOME/nvim/init.vim</code></pre>
<h2 id="c">C++ <a id="SS_23_2"></a></h2>
<h3
id="exampledepsappsrcdeps_opts.cpp">example/deps/app/src/deps_opts.cpp
<a id="SS_23_2_1"></a></h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;getopt.h&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="bu">std::</span>string DepsOpts<span class="op">::</span>Help<span class="op">()</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">{</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;deps CMD [option] [DIRS] ...&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   CMD:&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p    : generate package to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         s    : generate srcs with incs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p2s  : generate package and srcs pairs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p2p  : generate packages&#39; dependencies to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         a    : generate structure to OUT from p2p output.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         a2pu : generate plant uml package to OUT from p2p output.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         cyc  : exit !0 if found cyclic dependencies.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         help : show help message.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         h    : same as help(-h, --help).&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   opptions:&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --in IN     : use IN to execute CMD.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --out OUT   : CMD outputs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --recursive : search dir as package from DIRS or IN contents.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -R          : same as --recursive.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --src_as_pkg: every src is as a package.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -s          : same as --src_as_pkg.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --log LOG   : loggin to LOG(if LOG is </span><span class="sc">\&quot;</span><span class="st">-</span><span class="sc">\&quot;</span><span class="st">, using STDOUT).&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --exclude PTN : exclude dirs which matchs to PTN(JS regex).&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -e PTN      : same as --exclude.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   DIRS: use DIRS to execute CMD.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   IN  : 1st line in this file must be&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;             #dir2srcs for pkg-srcs file&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         or&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;             #dir for pkg file.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> DepsOpts<span class="op">::</span>Cmd DepsOpts<span class="op">::</span>parse_command<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> <span class="at">const</span><span class="op">*</span> argv<span class="op">)</span></span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="op">{</span></span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">if</span> <span class="op">(</span>argc <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>         <span class="cf">return</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span></span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="op">}</span></span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="kw">auto</span> command <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]};</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> </span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg<span class="op">;</span></span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="op">}</span></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;s&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenSrc<span class="op">;</span></span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="op">}</span></span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p2s&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">;</span></span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="op">}</span></span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p2p&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">;</span></span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="op">}</span></span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;a&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenArch<span class="op">;</span></span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="op">}</span></span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;a2pu&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenPlantUml<span class="op">;</span></span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">}</span></span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;cyc&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         <span class="cf">return</span> Cmd<span class="op">::</span>GenCyclic<span class="op">;</span></span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="op">}</span></span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;h&quot;</span> <span class="op">||</span> command <span class="op">==</span> <span class="st">&quot;help&quot;</span> <span class="op">||</span> command <span class="op">==</span> <span class="st">&quot;-h&quot;</span> <span class="op">||</span> command <span class="op">==</span> <span class="st">&quot;--help&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         <span class="cf">return</span> Cmd<span class="op">::</span>Help<span class="op">;</span></span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     <span class="op">}</span></span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="cf">return</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span></span>
<span id="cb38-80"><a href="#cb38-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">}</span></span>
<span id="cb38-81"><a href="#cb38-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> </span>
<span id="cb38-82"><a href="#cb38-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="dt">bool</span> DepsOpts<span class="op">::</span>parse_opt<span class="op">(</span><span class="dt">int</span> opt_char<span class="op">,</span> DepsOpts<span class="op">::</span>DepsOptsData<span class="op">&amp;</span> data<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb38-83"><a href="#cb38-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> <span class="op">{</span></span>
<span id="cb38-84"><a href="#cb38-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="cf">switch</span> <span class="op">(</span>opt_char<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-85"><a href="#cb38-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="cf">case</span> <span class="ch">&#39;i&#39;</span><span class="op">:</span></span>
<span id="cb38-86"><a href="#cb38-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         data<span class="op">.</span>in <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb38-87"><a href="#cb38-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-88"><a href="#cb38-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="cf">case</span> <span class="ch">&#39;e&#39;</span><span class="op">:</span></span>
<span id="cb38-89"><a href="#cb38-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         data<span class="op">.</span>exclude <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb38-90"><a href="#cb38-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-91"><a href="#cb38-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     <span class="cf">case</span> <span class="ch">&#39;o&#39;</span><span class="op">:</span></span>
<span id="cb38-92"><a href="#cb38-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         data<span class="op">.</span>out <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb38-93"><a href="#cb38-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-94"><a href="#cb38-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="cf">case</span> <span class="ch">&#39;l&#39;</span><span class="op">:</span></span>
<span id="cb38-95"><a href="#cb38-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>         data<span class="op">.</span>log <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb38-96"><a href="#cb38-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-97"><a href="#cb38-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="cf">case</span> <span class="ch">&#39;R&#39;</span><span class="op">:</span></span>
<span id="cb38-98"><a href="#cb38-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>         data<span class="op">.</span>recursive <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-99"><a href="#cb38-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-100"><a href="#cb38-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="cf">case</span> <span class="ch">&#39;s&#39;</span><span class="op">:</span></span>
<span id="cb38-101"><a href="#cb38-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>         data<span class="op">.</span>src_as_pkg <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-102"><a href="#cb38-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb38-103"><a href="#cb38-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="cf">case</span> <span class="ch">&#39;h&#39;</span><span class="op">:</span></span>
<span id="cb38-104"><a href="#cb38-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>         data<span class="op">.</span>cmd <span class="op">=</span> Cmd<span class="op">::</span>Help<span class="op">;</span></span>
<span id="cb38-105"><a href="#cb38-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb38-106"><a href="#cb38-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="cf">default</span><span class="op">:</span></span>
<span id="cb38-107"><a href="#cb38-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb38-108"><a href="#cb38-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="op">}</span></span>
<span id="cb38-109"><a href="#cb38-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> <span class="op">}</span></span>
<span id="cb38-110"><a href="#cb38-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb38-111"><a href="#cb38-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> DepsOpts<span class="op">::</span>DepsOptsData DepsOpts<span class="op">::</span>parse<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> <span class="at">const</span><span class="op">*</span> argv<span class="op">)</span></span>
<span id="cb38-112"><a href="#cb38-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="op">{</span></span>
<span id="cb38-113"><a href="#cb38-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     DepsOptsData data<span class="op">{</span>parse_command<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">)};</span></span>
<span id="cb38-114"><a href="#cb38-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb38-115"><a href="#cb38-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="cf">if</span> <span class="op">(</span>data<span class="op">.</span>cmd <span class="op">==</span> Cmd<span class="op">::</span>NotCmd <span class="op">||</span> data<span class="op">.</span>cmd <span class="op">==</span> Cmd<span class="op">::</span>Help<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-116"><a href="#cb38-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb38-117"><a href="#cb38-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="op">}</span></span>
<span id="cb38-118"><a href="#cb38-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb38-119"><a href="#cb38-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     optind <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb38-120"><a href="#cb38-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     <span class="at">static</span> <span class="kw">struct</span> option <span class="at">const</span> opts<span class="op">[]</span></span>
<span id="cb38-121"><a href="#cb38-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>         <span class="op">=</span> <span class="op">{{</span><span class="st">&quot;in&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;i&#39;</span><span class="op">},</span>      <span class="op">{</span><span class="st">&quot;out&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">},</span></span>
<span id="cb38-122"><a href="#cb38-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>            <span class="op">{</span><span class="st">&quot;exclude&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;recursive&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;R&#39;</span><span class="op">},</span></span>
<span id="cb38-123"><a href="#cb38-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>            <span class="op">{</span><span class="st">&quot;src_as_pkg&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;s&#39;</span><span class="op">},</span>    <span class="op">{</span><span class="st">&quot;log&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">},</span></span>
<span id="cb38-124"><a href="#cb38-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>            <span class="op">{</span><span class="st">&quot;help&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;h&#39;</span><span class="op">},</span>          <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">}};</span></span>
<span id="cb38-125"><a href="#cb38-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb38-126"><a href="#cb38-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="cf">for</span> <span class="op">(;;)</span> <span class="op">{</span></span>
<span id="cb38-127"><a href="#cb38-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>         <span class="kw">auto</span> opt_char <span class="op">=</span> getopt_long<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">,</span> <span class="st">&quot;i:o:e:l:Rsh&quot;</span><span class="op">,</span> opts<span class="op">,</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb38-128"><a href="#cb38-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb38-129"><a href="#cb38-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>         <span class="cf">if</span> <span class="op">(!</span>parse_opt<span class="op">(</span>opt_char<span class="op">,</span> data<span class="op">))</span> <span class="op">{</span></span>
<span id="cb38-130"><a href="#cb38-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>             <span class="cf">break</span><span class="op">;</span></span>
<span id="cb38-131"><a href="#cb38-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="op">}</span></span>
<span id="cb38-132"><a href="#cb38-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>     <span class="op">}</span></span>
<span id="cb38-133"><a href="#cb38-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb38-134"><a href="#cb38-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="cf">if</span> <span class="op">(</span>optind <span class="op">&lt;</span> argc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-135"><a href="#cb38-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>         <span class="cf">while</span> <span class="op">(</span>optind <span class="op">&lt;</span> argc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-136"><a href="#cb38-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>             data<span class="op">.</span>dirs<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>argv<span class="op">[</span>optind<span class="op">++]));</span></span>
<span id="cb38-137"><a href="#cb38-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="op">}</span></span>
<span id="cb38-138"><a href="#cb38-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="op">}</span></span>
<span id="cb38-139"><a href="#cb38-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> </span>
<span id="cb38-140"><a href="#cb38-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>     <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb38-141"><a href="#cb38-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="op">}</span></span>
<span id="cb38-142"><a href="#cb38-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> </span>
<span id="cb38-143"><a href="#cb38-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb38-144"><a href="#cb38-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> <span class="bu">std::</span>string to_string_cmd<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd cmd<span class="op">)</span></span>
<span id="cb38-145"><a href="#cb38-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> <span class="op">{</span></span>
<span id="cb38-146"><a href="#cb38-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="cf">switch</span> <span class="op">(</span>cmd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-147"><a href="#cb38-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">:</span></span>
<span id="cb38-148"><a href="#cb38-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>         <span class="cf">return</span> <span class="st">&quot;GenPkg&quot;</span><span class="op">;</span></span>
<span id="cb38-149"><a href="#cb38-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">:</span></span>
<span id="cb38-150"><a href="#cb38-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>         <span class="cf">return</span> <span class="st">&quot;GenSrc&quot;</span><span class="op">;</span></span>
<span id="cb38-151"><a href="#cb38-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">:</span></span>
<span id="cb38-152"><a href="#cb38-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>         <span class="cf">return</span> <span class="st">&quot;GenPkg2Srcs&quot;</span><span class="op">;</span></span>
<span id="cb38-153"><a href="#cb38-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">:</span></span>
<span id="cb38-154"><a href="#cb38-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>         <span class="cf">return</span> <span class="st">&quot;GenPkg2Pkg&quot;</span><span class="op">;</span></span>
<span id="cb38-155"><a href="#cb38-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">:</span></span>
<span id="cb38-156"><a href="#cb38-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>         <span class="cf">return</span> <span class="st">&quot;GenPlantUml&quot;</span><span class="op">;</span></span>
<span id="cb38-157"><a href="#cb38-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenCyclic<span class="op">:</span></span>
<span id="cb38-158"><a href="#cb38-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>         <span class="cf">return</span> <span class="st">&quot;GenCyclic&quot;</span><span class="op">;</span></span>
<span id="cb38-159"><a href="#cb38-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">:</span></span>
<span id="cb38-160"><a href="#cb38-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>         <span class="cf">return</span> <span class="st">&quot;Help&quot;</span><span class="op">;</span></span>
<span id="cb38-161"><a href="#cb38-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">:</span></span>
<span id="cb38-162"><a href="#cb38-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="cf">default</span><span class="op">:</span></span>
<span id="cb38-163"><a href="#cb38-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>         <span class="cf">return</span> <span class="st">&quot;NotCmd&quot;</span><span class="op">;</span></span>
<span id="cb38-164"><a href="#cb38-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>     <span class="op">}</span></span>
<span id="cb38-165"><a href="#cb38-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> <span class="op">}</span></span>
<span id="cb38-166"><a href="#cb38-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb38-167"><a href="#cb38-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> </span>
<span id="cb38-168"><a href="#cb38-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> <span class="bu">std::</span>string ToStringDepsOpts<span class="op">(</span>DepsOpts <span class="at">const</span><span class="op">&amp;</span> deps_opts<span class="op">,</span> <span class="bu">std::</span>string_view indent<span class="op">)</span></span>
<span id="cb38-169"><a href="#cb38-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> <span class="op">{</span></span>
<span id="cb38-170"><a href="#cb38-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     <span class="kw">auto</span>       ss      <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb38-171"><a href="#cb38-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>     <span class="dt">char</span> <span class="at">const</span> cmd<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;cmd       : &quot;</span><span class="op">;</span></span>
<span id="cb38-172"><a href="#cb38-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>     <span class="kw">auto</span> <span class="at">const</span> indent2 <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>cmd<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">+</span> <span class="bu">std::</span>string<span class="op">{</span>indent<span class="op">};</span></span>
<span id="cb38-173"><a href="#cb38-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb38-174"><a href="#cb38-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>boolalpha<span class="op">;</span></span>
<span id="cb38-175"><a href="#cb38-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> </span>
<span id="cb38-176"><a href="#cb38-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> cmd <span class="op">&lt;&lt;</span> to_string_cmd<span class="op">(</span>deps_opts<span class="op">.</span>GetCmd<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-177"><a href="#cb38-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;in        : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>In<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-178"><a href="#cb38-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;out       : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Out<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-179"><a href="#cb38-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;recursive : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>IsRecursive<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-180"><a href="#cb38-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;src_as_pkg: &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>IsSrcPkg<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-181"><a href="#cb38-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;log       : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Log<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-182"><a href="#cb38-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;dirs      : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>deps_opts<span class="op">.</span>Dirs<span class="op">(),</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span> <span class="op">+</span> indent2<span class="op">)</span></span>
<span id="cb38-183"><a href="#cb38-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>        <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-184"><a href="#cb38-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;exclude   : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Exclude<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb38-185"><a href="#cb38-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;parsed    : &quot;</span> <span class="op">&lt;&lt;</span> <span class="op">!!</span>deps_opts<span class="op">;</span></span>
<span id="cb38-186"><a href="#cb38-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span> </span>
<span id="cb38-187"><a href="#cb38-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb38-188"><a href="#cb38-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> <span class="op">}</span></span>
<span id="cb38-189"><a href="#cb38-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> <span class="op">}</span>  <span class="co">// namespace App</span></span></code></pre></div>
<h3 id="exampledepsappsrcdeps_opts.h">example/deps/app/src/deps_opts.h
<a id="SS_23_2_2"></a></h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;ostream&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">class</span> DepsOpts <span class="op">{</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span>     <span class="kw">enum</span> <span class="kw">class</span> Cmd <span class="op">{</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>         GenPkg<span class="op">,</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>         GenSrc<span class="op">,</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>         GenPkg2Srcs<span class="op">,</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>         GenPkg2Pkg<span class="op">,</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>         GenArch<span class="op">,</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>         GenPlantUml<span class="op">,</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>         GenCyclic<span class="op">,</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         Help<span class="op">,</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>         NotCmd<span class="op">,</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="op">};</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="kw">explicit</span> DepsOpts<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> <span class="at">const</span><span class="op">*</span> argv<span class="op">)</span> <span class="op">:</span> <span class="va">data_</span><span class="op">{</span>parse<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="at">static</span> <span class="bu">std::</span>string Help<span class="op">();</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     Cmd                       GetCmd<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>cmd<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span>        In<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>in<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span>        Out<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>out<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span>        Log<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>log<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="dt">bool</span>                      IsRecursive<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>recursive<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="dt">bool</span>                      IsSrcPkg<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>src_as_pkg<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> Dirs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>dirs<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span>        Exclude<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>exclude<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="kw">explicit</span> <span class="kw">operator</span> <span class="dt">bool</span><span class="op">()</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>cmd <span class="op">!=</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="kw">struct</span> DepsOptsData <span class="op">{</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>         DepsOptsData<span class="op">(</span>Cmd cmd_arg<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">:</span> cmd<span class="op">{</span>cmd_arg<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>         Cmd                cmd<span class="op">;</span></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>         <span class="bu">std::</span>string        in<span class="op">{};</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>         <span class="bu">std::</span>string        out<span class="op">{};</span></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>         <span class="bu">std::</span>string        log<span class="op">{};</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         FileUtils<span class="op">::</span><span class="dt">Paths_t</span> dirs<span class="op">{};</span></span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         <span class="bu">std::</span>string        exclude<span class="op">{};</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>         <span class="dt">bool</span>               recursive<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         <span class="dt">bool</span>               src_as_pkg<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">};</span></span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     DepsOptsData <span class="at">const</span> <span class="va">data_</span><span class="op">;</span></span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="at">static</span> DepsOptsData parse<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> <span class="at">const</span><span class="op">*</span> argv<span class="op">);</span></span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="at">static</span> Cmd          parse_command<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> <span class="at">const</span><span class="op">*</span> argv<span class="op">);</span></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="at">static</span> <span class="dt">bool</span>         parse_opt<span class="op">(</span><span class="dt">int</span> opt_char<span class="op">,</span> DepsOptsData<span class="op">&amp;</span> data<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">};</span></span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="bu">std::</span>string          ToStringDepsOpts<span class="op">(</span>DepsOpts <span class="at">const</span><span class="op">&amp;</span> deps_opts<span class="op">,</span> <span class="bu">std::</span>string_view indent <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> DepsOpts <span class="at">const</span><span class="op">&amp;</span> opts<span class="op">)</span></span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">{</span></span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepsOpts<span class="op">(</span>opts<span class="op">);</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">}</span></span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="co">// @@@ sample end</span></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span>  <span class="co">// namespace App</span></span></code></pre></div>
<h3 id="exampledepsappsrcmain.cpp">example/deps/app/src/main.cpp
<a id="SS_23_2_3"></a></h3>
<div class="sourceCode" id="cb40"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;stdexcept&gt;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot;</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">class</span> OStreamSelector <span class="op">{</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">explicit</span> OStreamSelector<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> out<span class="op">)</span> <span class="op">:</span> <span class="va">os_</span><span class="op">{</span>select<span class="op">(</span>out<span class="op">,</span> <span class="va">out_f_</span><span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="bu">std::</span>ostream<span class="op">&amp;</span> OStream<span class="op">()</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">os_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="bu">std::</span>ofstream <span class="va">out_f_</span><span class="op">{};</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="va">os_</span><span class="op">;</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="at">static</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> select<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> out<span class="op">,</span> <span class="bu">std::</span>ofstream<span class="op">&amp;</span> out_f<span class="op">)</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="op">{</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>         <span class="cf">if</span> <span class="op">(</span>out<span class="op">.</span>size<span class="op">())</span> <span class="op">{</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>             out_f<span class="op">.</span>open<span class="op">(</span>out<span class="op">);</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>             <span class="ot">assert</span><span class="op">(</span>out_f<span class="op">);</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>             <span class="cf">return</span> out_f<span class="op">;</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>         <span class="op">}</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>             <span class="cf">return</span> <span class="bu">std::</span>cout<span class="op">;</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="op">}</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="op">};</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">class</span> ScenarioGeneratorNop <span class="op">:</span> <span class="kw">public</span> Dependency<span class="op">::</span>ScenarioGenerator <span class="op">{</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="kw">explicit</span> ScenarioGeneratorNop<span class="op">(</span><span class="dt">bool</span> no_error<span class="op">)</span> <span class="op">:</span> <span class="va">no_error_</span><span class="op">{</span>no_error<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;)</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">no_error_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="dt">bool</span> <span class="va">no_error_</span><span class="op">;</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">};</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>Dependency<span class="op">::</span>ScenarioGenerator<span class="op">&gt;</span> gen_scenario<span class="op">(</span>App<span class="op">::</span>DepsOpts <span class="at">const</span><span class="op">&amp;</span> opt<span class="op">)</span></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="kw">using</span> <span class="kw">namespace</span> Dependency<span class="op">;</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">switch</span> <span class="op">(</span>opt<span class="op">.</span>GetCmd<span class="op">())</span> <span class="op">{</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">:</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg&quot;</span><span class="op">);</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>PkgGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>Dirs<span class="op">(),</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>                                               opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">:</span></span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg&quot;</span><span class="op">);</span></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>SrcsGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>Dirs<span class="op">(),</span></span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>                                                opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">:</span></span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg2Srcs&quot;</span><span class="op">);</span></span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Pkg2SrcsGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>IsSrcPkg<span class="op">(),</span></span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>                                                    opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">:</span></span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg2Pkg&quot;</span><span class="op">);</span></span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Pkg2PkgGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>IsSrcPkg<span class="op">(),</span></span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>                                                   opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenArch<span class="op">:</span></span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenArch&quot;</span><span class="op">);</span></span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">:</span></span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenPlantUml&quot;</span><span class="op">);</span></span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Arch2PUmlGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenCyclic<span class="op">:</span></span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         LOGGER<span class="op">(</span><span class="st">&quot;start GenCyclic&quot;</span><span class="op">);</span></span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>CyclicGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">:</span></span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Help<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">:</span></span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="cf">default</span><span class="op">:</span></span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Help<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>         <span class="co">// @@@ ignore end</span></span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="op">}</span></span>
<span id="cb40-84"><a href="#cb40-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="op">}</span></span>
<span id="cb40-85"><a href="#cb40-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb40-86"><a href="#cb40-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     LOGGER<span class="op">(</span><span class="st">&quot;error occured:&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb40-87"><a href="#cb40-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb40-88"><a href="#cb40-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> e<span class="op">.</span>what<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb40-89"><a href="#cb40-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb40-90"><a href="#cb40-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb40-91"><a href="#cb40-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> <span class="op">}</span></span>
<span id="cb40-92"><a href="#cb40-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> </span>
<span id="cb40-93"><a href="#cb40-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> <span class="co">// @@@ ignore begin</span></span>
<span id="cb40-94"><a href="#cb40-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> <span class="cf">catch</span> <span class="op">(...)</span> <span class="op">{</span></span>
<span id="cb40-95"><a href="#cb40-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     LOGGER<span class="op">(</span><span class="st">&quot;unknown error occured:&quot;</span><span class="op">);</span></span>
<span id="cb40-96"><a href="#cb40-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb40-97"><a href="#cb40-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb40-98"><a href="#cb40-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> <span class="op">}</span></span>
<span id="cb40-99"><a href="#cb40-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb40-100"><a href="#cb40-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="co">// @@@ ignore end</span></span>
<span id="cb40-101"><a href="#cb40-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb40-102"><a href="#cb40-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> argv<span class="op">[])</span></span>
<span id="cb40-103"><a href="#cb40-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">{</span></span>
<span id="cb40-104"><a href="#cb40-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     App<span class="op">::</span>DepsOpts d_opt<span class="op">{</span>argc<span class="op">,</span> argv<span class="op">};</span></span>
<span id="cb40-105"><a href="#cb40-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb40-106"><a href="#cb40-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     LOGGER_INIT<span class="op">(</span>d_opt<span class="op">.</span>Log<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;-&quot;</span> <span class="op">?</span> <span class="kw">nullptr</span> <span class="op">:</span> d_opt<span class="op">.</span>Log<span class="op">().</span>c_str<span class="op">());</span></span>
<span id="cb40-107"><a href="#cb40-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> </span>
<span id="cb40-108"><a href="#cb40-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     LOGGER<span class="op">(</span><span class="st">&quot;Options&quot;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">,</span> d_opt<span class="op">);</span></span>
<span id="cb40-109"><a href="#cb40-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb40-110"><a href="#cb40-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="kw">auto</span> out_sel   <span class="op">=</span> OStreamSelector<span class="op">{</span>d_opt<span class="op">.</span>Out<span class="op">()};</span></span>
<span id="cb40-111"><a href="#cb40-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>     <span class="kw">auto</span> exit_code <span class="op">=</span> gen_scenario<span class="op">(</span>d_opt<span class="op">)-&gt;</span>Output<span class="op">(</span>out_sel<span class="op">.</span>OStream<span class="op">())</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb40-112"><a href="#cb40-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb40-113"><a href="#cb40-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     LOGGER<span class="op">(</span><span class="st">&quot;Exit&quot;</span><span class="op">,</span> exit_code<span class="op">);</span></span>
<span id="cb40-114"><a href="#cb40-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb40-115"><a href="#cb40-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="cf">return</span> exit_code<span class="op">;</span></span>
<span id="cb40-116"><a href="#cb40-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> <span class="op">}</span></span>
<span id="cb40-117"><a href="#cb40-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h3
id="exampledepsapputdeps_opts_ut.cpp">example/deps/app/ut/deps_opts_ut.cpp
<a id="SS_23_2_4"></a></h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>deps_args<span class="op">,</span> DepsOpts<span class="op">)</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="op">{</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="dt">char</span> prog<span class="op">[]</span>          <span class="op">=</span> <span class="st">&quot;prog&quot;</span><span class="op">;</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="dt">char</span> cmd_p<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;p&quot;</span><span class="op">;</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="dt">char</span> cmd_s<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;s&quot;</span><span class="op">;</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="dt">char</span> cmd_p2s<span class="op">[]</span>       <span class="op">=</span> <span class="st">&quot;p2s&quot;</span><span class="op">;</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="dt">char</span> cmd_p2p<span class="op">[]</span>       <span class="op">=</span> <span class="st">&quot;p2p&quot;</span><span class="op">;</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="dt">char</span> cmd_a<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;a&quot;</span><span class="op">;</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="dt">char</span> cmd_a2pu<span class="op">[]</span>      <span class="op">=</span> <span class="st">&quot;a2pu&quot;</span><span class="op">;</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="dt">char</span> cmd_help<span class="op">[]</span>      <span class="op">=</span> <span class="st">&quot;help&quot;</span><span class="op">;</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="dt">char</span> cmd_dd_help<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;--help&quot;</span><span class="op">;</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="dt">char</span> cmd_h<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;h&quot;</span><span class="op">;</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="dt">char</span> cmd_d_h<span class="op">[]</span>       <span class="op">=</span> <span class="st">&quot;-h&quot;</span><span class="op">;</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="dt">char</span> cmd_unknown<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;unknown&quot;</span><span class="op">;</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="dt">char</span> opt_in<span class="op">[]</span>        <span class="op">=</span> <span class="st">&quot;--in&quot;</span><span class="op">;</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="dt">char</span> opt_in_arg<span class="op">[]</span>    <span class="op">=</span> <span class="st">&quot;in-file&quot;</span><span class="op">;</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="dt">char</span> opt_out<span class="op">[]</span>       <span class="op">=</span> <span class="st">&quot;--out&quot;</span><span class="op">;</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="dt">char</span> opt_out_arg<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;out-file&quot;</span><span class="op">;</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="dt">char</span> opt_e<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;-e&quot;</span><span class="op">;</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="dt">char</span> opt_exclude<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;--exclude&quot;</span><span class="op">;</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="dt">char</span> opt_e_arg<span class="op">[]</span>     <span class="op">=</span> <span class="st">&quot;pattern.*&quot;</span><span class="op">;</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="dt">char</span> opt_recursive<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--recursive&quot;</span><span class="op">;</span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="dt">char</span> opt_src_pkg<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;--src_as_pkg&quot;</span><span class="op">;</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="dt">char</span> opt_log<span class="op">[]</span>       <span class="op">=</span> <span class="st">&quot;--log&quot;</span><span class="op">;</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="dt">char</span> opt_log_arg<span class="op">[]</span>   <span class="op">=</span> <span class="st">&quot;log-file&quot;</span><span class="op">;</span></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="dt">char</span> opt_log_dash<span class="op">[]</span>  <span class="op">=</span> <span class="st">&quot;-&quot;</span><span class="op">;</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="dt">char</span> opt_R<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;-R&quot;</span><span class="op">;</span></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="dt">char</span> opt_s<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;-s&quot;</span><span class="op">;</span></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="dt">char</span> opt_help<span class="op">[]</span>      <span class="op">=</span> <span class="st">&quot;--help&quot;</span><span class="op">;</span></span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="dt">char</span> opt_h<span class="op">[]</span>         <span class="op">=</span> <span class="st">&quot;-h&quot;</span><span class="op">;</span></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="dt">char</span> dir0<span class="op">[]</span>          <span class="op">=</span> <span class="st">&quot;dir0&quot;</span><span class="op">;</span></span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="dt">char</span> dir1<span class="op">[]</span>          <span class="op">=</span> <span class="st">&quot;dir1&quot;</span><span class="op">;</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="dt">char</span> dir2<span class="op">[]</span>          <span class="op">=</span> <span class="st">&quot;dir2&quot;</span><span class="op">;</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">{</span></span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_recursive<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">};</span></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="op">}</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">{</span></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_src_pkg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">};</span></span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-69"><a href="#cb41-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="op">}</span></span>
<span id="cb41-70"><a href="#cb41-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="op">{</span></span>
<span id="cb41-71"><a href="#cb41-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_s<span class="op">,</span> opt_src_pkg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">};</span></span>
<span id="cb41-72"><a href="#cb41-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb41-73"><a href="#cb41-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-74"><a href="#cb41-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb41-75"><a href="#cb41-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-76"><a href="#cb41-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-77"><a href="#cb41-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-78"><a href="#cb41-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-79"><a href="#cb41-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb41-80"><a href="#cb41-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-81"><a href="#cb41-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-82"><a href="#cb41-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">}</span></span>
<span id="cb41-83"><a href="#cb41-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="op">{</span></span>
<span id="cb41-84"><a href="#cb41-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p2s<span class="op">,</span> opt_R<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_exclude<span class="op">,</span> opt_e_arg<span class="op">,</span> dir0<span class="op">};</span></span>
<span id="cb41-85"><a href="#cb41-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb41-86"><a href="#cb41-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-87"><a href="#cb41-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb41-88"><a href="#cb41-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-89"><a href="#cb41-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-90"><a href="#cb41-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-91"><a href="#cb41-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-92"><a href="#cb41-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-93"><a href="#cb41-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-94"><a href="#cb41-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>         ASSERT_EQ<span class="op">(</span>opt_e_arg<span class="op">,</span> d_opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb41-95"><a href="#cb41-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="op">}</span></span>
<span id="cb41-96"><a href="#cb41-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="op">{</span></span>
<span id="cb41-97"><a href="#cb41-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p2s<span class="op">,</span> opt_s<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_e<span class="op">,</span> opt_e_arg<span class="op">,</span> dir0<span class="op">};</span></span>
<span id="cb41-98"><a href="#cb41-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb41-99"><a href="#cb41-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-100"><a href="#cb41-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb41-101"><a href="#cb41-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-102"><a href="#cb41-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-103"><a href="#cb41-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-104"><a href="#cb41-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-105"><a href="#cb41-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb41-106"><a href="#cb41-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-107"><a href="#cb41-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-108"><a href="#cb41-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>         ASSERT_EQ<span class="op">(</span>opt_e_arg<span class="op">,</span> d_opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb41-109"><a href="#cb41-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="op">}</span></span>
<span id="cb41-110"><a href="#cb41-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="op">{</span></span>
<span id="cb41-111"><a href="#cb41-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p2p<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb41-112"><a href="#cb41-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb41-113"><a href="#cb41-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-114"><a href="#cb41-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb41-115"><a href="#cb41-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-116"><a href="#cb41-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-117"><a href="#cb41-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-118"><a href="#cb41-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-119"><a href="#cb41-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-120"><a href="#cb41-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-121"><a href="#cb41-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="op">}</span></span>
<span id="cb41-122"><a href="#cb41-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="op">{</span></span>
<span id="cb41-123"><a href="#cb41-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_a<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb41-124"><a href="#cb41-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb41-125"><a href="#cb41-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-126"><a href="#cb41-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb41-127"><a href="#cb41-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenArch<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-128"><a href="#cb41-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-129"><a href="#cb41-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-130"><a href="#cb41-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-131"><a href="#cb41-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-132"><a href="#cb41-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-133"><a href="#cb41-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="op">}</span></span>
<span id="cb41-134"><a href="#cb41-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="op">{</span></span>
<span id="cb41-135"><a href="#cb41-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_a2pu<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb41-136"><a href="#cb41-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb41-137"><a href="#cb41-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-138"><a href="#cb41-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> </span>
<span id="cb41-139"><a href="#cb41-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-140"><a href="#cb41-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-141"><a href="#cb41-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-142"><a href="#cb41-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb41-143"><a href="#cb41-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb41-144"><a href="#cb41-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-145"><a href="#cb41-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="op">}</span></span>
<span id="cb41-146"><a href="#cb41-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="op">{</span></span>
<span id="cb41-147"><a href="#cb41-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_help<span class="op">};</span></span>
<span id="cb41-148"><a href="#cb41-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb41-149"><a href="#cb41-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-150"><a href="#cb41-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> </span>
<span id="cb41-151"><a href="#cb41-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-152"><a href="#cb41-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-153"><a href="#cb41-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="op">}</span></span>
<span id="cb41-154"><a href="#cb41-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="op">{</span></span>
<span id="cb41-155"><a href="#cb41-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_dd_help<span class="op">};</span></span>
<span id="cb41-156"><a href="#cb41-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> </span>
<span id="cb41-157"><a href="#cb41-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-158"><a href="#cb41-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> </span>
<span id="cb41-159"><a href="#cb41-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-160"><a href="#cb41-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-161"><a href="#cb41-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="op">}</span></span>
<span id="cb41-162"><a href="#cb41-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="op">{</span></span>
<span id="cb41-163"><a href="#cb41-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_h<span class="op">};</span></span>
<span id="cb41-164"><a href="#cb41-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb41-165"><a href="#cb41-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-166"><a href="#cb41-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> </span>
<span id="cb41-167"><a href="#cb41-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-168"><a href="#cb41-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-169"><a href="#cb41-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>     <span class="op">}</span></span>
<span id="cb41-170"><a href="#cb41-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     <span class="op">{</span></span>
<span id="cb41-171"><a href="#cb41-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_d_h<span class="op">};</span></span>
<span id="cb41-172"><a href="#cb41-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb41-173"><a href="#cb41-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-174"><a href="#cb41-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> </span>
<span id="cb41-175"><a href="#cb41-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-176"><a href="#cb41-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-177"><a href="#cb41-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     <span class="op">}</span></span>
<span id="cb41-178"><a href="#cb41-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     <span class="op">{</span></span>
<span id="cb41-179"><a href="#cb41-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_unknown<span class="op">};</span></span>
<span id="cb41-180"><a href="#cb41-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> </span>
<span id="cb41-181"><a href="#cb41-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-182"><a href="#cb41-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span> </span>
<span id="cb41-183"><a href="#cb41-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-184"><a href="#cb41-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>         ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-185"><a href="#cb41-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     <span class="op">}</span></span>
<span id="cb41-186"><a href="#cb41-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="op">{</span></span>
<span id="cb41-187"><a href="#cb41-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_recursive<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> opt_help<span class="op">};</span></span>
<span id="cb41-188"><a href="#cb41-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> </span>
<span id="cb41-189"><a href="#cb41-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-190"><a href="#cb41-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> </span>
<span id="cb41-191"><a href="#cb41-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-192"><a href="#cb41-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-193"><a href="#cb41-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>     <span class="op">}</span></span>
<span id="cb41-194"><a href="#cb41-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     <span class="op">{</span></span>
<span id="cb41-195"><a href="#cb41-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_recursive<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> opt_h<span class="op">};</span></span>
<span id="cb41-196"><a href="#cb41-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> </span>
<span id="cb41-197"><a href="#cb41-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-198"><a href="#cb41-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span> </span>
<span id="cb41-199"><a href="#cb41-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-200"><a href="#cb41-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-201"><a href="#cb41-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     <span class="op">}</span></span>
<span id="cb41-202"><a href="#cb41-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>     <span class="op">{</span></span>
<span id="cb41-203"><a href="#cb41-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_log<span class="op">,</span> opt_log_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb41-204"><a href="#cb41-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> </span>
<span id="cb41-205"><a href="#cb41-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-206"><a href="#cb41-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb41-207"><a href="#cb41-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-208"><a href="#cb41-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>         ASSERT_EQ<span class="op">(</span>opt_log_arg<span class="op">,</span> d_opt<span class="op">.</span>Log<span class="op">());</span></span>
<span id="cb41-209"><a href="#cb41-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>         ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb41-210"><a href="#cb41-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-211"><a href="#cb41-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>     <span class="op">}</span></span>
<span id="cb41-212"><a href="#cb41-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>     <span class="op">{</span></span>
<span id="cb41-213"><a href="#cb41-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>         <span class="dt">char</span><span class="op">*</span> <span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_log<span class="op">,</span> opt_log_dash<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">};</span></span>
<span id="cb41-214"><a href="#cb41-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span> </span>
<span id="cb41-215"><a href="#cb41-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>         <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb41-216"><a href="#cb41-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span> </span>
<span id="cb41-217"><a href="#cb41-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>         ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb41-218"><a href="#cb41-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>         ASSERT_EQ<span class="op">(</span>opt_log_dash<span class="op">,</span> d_opt<span class="op">.</span>Log<span class="op">());</span></span>
<span id="cb41-219"><a href="#cb41-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>         ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb41-220"><a href="#cb41-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>         ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb41-221"><a href="#cb41-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     <span class="op">}</span></span>
<span id="cb41-222"><a href="#cb41-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> <span class="op">}</span></span>
<span id="cb41-223"><a href="#cb41-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb41-224"><a href="#cb41-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span> <span class="op">}</span>  <span class="co">// namespace App</span></span></code></pre></div>
<h3
id="exampledepsdependencyhdependencydeps_scenario.h">example/deps/dependency/h/dependency/deps_scenario.h
<a id="SS_23_2_5"></a></h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;memory&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">class</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">virtual</span> <span class="op">~</span>ScenarioGenerator<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">};</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="kw">class</span> PkgGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">explicit</span> PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                           <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">);</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="va">dirs_</span><span class="op">;</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="op">};</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="kw">class</span> SrcsGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="kw">explicit</span> SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>                            FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">);</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="va">dirs_</span><span class="op">;</span></span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">};</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="kw">class</span> Pkg2SrcsGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="kw">explicit</span> Pkg2SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>                                FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">);</span></span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="va">dirs2srcs_</span><span class="op">;</span></span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">};</span></span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="kw">class</span> Pkg2PkgGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="kw">explicit</span> Pkg2PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                               FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">);</span></span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="va">dirs2srcs_</span><span class="op">;</span></span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="op">};</span></span>
<span id="cb42-55"><a href="#cb42-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb42-56"><a href="#cb42-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="kw">class</span> ArchGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb42-57"><a href="#cb42-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-58"><a href="#cb42-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">explicit</span> ArchGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">);</span></span>
<span id="cb42-59"><a href="#cb42-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-60"><a href="#cb42-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="op">~</span>ArchGenerator<span class="op">();</span></span>
<span id="cb42-61"><a href="#cb42-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb42-62"><a href="#cb42-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="kw">protected</span><span class="op">:</span></span>
<span id="cb42-63"><a href="#cb42-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="kw">struct</span> Impl<span class="op">;</span></span>
<span id="cb42-64"><a href="#cb42-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>Impl<span class="op">&gt;</span> <span class="va">impl_</span><span class="op">;</span></span>
<span id="cb42-65"><a href="#cb42-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="op">};</span></span>
<span id="cb42-66"><a href="#cb42-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> </span>
<span id="cb42-67"><a href="#cb42-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> <span class="kw">class</span> Arch2PUmlGenerator <span class="op">:</span> <span class="kw">public</span> ArchGenerator <span class="op">{</span></span>
<span id="cb42-68"><a href="#cb42-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-69"><a href="#cb42-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="kw">explicit</span> Arch2PUmlGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">);</span></span>
<span id="cb42-70"><a href="#cb42-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-71"><a href="#cb42-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="op">};</span></span>
<span id="cb42-72"><a href="#cb42-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb42-73"><a href="#cb42-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="kw">class</span> CyclicGenerator <span class="op">:</span> <span class="kw">public</span> ArchGenerator <span class="op">{</span></span>
<span id="cb42-74"><a href="#cb42-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb42-75"><a href="#cb42-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="kw">explicit</span> CyclicGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">);</span></span>
<span id="cb42-76"><a href="#cb42-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb42-77"><a href="#cb42-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb42-78"><a href="#cb42-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb42-79"><a href="#cb42-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="dt">bool</span> <span class="va">has_cyclic_dep_</span><span class="op">;</span></span>
<span id="cb42-80"><a href="#cb42-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">};</span></span>
<span id="cb42-81"><a href="#cb42-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcarch_pkg.cpp">example/deps/dependency/src/arch_pkg.cpp
<a id="SS_23_2_6"></a></h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">void</span> ArchPkg<span class="op">::</span>set_cyclic<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">*</span> pkg<span class="op">,</span> <span class="dt">bool</span> is_cyclic<span class="op">)</span> <span class="at">const</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="op">{</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="ot">assert</span><span class="op">(</span><span class="bu">std::</span>count<span class="op">(</span><span class="va">depend_on_</span><span class="op">.</span>cbegin<span class="op">(),</span> <span class="va">depend_on_</span><span class="op">.</span>cend<span class="op">(),</span> pkg<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="ot">assert</span><span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> <span class="va">cyclic_</span><span class="op">[</span>pkg<span class="op">]</span> <span class="op">==</span> is_cyclic<span class="op">);</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="va">cyclic_</span><span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>pkg<span class="op">,</span> is_cyclic<span class="op">));</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="op">}</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>is_cyclic<span class="op">(</span><span class="dt">ArchPkgs_t</span><span class="op">&amp;</span> history<span class="op">,</span> <span class="dt">size_t</span> depth<span class="op">)</span> <span class="at">const</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="op">{</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="cf">if</span> <span class="op">(++</span>depth <span class="op">&gt;</span> <span class="va">max_depth_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>         <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">&quot;too deep dependency:&quot;</span> <span class="op">&lt;&lt;</span> <span class="va">name_</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="op">}</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">auto</span> <span class="at">const</span> it <span class="op">=</span> find<span class="op">(</span>history<span class="op">.</span>cbegin<span class="op">(),</span> history<span class="op">.</span>cend<span class="op">(),</span> <span class="kw">this</span><span class="op">);</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="cf">if</span> <span class="op">(</span>it <span class="op">!=</span> history<span class="op">.</span>cend<span class="op">())</span> <span class="op">{</span>  <span class="co">// 循環検出</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it2 <span class="op">=</span> it<span class="op">;</span> it2 <span class="op">!=</span> history<span class="op">.</span>cend<span class="op">();</span> <span class="op">++</span>it2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>             <span class="kw">auto</span> next <span class="op">=</span> <span class="op">(</span><span class="bu">std::</span>next<span class="op">(</span>it2<span class="op">)</span> <span class="op">==</span> history<span class="op">.</span>cend<span class="op">())</span> <span class="op">?</span> it <span class="op">:</span> <span class="bu">std::</span>next<span class="op">(</span>it2<span class="op">);</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>             <span class="op">(*</span>it2<span class="op">)-&gt;</span>set_cyclic<span class="op">(*</span>next<span class="op">,</span> <span class="kw">true</span><span class="op">);</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="op">}</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>         <span class="co">// it == history.cbegin()ならば、一番上からの循環 A-&gt;B-&gt;C-&gt;...-&gt;A</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         <span class="co">// it != history.cbegin()ならば、上記以外の循環 A-&gt;B-&gt;C-&gt;...-&gt;B</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>         <span class="cf">return</span> it <span class="op">==</span> history<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="op">}</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="kw">auto</span> gs <span class="op">=</span> Nstd<span class="op">::</span>ScopedGuard<span class="op">{[&amp;</span>history<span class="op">]</span> <span class="op">{</span> history<span class="op">.</span>pop_back<span class="op">();</span> <span class="op">}};</span></span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     history<span class="op">.</span>push_back<span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">*</span> pkg <span class="op">:</span> <span class="va">depend_on_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">-&gt;</span>is_cyclic<span class="op">(</span>history<span class="op">,</span> depth<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>         <span class="op">}</span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="op">}</span></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="op">}</span></span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>IsCyclic<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="at">const</span></span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="op">{</span></span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>count<span class="op">(</span><span class="va">depend_on_</span><span class="op">.</span>cbegin<span class="op">(),</span> <span class="va">depend_on_</span><span class="op">.</span>cend<span class="op">(),</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="op">}</span></span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="cf">if</span> <span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(&amp;</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="dt">ArchPkgs_t</span> history<span class="op">{</span><span class="kw">this</span><span class="op">};</span></span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>         set_cyclic<span class="op">(&amp;</span>pkg<span class="op">,</span> pkg<span class="op">.</span>is_cyclic<span class="op">(</span>history<span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="op">}</span></span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="ot">assert</span><span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(&amp;</span>pkg<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">return</span> <span class="va">cyclic_</span><span class="op">[&amp;</span>pkg<span class="op">];</span></span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="op">}</span></span>
<span id="cb43-64"><a href="#cb43-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb43-65"><a href="#cb43-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>IsCyclic<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span></span>
<span id="cb43-66"><a href="#cb43-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">{</span></span>
<span id="cb43-67"><a href="#cb43-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">*</span> pkg <span class="op">:</span> DependOn<span class="op">())</span> <span class="op">{</span></span>
<span id="cb43-68"><a href="#cb43-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         <span class="cf">if</span> <span class="op">(</span>IsCyclic<span class="op">(*</span>pkg<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-69"><a href="#cb43-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-70"><a href="#cb43-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>         <span class="op">}</span></span>
<span id="cb43-71"><a href="#cb43-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">}</span></span>
<span id="cb43-72"><a href="#cb43-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb43-73"><a href="#cb43-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb43-74"><a href="#cb43-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="op">}</span></span>
<span id="cb43-75"><a href="#cb43-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb43-76"><a href="#cb43-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> ArchPkg<span class="op">::</span><span class="dt">Map_Path_ArchPkg_t</span> ArchPkg<span class="op">::</span>build_depend_on<span class="op">(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span>   dep_rel<span class="op">,</span></span>
<span id="cb43-77"><a href="#cb43-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>                                                      <span class="dt">Map_Path_ArchPkg_t</span><span class="op">&amp;&amp;</span> pkg_all<span class="op">)</span></span>
<span id="cb43-78"><a href="#cb43-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="op">{</span></span>
<span id="cb43-79"><a href="#cb43-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="kw">auto</span> <span class="at">const</span> a_path <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">);</span></span>
<span id="cb43-80"><a href="#cb43-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>a_path<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-81"><a href="#cb43-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         pkg_all<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>a_path<span class="op">,</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchPkg<span class="op">&gt;(</span>a_path<span class="op">)));</span></span>
<span id="cb43-82"><a href="#cb43-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">}</span></span>
<span id="cb43-83"><a href="#cb43-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb43-84"><a href="#cb43-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="kw">auto</span> <span class="at">const</span> b_path <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">);</span></span>
<span id="cb43-85"><a href="#cb43-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>b_path<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-86"><a href="#cb43-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         pkg_all<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>b_path<span class="op">,</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchPkg<span class="op">&gt;(</span>b_path<span class="op">)));</span></span>
<span id="cb43-87"><a href="#cb43-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="op">}</span></span>
<span id="cb43-88"><a href="#cb43-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> </span>
<span id="cb43-89"><a href="#cb43-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="dt">ArchPkgPtr_t</span><span class="op">&amp;</span> a_ptr <span class="op">=</span> pkg_all<span class="op">.</span>at<span class="op">(</span>a_path<span class="op">);</span></span>
<span id="cb43-90"><a href="#cb43-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="dt">ArchPkgPtr_t</span><span class="op">&amp;</span> b_ptr <span class="op">=</span> pkg_all<span class="op">.</span>at<span class="op">(</span>b_path<span class="op">);</span></span>
<span id="cb43-91"><a href="#cb43-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb43-92"><a href="#cb43-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-93"><a href="#cb43-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         a_ptr<span class="op">-&gt;</span><span class="va">depend_on_</span><span class="op">.</span>push_back<span class="op">(</span>b_ptr<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb43-94"><a href="#cb43-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="op">}</span></span>
<span id="cb43-95"><a href="#cb43-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-96"><a href="#cb43-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>         b_ptr<span class="op">-&gt;</span><span class="va">depend_on_</span><span class="op">.</span>push_back<span class="op">(</span>a_ptr<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb43-97"><a href="#cb43-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="op">}</span></span>
<span id="cb43-98"><a href="#cb43-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb43-99"><a href="#cb43-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">);</span></span>
<span id="cb43-100"><a href="#cb43-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="op">}</span></span>
<span id="cb43-101"><a href="#cb43-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb43-102"><a href="#cb43-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="dt">Arch_t</span> ArchPkg<span class="op">::</span>build_children<span class="op">(</span><span class="dt">Map_Path_ArchPkg_t</span><span class="op">&amp;&amp;</span> pkg_all<span class="op">)</span></span>
<span id="cb43-103"><a href="#cb43-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">{</span></span>
<span id="cb43-104"><a href="#cb43-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="kw">auto</span> cache <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> ArchPkg<span class="op">*&gt;{};</span></span>
<span id="cb43-105"><a href="#cb43-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>     <span class="kw">auto</span> top   <span class="op">=</span> <span class="dt">Arch_t</span><span class="op">{};</span></span>
<span id="cb43-106"><a href="#cb43-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb43-107"><a href="#cb43-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> <span class="op">[</span>path<span class="op">,</span> pkg<span class="op">]</span> <span class="op">:</span> pkg_all<span class="op">)</span> <span class="op">{</span>  <span class="co">// C++17 style</span></span>
<span id="cb43-108"><a href="#cb43-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb43-109"><a href="#cb43-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>         <span class="kw">auto</span> <span class="at">const</span> parent_name <span class="op">=</span> path<span class="op">.</span>parent_path<span class="op">();</span></span>
<span id="cb43-110"><a href="#cb43-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>         cache<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>path<span class="op">,</span> pkg<span class="op">.</span>get<span class="op">()));</span></span>
<span id="cb43-111"><a href="#cb43-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb43-112"><a href="#cb43-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>         <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>parent_name<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-113"><a href="#cb43-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>             top<span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg<span class="op">));</span></span>
<span id="cb43-114"><a href="#cb43-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>         <span class="op">}</span></span>
<span id="cb43-115"><a href="#cb43-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-116"><a href="#cb43-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>             ArchPkg<span class="op">*</span> parent <span class="op">=</span> cache<span class="op">.</span>count<span class="op">(</span>parent_name<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">?</span> cache<span class="op">.</span>at<span class="op">(</span>parent_name<span class="op">)</span></span>
<span id="cb43-117"><a href="#cb43-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>                                                             <span class="op">:</span> pkg_all<span class="op">.</span>at<span class="op">(</span>parent_name<span class="op">).</span>get<span class="op">();</span></span>
<span id="cb43-118"><a href="#cb43-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb43-119"><a href="#cb43-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>             pkg<span class="op">-&gt;</span><span class="va">parent_</span> <span class="op">=</span> parent<span class="op">;</span></span>
<span id="cb43-120"><a href="#cb43-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>             parent<span class="op">-&gt;</span><span class="va">children_</span><span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg<span class="op">));</span></span>
<span id="cb43-121"><a href="#cb43-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>         <span class="op">}</span></span>
<span id="cb43-122"><a href="#cb43-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="op">}</span></span>
<span id="cb43-123"><a href="#cb43-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> </span>
<span id="cb43-124"><a href="#cb43-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="cf">return</span> top<span class="op">;</span></span>
<span id="cb43-125"><a href="#cb43-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> <span class="op">}</span></span>
<span id="cb43-126"><a href="#cb43-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb43-127"><a href="#cb43-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="dt">Arch_t</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span></span>
<span id="cb43-128"><a href="#cb43-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> <span class="op">{</span></span>
<span id="cb43-129"><a href="#cb43-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="kw">auto</span> pkg_all <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">ArchPkgPtr_t</span><span class="op">&gt;{};</span></span>
<span id="cb43-130"><a href="#cb43-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> </span>
<span id="cb43-131"><a href="#cb43-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-132"><a href="#cb43-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         pkg_all <span class="op">=</span> build_depend_on<span class="op">(</span>d<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">));</span></span>
<span id="cb43-133"><a href="#cb43-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="op">}</span></span>
<span id="cb43-134"><a href="#cb43-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> </span>
<span id="cb43-135"><a href="#cb43-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="kw">auto</span> top <span class="op">=</span> <span class="dt">Arch_t</span><span class="op">{</span>build_children<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">))};</span></span>
<span id="cb43-136"><a href="#cb43-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb43-137"><a href="#cb43-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>     <span class="cf">return</span> top<span class="op">;</span></span>
<span id="cb43-138"><a href="#cb43-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="op">}</span></span>
<span id="cb43-139"><a href="#cb43-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> </span>
<span id="cb43-140"><a href="#cb43-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="bu">std::</span>string ArchPkg<span class="op">::</span>make_full_name<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span></span>
<span id="cb43-141"><a href="#cb43-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="op">{</span></span>
<span id="cb43-142"><a href="#cb43-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>Parent<span class="op">())</span> <span class="op">{</span></span>
<span id="cb43-143"><a href="#cb43-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>         <span class="cf">return</span> make_full_name<span class="op">(*</span>pkg<span class="op">.</span>Parent<span class="op">())</span> <span class="op">+</span> <span class="st">&quot;/&quot;</span> <span class="op">+</span> pkg<span class="op">.</span>Name<span class="op">();</span></span>
<span id="cb43-144"><a href="#cb43-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     <span class="op">}</span></span>
<span id="cb43-145"><a href="#cb43-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-146"><a href="#cb43-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="cf">return</span> pkg<span class="op">.</span>Name<span class="op">();</span></span>
<span id="cb43-147"><a href="#cb43-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="op">}</span></span>
<span id="cb43-148"><a href="#cb43-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> <span class="op">}</span></span>
<span id="cb43-149"><a href="#cb43-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> </span>
<span id="cb43-150"><a href="#cb43-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> ArchPkg <span class="at">const</span><span class="op">*</span> FindArchPkgByName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="bu">std::</span>string_view pkg_name<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-151"><a href="#cb43-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span> <span class="op">{</span></span>
<span id="cb43-152"><a href="#cb43-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>     <span class="cf">for</span> <span class="op">(</span><span class="dt">ArchPkgPtr_t</span> <span class="at">const</span><span class="op">&amp;</span> pkg_ptr <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-153"><a href="#cb43-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>         <span class="cf">if</span> <span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Name<span class="op">()</span> <span class="op">==</span> pkg_name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-154"><a href="#cb43-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>             <span class="cf">return</span> pkg_ptr<span class="op">.</span>get<span class="op">();</span></span>
<span id="cb43-155"><a href="#cb43-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>         <span class="op">}</span></span>
<span id="cb43-156"><a href="#cb43-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-157"><a href="#cb43-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>             ArchPkg <span class="at">const</span><span class="op">*</span> pkg_found <span class="op">=</span> FindArchPkgByName<span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Children<span class="op">(),</span> pkg_name<span class="op">);</span></span>
<span id="cb43-158"><a href="#cb43-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>             <span class="cf">if</span> <span class="op">(</span>pkg_found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-159"><a href="#cb43-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                 <span class="cf">return</span> pkg_found<span class="op">;</span></span>
<span id="cb43-160"><a href="#cb43-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>             <span class="op">}</span></span>
<span id="cb43-161"><a href="#cb43-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>         <span class="op">}</span></span>
<span id="cb43-162"><a href="#cb43-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="op">}</span></span>
<span id="cb43-163"><a href="#cb43-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     <span class="cf">return</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb43-164"><a href="#cb43-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> <span class="op">}</span></span>
<span id="cb43-165"><a href="#cb43-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> </span>
<span id="cb43-166"><a href="#cb43-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> ArchPkg <span class="at">const</span><span class="op">*</span> FindArchPkgByFullName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="bu">std::</span>string_view full_name<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-167"><a href="#cb43-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> <span class="op">{</span></span>
<span id="cb43-168"><a href="#cb43-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="cf">for</span> <span class="op">(</span><span class="dt">ArchPkgPtr_t</span> <span class="at">const</span><span class="op">&amp;</span> pkg_ptr <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-169"><a href="#cb43-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="cf">if</span> <span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>FullName<span class="op">()</span> <span class="op">==</span> full_name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-170"><a href="#cb43-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>             <span class="cf">return</span> pkg_ptr<span class="op">.</span>get<span class="op">();</span></span>
<span id="cb43-171"><a href="#cb43-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="op">}</span></span>
<span id="cb43-172"><a href="#cb43-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-173"><a href="#cb43-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>             ArchPkg <span class="at">const</span><span class="op">*</span> pkg_found <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Children<span class="op">(),</span> full_name<span class="op">);</span></span>
<span id="cb43-174"><a href="#cb43-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>             <span class="cf">if</span> <span class="op">(</span>pkg_found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-175"><a href="#cb43-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>                 <span class="cf">return</span> pkg_found<span class="op">;</span></span>
<span id="cb43-176"><a href="#cb43-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>             <span class="op">}</span></span>
<span id="cb43-177"><a href="#cb43-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>         <span class="op">}</span></span>
<span id="cb43-178"><a href="#cb43-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     <span class="op">}</span></span>
<span id="cb43-179"><a href="#cb43-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>     <span class="cf">return</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb43-180"><a href="#cb43-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> <span class="op">}</span></span>
<span id="cb43-181"><a href="#cb43-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> </span>
<span id="cb43-182"><a href="#cb43-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb43-183"><a href="#cb43-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span> </span>
<span id="cb43-184"><a href="#cb43-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> <span class="bu">std::</span>string unique_str_name<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> full_name<span class="op">)</span></span>
<span id="cb43-185"><a href="#cb43-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> <span class="op">{</span></span>
<span id="cb43-186"><a href="#cb43-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="kw">auto</span> ret <span class="op">=</span> Nstd<span class="op">::</span>Replace<span class="op">(</span>full_name<span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">,</span> <span class="st">&quot;___&quot;</span><span class="op">);</span></span>
<span id="cb43-187"><a href="#cb43-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="cf">return</span> Nstd<span class="op">::</span>Replace<span class="op">(</span>ret<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb43-188"><a href="#cb43-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> <span class="op">}</span></span>
<span id="cb43-189"><a href="#cb43-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> </span>
<span id="cb43-190"><a href="#cb43-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> <span class="bu">std::</span>string_view cyclic_str<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-191"><a href="#cb43-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> <span class="op">{</span></span>
<span id="cb43-192"><a href="#cb43-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>IsCyclic<span class="op">())</span> <span class="op">{</span></span>
<span id="cb43-193"><a href="#cb43-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>         <span class="cf">return</span> <span class="st">&quot;:CYCLIC&quot;</span><span class="op">;</span></span>
<span id="cb43-194"><a href="#cb43-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     <span class="op">}</span></span>
<span id="cb43-195"><a href="#cb43-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> </span>
<span id="cb43-196"><a href="#cb43-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="cf">return</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb43-197"><a href="#cb43-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> <span class="op">}</span></span>
<span id="cb43-198"><a href="#cb43-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span> </span>
<span id="cb43-199"><a href="#cb43-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> <span class="bu">std::</span>string to_string_depend_on<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg_top<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span></span>
<span id="cb43-200"><a href="#cb43-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> <span class="op">{</span></span>
<span id="cb43-201"><a href="#cb43-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     <span class="kw">auto</span> ss         <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-202"><a href="#cb43-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>     <span class="kw">auto</span> indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb43-203"><a href="#cb43-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span> </span>
<span id="cb43-204"><a href="#cb43-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-205"><a href="#cb43-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span> </span>
<span id="cb43-206"><a href="#cb43-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">*</span> pkg <span class="op">:</span> pkg_top<span class="op">.</span>DependOn<span class="op">())</span> <span class="op">{</span></span>
<span id="cb43-207"><a href="#cb43-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-208"><a href="#cb43-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-209"><a href="#cb43-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>         <span class="op">}</span></span>
<span id="cb43-210"><a href="#cb43-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> </span>
<span id="cb43-211"><a href="#cb43-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>         ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> pkg<span class="op">-&gt;</span>Name<span class="op">();</span></span>
<span id="cb43-212"><a href="#cb43-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> </span>
<span id="cb43-213"><a href="#cb43-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>         <span class="cf">if</span> <span class="op">(</span>pkg_top<span class="op">.</span>IsCyclic<span class="op">(*</span>pkg<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-214"><a href="#cb43-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>             ss <span class="op">&lt;&lt;</span> <span class="st">&quot; : CYCLIC&quot;</span><span class="op">;</span></span>
<span id="cb43-215"><a href="#cb43-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>         <span class="op">}</span></span>
<span id="cb43-216"><a href="#cb43-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-217"><a href="#cb43-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>             ss <span class="op">&lt;&lt;</span> <span class="st">&quot; : STRAIGHT&quot;</span><span class="op">;</span></span>
<span id="cb43-218"><a href="#cb43-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>         <span class="op">}</span></span>
<span id="cb43-219"><a href="#cb43-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>     <span class="op">}</span></span>
<span id="cb43-220"><a href="#cb43-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span> </span>
<span id="cb43-221"><a href="#cb43-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-222"><a href="#cb43-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> <span class="op">}</span></span>
<span id="cb43-223"><a href="#cb43-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> </span>
<span id="cb43-224"><a href="#cb43-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span> <span class="bu">std::</span>string to_string_pkg<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> arch_pkg<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span></span>
<span id="cb43-225"><a href="#cb43-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span> <span class="op">{</span></span>
<span id="cb43-226"><a href="#cb43-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> top        <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;TOP&quot;</span><span class="op">};</span></span>
<span id="cb43-227"><a href="#cb43-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>     <span class="kw">auto</span>              ss         <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-228"><a href="#cb43-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>     <span class="kw">auto</span>              indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb43-229"><a href="#cb43-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span> </span>
<span id="cb43-230"><a href="#cb43-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>     <span class="kw">auto</span> package   <span class="op">=</span> <span class="st">&quot;package  :&quot;</span><span class="op">;</span></span>
<span id="cb43-231"><a href="#cb43-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>     <span class="kw">auto</span> full      <span class="op">=</span> <span class="st">&quot;fullname :&quot;</span><span class="op">;</span></span>
<span id="cb43-232"><a href="#cb43-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>     <span class="kw">auto</span> parent    <span class="op">=</span> <span class="st">&quot;parent   :&quot;</span><span class="op">;</span></span>
<span id="cb43-233"><a href="#cb43-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     <span class="kw">auto</span> children  <span class="op">=</span> <span class="st">&quot;children : {&quot;</span><span class="op">;</span></span>
<span id="cb43-234"><a href="#cb43-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>     <span class="kw">auto</span> depend_on <span class="op">=</span> <span class="st">&quot;depend_on: {&quot;</span><span class="op">;</span></span>
<span id="cb43-235"><a href="#cb43-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span> </span>
<span id="cb43-236"><a href="#cb43-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>     <span class="kw">constexpr</span> <span class="kw">auto</span> next_indent <span class="op">=</span> <span class="dv">4</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb43-237"><a href="#cb43-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span> </span>
<span id="cb43-238"><a href="#cb43-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> package <span class="op">&lt;&lt;</span> arch_pkg<span class="op">.</span>Name<span class="op">()</span> <span class="op">&lt;&lt;</span> cyclic_str<span class="op">(</span>arch_pkg<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-239"><a href="#cb43-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> full <span class="op">&lt;&lt;</span> arch_pkg<span class="op">.</span>FullName<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-240"><a href="#cb43-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> parent <span class="op">&lt;&lt;</span> <span class="op">(</span>arch_pkg<span class="op">.</span>Parent<span class="op">()</span> <span class="op">?</span> arch_pkg<span class="op">.</span>Parent<span class="op">()-&gt;</span>Name<span class="op">()</span> <span class="op">:</span> top<span class="op">)</span></span>
<span id="cb43-241"><a href="#cb43-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>        <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-242"><a href="#cb43-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span> </span>
<span id="cb43-243"><a href="#cb43-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> depend_on<span class="op">;</span></span>
<span id="cb43-244"><a href="#cb43-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>     <span class="cf">if</span> <span class="op">(</span>arch_pkg<span class="op">.</span>DependOn<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-245"><a href="#cb43-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>         ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-246"><a href="#cb43-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>         ss <span class="op">&lt;&lt;</span> to_string_depend_on<span class="op">(</span>arch_pkg<span class="op">,</span> indent <span class="op">+</span> next_indent<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-247"><a href="#cb43-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>         ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-248"><a href="#cb43-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>     <span class="op">}</span></span>
<span id="cb43-249"><a href="#cb43-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-250"><a href="#cb43-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span>         ss <span class="op">&lt;&lt;</span> <span class="st">&quot; }&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-251"><a href="#cb43-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span>     <span class="op">}</span></span>
<span id="cb43-252"><a href="#cb43-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span> </span>
<span id="cb43-253"><a href="#cb43-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> children<span class="op">;</span></span>
<span id="cb43-254"><a href="#cb43-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>     <span class="cf">if</span> <span class="op">(</span>arch_pkg<span class="op">.</span>Children<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-255"><a href="#cb43-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>         ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-256"><a href="#cb43-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>         ss <span class="op">&lt;&lt;</span> ToStringArch<span class="op">(</span>arch_pkg<span class="op">.</span>Children<span class="op">(),</span> indent <span class="op">+</span> next_indent<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-257"><a href="#cb43-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span>         ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span><span class="op">;</span></span>
<span id="cb43-258"><a href="#cb43-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span>     <span class="op">}</span></span>
<span id="cb43-259"><a href="#cb43-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-260"><a href="#cb43-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span>         ss <span class="op">&lt;&lt;</span> <span class="st">&quot; }&quot;</span><span class="op">;</span></span>
<span id="cb43-261"><a href="#cb43-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>     <span class="op">}</span></span>
<span id="cb43-262"><a href="#cb43-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span> </span>
<span id="cb43-263"><a href="#cb43-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-264"><a href="#cb43-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span> <span class="op">}</span></span>
<span id="cb43-265"><a href="#cb43-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb43-266"><a href="#cb43-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span> </span>
<span id="cb43-267"><a href="#cb43-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span> <span class="bu">std::</span>string ToStringArch<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span></span>
<span id="cb43-268"><a href="#cb43-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span> <span class="op">{</span></span>
<span id="cb43-269"><a href="#cb43-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>     <span class="kw">auto</span> ss    <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-270"><a href="#cb43-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-271"><a href="#cb43-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span> </span>
<span id="cb43-272"><a href="#cb43-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pkg <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-273"><a href="#cb43-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-274"><a href="#cb43-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-275"><a href="#cb43-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span>         <span class="op">}</span></span>
<span id="cb43-276"><a href="#cb43-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>         ss <span class="op">&lt;&lt;</span> to_string_pkg<span class="op">(*</span>pkg<span class="op">,</span> indent<span class="op">);</span></span>
<span id="cb43-277"><a href="#cb43-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>     <span class="op">}</span></span>
<span id="cb43-278"><a href="#cb43-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span> </span>
<span id="cb43-279"><a href="#cb43-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-280"><a href="#cb43-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span> <span class="op">}</span></span>
<span id="cb43-281"><a href="#cb43-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span> </span>
<span id="cb43-282"><a href="#cb43-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb43-283"><a href="#cb43-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span> <span class="bu">std::</span>string to_pu_rectangle<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span></span>
<span id="cb43-284"><a href="#cb43-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span> <span class="op">{</span></span>
<span id="cb43-285"><a href="#cb43-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span>     <span class="kw">auto</span> ss         <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-286"><a href="#cb43-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>     <span class="kw">auto</span> indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb43-287"><a href="#cb43-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span> </span>
<span id="cb43-288"><a href="#cb43-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> pkg<span class="op">.</span>Name<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> as &quot;</span> <span class="op">&lt;&lt;</span> unique_str_name<span class="op">(</span>pkg<span class="op">.</span>FullName<span class="op">());</span></span>
<span id="cb43-289"><a href="#cb43-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span> </span>
<span id="cb43-290"><a href="#cb43-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>     <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>Children<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-291"><a href="#cb43-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>         ss <span class="op">&lt;&lt;</span> <span class="st">&quot; {&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-292"><a href="#cb43-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>         ss <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span>pkg<span class="op">.</span>Children<span class="op">(),</span> indent <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb43-293"><a href="#cb43-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span>         ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span><span class="op">;</span></span>
<span id="cb43-294"><a href="#cb43-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>     <span class="op">}</span></span>
<span id="cb43-295"><a href="#cb43-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span> </span>
<span id="cb43-296"><a href="#cb43-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-297"><a href="#cb43-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> <span class="op">}</span></span>
<span id="cb43-298"><a href="#cb43-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb43-299"><a href="#cb43-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span> </span>
<span id="cb43-300"><a href="#cb43-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span></span>
<span id="cb43-301"><a href="#cb43-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span> <span class="op">{</span></span>
<span id="cb43-302"><a href="#cb43-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>     <span class="kw">auto</span> ss    <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-303"><a href="#cb43-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-304"><a href="#cb43-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span> </span>
<span id="cb43-305"><a href="#cb43-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pkg <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-306"><a href="#cb43-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-307"><a href="#cb43-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-308"><a href="#cb43-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>         <span class="op">}</span></span>
<span id="cb43-309"><a href="#cb43-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>         ss <span class="op">&lt;&lt;</span> to_pu_rectangle<span class="op">(*</span>pkg<span class="op">,</span> indent<span class="op">);</span></span>
<span id="cb43-310"><a href="#cb43-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>     <span class="op">}</span></span>
<span id="cb43-311"><a href="#cb43-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span> </span>
<span id="cb43-312"><a href="#cb43-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-313"><a href="#cb43-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span> <span class="op">}</span></span>
<span id="cb43-314"><a href="#cb43-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span> </span>
<span id="cb43-315"><a href="#cb43-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb43-316"><a href="#cb43-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span> </span>
<span id="cb43-317"><a href="#cb43-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span> <span class="co">// 単方向依存のみ</span></span>
<span id="cb43-318"><a href="#cb43-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span> <span class="dt">bool</span> dep_is_cyclic<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> from<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> to<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-319"><a href="#cb43-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span> <span class="op">{</span></span>
<span id="cb43-320"><a href="#cb43-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>     ArchPkg <span class="at">const</span><span class="op">*</span> pkg_from <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> from<span class="op">);</span></span>
<span id="cb43-321"><a href="#cb43-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>     ArchPkg <span class="at">const</span><span class="op">*</span> pkg_to   <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> to<span class="op">);</span></span>
<span id="cb43-322"><a href="#cb43-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span> </span>
<span id="cb43-323"><a href="#cb43-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>     <span class="ot">assert</span><span class="op">(</span>pkg_from <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb43-324"><a href="#cb43-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>     <span class="ot">assert</span><span class="op">(</span>pkg_to <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb43-325"><a href="#cb43-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span> </span>
<span id="cb43-326"><a href="#cb43-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>     <span class="cf">return</span> pkg_from<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>pkg_to<span class="op">);</span></span>
<span id="cb43-327"><a href="#cb43-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span> <span class="op">}</span></span>
<span id="cb43-328"><a href="#cb43-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span> </span>
<span id="cb43-329"><a href="#cb43-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span> <span class="bu">std::</span>string_view pu_link_color<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> from<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> to<span class="op">,</span></span>
<span id="cb43-330"><a href="#cb43-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span>                                <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-331"><a href="#cb43-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span> <span class="op">{</span></span>
<span id="cb43-332"><a href="#cb43-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>     <span class="cf">return</span> dep_is_cyclic<span class="op">(</span>from<span class="op">,</span> to<span class="op">,</span> arch<span class="op">)</span> <span class="op">?</span> <span class="st">&quot;orange&quot;</span> <span class="op">:</span> <span class="st">&quot;green&quot;</span><span class="op">;</span></span>
<span id="cb43-333"><a href="#cb43-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span> <span class="op">}</span></span>
<span id="cb43-334"><a href="#cb43-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span> </span>
<span id="cb43-335"><a href="#cb43-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span> <span class="bu">std::</span>string to_pu_rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> dep_rel<span class="op">)</span></span>
<span id="cb43-336"><a href="#cb43-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span> <span class="op">{</span></span>
<span id="cb43-337"><a href="#cb43-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-338"><a href="#cb43-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span>     <span class="kw">auto</span> a  <span class="op">=</span> unique_str_name<span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">);</span></span>
<span id="cb43-339"><a href="#cb43-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span>     <span class="kw">auto</span> b  <span class="op">=</span> unique_str_name<span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">);</span></span>
<span id="cb43-340"><a href="#cb43-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span> </span>
<span id="cb43-341"><a href="#cb43-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span>     <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-342"><a href="#cb43-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>         ss <span class="op">&lt;&lt;</span> a <span class="op">&lt;&lt;</span> <span class="st">&quot; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountAtoB <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> &quot;</span><span class="op">;</span></span>
<span id="cb43-343"><a href="#cb43-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>         <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-344"><a href="#cb43-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>             ss <span class="op">&lt;&lt;</span> <span class="st">&quot;&lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountBtoA <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> &quot;</span> <span class="op">&lt;&lt;</span> b<span class="op">;</span></span>
<span id="cb43-345"><a href="#cb43-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span>         <span class="op">}</span></span>
<span id="cb43-346"><a href="#cb43-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-347"><a href="#cb43-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>             ss <span class="op">&lt;&lt;</span> <span class="st">&quot;-[#&quot;</span> <span class="op">&lt;&lt;</span> pu_link_color<span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">,</span> dep_rel<span class="op">.</span>PackageB<span class="op">,</span> arch<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;]-&gt; &quot;</span> <span class="op">&lt;&lt;</span> b<span class="op">;</span></span>
<span id="cb43-348"><a href="#cb43-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span>         <span class="op">}</span></span>
<span id="cb43-349"><a href="#cb43-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>     <span class="op">}</span></span>
<span id="cb43-350"><a href="#cb43-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-351"><a href="#cb43-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>         ss <span class="op">&lt;&lt;</span> b <span class="op">&lt;&lt;</span> <span class="st">&quot; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountBtoA <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> -[#&quot;</span></span>
<span id="cb43-352"><a href="#cb43-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span>            <span class="op">&lt;&lt;</span> pu_link_color<span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">,</span> dep_rel<span class="op">.</span>PackageA<span class="op">,</span> arch<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;]-&gt; &quot;</span> <span class="op">&lt;&lt;</span> a<span class="op">;</span></span>
<span id="cb43-353"><a href="#cb43-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>     <span class="op">}</span></span>
<span id="cb43-354"><a href="#cb43-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span> </span>
<span id="cb43-355"><a href="#cb43-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-356"><a href="#cb43-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span> <span class="op">}</span></span>
<span id="cb43-357"><a href="#cb43-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb43-358"><a href="#cb43-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span> </span>
<span id="cb43-359"><a href="#cb43-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span> <span class="dt">bool</span> HasCyclicDeps<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb43-360"><a href="#cb43-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span> <span class="op">{</span></span>
<span id="cb43-361"><a href="#cb43-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dep <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-362"><a href="#cb43-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>         <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-363"><a href="#cb43-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span>             <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-364"><a href="#cb43-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span>                 <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-365"><a href="#cb43-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>             <span class="op">}</span></span>
<span id="cb43-366"><a href="#cb43-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>             <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb43-367"><a href="#cb43-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>                 <span class="cf">if</span> <span class="op">(</span>dep_is_cyclic<span class="op">(</span>dep<span class="op">.</span>PackageA<span class="op">,</span> dep<span class="op">.</span>PackageB<span class="op">,</span> arch<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-368"><a href="#cb43-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span>                     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-369"><a href="#cb43-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>                 <span class="op">}</span></span>
<span id="cb43-370"><a href="#cb43-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span>             <span class="op">}</span></span>
<span id="cb43-371"><a href="#cb43-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>         <span class="op">}</span></span>
<span id="cb43-372"><a href="#cb43-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span>         <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-373"><a href="#cb43-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span>             <span class="cf">if</span> <span class="op">(</span>dep_is_cyclic<span class="op">(</span>dep<span class="op">.</span>PackageB<span class="op">,</span> dep<span class="op">.</span>PackageA<span class="op">,</span> arch<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-374"><a href="#cb43-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span>                 <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-375"><a href="#cb43-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span>             <span class="op">}</span></span>
<span id="cb43-376"><a href="#cb43-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>         <span class="op">}</span></span>
<span id="cb43-377"><a href="#cb43-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span>     <span class="op">}</span></span>
<span id="cb43-378"><a href="#cb43-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span> </span>
<span id="cb43-379"><a href="#cb43-379" aria-hidden="true" tabindex="-1"></a>        <span class="dv">379</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb43-380"><a href="#cb43-380" aria-hidden="true" tabindex="-1"></a>        <span class="dv">380</span> <span class="op">}</span></span>
<span id="cb43-381"><a href="#cb43-381" aria-hidden="true" tabindex="-1"></a>        <span class="dv">381</span> </span>
<span id="cb43-382"><a href="#cb43-382" aria-hidden="true" tabindex="-1"></a>        <span class="dv">382</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span></span>
<span id="cb43-383"><a href="#cb43-383" aria-hidden="true" tabindex="-1"></a>        <span class="dv">383</span> <span class="op">{</span></span>
<span id="cb43-384"><a href="#cb43-384" aria-hidden="true" tabindex="-1"></a>        <span class="dv">384</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb43-385"><a href="#cb43-385" aria-hidden="true" tabindex="-1"></a>        <span class="dv">385</span> </span>
<span id="cb43-386"><a href="#cb43-386" aria-hidden="true" tabindex="-1"></a>        <span class="dv">386</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb43-387"><a href="#cb43-387" aria-hidden="true" tabindex="-1"></a>        <span class="dv">387</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-388"><a href="#cb43-388" aria-hidden="true" tabindex="-1"></a>        <span class="dv">388</span>         <span class="kw">auto</span> rel_s <span class="op">=</span> to_pu_rectangle<span class="op">(</span>arch<span class="op">,</span> d<span class="op">);</span></span>
<span id="cb43-389"><a href="#cb43-389" aria-hidden="true" tabindex="-1"></a>        <span class="dv">389</span> </span>
<span id="cb43-390"><a href="#cb43-390" aria-hidden="true" tabindex="-1"></a>        <span class="dv">390</span>         <span class="cf">if</span> <span class="op">(</span>rel_s<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb43-391"><a href="#cb43-391" aria-hidden="true" tabindex="-1"></a>        <span class="dv">391</span>             <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-392"><a href="#cb43-392" aria-hidden="true" tabindex="-1"></a>        <span class="dv">392</span>                 ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb43-393"><a href="#cb43-393" aria-hidden="true" tabindex="-1"></a>        <span class="dv">393</span>             <span class="op">}</span></span>
<span id="cb43-394"><a href="#cb43-394" aria-hidden="true" tabindex="-1"></a>        <span class="dv">394</span>             ss <span class="op">&lt;&lt;</span> rel_s<span class="op">;</span></span>
<span id="cb43-395"><a href="#cb43-395" aria-hidden="true" tabindex="-1"></a>        <span class="dv">395</span>         <span class="op">}</span></span>
<span id="cb43-396"><a href="#cb43-396" aria-hidden="true" tabindex="-1"></a>        <span class="dv">396</span>     <span class="op">}</span></span>
<span id="cb43-397"><a href="#cb43-397" aria-hidden="true" tabindex="-1"></a>        <span class="dv">397</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb43-398"><a href="#cb43-398" aria-hidden="true" tabindex="-1"></a>        <span class="dv">398</span> <span class="op">}</span></span>
<span id="cb43-399"><a href="#cb43-399" aria-hidden="true" tabindex="-1"></a>        <span class="dv">399</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcarch_pkg.h">example/deps/dependency/src/arch_pkg.h
<a id="SS_23_2_7"></a></h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">class</span> ArchPkg<span class="op">;</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">using</span> <span class="dt">ArchPkgPtr_t</span> <span class="op">=</span> <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>ArchPkg<span class="op">&gt;;</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">using</span> <span class="dt">Arch_t</span>       <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="dt">ArchPkgPtr_t</span><span class="op">&gt;;</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">using</span> <span class="dt">ArchPkgs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>ArchPkg <span class="at">const</span><span class="op">*&gt;;</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="kw">class</span> ArchPkg <span class="op">{</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="kw">explicit</span> ArchPkg<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> full_name<span class="op">)</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         <span class="op">:</span> <span class="va">name_</span><span class="op">{</span>full_name<span class="op">.</span>filename<span class="op">()},</span> <span class="va">full_name_</span><span class="op">{</span>full_name<span class="op">}</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="op">{</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="op">}</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> Name<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">name_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     ArchPkg <span class="at">const</span><span class="op">*</span>     Parent<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">parent_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span>      Children<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">children_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="dt">ArchPkgs_t</span> <span class="at">const</span><span class="op">&amp;</span>  DependOn<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">depend_on_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="dt">bool</span>               IsCyclic<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="dt">bool</span>               IsCyclic<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> FullName<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">full_name_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     ArchPkg<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;)</span>            <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     ArchPkg<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span>ArchPkg <span class="at">const</span><span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="at">static</span> <span class="dt">Arch_t</span> GenArch<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> deps<span class="op">);</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="bu">std::</span>string <span class="at">const</span>                      <span class="va">name_</span><span class="op">;</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="bu">std::</span>string <span class="at">const</span>                      <span class="va">full_name_</span><span class="op">{};</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     ArchPkg <span class="at">const</span><span class="op">*</span>                         <span class="va">parent_</span><span class="op">{};</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="dt">Arch_t</span>                                 <span class="va">children_</span><span class="op">{};</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="dt">ArchPkgs_t</span>                             <span class="va">depend_on_</span><span class="op">{};</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="at">mutable</span> <span class="bu">std::</span>map<span class="op">&lt;</span>ArchPkg <span class="at">const</span><span class="op">*,</span> <span class="dt">bool</span><span class="op">&gt;</span> <span class="va">cyclic_</span><span class="op">{};</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">size_t</span>                <span class="va">max_depth_</span><span class="op">{</span><span class="dv">12</span><span class="op">};</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="dt">void</span> set_cyclic<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">*</span> pkg<span class="op">,</span> <span class="dt">bool</span> is_cyclic<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="kw">using</span> <span class="dt">Map_Path_ArchPkg_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">ArchPkgPtr_t</span><span class="op">&gt;;</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="at">static</span> <span class="dt">Map_Path_ArchPkg_t</span> build_depend_on<span class="op">(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span>   dep_rel<span class="op">,</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>                                               <span class="dt">Map_Path_ArchPkg_t</span><span class="op">&amp;&amp;</span> pkg_all<span class="op">);</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="at">static</span> <span class="dt">Arch_t</span>             build_children<span class="op">(</span><span class="dt">Map_Path_ArchPkg_t</span><span class="op">&amp;&amp;</span> pkg_all<span class="op">);</span></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="at">static</span> <span class="bu">std::</span>string        make_full_name<span class="op">(</span>ArchPkg <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">);</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="dt">bool</span>                      is_cyclic<span class="op">(</span><span class="dt">ArchPkgs_t</span><span class="op">&amp;</span> history<span class="op">,</span> <span class="dt">size_t</span> depth<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">};</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="bu">std::</span>string          ToStringArch<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">uint32_t</span> indent <span class="op">=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">)</span></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="op">{</span></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringArch<span class="op">(</span>arch<span class="op">);</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">}</span></span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">uint32_t</span> indent <span class="op">=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">);</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="dt">bool</span>        HasCyclicDeps<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> ArchPkg <span class="at">const</span><span class="op">*</span> FindArchPkgByName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="bu">std::</span>string_view pkg_name<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> ArchPkg <span class="at">const</span><span class="op">*</span> FindArchPkgByFullName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">,</span> <span class="bu">std::</span>string_view full_name<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_deps.cpp">example/deps/dependency/src/cpp_deps.cpp
<a id="SS_23_2_8"></a></h3>
<div class="sourceCode" id="cb45"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;memory&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">{</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="cf">return</span> <span class="bu">std::</span>tie<span class="op">(</span>lhs<span class="op">.</span>PackageA<span class="op">,</span> lhs<span class="op">.</span>CountAtoB<span class="op">,</span> lhs<span class="op">.</span>IncsAtoB<span class="op">,</span> lhs<span class="op">.</span>PackageB<span class="op">,</span> lhs<span class="op">.</span>CountBtoA<span class="op">,</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>                     lhs<span class="op">.</span>IncsBtoA<span class="op">)</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>            <span class="op">==</span> <span class="bu">std::</span>tie<span class="op">(</span>rhs<span class="op">.</span>PackageA<span class="op">,</span> rhs<span class="op">.</span>CountAtoB<span class="op">,</span> rhs<span class="op">.</span>IncsAtoB<span class="op">,</span> rhs<span class="op">.</span>PackageB<span class="op">,</span> rhs<span class="op">.</span>CountBtoA<span class="op">,</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>                        rhs<span class="op">.</span>IncsBtoA<span class="op">);</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="op">}</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>string ToStringDepRel<span class="op">(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> rep_rel<span class="op">)</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="op">{</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageA<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; -&gt; &quot;</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>        <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageB<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> rep_rel<span class="op">.</span>CountAtoB <span class="op">&lt;&lt;</span> <span class="st">&quot; &quot;</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>        <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>rep_rel<span class="op">.</span>IncsAtoB<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageB<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; -&gt; &quot;</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>        <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageA<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> rep_rel<span class="op">.</span>CountBtoA <span class="op">&lt;&lt;</span> <span class="st">&quot; &quot;</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>        <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>rep_rel<span class="op">.</span>IncsBtoA<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">);</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="bu">std::</span>string ToStringDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">{</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dep <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         <span class="op">}</span></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         ss <span class="op">&lt;&lt;</span> ToStringDepRel<span class="op">(</span>dep<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="op">}</span></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span></span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> DepRelation gen_DepRelation<span class="op">(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> dirA<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> dirB<span class="op">)</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="op">{</span></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="kw">auto</span> a_dep        <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>dirA<span class="op">.</span>DependsOn<span class="op">(</span>dirB<span class="op">)};</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="kw">auto</span> count_from_a <span class="op">=</span> a_dep<span class="op">.</span>first<span class="op">;</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="kw">auto</span> incs_from_a  <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(</span>a_dep<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> </span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">auto</span> b_dep        <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>dirB<span class="op">.</span>DependsOn<span class="op">(</span>dirA<span class="op">)};</span></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="kw">auto</span> count_from_b <span class="op">=</span> b_dep<span class="op">.</span>first<span class="op">;</span></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="kw">auto</span> incs_from_b  <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(</span>b_dep<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">if</span> <span class="op">(</span>dirA <span class="op">&lt;</span> dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         <span class="cf">return</span> DepRelation<span class="op">{</span>dirA<span class="op">.</span>Path<span class="op">(),</span> count_from_a<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_a<span class="op">),</span></span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>                            dirB<span class="op">.</span>Path<span class="op">(),</span> count_from_b<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_b<span class="op">)};</span></span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="op">}</span></span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         <span class="cf">return</span> DepRelation<span class="op">{</span>dirB<span class="op">.</span>Path<span class="op">(),</span> count_from_b<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_b<span class="op">),</span></span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>                            dirA<span class="op">.</span>Path<span class="op">(),</span> count_from_a<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_a<span class="op">)};</span></span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="op">}</span></span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="op">}</span></span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="dt">Dir2Dir_t</span> GenDir2Dir<span class="op">(</span><span class="bu">std::</span>string dirA<span class="op">,</span> <span class="bu">std::</span>string dirB<span class="op">)</span></span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="op">{</span></span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="cf">return</span> dirA <span class="op">&lt;</span> dirB <span class="op">?</span> <span class="bu">std::</span>make_pair<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirA<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirB<span class="op">))</span></span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>                        <span class="op">:</span> <span class="bu">std::</span>make_pair<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirB<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirA<span class="op">));</span></span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> <span class="op">}</span></span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="dt">DepRels_t</span> GenDepRels<span class="op">(</span><span class="dt">CppDirs_t</span> <span class="at">const</span><span class="op">&amp;</span> cpp_dirs<span class="op">)</span></span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">{</span></span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">DepRels_t</span><span class="op">{};</span></span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dirA <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dirB <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>             <span class="cf">if</span> <span class="op">(</span>dirA <span class="op">&lt;=</span> dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>                 <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>             <span class="op">}</span></span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>             ret<span class="op">.</span>emplace_back<span class="op">(</span>gen_DepRelation<span class="op">(</span>dirA<span class="op">,</span> dirB<span class="op">));</span></span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         <span class="op">}</span></span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="op">}</span></span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     ret<span class="op">.</span>sort<span class="op">();</span></span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="op">}</span></span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="dt">DepRels_t</span><span class="op">::</span>const_iterator FindDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirA<span class="op">,</span></span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>                                       <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirB<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="op">{</span></span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="ot">assert</span><span class="op">(</span>dirA <span class="op">!=</span> dirB<span class="op">);</span></span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="kw">auto</span> dirs <span class="op">=</span> <span class="bu">std::</span>minmax<span class="op">(</span>dirA<span class="op">,</span> dirB<span class="op">);</span></span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="cf">return</span> <span class="bu">std::</span>find_if<span class="op">(</span>dep_rels<span class="op">.</span>cbegin<span class="op">(),</span> dep_rels<span class="op">.</span>cend<span class="op">(),</span> <span class="op">[&amp;</span>dirs<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="cf">return</span> d<span class="op">.</span>PackageA <span class="op">==</span> dirs<span class="op">.</span>first <span class="op">&amp;&amp;</span> d<span class="op">.</span>PackageB <span class="op">==</span> dirs<span class="op">.</span>second<span class="op">;</span></span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="op">});</span></span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> <span class="op">}</span></span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_deps.h">example/deps/dependency/src/cpp_deps.h
<a id="SS_23_2_9"></a></h3>
<div class="sourceCode" id="cb46"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">struct</span> DepRelation <span class="op">{</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="kw">explicit</span> DepRelation<span class="op">(</span><span class="bu">std::</span>string package_a<span class="op">,</span> <span class="dt">uint32_t</span> count_a2b<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&amp;&amp;</span> incs_a2b<span class="op">,</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>                          <span class="bu">std::</span>string package_b<span class="op">,</span> <span class="dt">uint32_t</span> count_b2a<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&amp;&amp;</span> incs_b2a<span class="op">)</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>         <span class="op">:</span> PackageA<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>package_a<span class="op">)},</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>           CountAtoB<span class="op">{</span>count_a2b<span class="op">},</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>           IncsAtoB<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>incs_a2b<span class="op">)},</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>           PackageB<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>package_b<span class="op">)},</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>           CountBtoA<span class="op">{</span>count_b2a<span class="op">},</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>           IncsBtoA<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>incs_b2a<span class="op">)}</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="op">{</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="op">}</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="bu">std::</span>string <span class="at">const</span>        PackageA<span class="op">;</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="dt">uint32_t</span> <span class="at">const</span>           CountAtoB<span class="op">;</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> IncsAtoB<span class="op">;</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="bu">std::</span>string <span class="at">const</span>        PackageB<span class="op">;</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="dt">uint32_t</span> <span class="at">const</span>           CountBtoA<span class="op">;</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> IncsBtoA<span class="op">;</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="op">};</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="kw">using</span> <span class="dt">Dir2Dir_t</span> <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">,</span> <span class="bu">std::</span>string<span class="op">&gt;;</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="kw">using</span> <span class="dt">DepRels_t</span> <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span>DepRelation<span class="op">&gt;;</span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="bu">std::</span>string ToStringDepRel<span class="op">(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> rep_rel<span class="op">);</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="dt">bool</span>        <span class="kw">operator</span><span class="op">==(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">{</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="cf">return</span> <span class="op">!(</span>lhs <span class="op">==</span> rhs<span class="op">);</span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="op">}</span></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">{</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">return</span> lhs<span class="op">.</span>PackageA <span class="op">!=</span> rhs<span class="op">.</span>PackageA <span class="op">?</span> lhs<span class="op">.</span>PackageA <span class="op">&lt;</span> rhs<span class="op">.</span>PackageA <span class="op">:</span> lhs<span class="op">.</span>PackageB <span class="op">&lt;</span> rhs<span class="op">.</span>PackageB<span class="op">;</span></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;(</span>DepRelation <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> rhs <span class="op">&lt;</span> lhs<span class="op">;</span> <span class="op">}</span></span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> DepRelation <span class="at">const</span><span class="op">&amp;</span> dep_rel<span class="op">)</span></span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">{</span></span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepRel<span class="op">(</span>dep_rel<span class="op">);</span></span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">}</span></span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="dt">Dir2Dir_t</span> GenDir2Dir<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirA<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirB<span class="op">);</span></span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="bu">std::</span>string          ToStringDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">);</span></span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">{</span></span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepRels<span class="op">(</span>dep_rels<span class="op">);</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">}</span></span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="dt">DepRels_t</span>                 GenDepRels<span class="op">(</span><span class="dt">CppDirs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">);</span></span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="dt">DepRels_t</span><span class="op">::</span>const_iterator FindDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirA<span class="op">,</span></span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>                                       <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> dirB<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_dir.cpp">example/deps/dependency/src/cpp_dir.cpp
<a id="SS_23_2_10"></a></h3>
<div class="sourceCode" id="cb47"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="dt">bool</span> CppDir<span class="op">::</span>Contains<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> inc_path<span class="op">)</span> <span class="at">const</span> <span class="kw">noexcept</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="op">{</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> <span class="va">srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>         <span class="cf">if</span> <span class="op">(</span>src<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> inc_path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>         <span class="op">}</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="op">}</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">}</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> CppDir<span class="op">::</span>DependsOn<span class="op">(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> cpp_pack<span class="op">)</span> <span class="at">const</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="op">{</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">auto</span> count <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="kw">auto</span> incs  <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> <span class="va">srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> inc <span class="op">:</span> src<span class="op">.</span>GetIncs<span class="op">())</span> <span class="op">{</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>             <span class="cf">if</span> <span class="op">(</span>cpp_pack<span class="op">.</span>Contains<span class="op">(</span>inc<span class="op">))</span> <span class="op">{</span></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>                 incs<span class="op">.</span>push_back<span class="op">(</span>inc<span class="op">);</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>                 <span class="op">++</span>count<span class="op">;</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>             <span class="op">}</span></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         <span class="op">}</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="op">}</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     Nstd<span class="op">::</span>SortUnique<span class="op">(</span>incs<span class="op">);</span></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="cf">return</span> <span class="op">{</span>count<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs<span class="op">)};</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">}</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">{</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">return</span> <span class="bu">std::</span>tie<span class="op">(</span>lhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">srcs_</span><span class="op">)</span> <span class="op">==</span> <span class="bu">std::</span>tie<span class="op">(</span>rhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">srcs_</span><span class="op">);</span></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="op">{</span></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">return</span> <span class="bu">std::</span>tie<span class="op">(</span>lhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">srcs_</span><span class="op">)</span> <span class="op">&lt;</span> <span class="bu">std::</span>tie<span class="op">(</span>rhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">srcs_</span><span class="op">);</span></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="dt">CppDirs_t</span> GenCppDirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">)</span></span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="op">{</span></span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="kw">auto</span> cpp_src <span class="op">=</span> CppSrc<span class="op">{</span>src<span class="op">,</span> db<span class="op">};</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>         ret<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>cpp_src<span class="op">.</span>Filename<span class="op">(),</span> <span class="op">{</span>cpp_src<span class="op">}});</span></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="op">}</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span></span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="bu">std::</span>string ToStringCppDir<span class="op">(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> cpp_pack<span class="op">)</span></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="op">{</span></span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> </span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_pack<span class="op">.</span>Path<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> cpp_pack<span class="op">.</span>GetSrcs<span class="op">())</span> <span class="op">{</span></span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         <span class="cf">if</span> <span class="op">(</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>             first <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         <span class="op">}</span></span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         <span class="op">}</span></span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         ss <span class="op">&lt;&lt;</span> ToStringCppSrc<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="op">}</span></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="op">}</span></span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_dir.h">example/deps/dependency/src/cpp_dir.h
<a id="SS_23_2_11"></a></h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">class</span> CppDir <span class="op">{</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">explicit</span> CppDir<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> path<span class="op">,</span> <span class="dt">CppSrcs_t</span><span class="op">&amp;&amp;</span> srcs<span class="op">)</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>         <span class="op">:</span> <span class="va">path_</span><span class="op">{</span>path<span class="op">},</span> <span class="va">srcs_</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>srcs<span class="op">)}</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">{</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="op">}</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> Path<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">path_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="dt">bool</span>                     Contains<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> inc_path<span class="op">)</span> <span class="at">const</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="co">// first  依存するヘッダファイルのインクルード数</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="co">// second 依存するヘッダファイル</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> DependsOn<span class="op">(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> cpp_pack<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="dt">CppSrcs_t</span> <span class="at">const</span><span class="op">&amp;</span>                        GetSrcs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">srcs_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">path_</span><span class="op">;</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="dt">CppSrcs_t</span> <span class="at">const</span>         <span class="va">srcs_</span><span class="op">;</span></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="op">};</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;=(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="op">{</span></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="cf">if</span> <span class="op">(</span>lhs <span class="op">==</span> rhs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="op">}</span></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">return</span> lhs <span class="op">&lt;</span> rhs<span class="op">;</span></span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">}</span></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">!(</span>lhs <span class="op">==</span> rhs<span class="op">);</span> <span class="op">}</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> rhs <span class="op">&lt;</span> lhs<span class="op">;</span> <span class="op">}</span></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;=(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> rhs <span class="op">&lt;=</span> lhs<span class="op">;</span> <span class="op">}</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="kw">using</span> <span class="dt">CppDirs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>CppDir<span class="op">&gt;;</span></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="dt">CppDirs_t</span> GenCppDirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">);</span></span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="bu">std::</span>string          ToStringCppDir<span class="op">(</span>CppDir <span class="at">const</span><span class="op">&amp;</span> cpp_pack<span class="op">);</span></span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> CppDir <span class="at">const</span><span class="op">&amp;</span> dir<span class="op">)</span></span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="op">{</span></span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringCppDir<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="op">}</span></span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_src.cpp">example/deps/dependency/src/cpp_src.cpp
<a id="SS_23_2_12"></a></h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> get_incs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> src<span class="op">)</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="op">{</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> include_line <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*#include\s+[&quot;&lt;]([\w/.]+)[&quot;&gt;](.*)</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="kw">auto</span> ret  <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="kw">auto</span> f    <span class="op">=</span> <span class="bu">std::</span>ifstream<span class="op">{</span>src<span class="op">};</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>f<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>         <span class="cf">if</span> <span class="op">(</span>line<span class="op">.</span>size<span class="op">()</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span>  <span class="co">// CRLF対策</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>             <span class="kw">auto</span> last <span class="op">=</span> <span class="op">--</span>line<span class="op">.</span>end<span class="op">();</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>             <span class="cf">if</span> <span class="op">(*</span>last <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\xa</span><span class="ch">&#39;</span> <span class="op">||</span> <span class="op">*</span>last <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\xd</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>                 line<span class="op">.</span>erase<span class="op">(</span>last<span class="op">);</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>             <span class="op">}</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>         <span class="op">}</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span> <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> include_line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>             ret<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">()).</span>filename<span class="op">());</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="op">}</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="dt">void</span> get_incs_full<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> src<span class="op">,</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>                    FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&amp;</span> incs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&amp;</span> not_found<span class="op">,</span> <span class="dt">bool</span> sort_uniq<span class="op">)</span></span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">{</span></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="kw">auto</span> <span class="at">const</span> inc_files <span class="op">=</span> get_incs<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> f <span class="op">:</span> inc_files<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         <span class="cf">if</span> <span class="op">(</span>db<span class="op">.</span>count<span class="op">(</span>f<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>             not_found<span class="op">.</span>push_back<span class="op">(</span>f<span class="op">);</span></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         <span class="op">}</span></span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>             <span class="kw">auto</span> full_path <span class="op">=</span> db<span class="op">.</span>at<span class="op">(</span>f<span class="op">);</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>             <span class="cf">if</span> <span class="op">(!</span>any_of<span class="op">(</span></span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>                     incs<span class="op">.</span>cbegin<span class="op">(),</span> incs<span class="op">.</span>cend<span class="op">(),</span></span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                     <span class="op">[&amp;</span>full_path<span class="op">](</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> p<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> p <span class="op">==</span> full_path<span class="op">;</span> <span class="op">}))</span> <span class="op">{</span></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>                 incs<span class="op">.</span>emplace_back<span class="op">(</span>full_path<span class="op">);</span></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>                 get_incs_full<span class="op">(</span>db<span class="op">,</span> full_path<span class="op">,</span> incs<span class="op">,</span> not_found<span class="op">,</span> <span class="kw">false</span><span class="op">);</span></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>             <span class="op">}</span></span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         <span class="op">}</span></span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="op">}</span></span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="cf">if</span> <span class="op">(</span>sort_uniq<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>         Nstd<span class="op">::</span>SortUnique<span class="op">(</span>incs<span class="op">);</span></span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>         Nstd<span class="op">::</span>SortUnique<span class="op">(</span>not_found<span class="op">);</span></span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="op">}</span></span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="op">}</span></span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> CppSrc<span class="op">::</span>CppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> pathname<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">)</span></span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="op">:</span> <span class="va">path_</span><span class="op">{</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>pathname<span class="op">)},</span></span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>       <span class="va">filename_</span><span class="op">{</span><span class="va">path_</span><span class="op">.</span>filename<span class="op">()},</span></span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>       <span class="va">incs_</span><span class="op">{},</span></span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>       <span class="va">not_found_</span><span class="op">{}</span></span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="op">{</span></span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     get_incs_full<span class="op">(</span>db<span class="op">,</span> pathname<span class="op">,</span> <span class="va">incs_</span><span class="op">,</span> <span class="va">not_found_</span><span class="op">,</span> <span class="kw">true</span><span class="op">);</span></span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="op">}</span></span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> <span class="op">{</span></span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="cf">return</span> <span class="bu">std::</span>tie<span class="op">(</span>lhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">filename_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">incs_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">not_found_</span><span class="op">)</span></span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>            <span class="op">==</span> <span class="bu">std::</span>tie<span class="op">(</span>rhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">filename_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">incs_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">not_found_</span><span class="op">);</span></span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="op">}</span></span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="op">{</span></span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="cf">return</span> <span class="bu">std::</span>tie<span class="op">(</span>lhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">filename_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">incs_</span><span class="op">,</span> lhs<span class="op">.</span><span class="va">not_found_</span><span class="op">)</span></span>
<span id="cb49-83"><a href="#cb49-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>            <span class="op">&lt;</span> <span class="bu">std::</span>tie<span class="op">(</span>rhs<span class="op">.</span><span class="va">path_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">filename_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">incs_</span><span class="op">,</span> rhs<span class="op">.</span><span class="va">not_found_</span><span class="op">);</span></span>
<span id="cb49-84"><a href="#cb49-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="op">}</span></span>
<span id="cb49-85"><a href="#cb49-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb49-86"><a href="#cb49-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> <span class="dt">CppSrcs_t</span> GenCppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">)</span></span>
<span id="cb49-87"><a href="#cb49-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> <span class="op">{</span></span>
<span id="cb49-88"><a href="#cb49-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">CppSrcs_t</span><span class="op">{};</span></span>
<span id="cb49-89"><a href="#cb49-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb49-90"><a href="#cb49-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-91"><a href="#cb49-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         ret<span class="op">.</span>emplace_back<span class="op">(</span>CppSrc<span class="op">{</span>src<span class="op">,</span> db<span class="op">});</span></span>
<span id="cb49-92"><a href="#cb49-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="op">}</span></span>
<span id="cb49-93"><a href="#cb49-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb49-94"><a href="#cb49-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb49-95"><a href="#cb49-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="op">}</span></span>
<span id="cb49-96"><a href="#cb49-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb49-97"><a href="#cb49-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="bu">std::</span>string ToStringCppSrc<span class="op">(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> cpp_src<span class="op">)</span></span>
<span id="cb49-98"><a href="#cb49-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> <span class="op">{</span></span>
<span id="cb49-99"><a href="#cb49-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb49-100"><a href="#cb49-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb49-101"><a href="#cb49-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;file              : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_src<span class="op">.</span>Filename<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb49-102"><a href="#cb49-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;path              : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_src<span class="op">.</span>Path<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb49-103"><a href="#cb49-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;include           : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>cpp_src<span class="op">.</span>GetIncs<span class="op">(),</span> <span class="st">&quot; &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb49-104"><a href="#cb49-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot;include not found : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>cpp_src<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="st">&quot; &quot;</span><span class="op">)</span></span>
<span id="cb49-105"><a href="#cb49-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>        <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb49-106"><a href="#cb49-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb49-107"><a href="#cb49-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb49-108"><a href="#cb49-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">}</span></span>
<span id="cb49-109"><a href="#cb49-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb49-110"><a href="#cb49-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb49-111"><a href="#cb49-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="kw">constexpr</span> <span class="bu">std::</span>string_view target_ext<span class="op">[]{</span><span class="st">&quot;.c&quot;</span><span class="op">,</span> <span class="st">&quot;.h&quot;</span><span class="op">,</span> <span class="st">&quot;.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;.cc&quot;</span><span class="op">,</span> <span class="st">&quot;.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;.hxx&quot;</span><span class="op">,</span> <span class="st">&quot;.tcc&quot;</span><span class="op">};</span></span>
<span id="cb49-112"><a href="#cb49-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb49-113"><a href="#cb49-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="dt">bool</span> is_c_or_cpp<span class="op">(</span><span class="bu">std::</span>string ext<span class="op">)</span></span>
<span id="cb49-114"><a href="#cb49-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">{</span></span>
<span id="cb49-115"><a href="#cb49-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="bu">std::</span>transform<span class="op">(</span>ext<span class="op">.</span>begin<span class="op">(),</span> ext<span class="op">.</span>end<span class="op">(),</span> ext<span class="op">.</span>begin<span class="op">(),</span> <span class="op">::</span>tolower<span class="op">);</span></span>
<span id="cb49-116"><a href="#cb49-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb49-117"><a href="#cb49-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>any_of<span class="op">(</span><span class="bu">std::</span>begin<span class="op">(</span>target_ext<span class="op">),</span> <span class="bu">std::</span>end<span class="op">(</span>target_ext<span class="op">),</span></span>
<span id="cb49-118"><a href="#cb49-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                     <span class="op">[&amp;</span>ext<span class="op">](</span><span class="bu">std::</span>string_view s<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> s <span class="op">==</span> ext<span class="op">;</span> <span class="op">}))</span> <span class="op">{</span></span>
<span id="cb49-119"><a href="#cb49-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb49-120"><a href="#cb49-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     <span class="op">}</span></span>
<span id="cb49-121"><a href="#cb49-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb49-122"><a href="#cb49-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb49-123"><a href="#cb49-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> <span class="op">}</span></span>
<span id="cb49-124"><a href="#cb49-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb49-125"><a href="#cb49-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> top_dir<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">)</span></span>
<span id="cb49-126"><a href="#cb49-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> <span class="op">{</span></span>
<span id="cb49-127"><a href="#cb49-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">auto</span> dirs           <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>top_dir<span class="op">};</span></span>
<span id="cb49-128"><a href="#cb49-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>     <span class="kw">auto</span> <span class="at">const</span> top_dir2 <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">};</span>  <span class="co">// top_dirが&quot;.&quot;の場合、parent_path()は&quot;&quot;になる}。</span></span>
<span id="cb49-129"><a href="#cb49-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> </span>
<span id="cb49-130"><a href="#cb49-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-131"><a href="#cb49-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> dir <span class="op">=</span> src<span class="op">.</span>parent_path<span class="op">();</span> dir <span class="op">!=</span> top_dir <span class="op">&amp;&amp;</span> dir <span class="op">!=</span> top_dir2<span class="op">;</span></span>
<span id="cb49-132"><a href="#cb49-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>              dir      <span class="op">=</span> dir<span class="op">.</span>parent_path<span class="op">())</span> <span class="op">{</span></span>
<span id="cb49-133"><a href="#cb49-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>             dirs<span class="op">.</span>push_back<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb49-134"><a href="#cb49-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>         <span class="op">}</span></span>
<span id="cb49-135"><a href="#cb49-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="op">}</span></span>
<span id="cb49-136"><a href="#cb49-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb49-137"><a href="#cb49-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>     <span class="cf">return</span> dirs<span class="op">;</span></span>
<span id="cb49-138"><a href="#cb49-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="op">}</span></span>
<span id="cb49-139"><a href="#cb49-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> </span>
<span id="cb49-140"><a href="#cb49-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> find_c_or_cpp_srcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> top_path<span class="op">)</span></span>
<span id="cb49-141"><a href="#cb49-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="op">{</span></span>
<span id="cb49-142"><a href="#cb49-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb49-143"><a href="#cb49-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb49-144"><a href="#cb49-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     <span class="kw">namespace</span> fs <span class="op">=</span> <span class="bu">std::</span>filesystem<span class="op">;</span></span>
<span id="cb49-145"><a href="#cb49-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="cf">for</span> <span class="op">(</span>fs<span class="op">::</span>path <span class="at">const</span><span class="op">&amp;</span> p <span class="op">:</span> fs<span class="op">::</span>recursive_directory_iterator<span class="op">{</span>top_path<span class="op">})</span> <span class="op">{</span></span>
<span id="cb49-146"><a href="#cb49-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="cf">if</span> <span class="op">(</span>fs<span class="op">::</span>is_regular_file<span class="op">(</span>p<span class="op">)</span> <span class="op">&amp;&amp;</span> is_c_or_cpp<span class="op">(</span>p<span class="op">.</span>extension<span class="op">()))</span> <span class="op">{</span></span>
<span id="cb49-147"><a href="#cb49-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>             srcs<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>p<span class="op">));</span></span>
<span id="cb49-148"><a href="#cb49-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>         <span class="op">}</span></span>
<span id="cb49-149"><a href="#cb49-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="op">}</span></span>
<span id="cb49-150"><a href="#cb49-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> </span>
<span id="cb49-151"><a href="#cb49-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="cf">return</span> srcs<span class="op">;</span></span>
<span id="cb49-152"><a href="#cb49-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="op">}</span></span>
<span id="cb49-153"><a href="#cb49-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb49-154"><a href="#cb49-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span> </span>
<span id="cb49-155"><a href="#cb49-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> GetCppDirsSrcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">)</span></span>
<span id="cb49-156"><a href="#cb49-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> <span class="op">{</span></span>
<span id="cb49-157"><a href="#cb49-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     <span class="kw">auto</span> dirs_srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb49-158"><a href="#cb49-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>     <span class="kw">auto</span> srcs      <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb49-159"><a href="#cb49-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span> </span>
<span id="cb49-160"><a href="#cb49-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-161"><a href="#cb49-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>         FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> top_path      <span class="op">=</span> FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb49-162"><a href="#cb49-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>         <span class="kw">auto</span>                    sub_srcs      <span class="op">=</span> find_c_or_cpp_srcs<span class="op">(</span>top_path<span class="op">);</span></span>
<span id="cb49-163"><a href="#cb49-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>         <span class="kw">auto</span>                    sub_dirs_srcs <span class="op">=</span> gen_dirs<span class="op">(</span>top_path<span class="op">,</span> sub_srcs<span class="op">);</span></span>
<span id="cb49-164"><a href="#cb49-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb49-165"><a href="#cb49-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>         Nstd<span class="op">::</span>Concatenate<span class="op">(</span>srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>sub_srcs<span class="op">));</span></span>
<span id="cb49-166"><a href="#cb49-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs_srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>sub_dirs_srcs<span class="op">));</span></span>
<span id="cb49-167"><a href="#cb49-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>     <span class="op">}</span></span>
<span id="cb49-168"><a href="#cb49-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> </span>
<span id="cb49-169"><a href="#cb49-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>     Nstd<span class="op">::</span>SortUnique<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb49-170"><a href="#cb49-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     Nstd<span class="op">::</span>SortUnique<span class="op">(</span>dirs_srcs<span class="op">);</span></span>
<span id="cb49-171"><a href="#cb49-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb49-172"><a href="#cb49-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>     <span class="cf">return</span> <span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs_srcs<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>srcs<span class="op">)};</span></span>
<span id="cb49-173"><a href="#cb49-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> <span class="op">}</span></span>
<span id="cb49-174"><a href="#cb49-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_src.h">example/deps/dependency/src/cpp_src.h
<a id="SS_23_2_13"></a></h3>
<div class="sourceCode" id="cb50"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">class</span> CppSrc <span class="op">{</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">explicit</span> CppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> pathname<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">);</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> GetIncs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">incs_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> GetIncsNotFound<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">not_found_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span>  Filename<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">filename_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span>  Path<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">path_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">path_</span><span class="op">;</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">filename_</span><span class="op">;</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span>      <span class="va">incs_</span><span class="op">;</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span>      <span class="va">not_found_</span><span class="op">;</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="op">};</span></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">!(</span>lhs <span class="op">==</span> rhs<span class="op">);</span> <span class="op">}</span></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="kw">inline</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> lhs<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="op">{</span></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="cf">if</span> <span class="op">(</span>lhs <span class="op">&lt;</span> rhs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>         <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="op">}</span></span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="cf">return</span> lhs <span class="op">!=</span> rhs<span class="op">;</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="kw">using</span> <span class="dt">CppSrcs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>CppSrc<span class="op">&gt;;</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="dt">CppSrcs_t</span>   GenCppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span><span class="op">&amp;</span> db<span class="op">);</span></span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="bu">std::</span>string ToStringCppSrc<span class="op">(</span>CppSrc <span class="at">const</span><span class="op">&amp;</span> cpp_src<span class="op">);</span></span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> CppSrc <span class="at">const</span><span class="op">&amp;</span> cpp_src<span class="op">)</span></span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">{</span></span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringCppSrc<span class="op">(</span>cpp_src<span class="op">);</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="co">// first  dirs配下のソースファイルを含むディレクトリ</span></span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="co">// second dirs配下のソースファイル</span></span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> GetCppDirsSrcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">);</span></span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcdeps_scenario.cpp">example/deps/dependency/src/deps_scenario.cpp
<a id="SS_23_2_14"></a></h3>
<div class="sourceCode" id="cb51"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;stdexcept&gt;</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;arch_pkg.h&quot;  // 実装用ヘッダファイル</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;cpp_deps.h&quot;                  // 実装用ヘッダファイル</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="er">#include &quot;cpp_dir.h&quot;                   // 実装用ヘッダファイル</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="er">#include &quot;cpp_src.h&quot;                   // 実装用ヘッダファイル</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot;  // dependencyパッケージからのインポート</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="er">#include &quot;file_utils/load_store.h&quot;     // file_utilsパッケージからのインポート</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="er">#include &quot;lib/nstd.h&quot;                  // libパッケージからのインポート</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="co">// @@@ sample end</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="dt">bool</span> has_error_for_dir<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">)</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="op">{</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="cf">if</span> <span class="op">(</span>dirs<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>         <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;need directories to generate package&quot;</span><span class="op">};</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="op">}</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="kw">auto</span> not_dirs <span class="op">=</span> FileUtils<span class="op">::</span>NotDirs<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="cf">if</span> <span class="op">(</span>not_dirs<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>not_dirs<span class="op">)</span> <span class="op">+</span> <span class="st">&quot; not directory&quot;</span><span class="op">};</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> remove_dirs_match_pattern<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&amp;&amp;</span> dirs<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">{</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="cf">if</span> <span class="op">(</span>pattern<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>         <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="op">}</span></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="kw">auto</span> <span class="at">const</span> re_pattern <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span>pattern<span class="op">};</span></span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     dirs<span class="op">.</span>remove_if<span class="op">([&amp;</span>re_pattern<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         <span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         <span class="kw">auto</span> d_str   <span class="op">=</span> d<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>         <span class="cf">return</span> <span class="bu">std::</span>regex_match<span class="op">(</span>d_str<span class="op">,</span> results<span class="op">,</span> re_pattern<span class="op">);</span></span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="op">});</span></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">}</span></span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="co">// first  dirs配下のソースファイルを含むディレクトリ(パッケージ)</span></span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="co">// second 上記パッケージに含まれるソースファイル</span></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> gen_dirs_and_dirs2srcs<span class="op">(</span></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">{</span></span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">auto</span> ret      <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>GetCppDirsSrcs<span class="op">(</span>dirs<span class="op">)};</span></span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="kw">auto</span> srcs     <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>recursive <span class="op">?</span> <span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)</span> <span class="op">:</span> dirs<span class="op">};</span></span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     dirs_pkg <span class="op">=</span> remove_dirs_match_pattern<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirs_pkg<span class="op">),</span> pattern<span class="op">);</span></span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span>FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs_pkg<span class="op">,</span> srcs<span class="op">)};</span></span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> </span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="cf">return</span> <span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs_pkg<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">)};</span></span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> <span class="op">}</span></span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb51-70"><a href="#cb51-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>                             <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-71"><a href="#cb51-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="op">{</span></span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="kw">auto</span> dirs2srcs <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         gen_dirs_and_dirs2srcs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">)};</span></span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">auto</span> assign   <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> dir <span class="op">:</span> dirs_pkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         <span class="cf">if</span> <span class="op">(</span>assign<span class="op">.</span>count<span class="op">(</span>dir<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>             <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> dir <span class="op">&lt;&lt;</span> <span class="st">&quot; not including C++ files&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>         <span class="op">}</span></span>
<span id="cb51-83"><a href="#cb51-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb51-84"><a href="#cb51-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>             ret<span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dir<span class="op">));</span></span>
<span id="cb51-85"><a href="#cb51-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>         <span class="op">}</span></span>
<span id="cb51-86"><a href="#cb51-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="op">}</span></span>
<span id="cb51-87"><a href="#cb51-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb51-88"><a href="#cb51-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb51-89"><a href="#cb51-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">}</span></span>
<span id="cb51-90"><a href="#cb51-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> </span>
<span id="cb51-91"><a href="#cb51-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb51-92"><a href="#cb51-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>                             FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-93"><a href="#cb51-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> <span class="op">{</span></span>
<span id="cb51-94"><a href="#cb51-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="kw">auto</span> dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb51-95"><a href="#cb51-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb51-96"><a href="#cb51-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-97"><a href="#cb51-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>         <span class="kw">auto</span> ret <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb51-98"><a href="#cb51-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>         <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-99"><a href="#cb51-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>             <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>in <span class="op">+</span> <span class="st">&quot; is illegal&quot;</span><span class="op">};</span></span>
<span id="cb51-100"><a href="#cb51-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>         <span class="op">}</span></span>
<span id="cb51-101"><a href="#cb51-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>         dirs <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb51-102"><a href="#cb51-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="op">}</span></span>
<span id="cb51-103"><a href="#cb51-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb51-104"><a href="#cb51-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">(</span>dirs_opt<span class="op">));</span></span>
<span id="cb51-105"><a href="#cb51-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb51-106"><a href="#cb51-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="cf">if</span> <span class="op">(</span>has_error_for_dir<span class="op">(</span>dirs<span class="op">))</span> <span class="op">{</span></span>
<span id="cb51-107"><a href="#cb51-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         <span class="cf">return</span> dirs<span class="op">;</span></span>
<span id="cb51-108"><a href="#cb51-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="op">}</span></span>
<span id="cb51-109"><a href="#cb51-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb51-110"><a href="#cb51-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="cf">return</span> gen_dirs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb51-111"><a href="#cb51-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="op">}</span></span>
<span id="cb51-112"><a href="#cb51-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb51-113"><a href="#cb51-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="dt">bool</span> includes<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> dir<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb51-114"><a href="#cb51-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">{</span></span>
<span id="cb51-115"><a href="#cb51-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="kw">auto</span> <span class="at">const</span> count</span>
<span id="cb51-116"><a href="#cb51-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         <span class="op">=</span> <span class="bu">std::</span>count_if<span class="op">(</span>dirs<span class="op">.</span>cbegin<span class="op">(),</span> dirs<span class="op">.</span>cend<span class="op">(),</span></span>
<span id="cb51-117"><a href="#cb51-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>                         <span class="op">[&amp;</span>dir<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dir_in_dirs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> dir_in_dirs <span class="op">==</span> dir<span class="op">;</span> <span class="op">});</span></span>
<span id="cb51-118"><a href="#cb51-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb51-119"><a href="#cb51-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="cf">return</span> count <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-120"><a href="#cb51-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="op">}</span></span>
<span id="cb51-121"><a href="#cb51-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb51-122"><a href="#cb51-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> dirs2srcs_to_src2src<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span>    dirs_opt<span class="op">,</span></span>
<span id="cb51-123"><a href="#cb51-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>                                             FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> dirs2srcs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">)</span></span>
<span id="cb51-124"><a href="#cb51-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> <span class="op">{</span></span>
<span id="cb51-125"><a href="#cb51-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb51-126"><a href="#cb51-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb51-127"><a href="#cb51-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pair <span class="op">:</span> dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-128"><a href="#cb51-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> pair<span class="op">.</span>second<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-129"><a href="#cb51-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>             <span class="cf">if</span> <span class="op">(</span>recursive<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-130"><a href="#cb51-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>                 ret<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>src<span class="op">.</span>filename<span class="op">(),</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>src<span class="op">}));</span></span>
<span id="cb51-131"><a href="#cb51-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>             <span class="op">}</span></span>
<span id="cb51-132"><a href="#cb51-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>             <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb51-133"><a href="#cb51-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>                 <span class="cf">if</span> <span class="op">(</span>includes<span class="op">(</span>dirs_opt<span class="op">,</span> pair<span class="op">.</span>first<span class="op">))</span> <span class="op">{</span></span>
<span id="cb51-134"><a href="#cb51-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>                     <span class="kw">auto</span> dir <span class="op">=</span> FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>src<span class="op">.</span>parent_path<span class="op">());</span></span>
<span id="cb51-135"><a href="#cb51-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> </span>
<span id="cb51-136"><a href="#cb51-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>                     <span class="cf">if</span> <span class="op">(</span>dir <span class="op">==</span> pair<span class="op">.</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-137"><a href="#cb51-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>                         ret<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>src<span class="op">.</span>filename<span class="op">(),</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>src<span class="op">}));</span></span>
<span id="cb51-138"><a href="#cb51-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>                     <span class="op">}</span></span>
<span id="cb51-139"><a href="#cb51-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>                 <span class="op">}</span></span>
<span id="cb51-140"><a href="#cb51-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>             <span class="op">}</span></span>
<span id="cb51-141"><a href="#cb51-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>         <span class="op">}</span></span>
<span id="cb51-142"><a href="#cb51-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="op">}</span></span>
<span id="cb51-143"><a href="#cb51-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb51-144"><a href="#cb51-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb51-145"><a href="#cb51-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> <span class="op">}</span></span>
<span id="cb51-146"><a href="#cb51-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span> </span>
<span id="cb51-147"><a href="#cb51-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> gen_dirs2srcs<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb51-148"><a href="#cb51-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>                                      FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-149"><a href="#cb51-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> <span class="op">{</span></span>
<span id="cb51-150"><a href="#cb51-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb51-151"><a href="#cb51-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="kw">auto</span> dirs      <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb51-152"><a href="#cb51-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> </span>
<span id="cb51-153"><a href="#cb51-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-154"><a href="#cb51-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>         <span class="kw">using</span> FileUtils<span class="op">::</span>LoadFromFile<span class="op">;</span></span>
<span id="cb51-155"><a href="#cb51-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>         <span class="kw">auto</span> ret <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb51-156"><a href="#cb51-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> </span>
<span id="cb51-157"><a href="#cb51-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>         <span class="cf">if</span> <span class="op">(</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-158"><a href="#cb51-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>             <span class="cf">if</span> <span class="op">(</span>dirs_opt<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-159"><a href="#cb51-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                 <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;DIRS ignored.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-160"><a href="#cb51-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>             <span class="op">}</span></span>
<span id="cb51-161"><a href="#cb51-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> </span>
<span id="cb51-162"><a href="#cb51-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>             <span class="cf">if</span> <span class="op">(</span>recursive<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-163"><a href="#cb51-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>                 <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;option </span><span class="sc">\&quot;</span><span class="st">recursive</span><span class="sc">\&quot;</span><span class="st"> ignored.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-164"><a href="#cb51-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>             <span class="op">}</span></span>
<span id="cb51-165"><a href="#cb51-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>             <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb51-166"><a href="#cb51-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         <span class="op">}</span></span>
<span id="cb51-167"><a href="#cb51-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb51-168"><a href="#cb51-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>             <span class="kw">auto</span> ret <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb51-169"><a href="#cb51-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> </span>
<span id="cb51-170"><a href="#cb51-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>             <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-171"><a href="#cb51-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>                 <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>in <span class="op">+</span> <span class="st">&quot; is illegal&quot;</span><span class="op">};</span></span>
<span id="cb51-172"><a href="#cb51-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>             <span class="op">}</span></span>
<span id="cb51-173"><a href="#cb51-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>             dirs <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb51-174"><a href="#cb51-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="op">}</span></span>
<span id="cb51-175"><a href="#cb51-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>     <span class="op">}</span></span>
<span id="cb51-176"><a href="#cb51-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> </span>
<span id="cb51-177"><a href="#cb51-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">(</span>dirs_opt<span class="op">));</span></span>
<span id="cb51-178"><a href="#cb51-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span> </span>
<span id="cb51-179"><a href="#cb51-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>     <span class="cf">if</span> <span class="op">(</span>has_error_for_dir<span class="op">(</span>dirs<span class="op">))</span> <span class="op">{</span></span>
<span id="cb51-180"><a href="#cb51-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>         <span class="cf">return</span> dirs2srcs<span class="op">;</span></span>
<span id="cb51-181"><a href="#cb51-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     <span class="op">}</span></span>
<span id="cb51-182"><a href="#cb51-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span> </span>
<span id="cb51-183"><a href="#cb51-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>     <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> ret</span>
<span id="cb51-184"><a href="#cb51-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>         <span class="op">=</span> gen_dirs_and_dirs2srcs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb51-185"><a href="#cb51-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb51-186"><a href="#cb51-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb51-187"><a href="#cb51-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="kw">auto</span> assign   <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb51-188"><a href="#cb51-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> </span>
<span id="cb51-189"><a href="#cb51-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>     <span class="cf">return</span> src_as_pkg <span class="op">?</span> dirs2srcs_to_src2src<span class="op">(</span>dirs_opt<span class="op">,</span> assign<span class="op">,</span> recursive<span class="op">)</span> <span class="op">:</span> assign<span class="op">;</span></span>
<span id="cb51-190"><a href="#cb51-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> <span class="op">}</span></span>
<span id="cb51-191"><a href="#cb51-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> </span>
<span id="cb51-192"><a href="#cb51-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> gen_src_db<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dir2srcs<span class="op">)</span></span>
<span id="cb51-193"><a href="#cb51-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> <span class="op">{</span></span>
<span id="cb51-194"><a href="#cb51-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb51-195"><a href="#cb51-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> </span>
<span id="cb51-196"><a href="#cb51-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pair <span class="op">:</span> dir2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-197"><a href="#cb51-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>         <span class="kw">auto</span> s <span class="op">=</span> pair<span class="op">.</span>second<span class="op">;</span></span>
<span id="cb51-198"><a href="#cb51-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>         Nstd<span class="op">::</span>Concatenate<span class="op">(</span>srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>s<span class="op">));</span></span>
<span id="cb51-199"><a href="#cb51-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>     <span class="op">}</span></span>
<span id="cb51-200"><a href="#cb51-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> </span>
<span id="cb51-201"><a href="#cb51-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     <span class="cf">return</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb51-202"><a href="#cb51-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> <span class="op">}</span></span>
<span id="cb51-203"><a href="#cb51-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb51-204"><a href="#cb51-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> </span>
<span id="cb51-205"><a href="#cb51-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span> PkgGenerator<span class="op">::</span>PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb51-206"><a href="#cb51-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>                            FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-207"><a href="#cb51-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>     <span class="op">:</span> <span class="va">dirs_</span><span class="op">{</span>gen_dirs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span></span>
<span id="cb51-208"><a href="#cb51-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span> <span class="op">{</span></span>
<span id="cb51-209"><a href="#cb51-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span> <span class="op">}</span></span>
<span id="cb51-210"><a href="#cb51-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> </span>
<span id="cb51-211"><a href="#cb51-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> <span class="dt">bool</span> PkgGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-212"><a href="#cb51-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="op">{</span></span>
<span id="cb51-213"><a href="#cb51-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>     StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">dirs_</span><span class="op">);</span></span>
<span id="cb51-214"><a href="#cb51-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span> </span>
<span id="cb51-215"><a href="#cb51-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-216"><a href="#cb51-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span> <span class="op">}</span></span>
<span id="cb51-217"><a href="#cb51-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span> </span>
<span id="cb51-218"><a href="#cb51-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span> SrcsGenerator<span class="op">::</span>SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb51-219"><a href="#cb51-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>                              FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-220"><a href="#cb51-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>     <span class="op">:</span> <span class="va">dirs_</span><span class="op">{</span>gen_dirs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span></span>
<span id="cb51-221"><a href="#cb51-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span> <span class="op">{</span></span>
<span id="cb51-222"><a href="#cb51-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> <span class="op">}</span></span>
<span id="cb51-223"><a href="#cb51-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> </span>
<span id="cb51-224"><a href="#cb51-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span> <span class="dt">bool</span> SrcsGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-225"><a href="#cb51-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span> <span class="op">{</span></span>
<span id="cb51-226"><a href="#cb51-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>     <span class="kw">auto</span>       ret  <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>GetCppDirsSrcs<span class="op">(</span><span class="va">dirs_</span><span class="op">)};</span></span>
<span id="cb51-227"><a href="#cb51-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>     <span class="kw">auto</span>       dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb51-228"><a href="#cb51-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>     <span class="kw">auto</span>       srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb51-229"><a href="#cb51-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>     <span class="kw">auto</span> <span class="at">const</span> db   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb51-230"><a href="#cb51-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span> </span>
<span id="cb51-231"><a href="#cb51-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>     <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{</span>GenCppDirs<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">)};</span></span>
<span id="cb51-232"><a href="#cb51-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span> </span>
<span id="cb51-233"><a href="#cb51-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-234"><a href="#cb51-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>         os <span class="op">&lt;&lt;</span> <span class="st">&quot;---&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-235"><a href="#cb51-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>         os <span class="op">&lt;&lt;</span> d <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-236"><a href="#cb51-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>     <span class="op">}</span></span>
<span id="cb51-237"><a href="#cb51-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span> </span>
<span id="cb51-238"><a href="#cb51-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-239"><a href="#cb51-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span> <span class="op">}</span></span>
<span id="cb51-240"><a href="#cb51-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span> </span>
<span id="cb51-241"><a href="#cb51-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span> Pkg2SrcsGenerator<span class="op">::</span>Pkg2SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb51-242"><a href="#cb51-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>                                      FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-243"><a href="#cb51-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>     <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">{</span>gen_dirs2srcs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> src_as_pkg<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span></span>
<span id="cb51-244"><a href="#cb51-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span> <span class="op">{</span></span>
<span id="cb51-245"><a href="#cb51-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span> <span class="op">}</span></span>
<span id="cb51-246"><a href="#cb51-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span> </span>
<span id="cb51-247"><a href="#cb51-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span> <span class="dt">bool</span> Pkg2SrcsGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-248"><a href="#cb51-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span> <span class="op">{</span></span>
<span id="cb51-249"><a href="#cb51-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>     StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">dirs2srcs_</span><span class="op">);</span></span>
<span id="cb51-250"><a href="#cb51-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span> </span>
<span id="cb51-251"><a href="#cb51-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-252"><a href="#cb51-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span> <span class="op">}</span></span>
<span id="cb51-253"><a href="#cb51-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span> </span>
<span id="cb51-254"><a href="#cb51-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span> Pkg2PkgGenerator<span class="op">::</span>Pkg2PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span> <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb51-255"><a href="#cb51-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>                                    FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs_opt<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> pattern<span class="op">)</span></span>
<span id="cb51-256"><a href="#cb51-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>     <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">{</span>gen_dirs2srcs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> src_as_pkg<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span></span>
<span id="cb51-257"><a href="#cb51-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span> <span class="op">{</span></span>
<span id="cb51-258"><a href="#cb51-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span> <span class="op">}</span></span>
<span id="cb51-259"><a href="#cb51-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span> </span>
<span id="cb51-260"><a href="#cb51-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span> <span class="dt">bool</span> Pkg2PkgGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-261"><a href="#cb51-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span> <span class="op">{</span></span>
<span id="cb51-262"><a href="#cb51-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span>     <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb51-263"><a href="#cb51-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span> </span>
<span id="cb51-264"><a href="#cb51-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>     <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> gen_src_db<span class="op">(</span><span class="va">dirs2srcs_</span><span class="op">);</span></span>
<span id="cb51-265"><a href="#cb51-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span> </span>
<span id="cb51-266"><a href="#cb51-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pair <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-267"><a href="#cb51-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>         cpp_dirs<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>pair<span class="op">.</span>first<span class="op">,</span> GenCppSrc<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> db<span class="op">)});</span></span>
<span id="cb51-268"><a href="#cb51-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span>     <span class="op">}</span></span>
<span id="cb51-269"><a href="#cb51-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span> </span>
<span id="cb51-270"><a href="#cb51-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>     <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels <span class="op">=</span> GenDepRels<span class="op">(</span>cpp_dirs<span class="op">);</span></span>
<span id="cb51-271"><a href="#cb51-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span> </span>
<span id="cb51-272"><a href="#cb51-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>     StoreToStream<span class="op">(</span>os<span class="op">,</span> dep_rels<span class="op">);</span></span>
<span id="cb51-273"><a href="#cb51-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span> </span>
<span id="cb51-274"><a href="#cb51-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-275"><a href="#cb51-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span> <span class="op">}</span></span>
<span id="cb51-276"><a href="#cb51-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span> </span>
<span id="cb51-277"><a href="#cb51-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb51-278"><a href="#cb51-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span> <span class="dt">DepRels_t</span> gen_dep_rel<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">)</span></span>
<span id="cb51-279"><a href="#cb51-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span> <span class="op">{</span></span>
<span id="cb51-280"><a href="#cb51-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span>     <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-281"><a href="#cb51-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>         <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;IN-file needed&quot;</span><span class="op">};</span></span>
<span id="cb51-282"><a href="#cb51-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span>     <span class="op">}</span></span>
<span id="cb51-283"><a href="#cb51-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span> </span>
<span id="cb51-284"><a href="#cb51-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb51-285"><a href="#cb51-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span> </span>
<span id="cb51-286"><a href="#cb51-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>     <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-287"><a href="#cb51-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>         <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">};</span></span>
<span id="cb51-288"><a href="#cb51-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span>     <span class="op">}</span></span>
<span id="cb51-289"><a href="#cb51-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span> </span>
<span id="cb51-290"><a href="#cb51-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>     <span class="cf">return</span> <span class="op">*</span>ret<span class="op">;</span></span>
<span id="cb51-291"><a href="#cb51-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span> <span class="op">}</span></span>
<span id="cb51-292"><a href="#cb51-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb51-293"><a href="#cb51-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span> </span>
<span id="cb51-294"><a href="#cb51-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span> <span class="kw">struct</span> ArchGenerator<span class="op">::</span>Impl <span class="op">{</span></span>
<span id="cb51-295"><a href="#cb51-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>     Impl<span class="op">(</span><span class="dt">DepRels_t</span><span class="op">&amp;&amp;</span> a_dep_rels<span class="op">)</span> <span class="op">:</span> dep_rels<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>a_dep_rels<span class="op">)),</span> arch<span class="op">(</span>ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels<span class="op">))</span></span>
<span id="cb51-296"><a href="#cb51-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>     <span class="op">{</span></span>
<span id="cb51-297"><a href="#cb51-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span>     <span class="op">}</span></span>
<span id="cb51-298"><a href="#cb51-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span>     <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels<span class="op">;</span></span>
<span id="cb51-299"><a href="#cb51-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>     <span class="dt">Arch_t</span> <span class="at">const</span>    arch<span class="op">;</span></span>
<span id="cb51-300"><a href="#cb51-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span> <span class="op">};</span></span>
<span id="cb51-301"><a href="#cb51-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span> </span>
<span id="cb51-302"><a href="#cb51-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span> ArchGenerator<span class="op">::</span>ArchGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">)</span></span>
<span id="cb51-303"><a href="#cb51-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>     <span class="op">:</span> <span class="va">impl_</span><span class="op">{</span><span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchGenerator<span class="op">::</span>Impl<span class="op">&gt;(</span>gen_dep_rel<span class="op">(</span>in<span class="op">))}</span></span>
<span id="cb51-304"><a href="#cb51-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span> <span class="op">{</span></span>
<span id="cb51-305"><a href="#cb51-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span> <span class="op">}</span></span>
<span id="cb51-306"><a href="#cb51-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span> </span>
<span id="cb51-307"><a href="#cb51-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span> <span class="dt">bool</span> ArchGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-308"><a href="#cb51-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span> <span class="op">{</span></span>
<span id="cb51-309"><a href="#cb51-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>     StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">);</span></span>
<span id="cb51-310"><a href="#cb51-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span> </span>
<span id="cb51-311"><a href="#cb51-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-312"><a href="#cb51-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span> <span class="op">}</span></span>
<span id="cb51-313"><a href="#cb51-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span> ArchGenerator<span class="op">::~</span>ArchGenerator<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb51-314"><a href="#cb51-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span> </span>
<span id="cb51-315"><a href="#cb51-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span> Arch2PUmlGenerator<span class="op">::</span>Arch2PUmlGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">)</span> <span class="op">:</span> ArchGenerator<span class="op">{</span>in<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb51-316"><a href="#cb51-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span> </span>
<span id="cb51-317"><a href="#cb51-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span> <span class="dt">bool</span> Arch2PUmlGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-318"><a href="#cb51-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span> <span class="op">{</span></span>
<span id="cb51-319"><a href="#cb51-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>     os <span class="op">&lt;&lt;</span> <span class="st">&quot;@startuml&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-320"><a href="#cb51-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>     os <span class="op">&lt;&lt;</span> <span class="st">&quot;scale max 730 width&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>  <span class="co">// これ以上大きいとpdfにした時に右端が切れる</span></span>
<span id="cb51-321"><a href="#cb51-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span> </span>
<span id="cb51-322"><a href="#cb51-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span>     os <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-323"><a href="#cb51-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>     os <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-324"><a href="#cb51-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span> </span>
<span id="cb51-325"><a href="#cb51-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span>     os <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>dep_rels<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-326"><a href="#cb51-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>     os <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-327"><a href="#cb51-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span> </span>
<span id="cb51-328"><a href="#cb51-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>     os <span class="op">&lt;&lt;</span> <span class="st">&quot;@enduml&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-329"><a href="#cb51-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span> </span>
<span id="cb51-330"><a href="#cb51-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb51-331"><a href="#cb51-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span> <span class="op">}</span></span>
<span id="cb51-332"><a href="#cb51-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span> </span>
<span id="cb51-333"><a href="#cb51-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span> CyclicGenerator<span class="op">::</span>CyclicGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> in<span class="op">)</span></span>
<span id="cb51-334"><a href="#cb51-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>     <span class="op">:</span> ArchGenerator<span class="op">{</span>in<span class="op">},</span> <span class="va">has_cyclic_dep_</span><span class="op">{</span>HasCyclicDeps<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>dep_rels<span class="op">)}</span></span>
<span id="cb51-335"><a href="#cb51-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span> <span class="op">{</span></span>
<span id="cb51-336"><a href="#cb51-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span> <span class="op">}</span></span>
<span id="cb51-337"><a href="#cb51-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span> </span>
<span id="cb51-338"><a href="#cb51-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span> <span class="dt">bool</span> CyclicGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">)</span> <span class="at">const</span></span>
<span id="cb51-339"><a href="#cb51-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span> <span class="op">{</span></span>
<span id="cb51-340"><a href="#cb51-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span>     os <span class="op">&lt;&lt;</span> <span class="st">&quot;cyclic dependencies &quot;</span> <span class="op">&lt;&lt;</span> <span class="op">(</span><span class="va">has_cyclic_dep_</span> <span class="op">?</span> <span class="st">&quot;&quot;</span> <span class="op">:</span> <span class="st">&quot;not &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;found&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb51-341"><a href="#cb51-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span> </span>
<span id="cb51-342"><a href="#cb51-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>     <span class="cf">return</span> <span class="op">!</span><span class="va">has_cyclic_dep_</span><span class="op">;</span></span>
<span id="cb51-343"><a href="#cb51-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span> <span class="op">}</span></span>
<span id="cb51-344"><a href="#cb51-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcload_store_format.cpp">example/deps/dependency/src/load_store_format.cpp
<a id="SS_23_2_15"></a></h3>
<div class="sourceCode" id="cb52"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">auto</span> <span class="at">const</span> file_format_dir2srcs <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#dir2srcs&quot;</span><span class="op">};</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">auto</span> <span class="at">const</span> file_format_dir      <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#dir&quot;</span><span class="op">};</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">auto</span> <span class="at">const</span> file_format_deps     <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#deps&quot;</span><span class="op">};</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">auto</span> <span class="at">const</span> file_format_arch     <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#arch&quot;</span><span class="op">};</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">)</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="op">{</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     os <span class="op">&lt;&lt;</span> file_format_dir <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     os <span class="op">&lt;&lt;</span> paths <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="op">}</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs2srcs<span class="op">)</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="op">{</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     os <span class="op">&lt;&lt;</span> file_format_dir2srcs <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     os <span class="op">&lt;&lt;</span> dirs2srcs <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="dt">bool</span> is_format_dirs2srcs<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">{</span></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>         <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_dir2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         <span class="op">}</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="op">}</span></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span></span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="dt">load_Dirs2Srcs_t</span><span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="op">{</span></span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_dir <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^([\w/.]+)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_src <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s+([\w/.]+)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="kw">auto</span> line      <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">auto</span> dir       <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">{};</span></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="kw">auto</span> srcs      <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span> <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_sep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>             dirs2srcs<span class="op">[</span>dir<span class="op">].</span>swap<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         <span class="op">}</span></span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_dir<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>             dir <span class="op">=</span> results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         <span class="op">}</span></span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>         <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_src<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>             srcs<span class="op">.</span>push_back<span class="op">(</span>results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         <span class="op">}</span></span>
<span id="cb52-72"><a href="#cb52-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb52-73"><a href="#cb52-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>             <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> line <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-74"><a href="#cb52-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>             <span class="ot">assert</span><span class="op">(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb52-75"><a href="#cb52-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>         <span class="op">}</span></span>
<span id="cb52-76"><a href="#cb52-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="op">}</span></span>
<span id="cb52-77"><a href="#cb52-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb52-78"><a href="#cb52-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="cf">return</span> dirs2srcs<span class="op">;</span></span>
<span id="cb52-79"><a href="#cb52-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="op">}</span></span>
<span id="cb52-80"><a href="#cb52-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb52-81"><a href="#cb52-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> </span>
<span id="cb52-82"><a href="#cb52-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> Load_Dirs2Srcs<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-83"><a href="#cb52-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> <span class="op">{</span></span>
<span id="cb52-84"><a href="#cb52-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb52-85"><a href="#cb52-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb52-86"><a href="#cb52-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="cf">if</span> <span class="op">(!</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-87"><a href="#cb52-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb52-88"><a href="#cb52-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="op">}</span></span>
<span id="cb52-89"><a href="#cb52-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb52-90"><a href="#cb52-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="cf">if</span> <span class="op">(!</span>is_format_dirs2srcs<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-91"><a href="#cb52-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb52-92"><a href="#cb52-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="op">}</span></span>
<span id="cb52-93"><a href="#cb52-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb52-94"><a href="#cb52-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="cf">return</span> <span class="dt">load_Dirs2Srcs_t</span><span class="op">(</span>is<span class="op">);</span></span>
<span id="cb52-95"><a href="#cb52-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="op">}</span></span>
<span id="cb52-96"><a href="#cb52-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb52-97"><a href="#cb52-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb52-98"><a href="#cb52-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb52-99"><a href="#cb52-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="dt">bool</span> is_format_dirs<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-100"><a href="#cb52-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="op">{</span></span>
<span id="cb52-101"><a href="#cb52-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-102"><a href="#cb52-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> </span>
<span id="cb52-103"><a href="#cb52-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-104"><a href="#cb52-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>         <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-105"><a href="#cb52-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-106"><a href="#cb52-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>         <span class="op">}</span></span>
<span id="cb52-107"><a href="#cb52-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="op">}</span></span>
<span id="cb52-108"><a href="#cb52-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb52-109"><a href="#cb52-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb52-110"><a href="#cb52-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> <span class="op">}</span></span>
<span id="cb52-111"><a href="#cb52-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb52-112"><a href="#cb52-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb52-113"><a href="#cb52-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> Load_Paths<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-114"><a href="#cb52-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">{</span></span>
<span id="cb52-115"><a href="#cb52-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="kw">auto</span> paths <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb52-116"><a href="#cb52-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb52-117"><a href="#cb52-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="cf">if</span> <span class="op">(!</span>is_format_dirs<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-118"><a href="#cb52-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb52-119"><a href="#cb52-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="op">}</span></span>
<span id="cb52-120"><a href="#cb52-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> </span>
<span id="cb52-121"><a href="#cb52-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-122"><a href="#cb52-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-123"><a href="#cb52-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         paths<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>line<span class="op">));</span></span>
<span id="cb52-124"><a href="#cb52-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="op">}</span></span>
<span id="cb52-125"><a href="#cb52-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb52-126"><a href="#cb52-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="cf">return</span> paths<span class="op">;</span></span>
<span id="cb52-127"><a href="#cb52-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="op">}</span></span>
<span id="cb52-128"><a href="#cb52-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb52-129"><a href="#cb52-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">)</span></span>
<span id="cb52-130"><a href="#cb52-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> <span class="op">{</span></span>
<span id="cb52-131"><a href="#cb52-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     os <span class="op">&lt;&lt;</span> file_format_deps <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-132"><a href="#cb52-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>     os <span class="op">&lt;&lt;</span> dep_rels <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-133"><a href="#cb52-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb52-134"><a href="#cb52-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-135"><a href="#cb52-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> <span class="op">}</span></span>
<span id="cb52-136"><a href="#cb52-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb52-137"><a href="#cb52-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb52-138"><a href="#cb52-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> </span>
<span id="cb52-139"><a href="#cb52-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="dt">bool</span> is_format_deps<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-140"><a href="#cb52-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="op">{</span></span>
<span id="cb52-141"><a href="#cb52-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>     <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-142"><a href="#cb52-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> </span>
<span id="cb52-143"><a href="#cb52-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-144"><a href="#cb52-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>         <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_deps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-145"><a href="#cb52-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>             <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-146"><a href="#cb52-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="op">}</span></span>
<span id="cb52-147"><a href="#cb52-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="op">}</span></span>
<span id="cb52-148"><a href="#cb52-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb52-149"><a href="#cb52-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb52-150"><a href="#cb52-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> <span class="op">}</span></span>
<span id="cb52-151"><a href="#cb52-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span> </span>
<span id="cb52-152"><a href="#cb52-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="kw">struct</span> <span class="dt">dep_half_t</span> <span class="op">{</span></span>
<span id="cb52-153"><a href="#cb52-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="dt">bool</span>               valid<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb52-154"><a href="#cb52-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="bu">std::</span>string        from<span class="op">{};</span></span>
<span id="cb52-155"><a href="#cb52-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     <span class="bu">std::</span>string        to<span class="op">{};</span></span>
<span id="cb52-156"><a href="#cb52-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="dt">uint32_t</span>           count<span class="op">{</span><span class="dv">0</span><span class="op">};</span></span>
<span id="cb52-157"><a href="#cb52-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> headers<span class="op">{};</span></span>
<span id="cb52-158"><a href="#cb52-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> <span class="op">};</span></span>
<span id="cb52-159"><a href="#cb52-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span> </span>
<span id="cb52-160"><a href="#cb52-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_paths<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span><span class="op">&amp;</span> paths_str<span class="op">)</span></span>
<span id="cb52-161"><a href="#cb52-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> <span class="op">{</span></span>
<span id="cb52-162"><a href="#cb52-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="kw">auto</span> <span class="at">const</span> sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs"> +</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-163"><a href="#cb52-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     <span class="kw">auto</span>       ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb52-164"><a href="#cb52-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb52-165"><a href="#cb52-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     <span class="cf">if</span> <span class="op">(</span>paths_str<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-166"><a href="#cb52-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         <span class="kw">auto</span> end <span class="op">=</span> <span class="bu">std::</span>sregex_token_iterator<span class="op">{};</span></span>
<span id="cb52-167"><a href="#cb52-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it <span class="op">=</span> <span class="bu">std::</span>sregex_token_iterator<span class="op">{</span>paths_str<span class="op">.</span>begin<span class="op">(),</span> paths_str<span class="op">.</span>end<span class="op">(),</span> sep<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">};</span></span>
<span id="cb52-168"><a href="#cb52-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>              it <span class="op">!=</span> end<span class="op">;</span> <span class="op">++</span>it<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-169"><a href="#cb52-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>             ret<span class="op">.</span>emplace_back<span class="op">(</span>it<span class="op">-&gt;</span>str<span class="op">());</span></span>
<span id="cb52-170"><a href="#cb52-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>         <span class="op">}</span></span>
<span id="cb52-171"><a href="#cb52-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>     <span class="op">}</span></span>
<span id="cb52-172"><a href="#cb52-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb52-173"><a href="#cb52-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb52-174"><a href="#cb52-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> <span class="op">}</span></span>
<span id="cb52-175"><a href="#cb52-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> </span>
<span id="cb52-176"><a href="#cb52-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> <span class="dt">dep_half_t</span> get_dep_half<span class="op">(</span><span class="bu">std::</span>smatch <span class="at">const</span><span class="op">&amp;</span> results<span class="op">)</span></span>
<span id="cb52-177"><a href="#cb52-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> <span class="op">{</span></span>
<span id="cb52-178"><a href="#cb52-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     <span class="kw">auto</span> dep_half <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb52-179"><a href="#cb52-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> </span>
<span id="cb52-180"><a href="#cb52-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     dep_half<span class="op">.</span>valid   <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-181"><a href="#cb52-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     dep_half<span class="op">.</span>from    <span class="op">=</span> results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb52-182"><a href="#cb52-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>     dep_half<span class="op">.</span>to      <span class="op">=</span> results<span class="op">[</span><span class="dv">2</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb52-183"><a href="#cb52-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>     dep_half<span class="op">.</span>count   <span class="op">=</span> <span class="bu">std::</span>stoi<span class="op">(</span>results<span class="op">[</span><span class="dv">3</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb52-184"><a href="#cb52-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>     dep_half<span class="op">.</span>headers <span class="op">=</span> gen_paths<span class="op">(</span>results<span class="op">[</span><span class="dv">4</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb52-185"><a href="#cb52-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb52-186"><a href="#cb52-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="cf">return</span> dep_half<span class="op">;</span></span>
<span id="cb52-187"><a href="#cb52-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> <span class="op">}</span></span>
<span id="cb52-188"><a href="#cb52-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> </span>
<span id="cb52-189"><a href="#cb52-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> DepRelation gen_dep_rel<span class="op">(</span><span class="dt">dep_half_t</span><span class="op">&amp;&amp;</span> first<span class="op">,</span> <span class="dt">dep_half_t</span><span class="op">&amp;&amp;</span> second<span class="op">)</span></span>
<span id="cb52-190"><a href="#cb52-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> <span class="op">{</span></span>
<span id="cb52-191"><a href="#cb52-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>     <span class="ot">assert</span><span class="op">(</span>first<span class="op">.</span>valid<span class="op">);</span></span>
<span id="cb52-192"><a href="#cb52-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="ot">assert</span><span class="op">(</span>second<span class="op">.</span>valid<span class="op">);</span></span>
<span id="cb52-193"><a href="#cb52-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>     <span class="ot">assert</span><span class="op">(</span>first<span class="op">.</span>from <span class="op">&lt;</span> second<span class="op">.</span>from<span class="op">);</span></span>
<span id="cb52-194"><a href="#cb52-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb52-195"><a href="#cb52-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>     <span class="cf">return</span> DepRelation<span class="op">{</span>first<span class="op">.</span>from<span class="op">,</span>  first<span class="op">.</span>count<span class="op">,</span>  <span class="bu">std::</span>move<span class="op">(</span>first<span class="op">.</span>headers<span class="op">),</span></span>
<span id="cb52-196"><a href="#cb52-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>                        second<span class="op">.</span>from<span class="op">,</span> second<span class="op">.</span>count<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>second<span class="op">.</span>headers<span class="op">)};</span></span>
<span id="cb52-197"><a href="#cb52-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> <span class="op">}</span></span>
<span id="cb52-198"><a href="#cb52-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span> </span>
<span id="cb52-199"><a href="#cb52-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> <span class="dt">DepRels_t</span> <span class="dt">load_DepRelations_t</span><span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-200"><a href="#cb52-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> <span class="op">{</span></span>
<span id="cb52-201"><a href="#cb52-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-202"><a href="#cb52-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>     <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_dep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^([\w/.-]+) -&gt; ([\w/.-]+) : ([\d]+) *(.*)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb52-203"><a href="#cb52-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span> </span>
<span id="cb52-204"><a href="#cb52-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="kw">auto</span> line   <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb52-205"><a href="#cb52-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>     <span class="kw">auto</span> first  <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb52-206"><a href="#cb52-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="kw">auto</span> second <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb52-207"><a href="#cb52-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span> </span>
<span id="cb52-208"><a href="#cb52-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>     <span class="kw">auto</span> dep_rels <span class="op">=</span> <span class="dt">DepRels_t</span><span class="op">{};</span></span>
<span id="cb52-209"><a href="#cb52-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span> </span>
<span id="cb52-210"><a href="#cb52-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>     <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-211"><a href="#cb52-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>         <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span> <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_sep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-212"><a href="#cb52-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>             dep_rels<span class="op">.</span>emplace_back<span class="op">(</span>gen_dep_rel<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>first<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>second<span class="op">)));</span></span>
<span id="cb52-213"><a href="#cb52-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span> </span>
<span id="cb52-214"><a href="#cb52-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>             first<span class="op">.</span>valid  <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb52-215"><a href="#cb52-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>             second<span class="op">.</span>valid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb52-216"><a href="#cb52-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>         <span class="op">}</span></span>
<span id="cb52-217"><a href="#cb52-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>         <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_dep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-218"><a href="#cb52-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>             <span class="op">(!</span>first<span class="op">.</span>valid <span class="op">?</span> first <span class="op">:</span> second<span class="op">)</span> <span class="op">=</span> get_dep_half<span class="op">(</span>results<span class="op">);</span></span>
<span id="cb52-219"><a href="#cb52-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>         <span class="op">}</span></span>
<span id="cb52-220"><a href="#cb52-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb52-221"><a href="#cb52-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>             <span class="ot">assert</span><span class="op">(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb52-222"><a href="#cb52-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>         <span class="op">}</span></span>
<span id="cb52-223"><a href="#cb52-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>     <span class="op">}</span></span>
<span id="cb52-224"><a href="#cb52-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span> </span>
<span id="cb52-225"><a href="#cb52-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>     <span class="cf">return</span> dep_rels<span class="op">;</span></span>
<span id="cb52-226"><a href="#cb52-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span> <span class="op">}</span></span>
<span id="cb52-227"><a href="#cb52-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb52-228"><a href="#cb52-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span> </span>
<span id="cb52-229"><a href="#cb52-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;</span> Load_DepRels<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb52-230"><a href="#cb52-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span> <span class="op">{</span></span>
<span id="cb52-231"><a href="#cb52-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>     <span class="cf">if</span> <span class="op">(!</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-232"><a href="#cb52-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb52-233"><a href="#cb52-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     <span class="op">}</span></span>
<span id="cb52-234"><a href="#cb52-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span> </span>
<span id="cb52-235"><a href="#cb52-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>     <span class="cf">if</span> <span class="op">(!</span>is_format_deps<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb52-236"><a href="#cb52-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb52-237"><a href="#cb52-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>     <span class="op">}</span></span>
<span id="cb52-238"><a href="#cb52-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span> </span>
<span id="cb52-239"><a href="#cb52-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>     <span class="cf">return</span> <span class="dt">load_DepRelations_t</span><span class="op">(</span>is<span class="op">);</span></span>
<span id="cb52-240"><a href="#cb52-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span> <span class="op">}</span></span>
<span id="cb52-241"><a href="#cb52-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span> </span>
<span id="cb52-242"><a href="#cb52-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">)</span></span>
<span id="cb52-243"><a href="#cb52-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span> <span class="op">{</span></span>
<span id="cb52-244"><a href="#cb52-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>     os <span class="op">&lt;&lt;</span> file_format_arch <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-245"><a href="#cb52-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>     os <span class="op">&lt;&lt;</span> arch <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb52-246"><a href="#cb52-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span> </span>
<span id="cb52-247"><a href="#cb52-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb52-248"><a href="#cb52-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span> <span class="op">}</span></span>
<span id="cb52-249"><a href="#cb52-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcload_store_format.h">example/deps/dependency/src/load_store_format.h
<a id="SS_23_2_16"></a></h3>
<div class="sourceCode" id="cb53"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="co">// LoadStore</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="dt">bool</span>                              StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">);</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> Load_Paths<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">);</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="co">// Dirs2Srcs_t</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs2srcs<span class="op">);</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> Load_Dirs2Srcs<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">);</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="co">// DepRels_t</span></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="dt">bool</span>                     StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span><span class="op">&amp;</span> dep_rels<span class="op">);</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;</span> Load_DepRels<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">);</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="co">// Arch_t</span></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">&amp;</span> arch<span class="op">);</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutarch_pkg_ut.cpp">example/deps/dependency/ut/arch_pkg_ut.cpp
<a id="SS_23_2_17"></a></h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple<span class="op">{</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b.h&quot;</span><span class="op">},</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="op">};</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple2<span class="op">{</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">},</span> <span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;c&quot;</span><span class="op">},</span> <span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;X/E&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">},</span> <span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;c&quot;</span><span class="op">},</span> <span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">},</span> <span class="st">&quot;X/E&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">}}},</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="op">};</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple3<span class="op">{</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="co">// A -&gt; B</span></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="co">// A -&gt; C -&gt; D -&gt; A</span></span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="co">//      C -&gt; B</span></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">}}},</span></span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">}}},</span></span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">}}},</span></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">};</span></span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_middle<span class="op">{</span></span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="op">};</span></span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_complex<span class="op">{</span></span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">},</span></span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>                  <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">}}},</span></span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">},</span></span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>                  <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="op">};</span></span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb54-74"><a href="#cb54-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple<span class="op">)</span></span>
<span id="cb54-75"><a href="#cb54-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> <span class="op">{</span></span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> arch<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> a <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-82"><a href="#cb54-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> a<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb54-83"><a href="#cb54-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> a<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-84"><a href="#cb54-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     ASSERT_FALSE<span class="op">(</span>a<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-85"><a href="#cb54-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     ASSERT_FALSE<span class="op">(</span>a<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>a<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb54-86"><a href="#cb54-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb54-87"><a href="#cb54-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> children <span class="op">=</span> a<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-88"><a href="#cb54-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb54-89"><a href="#cb54-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb54-90"><a href="#cb54-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> b <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>arch<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb54-91"><a href="#cb54-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> b<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-92"><a href="#cb54-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> b<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb54-93"><a href="#cb54-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb54-94"><a href="#cb54-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> b<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-95"><a href="#cb54-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     ASSERT_FALSE<span class="op">(</span>b<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-96"><a href="#cb54-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> <span class="op">}</span></span>
<span id="cb54-97"><a href="#cb54-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> </span>
<span id="cb54-98"><a href="#cb54-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple2<span class="op">)</span></span>
<span id="cb54-99"><a href="#cb54-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="op">{</span></span>
<span id="cb54-100"><a href="#cb54-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple2<span class="op">);</span></span>
<span id="cb54-101"><a href="#cb54-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb54-102"><a href="#cb54-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-103"><a href="#cb54-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>         <span class="st">&quot;package  :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-104"><a href="#cb54-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>         <span class="st">&quot;fullname :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-105"><a href="#cb54-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-106"><a href="#cb54-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>         <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-107"><a href="#cb54-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         <span class="st">&quot;    A : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-108"><a href="#cb54-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>         <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-109"><a href="#cb54-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>         <span class="st">&quot;    C : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-110"><a href="#cb54-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-111"><a href="#cb54-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>         <span class="st">&quot;children : {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-112"><a href="#cb54-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>         <span class="st">&quot;    package  :A:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-113"><a href="#cb54-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>         <span class="st">&quot;    fullname :X/A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-114"><a href="#cb54-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>         <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-115"><a href="#cb54-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>         <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-116"><a href="#cb54-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         <span class="st">&quot;        B : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-117"><a href="#cb54-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>         <span class="st">&quot;        E : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-118"><a href="#cb54-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-119"><a href="#cb54-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>         <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-120"><a href="#cb54-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-121"><a href="#cb54-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>         <span class="st">&quot;    package  :B:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-122"><a href="#cb54-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>         <span class="st">&quot;    fullname :X/B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-123"><a href="#cb54-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-124"><a href="#cb54-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>         <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-125"><a href="#cb54-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>         <span class="st">&quot;        C : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-126"><a href="#cb54-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-127"><a href="#cb54-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>         <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-128"><a href="#cb54-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-129"><a href="#cb54-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>         <span class="st">&quot;    package  :C:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-130"><a href="#cb54-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         <span class="st">&quot;    fullname :X/C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-131"><a href="#cb54-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-132"><a href="#cb54-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-133"><a href="#cb54-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>         <span class="st">&quot;        D : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-134"><a href="#cb54-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-135"><a href="#cb54-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>         <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-136"><a href="#cb54-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-137"><a href="#cb54-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="st">&quot;    package  :D:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-138"><a href="#cb54-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>         <span class="st">&quot;    fullname :X/D</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-139"><a href="#cb54-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>         <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-140"><a href="#cb54-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>         <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-141"><a href="#cb54-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>         <span class="st">&quot;        A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-142"><a href="#cb54-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-143"><a href="#cb54-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>         <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-144"><a href="#cb54-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-145"><a href="#cb54-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>         <span class="st">&quot;    package  :E:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-146"><a href="#cb54-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="st">&quot;    fullname :X/E</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-147"><a href="#cb54-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>         <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-148"><a href="#cb54-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>         <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-149"><a href="#cb54-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>         <span class="st">&quot;        A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-150"><a href="#cb54-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-151"><a href="#cb54-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-152"><a href="#cb54-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>         <span class="st">&quot;}&quot;</span><span class="op">};</span></span>
<span id="cb54-153"><a href="#cb54-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb54-154"><a href="#cb54-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToStringArch<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb54-155"><a href="#cb54-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="op">}</span></span>
<span id="cb54-156"><a href="#cb54-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> </span>
<span id="cb54-157"><a href="#cb54-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple3<span class="op">)</span></span>
<span id="cb54-158"><a href="#cb54-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> <span class="op">{</span></span>
<span id="cb54-159"><a href="#cb54-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple3<span class="op">);</span></span>
<span id="cb54-160"><a href="#cb54-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb54-161"><a href="#cb54-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-162"><a href="#cb54-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>         <span class="st">&quot;package  :A:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-163"><a href="#cb54-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>         <span class="st">&quot;fullname :A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-164"><a href="#cb54-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>         <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-165"><a href="#cb54-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>         <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-166"><a href="#cb54-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-167"><a href="#cb54-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         <span class="st">&quot;    C : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-168"><a href="#cb54-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-169"><a href="#cb54-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-170"><a href="#cb54-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-171"><a href="#cb54-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="st">&quot;package  :B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-172"><a href="#cb54-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         <span class="st">&quot;fullname :B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-173"><a href="#cb54-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-174"><a href="#cb54-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="st">&quot;depend_on: { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-175"><a href="#cb54-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-176"><a href="#cb54-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-177"><a href="#cb54-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>         <span class="st">&quot;package  :C:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-178"><a href="#cb54-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>         <span class="st">&quot;fullname :C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-179"><a href="#cb54-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>         <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-180"><a href="#cb54-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>         <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-181"><a href="#cb54-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>         <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-182"><a href="#cb54-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>         <span class="st">&quot;    D : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-183"><a href="#cb54-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-184"><a href="#cb54-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>         <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-185"><a href="#cb54-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-186"><a href="#cb54-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>         <span class="st">&quot;package  :D:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-187"><a href="#cb54-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>         <span class="st">&quot;fullname :D</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-188"><a href="#cb54-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>         <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-189"><a href="#cb54-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>         <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-190"><a href="#cb54-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>         <span class="st">&quot;    A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-191"><a href="#cb54-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-192"><a href="#cb54-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>         <span class="st">&quot;children : { }&quot;</span><span class="op">};</span></span>
<span id="cb54-193"><a href="#cb54-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> </span>
<span id="cb54-194"><a href="#cb54-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToStringArch<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb54-195"><a href="#cb54-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> <span class="op">}</span></span>
<span id="cb54-196"><a href="#cb54-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> </span>
<span id="cb54-197"><a href="#cb54-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkg2<span class="op">)</span></span>
<span id="cb54-198"><a href="#cb54-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span> <span class="op">{</span></span>
<span id="cb54-199"><a href="#cb54-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb54-200"><a href="#cb54-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> </span>
<span id="cb54-201"><a href="#cb54-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> arch<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb54-202"><a href="#cb54-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> </span>
<span id="cb54-203"><a href="#cb54-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>     <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">*</span> mod2_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb54-204"><a href="#cb54-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="op">{</span></span>
<span id="cb54-205"><a href="#cb54-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2 <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb54-206"><a href="#cb54-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb54-207"><a href="#cb54-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-208"><a href="#cb54-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>         ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb54-209"><a href="#cb54-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>         ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-210"><a href="#cb54-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>         ASSERT_FALSE<span class="op">(</span>mod2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-211"><a href="#cb54-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> </span>
<span id="cb54-212"><a href="#cb54-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>         mod2_children <span class="op">=</span> <span class="op">&amp;</span>mod2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-213"><a href="#cb54-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>         ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb54-214"><a href="#cb54-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>     <span class="op">}</span></span>
<span id="cb54-215"><a href="#cb54-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>     <span class="op">{</span></span>
<span id="cb54-216"><a href="#cb54-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2_1 <span class="op">=</span> <span class="op">*</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb54-217"><a href="#cb54-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-218"><a href="#cb54-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-219"><a href="#cb54-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-220"><a href="#cb54-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>         ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-221"><a href="#cb54-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>         ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb54-222"><a href="#cb54-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> </span>
<span id="cb54-223"><a href="#cb54-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> children <span class="op">=</span> mod2_1<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-224"><a href="#cb54-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>         ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb54-225"><a href="#cb54-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>     <span class="op">}</span></span>
<span id="cb54-226"><a href="#cb54-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>     <span class="op">{</span></span>
<span id="cb54-227"><a href="#cb54-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2_2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb54-228"><a href="#cb54-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-229"><a href="#cb54-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-230"><a href="#cb54-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-231"><a href="#cb54-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>         ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-232"><a href="#cb54-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>         ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb54-233"><a href="#cb54-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span> </span>
<span id="cb54-234"><a href="#cb54-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> children <span class="op">=</span> mod2_2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-235"><a href="#cb54-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>         ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb54-236"><a href="#cb54-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>     <span class="op">}</span></span>
<span id="cb54-237"><a href="#cb54-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span> <span class="op">}</span></span>
<span id="cb54-238"><a href="#cb54-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span> </span>
<span id="cb54-239"><a href="#cb54-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkg3<span class="op">)</span></span>
<span id="cb54-240"><a href="#cb54-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span> <span class="op">{</span></span>
<span id="cb54-241"><a href="#cb54-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb54-242"><a href="#cb54-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span> </span>
<span id="cb54-243"><a href="#cb54-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>     <span class="co">/* std::cout &lt;&lt; ToStringArch(arch) &lt;&lt; std::endl;</span></span>
<span id="cb54-244"><a href="#cb54-244" aria-hidden="true" tabindex="-1"></a><span class="co">        244 </span></span>
<span id="cb54-245"><a href="#cb54-245" aria-hidden="true" tabindex="-1"></a><span class="co">        245         package  :app1:CYCLIC</span></span>
<span id="cb54-246"><a href="#cb54-246" aria-hidden="true" tabindex="-1"></a><span class="co">        246         parent   :TOP</span></span>
<span id="cb54-247"><a href="#cb54-247" aria-hidden="true" tabindex="-1"></a><span class="co">        247         depend_on: {</span></span>
<span id="cb54-248"><a href="#cb54-248" aria-hidden="true" tabindex="-1"></a><span class="co">        248             mod1</span></span>
<span id="cb54-249"><a href="#cb54-249" aria-hidden="true" tabindex="-1"></a><span class="co">        249         }</span></span>
<span id="cb54-250"><a href="#cb54-250" aria-hidden="true" tabindex="-1"></a><span class="co">        250         children : {</span></span>
<span id="cb54-251"><a href="#cb54-251" aria-hidden="true" tabindex="-1"></a><span class="co">        251             package  :mod1:CYCLIC</span></span>
<span id="cb54-252"><a href="#cb54-252" aria-hidden="true" tabindex="-1"></a><span class="co">        252             parent   :app1</span></span>
<span id="cb54-253"><a href="#cb54-253" aria-hidden="true" tabindex="-1"></a><span class="co">        253             depend_on: {</span></span>
<span id="cb54-254"><a href="#cb54-254" aria-hidden="true" tabindex="-1"></a><span class="co">        254                 mod2</span></span>
<span id="cb54-255"><a href="#cb54-255" aria-hidden="true" tabindex="-1"></a><span class="co">        255                 mod2_2</span></span>
<span id="cb54-256"><a href="#cb54-256" aria-hidden="true" tabindex="-1"></a><span class="co">        256             }</span></span>
<span id="cb54-257"><a href="#cb54-257" aria-hidden="true" tabindex="-1"></a><span class="co">        257 </span></span>
<span id="cb54-258"><a href="#cb54-258" aria-hidden="true" tabindex="-1"></a><span class="co">        258             package  :mod2</span></span>
<span id="cb54-259"><a href="#cb54-259" aria-hidden="true" tabindex="-1"></a><span class="co">        259             parent   :app1</span></span>
<span id="cb54-260"><a href="#cb54-260" aria-hidden="true" tabindex="-1"></a><span class="co">        260             children : {</span></span>
<span id="cb54-261"><a href="#cb54-261" aria-hidden="true" tabindex="-1"></a><span class="co">        261                 package  :mod2_1:CYCLIC</span></span>
<span id="cb54-262"><a href="#cb54-262" aria-hidden="true" tabindex="-1"></a><span class="co">        262                 parent   :mod2</span></span>
<span id="cb54-263"><a href="#cb54-263" aria-hidden="true" tabindex="-1"></a><span class="co">        263                 depend_on: {</span></span>
<span id="cb54-264"><a href="#cb54-264" aria-hidden="true" tabindex="-1"></a><span class="co">        264                     mod2_2</span></span>
<span id="cb54-265"><a href="#cb54-265" aria-hidden="true" tabindex="-1"></a><span class="co">        265                 }</span></span>
<span id="cb54-266"><a href="#cb54-266" aria-hidden="true" tabindex="-1"></a><span class="co">        266 </span></span>
<span id="cb54-267"><a href="#cb54-267" aria-hidden="true" tabindex="-1"></a><span class="co">        267                 package  :mod2_2:CYCLIC</span></span>
<span id="cb54-268"><a href="#cb54-268" aria-hidden="true" tabindex="-1"></a><span class="co">        268                 parent   :mod2</span></span>
<span id="cb54-269"><a href="#cb54-269" aria-hidden="true" tabindex="-1"></a><span class="co">        269                 depend_on: {</span></span>
<span id="cb54-270"><a href="#cb54-270" aria-hidden="true" tabindex="-1"></a><span class="co">        270                     app1</span></span>
<span id="cb54-271"><a href="#cb54-271" aria-hidden="true" tabindex="-1"></a><span class="co">        271                     mod2_1</span></span>
<span id="cb54-272"><a href="#cb54-272" aria-hidden="true" tabindex="-1"></a><span class="co">        272                 }</span></span>
<span id="cb54-273"><a href="#cb54-273" aria-hidden="true" tabindex="-1"></a><span class="co">        273             }</span></span>
<span id="cb54-274"><a href="#cb54-274" aria-hidden="true" tabindex="-1"></a><span class="co">        274         }</span></span>
<span id="cb54-275"><a href="#cb54-275" aria-hidden="true" tabindex="-1"></a><span class="co">        275         package  :app2</span></span>
<span id="cb54-276"><a href="#cb54-276" aria-hidden="true" tabindex="-1"></a><span class="co">        276         parent   :TOP</span></span>
<span id="cb54-277"><a href="#cb54-277" aria-hidden="true" tabindex="-1"></a><span class="co">        277         depend_on: {</span></span>
<span id="cb54-278"><a href="#cb54-278" aria-hidden="true" tabindex="-1"></a><span class="co">        278             app1</span></span>
<span id="cb54-279"><a href="#cb54-279" aria-hidden="true" tabindex="-1"></a><span class="co">        279             mod1</span></span>
<span id="cb54-280"><a href="#cb54-280" aria-hidden="true" tabindex="-1"></a><span class="co">        280         }</span></span>
<span id="cb54-281"><a href="#cb54-281" aria-hidden="true" tabindex="-1"></a><span class="co">        281     */</span></span>
<span id="cb54-282"><a href="#cb54-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span> </span>
<span id="cb54-283"><a href="#cb54-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>     <span class="op">{</span></span>
<span id="cb54-284"><a href="#cb54-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>         <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">*</span> app1_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb54-285"><a href="#cb54-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span>         <span class="op">{</span></span>
<span id="cb54-286"><a href="#cb54-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>             <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> app1 <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb54-287"><a href="#cb54-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span> </span>
<span id="cb54-288"><a href="#cb54-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> app1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-289"><a href="#cb54-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span>             ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> app1<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb54-290"><a href="#cb54-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>             ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-291"><a href="#cb54-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>             <span class="op">{</span></span>
<span id="cb54-292"><a href="#cb54-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>                 <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> depend <span class="op">=</span> app1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb54-293"><a href="#cb54-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span> </span>
<span id="cb54-294"><a href="#cb54-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>                 ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-295"><a href="#cb54-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>                 ASSERT_TRUE<span class="op">(</span>app1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb54-296"><a href="#cb54-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>             <span class="op">}</span></span>
<span id="cb54-297"><a href="#cb54-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> </span>
<span id="cb54-298"><a href="#cb54-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span>             ASSERT_TRUE<span class="op">(</span>app1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-299"><a href="#cb54-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span> </span>
<span id="cb54-300"><a href="#cb54-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span>             app1_children <span class="op">=</span> <span class="op">&amp;</span>app1<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-301"><a href="#cb54-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span>             ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app1_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb54-302"><a href="#cb54-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>         <span class="op">}</span></span>
<span id="cb54-303"><a href="#cb54-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>         <span class="op">{</span></span>
<span id="cb54-304"><a href="#cb54-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span>             <span class="op">{</span></span>
<span id="cb54-305"><a href="#cb54-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>                 <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod1 <span class="op">=</span> <span class="op">*</span>app1_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb54-306"><a href="#cb54-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span>                 ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> mod1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-307"><a href="#cb54-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>                 ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> mod1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-308"><a href="#cb54-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>                 ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-309"><a href="#cb54-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>                 <span class="op">{</span></span>
<span id="cb54-310"><a href="#cb54-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>                     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> depend <span class="op">=</span> mod1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb54-311"><a href="#cb54-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span> </span>
<span id="cb54-312"><a href="#cb54-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-313"><a href="#cb54-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>                     ASSERT_FALSE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb54-314"><a href="#cb54-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span> </span>
<span id="cb54-315"><a href="#cb54-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>                     <span class="kw">auto</span> <span class="at">const</span> next <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb54-316"><a href="#cb54-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> next<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-317"><a href="#cb54-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>                     ASSERT_TRUE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>next<span class="op">));</span></span>
<span id="cb54-318"><a href="#cb54-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span>                 <span class="op">}</span></span>
<span id="cb54-319"><a href="#cb54-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>                 ASSERT_TRUE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-320"><a href="#cb54-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>             <span class="op">}</span></span>
<span id="cb54-321"><a href="#cb54-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>             <span class="dt">Arch_t</span> <span class="at">const</span><span class="op">*</span> mod2_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb54-322"><a href="#cb54-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span>             <span class="op">{</span></span>
<span id="cb54-323"><a href="#cb54-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>                 <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>app1_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb54-324"><a href="#cb54-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>                 ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-325"><a href="#cb54-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span>                 ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-326"><a href="#cb54-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>                 ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-327"><a href="#cb54-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span> </span>
<span id="cb54-328"><a href="#cb54-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>                 mod2_children <span class="op">=</span> <span class="op">&amp;</span>mod2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb54-329"><a href="#cb54-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>                 ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb54-330"><a href="#cb54-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span> </span>
<span id="cb54-331"><a href="#cb54-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span>                 ASSERT_FALSE<span class="op">(</span>mod2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-332"><a href="#cb54-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>             <span class="op">}</span></span>
<span id="cb54-333"><a href="#cb54-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>             <span class="op">{</span></span>
<span id="cb54-334"><a href="#cb54-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>                 <span class="op">{</span></span>
<span id="cb54-335"><a href="#cb54-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>                     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2_1 <span class="op">=</span> <span class="op">*</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb54-336"><a href="#cb54-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-337"><a href="#cb54-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span> </span>
<span id="cb54-338"><a href="#cb54-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-339"><a href="#cb54-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span>                     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-340"><a href="#cb54-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span>                     <span class="op">{</span></span>
<span id="cb54-341"><a href="#cb54-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span>                         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> depend <span class="op">=</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb54-342"><a href="#cb54-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>                         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-343"><a href="#cb54-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>                         ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb54-344"><a href="#cb54-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>                     <span class="op">}</span></span>
<span id="cb54-345"><a href="#cb54-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span> </span>
<span id="cb54-346"><a href="#cb54-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>                     ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-347"><a href="#cb54-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>                     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-348"><a href="#cb54-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span>                 <span class="op">}</span></span>
<span id="cb54-349"><a href="#cb54-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>                 <span class="op">{</span></span>
<span id="cb54-350"><a href="#cb54-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>                     <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> mod2_2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb54-351"><a href="#cb54-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-352"><a href="#cb54-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span> </span>
<span id="cb54-353"><a href="#cb54-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>                     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-354"><a href="#cb54-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span>                     ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-355"><a href="#cb54-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>                     <span class="op">{</span></span>
<span id="cb54-356"><a href="#cb54-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span>                         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> depend <span class="op">=</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb54-357"><a href="#cb54-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span>                         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-358"><a href="#cb54-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span>                         ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb54-359"><a href="#cb54-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span> </span>
<span id="cb54-360"><a href="#cb54-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span>                         <span class="kw">auto</span> <span class="at">const</span> next <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb54-361"><a href="#cb54-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span>                         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> <span class="op">(*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">()))-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-362"><a href="#cb54-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>                         ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>next<span class="op">));</span></span>
<span id="cb54-363"><a href="#cb54-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span>                     <span class="op">}</span></span>
<span id="cb54-364"><a href="#cb54-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span> </span>
<span id="cb54-365"><a href="#cb54-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>                     ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-366"><a href="#cb54-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>                     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-367"><a href="#cb54-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>                 <span class="op">}</span></span>
<span id="cb54-368"><a href="#cb54-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span>             <span class="op">}</span></span>
<span id="cb54-369"><a href="#cb54-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>         <span class="op">}</span></span>
<span id="cb54-370"><a href="#cb54-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span>     <span class="op">}</span></span>
<span id="cb54-371"><a href="#cb54-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>     <span class="op">{</span></span>
<span id="cb54-372"><a href="#cb54-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span>         <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> app2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>arch<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb54-373"><a href="#cb54-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span> </span>
<span id="cb54-374"><a href="#cb54-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app2&quot;</span><span class="op">,</span> app2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-375"><a href="#cb54-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span>         ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> app2<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb54-376"><a href="#cb54-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>         ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-377"><a href="#cb54-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span>         <span class="op">{</span></span>
<span id="cb54-378"><a href="#cb54-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span>             <span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> depend <span class="op">=</span> app2<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb54-379"><a href="#cb54-379" aria-hidden="true" tabindex="-1"></a>        <span class="dv">379</span> </span>
<span id="cb54-380"><a href="#cb54-380" aria-hidden="true" tabindex="-1"></a>        <span class="dv">380</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-381"><a href="#cb54-381" aria-hidden="true" tabindex="-1"></a>        <span class="dv">381</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> <span class="op">(*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">()))-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-382"><a href="#cb54-382" aria-hidden="true" tabindex="-1"></a>        <span class="dv">382</span>         <span class="op">}</span></span>
<span id="cb54-383"><a href="#cb54-383" aria-hidden="true" tabindex="-1"></a>        <span class="dv">383</span> </span>
<span id="cb54-384"><a href="#cb54-384" aria-hidden="true" tabindex="-1"></a>        <span class="dv">384</span>         ASSERT_FALSE<span class="op">(</span>app2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb54-385"><a href="#cb54-385" aria-hidden="true" tabindex="-1"></a>        <span class="dv">385</span>         ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> app2<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb54-386"><a href="#cb54-386" aria-hidden="true" tabindex="-1"></a>        <span class="dv">386</span>     <span class="op">}</span></span>
<span id="cb54-387"><a href="#cb54-387" aria-hidden="true" tabindex="-1"></a>        <span class="dv">387</span> <span class="op">}</span></span>
<span id="cb54-388"><a href="#cb54-388" aria-hidden="true" tabindex="-1"></a>        <span class="dv">388</span> </span>
<span id="cb54-389"><a href="#cb54-389" aria-hidden="true" tabindex="-1"></a>        <span class="dv">389</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ToPlantUML_Rectangle<span class="op">)</span></span>
<span id="cb54-390"><a href="#cb54-390" aria-hidden="true" tabindex="-1"></a>        <span class="dv">390</span> <span class="op">{</span></span>
<span id="cb54-391"><a href="#cb54-391" aria-hidden="true" tabindex="-1"></a>        <span class="dv">391</span>     <span class="op">{</span></span>
<span id="cb54-392"><a href="#cb54-392" aria-hidden="true" tabindex="-1"></a>        <span class="dv">392</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb54-393"><a href="#cb54-393" aria-hidden="true" tabindex="-1"></a>        <span class="dv">393</span>         <span class="kw">auto</span> <span class="at">const</span> exp  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-394"><a href="#cb54-394" aria-hidden="true" tabindex="-1"></a>        <span class="dv">394</span>             <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">A</span><span class="sc">\&quot;</span><span class="st"> as A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-395"><a href="#cb54-395" aria-hidden="true" tabindex="-1"></a>        <span class="dv">395</span>              <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">B</span><span class="sc">\&quot;</span><span class="st"> as B&quot;</span><span class="op">};</span></span>
<span id="cb54-396"><a href="#cb54-396" aria-hidden="true" tabindex="-1"></a>        <span class="dv">396</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb54-397"><a href="#cb54-397" aria-hidden="true" tabindex="-1"></a>        <span class="dv">397</span>     <span class="op">}</span></span>
<span id="cb54-398"><a href="#cb54-398" aria-hidden="true" tabindex="-1"></a>        <span class="dv">398</span>     <span class="op">{</span></span>
<span id="cb54-399"><a href="#cb54-399" aria-hidden="true" tabindex="-1"></a>        <span class="dv">399</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb54-400"><a href="#cb54-400" aria-hidden="true" tabindex="-1"></a>        <span class="dv">400</span>         <span class="kw">auto</span> <span class="at">const</span> exp  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-401"><a href="#cb54-401" aria-hidden="true" tabindex="-1"></a>        <span class="dv">401</span>             <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-402"><a href="#cb54-402" aria-hidden="true" tabindex="-1"></a>        <span class="dv">402</span>              <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-403"><a href="#cb54-403" aria-hidden="true" tabindex="-1"></a>        <span class="dv">403</span>              <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-404"><a href="#cb54-404" aria-hidden="true" tabindex="-1"></a>        <span class="dv">404</span>              <span class="st">&quot;}&quot;</span><span class="op">};</span></span>
<span id="cb54-405"><a href="#cb54-405" aria-hidden="true" tabindex="-1"></a>        <span class="dv">405</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb54-406"><a href="#cb54-406" aria-hidden="true" tabindex="-1"></a>        <span class="dv">406</span>     <span class="op">}</span></span>
<span id="cb54-407"><a href="#cb54-407" aria-hidden="true" tabindex="-1"></a>        <span class="dv">407</span>     <span class="op">{</span></span>
<span id="cb54-408"><a href="#cb54-408" aria-hidden="true" tabindex="-1"></a>        <span class="dv">408</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb54-409"><a href="#cb54-409" aria-hidden="true" tabindex="-1"></a>        <span class="dv">409</span>         <span class="kw">auto</span> <span class="at">const</span> exp  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-410"><a href="#cb54-410" aria-hidden="true" tabindex="-1"></a>        <span class="dv">410</span>             <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-411"><a href="#cb54-411" aria-hidden="true" tabindex="-1"></a>        <span class="dv">411</span>              <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-412"><a href="#cb54-412" aria-hidden="true" tabindex="-1"></a>        <span class="dv">412</span>              <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-413"><a href="#cb54-413" aria-hidden="true" tabindex="-1"></a>        <span class="dv">413</span>              <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-414"><a href="#cb54-414" aria-hidden="true" tabindex="-1"></a>        <span class="dv">414</span>              <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-415"><a href="#cb54-415" aria-hidden="true" tabindex="-1"></a>        <span class="dv">415</span>              <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-416"><a href="#cb54-416" aria-hidden="true" tabindex="-1"></a>        <span class="dv">416</span>              <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-417"><a href="#cb54-417" aria-hidden="true" tabindex="-1"></a>        <span class="dv">417</span>              <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app2&quot;</span><span class="op">};</span></span>
<span id="cb54-418"><a href="#cb54-418" aria-hidden="true" tabindex="-1"></a>        <span class="dv">418</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb54-419"><a href="#cb54-419" aria-hidden="true" tabindex="-1"></a>        <span class="dv">419</span>     <span class="op">}</span></span>
<span id="cb54-420"><a href="#cb54-420" aria-hidden="true" tabindex="-1"></a>        <span class="dv">420</span> <span class="op">}</span></span>
<span id="cb54-421"><a href="#cb54-421" aria-hidden="true" tabindex="-1"></a>        <span class="dv">421</span> </span>
<span id="cb54-422"><a href="#cb54-422" aria-hidden="true" tabindex="-1"></a>        <span class="dv">422</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ToPlantUML_Rectangle2<span class="op">)</span></span>
<span id="cb54-423"><a href="#cb54-423" aria-hidden="true" tabindex="-1"></a>        <span class="dv">423</span> <span class="op">{</span></span>
<span id="cb54-424"><a href="#cb54-424" aria-hidden="true" tabindex="-1"></a>        <span class="dv">424</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb54-425"><a href="#cb54-425" aria-hidden="true" tabindex="-1"></a>        <span class="dv">425</span>     <span class="kw">auto</span> <span class="at">const</span> exp  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb54-426"><a href="#cb54-426" aria-hidden="true" tabindex="-1"></a>        <span class="dv">426</span>         <span class="st">&quot;ut_data___app1 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-427"><a href="#cb54-427" aria-hidden="true" tabindex="-1"></a>        <span class="dv">427</span>          <span class="st">&quot;ut_data___app1___mod2___mod2_2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-428"><a href="#cb54-428" aria-hidden="true" tabindex="-1"></a>        <span class="dv">428</span>          <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-429"><a href="#cb54-429" aria-hidden="true" tabindex="-1"></a>        <span class="dv">429</span>          <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-430"><a href="#cb54-430" aria-hidden="true" tabindex="-1"></a>        <span class="dv">430</span>          <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-431"><a href="#cb54-431" aria-hidden="true" tabindex="-1"></a>        <span class="dv">431</span>          <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb54-432"><a href="#cb54-432" aria-hidden="true" tabindex="-1"></a>        <span class="dv">432</span>          <span class="st">&quot;ut_data___app1___mod2___mod2_1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> &lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> ut_data___app1___mod2___mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb54-433"><a href="#cb54-433" aria-hidden="true" tabindex="-1"></a>        <span class="dv">433</span> </span>
<span id="cb54-434"><a href="#cb54-434" aria-hidden="true" tabindex="-1"></a>        <span class="dv">434</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">,</span> dep_rels_complex<span class="op">));</span></span>
<span id="cb54-435"><a href="#cb54-435" aria-hidden="true" tabindex="-1"></a>        <span class="dv">435</span> <span class="op">}</span></span>
<span id="cb54-436"><a href="#cb54-436" aria-hidden="true" tabindex="-1"></a>        <span class="dv">436</span> </span>
<span id="cb54-437"><a href="#cb54-437" aria-hidden="true" tabindex="-1"></a>        <span class="dv">437</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> HasCyclicDeps<span class="op">)</span></span>
<span id="cb54-438"><a href="#cb54-438" aria-hidden="true" tabindex="-1"></a>        <span class="dv">438</span> <span class="op">{</span></span>
<span id="cb54-439"><a href="#cb54-439" aria-hidden="true" tabindex="-1"></a>        <span class="dv">439</span>     <span class="op">{</span></span>
<span id="cb54-440"><a href="#cb54-440" aria-hidden="true" tabindex="-1"></a>        <span class="dv">440</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb54-441"><a href="#cb54-441" aria-hidden="true" tabindex="-1"></a>        <span class="dv">441</span>         ASSERT_FALSE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_simple<span class="op">));</span></span>
<span id="cb54-442"><a href="#cb54-442" aria-hidden="true" tabindex="-1"></a>        <span class="dv">442</span>     <span class="op">}</span></span>
<span id="cb54-443"><a href="#cb54-443" aria-hidden="true" tabindex="-1"></a>        <span class="dv">443</span>     <span class="op">{</span></span>
<span id="cb54-444"><a href="#cb54-444" aria-hidden="true" tabindex="-1"></a>        <span class="dv">444</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb54-445"><a href="#cb54-445" aria-hidden="true" tabindex="-1"></a>        <span class="dv">445</span>         ASSERT_TRUE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_middle<span class="op">));</span></span>
<span id="cb54-446"><a href="#cb54-446" aria-hidden="true" tabindex="-1"></a>        <span class="dv">446</span>     <span class="op">}</span></span>
<span id="cb54-447"><a href="#cb54-447" aria-hidden="true" tabindex="-1"></a>        <span class="dv">447</span>     <span class="op">{</span></span>
<span id="cb54-448"><a href="#cb54-448" aria-hidden="true" tabindex="-1"></a>        <span class="dv">448</span>         <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb54-449"><a href="#cb54-449" aria-hidden="true" tabindex="-1"></a>        <span class="dv">449</span>         ASSERT_TRUE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_complex<span class="op">));</span></span>
<span id="cb54-450"><a href="#cb54-450" aria-hidden="true" tabindex="-1"></a>        <span class="dv">450</span>     <span class="op">}</span></span>
<span id="cb54-451"><a href="#cb54-451" aria-hidden="true" tabindex="-1"></a>        <span class="dv">451</span> <span class="op">}</span></span>
<span id="cb54-452"><a href="#cb54-452" aria-hidden="true" tabindex="-1"></a>        <span class="dv">452</span> </span>
<span id="cb54-453"><a href="#cb54-453" aria-hidden="true" tabindex="-1"></a>        <span class="dv">453</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg<span class="op">)</span></span>
<span id="cb54-454"><a href="#cb54-454" aria-hidden="true" tabindex="-1"></a>        <span class="dv">454</span> <span class="op">{</span></span>
<span id="cb54-455"><a href="#cb54-455" aria-hidden="true" tabindex="-1"></a>        <span class="dv">455</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb54-456"><a href="#cb54-456" aria-hidden="true" tabindex="-1"></a>        <span class="dv">456</span> </span>
<span id="cb54-457"><a href="#cb54-457" aria-hidden="true" tabindex="-1"></a>        <span class="dv">457</span>     <span class="op">{</span></span>
<span id="cb54-458"><a href="#cb54-458" aria-hidden="true" tabindex="-1"></a>        <span class="dv">458</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_a <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb54-459"><a href="#cb54-459" aria-hidden="true" tabindex="-1"></a>        <span class="dv">459</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a<span class="op">);</span></span>
<span id="cb54-460"><a href="#cb54-460" aria-hidden="true" tabindex="-1"></a>        <span class="dv">460</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-461"><a href="#cb54-461" aria-hidden="true" tabindex="-1"></a>        <span class="dv">461</span>     <span class="op">}</span></span>
<span id="cb54-462"><a href="#cb54-462" aria-hidden="true" tabindex="-1"></a>        <span class="dv">462</span>     <span class="op">{</span></span>
<span id="cb54-463"><a href="#cb54-463" aria-hidden="true" tabindex="-1"></a>        <span class="dv">463</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_a_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb54-464"><a href="#cb54-464" aria-hidden="true" tabindex="-1"></a>        <span class="dv">464</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a_f<span class="op">);</span></span>
<span id="cb54-465"><a href="#cb54-465" aria-hidden="true" tabindex="-1"></a>        <span class="dv">465</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-466"><a href="#cb54-466" aria-hidden="true" tabindex="-1"></a>        <span class="dv">466</span>     <span class="op">}</span></span>
<span id="cb54-467"><a href="#cb54-467" aria-hidden="true" tabindex="-1"></a>        <span class="dv">467</span>     <span class="op">{</span></span>
<span id="cb54-468"><a href="#cb54-468" aria-hidden="true" tabindex="-1"></a>        <span class="dv">468</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_b <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">);</span></span>
<span id="cb54-469"><a href="#cb54-469" aria-hidden="true" tabindex="-1"></a>        <span class="dv">469</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_b<span class="op">);</span></span>
<span id="cb54-470"><a href="#cb54-470" aria-hidden="true" tabindex="-1"></a>        <span class="dv">470</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> pkg_b<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-471"><a href="#cb54-471" aria-hidden="true" tabindex="-1"></a>        <span class="dv">471</span>     <span class="op">}</span></span>
<span id="cb54-472"><a href="#cb54-472" aria-hidden="true" tabindex="-1"></a>        <span class="dv">472</span>     <span class="op">{</span></span>
<span id="cb54-473"><a href="#cb54-473" aria-hidden="true" tabindex="-1"></a>        <span class="dv">473</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_b_f <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">);</span></span>
<span id="cb54-474"><a href="#cb54-474" aria-hidden="true" tabindex="-1"></a>        <span class="dv">474</span> </span>
<span id="cb54-475"><a href="#cb54-475" aria-hidden="true" tabindex="-1"></a>        <span class="dv">475</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_b_f<span class="op">);</span></span>
<span id="cb54-476"><a href="#cb54-476" aria-hidden="true" tabindex="-1"></a>        <span class="dv">476</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> pkg_b_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-477"><a href="#cb54-477" aria-hidden="true" tabindex="-1"></a>        <span class="dv">477</span>     <span class="op">}</span></span>
<span id="cb54-478"><a href="#cb54-478" aria-hidden="true" tabindex="-1"></a>        <span class="dv">478</span> <span class="op">}</span></span>
<span id="cb54-479"><a href="#cb54-479" aria-hidden="true" tabindex="-1"></a>        <span class="dv">479</span> </span>
<span id="cb54-480"><a href="#cb54-480" aria-hidden="true" tabindex="-1"></a>        <span class="dv">480</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg2<span class="op">)</span></span>
<span id="cb54-481"><a href="#cb54-481" aria-hidden="true" tabindex="-1"></a>        <span class="dv">481</span> <span class="op">{</span></span>
<span id="cb54-482"><a href="#cb54-482" aria-hidden="true" tabindex="-1"></a>        <span class="dv">482</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple2<span class="op">);</span></span>
<span id="cb54-483"><a href="#cb54-483" aria-hidden="true" tabindex="-1"></a>        <span class="dv">483</span> </span>
<span id="cb54-484"><a href="#cb54-484" aria-hidden="true" tabindex="-1"></a>        <span class="dv">484</span>     <span class="op">{</span></span>
<span id="cb54-485"><a href="#cb54-485" aria-hidden="true" tabindex="-1"></a>        <span class="dv">485</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_x <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X&quot;</span><span class="op">);</span></span>
<span id="cb54-486"><a href="#cb54-486" aria-hidden="true" tabindex="-1"></a>        <span class="dv">486</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_x<span class="op">);</span></span>
<span id="cb54-487"><a href="#cb54-487" aria-hidden="true" tabindex="-1"></a>        <span class="dv">487</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;X&quot;</span><span class="op">,</span> pkg_x<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-488"><a href="#cb54-488" aria-hidden="true" tabindex="-1"></a>        <span class="dv">488</span>     <span class="op">}</span></span>
<span id="cb54-489"><a href="#cb54-489" aria-hidden="true" tabindex="-1"></a>        <span class="dv">489</span>     <span class="op">{</span></span>
<span id="cb54-490"><a href="#cb54-490" aria-hidden="true" tabindex="-1"></a>        <span class="dv">490</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_x_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X&quot;</span><span class="op">);</span></span>
<span id="cb54-491"><a href="#cb54-491" aria-hidden="true" tabindex="-1"></a>        <span class="dv">491</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_x_f<span class="op">);</span></span>
<span id="cb54-492"><a href="#cb54-492" aria-hidden="true" tabindex="-1"></a>        <span class="dv">492</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;X&quot;</span><span class="op">,</span> pkg_x_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-493"><a href="#cb54-493" aria-hidden="true" tabindex="-1"></a>        <span class="dv">493</span>     <span class="op">}</span></span>
<span id="cb54-494"><a href="#cb54-494" aria-hidden="true" tabindex="-1"></a>        <span class="dv">494</span>     <span class="op">{</span></span>
<span id="cb54-495"><a href="#cb54-495" aria-hidden="true" tabindex="-1"></a>        <span class="dv">495</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_a <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb54-496"><a href="#cb54-496" aria-hidden="true" tabindex="-1"></a>        <span class="dv">496</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a<span class="op">);</span></span>
<span id="cb54-497"><a href="#cb54-497" aria-hidden="true" tabindex="-1"></a>        <span class="dv">497</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-498"><a href="#cb54-498" aria-hidden="true" tabindex="-1"></a>        <span class="dv">498</span>     <span class="op">}</span></span>
<span id="cb54-499"><a href="#cb54-499" aria-hidden="true" tabindex="-1"></a>        <span class="dv">499</span>     <span class="op">{</span></span>
<span id="cb54-500"><a href="#cb54-500" aria-hidden="true" tabindex="-1"></a>        <span class="dv">500</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_a_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X/A&quot;</span><span class="op">);</span></span>
<span id="cb54-501"><a href="#cb54-501" aria-hidden="true" tabindex="-1"></a>        <span class="dv">501</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a_f<span class="op">);</span></span>
<span id="cb54-502"><a href="#cb54-502" aria-hidden="true" tabindex="-1"></a>        <span class="dv">502</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> pkg_a_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-503"><a href="#cb54-503" aria-hidden="true" tabindex="-1"></a>        <span class="dv">503</span>     <span class="op">}</span></span>
<span id="cb54-504"><a href="#cb54-504" aria-hidden="true" tabindex="-1"></a>        <span class="dv">504</span>     <span class="op">{</span></span>
<span id="cb54-505"><a href="#cb54-505" aria-hidden="true" tabindex="-1"></a>        <span class="dv">505</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_y <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;Y&quot;</span><span class="op">);</span></span>
<span id="cb54-506"><a href="#cb54-506" aria-hidden="true" tabindex="-1"></a>        <span class="dv">506</span>         ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_y<span class="op">);</span></span>
<span id="cb54-507"><a href="#cb54-507" aria-hidden="true" tabindex="-1"></a>        <span class="dv">507</span>     <span class="op">}</span></span>
<span id="cb54-508"><a href="#cb54-508" aria-hidden="true" tabindex="-1"></a>        <span class="dv">508</span>     <span class="op">{</span></span>
<span id="cb54-509"><a href="#cb54-509" aria-hidden="true" tabindex="-1"></a>        <span class="dv">509</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_y_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;Y&quot;</span><span class="op">);</span></span>
<span id="cb54-510"><a href="#cb54-510" aria-hidden="true" tabindex="-1"></a>        <span class="dv">510</span>         ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_y_f<span class="op">);</span></span>
<span id="cb54-511"><a href="#cb54-511" aria-hidden="true" tabindex="-1"></a>        <span class="dv">511</span>     <span class="op">}</span></span>
<span id="cb54-512"><a href="#cb54-512" aria-hidden="true" tabindex="-1"></a>        <span class="dv">512</span> <span class="op">}</span></span>
<span id="cb54-513"><a href="#cb54-513" aria-hidden="true" tabindex="-1"></a>        <span class="dv">513</span> </span>
<span id="cb54-514"><a href="#cb54-514" aria-hidden="true" tabindex="-1"></a>        <span class="dv">514</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg3<span class="op">)</span></span>
<span id="cb54-515"><a href="#cb54-515" aria-hidden="true" tabindex="-1"></a>        <span class="dv">515</span> <span class="op">{</span></span>
<span id="cb54-516"><a href="#cb54-516" aria-hidden="true" tabindex="-1"></a>        <span class="dv">516</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb54-517"><a href="#cb54-517" aria-hidden="true" tabindex="-1"></a>        <span class="dv">517</span> </span>
<span id="cb54-518"><a href="#cb54-518" aria-hidden="true" tabindex="-1"></a>        <span class="dv">518</span>     <span class="op">{</span></span>
<span id="cb54-519"><a href="#cb54-519" aria-hidden="true" tabindex="-1"></a>        <span class="dv">519</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_app1 <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;app1&quot;</span><span class="op">);</span></span>
<span id="cb54-520"><a href="#cb54-520" aria-hidden="true" tabindex="-1"></a>        <span class="dv">520</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_app1<span class="op">);</span></span>
<span id="cb54-521"><a href="#cb54-521" aria-hidden="true" tabindex="-1"></a>        <span class="dv">521</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> pkg_app1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-522"><a href="#cb54-522" aria-hidden="true" tabindex="-1"></a>        <span class="dv">522</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> pkg_app1<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-523"><a href="#cb54-523" aria-hidden="true" tabindex="-1"></a>        <span class="dv">523</span>     <span class="op">}</span></span>
<span id="cb54-524"><a href="#cb54-524" aria-hidden="true" tabindex="-1"></a>        <span class="dv">524</span>     <span class="op">{</span></span>
<span id="cb54-525"><a href="#cb54-525" aria-hidden="true" tabindex="-1"></a>        <span class="dv">525</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_app1_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;ut_data/app1&quot;</span><span class="op">);</span></span>
<span id="cb54-526"><a href="#cb54-526" aria-hidden="true" tabindex="-1"></a>        <span class="dv">526</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_app1_f<span class="op">);</span></span>
<span id="cb54-527"><a href="#cb54-527" aria-hidden="true" tabindex="-1"></a>        <span class="dv">527</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> pkg_app1_f<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-528"><a href="#cb54-528" aria-hidden="true" tabindex="-1"></a>        <span class="dv">528</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> pkg_app1_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-529"><a href="#cb54-529" aria-hidden="true" tabindex="-1"></a>        <span class="dv">529</span>     <span class="op">}</span></span>
<span id="cb54-530"><a href="#cb54-530" aria-hidden="true" tabindex="-1"></a>        <span class="dv">530</span>     <span class="op">{</span></span>
<span id="cb54-531"><a href="#cb54-531" aria-hidden="true" tabindex="-1"></a>        <span class="dv">531</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_mod2_1 <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;mod2_1&quot;</span><span class="op">);</span></span>
<span id="cb54-532"><a href="#cb54-532" aria-hidden="true" tabindex="-1"></a>        <span class="dv">532</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_mod2_1<span class="op">);</span></span>
<span id="cb54-533"><a href="#cb54-533" aria-hidden="true" tabindex="-1"></a>        <span class="dv">533</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-534"><a href="#cb54-534" aria-hidden="true" tabindex="-1"></a>        <span class="dv">534</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-535"><a href="#cb54-535" aria-hidden="true" tabindex="-1"></a>        <span class="dv">535</span>     <span class="op">}</span></span>
<span id="cb54-536"><a href="#cb54-536" aria-hidden="true" tabindex="-1"></a>        <span class="dv">536</span>     <span class="op">{</span></span>
<span id="cb54-537"><a href="#cb54-537" aria-hidden="true" tabindex="-1"></a>        <span class="dv">537</span>         ArchPkg <span class="at">const</span><span class="op">*</span> pkg_mod2_1_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">);</span></span>
<span id="cb54-538"><a href="#cb54-538" aria-hidden="true" tabindex="-1"></a>        <span class="dv">538</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_mod2_1_f<span class="op">);</span></span>
<span id="cb54-539"><a href="#cb54-539" aria-hidden="true" tabindex="-1"></a>        <span class="dv">539</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1_f<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb54-540"><a href="#cb54-540" aria-hidden="true" tabindex="-1"></a>        <span class="dv">540</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb54-541"><a href="#cb54-541" aria-hidden="true" tabindex="-1"></a>        <span class="dv">541</span>     <span class="op">}</span></span>
<span id="cb54-542"><a href="#cb54-542" aria-hidden="true" tabindex="-1"></a>        <span class="dv">542</span> <span class="op">}</span></span>
<span id="cb54-543"><a href="#cb54-543" aria-hidden="true" tabindex="-1"></a>        <span class="dv">543</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb54-544"><a href="#cb54-544" aria-hidden="true" tabindex="-1"></a>        <span class="dv">544</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_deps_ut.cpp">example/deps/dependency/ut/cpp_deps_ut.cpp
<a id="SS_23_2_18"></a></h3>
<div class="sourceCode" id="cb55"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>cpp_deps<span class="op">,</span> GenDepRels<span class="op">)</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">{</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/&quot;</span><span class="op">});</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="kw">auto</span> <span class="at">const</span> assign       <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="kw">auto</span> <span class="at">const</span> srcs_db      <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pair <span class="op">:</span> assign<span class="op">)</span> <span class="op">{</span></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>         cpp_dirs<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>pair<span class="op">.</span>first<span class="op">,</span> GenCppSrc<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> srcs_db<span class="op">)});</span></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="op">}</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">auto</span> dep_all <span class="op">=</span> GenDepRels<span class="op">(</span>cpp_dirs<span class="op">);</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="kw">auto</span> <span class="at">const</span> app1   <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">};</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="kw">auto</span> <span class="at">const</span> mod1   <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">};</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="kw">auto</span> <span class="at">const</span> mod2_2 <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="op">{</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod1 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> app1<span class="op">,</span> mod1<span class="op">);</span></span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>         ASSERT_EQ<span class="op">(</span><span class="dv">6</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>         ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod1_IncsAtoB</span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>             <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">};</span></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         ASSERT_EQ<span class="op">(</span>app1_mod1_IncsAtoB<span class="op">,</span> app1_mod1<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span> app1_mod1<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="op">}</span></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="op">{</span></span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod1 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> mod1<span class="op">,</span> app1<span class="op">);</span></span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>         ASSERT_EQ<span class="op">(</span><span class="dv">6</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod1_IncsAtoB</span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>             <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">};</span></span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         ASSERT_EQ<span class="op">(</span>app1_mod1_IncsAtoB<span class="op">,</span> app1_mod1<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span> app1_mod1<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">}</span></span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="op">{</span></span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         <span class="kw">auto</span> <span class="at">const</span> mod1_mod2_2 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> mod1<span class="op">,</span> mod2_2<span class="op">);</span></span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>         ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> </span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="kw">auto</span> <span class="at">const</span> mod1_mod2_2_IncsAtoB <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         ASSERT_EQ<span class="op">(</span>mod1_mod2_2_IncsAtoB<span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>         ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}),</span></span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>                   mod1_mod2_2<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">}</span></span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="op">{</span></span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod2_2 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> app1<span class="op">,</span> mod2_2<span class="op">);</span></span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         ASSERT_EQ<span class="op">(</span><span class="dv">3</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>         ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span> app1_mod2_2<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> </span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>         <span class="kw">auto</span> <span class="at">const</span> app1_mod2_2_IncsAtoB <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">};</span></span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>         ASSERT_EQ<span class="op">(</span>app1_mod2_2_IncsAtoB<span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="op">}</span></span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> <span class="op">}</span></span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_dir_ut.cpp">example/deps/dependency/ut/cpp_dir_ut.cpp
<a id="SS_23_2_19"></a></h3>
<div class="sourceCode" id="cb56"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> GenCppDirs<span class="op">)</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="op">{</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">auto</span> <span class="at">const</span> db           <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_dirs     <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{</span>GenCppDirs<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">)};</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="kw">auto</span> a_1_cpp <span class="op">=</span> <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>                                 <span class="op">[](</span>CppDir <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;a_1_cpp.cpp&quot;</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     ASSERT_NE<span class="op">(</span>a_1_cpp<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="kw">auto</span> a_1_cpp_h <span class="op">=</span> <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>                                   <span class="op">[](</span>CppDir <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;a_1_cpp.h&quot;</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     ASSERT_NE<span class="op">(</span>a_1_cpp_h<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="kw">auto</span> mod2_2_1_h <span class="op">=</span> <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>                                    <span class="op">[](</span>CppDir <span class="at">const</span><span class="op">&amp;</span> pkg<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;mod2_2_1.h&quot;</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     ASSERT_NE<span class="op">(</span>mod2_2_1_h<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="kw">auto</span> ret_a_1_cpp <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>a_1_cpp<span class="op">-&gt;</span>DependsOn<span class="op">(*</span>a_1_cpp_h<span class="op">)};</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_a_1_cpp<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="kw">auto</span> ret_mod2_2_1_h <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>mod2_2_1_h<span class="op">-&gt;</span>DependsOn<span class="op">(*</span>a_1_cpp_h<span class="op">)};</span></span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> ret_mod2_2_1_h<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> CppDir<span class="op">)</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">{</span></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span>  <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="kw">auto</span> <span class="at">const</span> packagae_srcs <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="kw">auto</span> <span class="at">const</span> db            <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="kw">auto</span> mod1 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="kw">auto</span> app2 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">));</span></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">));</span></span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">));</span></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     ASSERT_FALSE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">));</span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="kw">auto</span> ret_mod1 <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>mod1<span class="op">.</span>DependsOn<span class="op">(</span>app2<span class="op">)};</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_mod1<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_mod1<span class="op">.</span>second<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="kw">auto</span> ret_app2 <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>app2<span class="op">.</span>DependsOn<span class="op">(</span>mod1<span class="op">)};</span></span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> ret_app2<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}),</span></span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>               ret_app2<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="op">}</span></span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> operator_eq_tl<span class="op">)</span></span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="op">{</span></span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span>  <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="kw">auto</span> <span class="at">const</span> packagae_srcs <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb56-66"><a href="#cb56-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="kw">auto</span> <span class="at">const</span> db            <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="kw">auto</span> mod1_0 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="kw">auto</span> mod1_1 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="kw">auto</span> app2   <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     ASSERT_EQ<span class="op">(</span>mod1_0<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     ASSERT_EQ<span class="op">(</span>mod1_0<span class="op">,</span> mod1_1<span class="op">);</span></span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     ASSERT_EQ<span class="op">(</span>mod1_1<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     ASSERT_NE<span class="op">(</span>mod1_0<span class="op">,</span> app2<span class="op">);</span></span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     ASSERT_LT<span class="op">(</span>mod1_0<span class="op">,</span> app2<span class="op">);</span></span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_GT<span class="op">(</span>app2<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="op">}</span></span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_src_ut.cpp">example/deps/dependency/ut/cpp_src_ut.cpp
<a id="SS_23_2_20"></a></h3>
<div class="sourceCode" id="cb57"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> CppSrc<span class="op">)</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="op">{</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">auto</span> <span class="at">const</span> db                   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src              <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="kw">auto</span> <span class="at">const</span> exp_incs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     ASSERT_EQ<span class="op">(</span>cpp_src<span class="op">.</span>GetIncs<span class="op">(),</span> exp_incs<span class="op">);</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">auto</span> <span class="at">const</span> exp_not_found <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">};</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     ASSERT_EQ<span class="op">(</span>cpp_src<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> exp_not_found<span class="op">);</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src2 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="kw">auto</span> <span class="at">const</span> exp_incs2 <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     ASSERT_EQ<span class="op">(</span>cpp_src2<span class="op">.</span>GetIncs<span class="op">(),</span> exp_incs2<span class="op">);</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     ASSERT_EQ<span class="op">(</span>cpp_src2<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src3 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     ASSERT_EQ<span class="op">(</span>cpp_src3<span class="op">.</span>GetIncs<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     ASSERT_EQ<span class="op">(</span>cpp_src3<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">}</span></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> GenCppSrc<span class="op">)</span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">{</span></span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="kw">auto</span> <span class="at">const</span> db                   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="kw">auto</span> <span class="at">const</span> srcs</span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">};</span></span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_srcs_act <span class="op">=</span> GenCppSrc<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">);</span></span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     ASSERT_EQ<span class="op">(</span>cpp_srcs_act<span class="op">.</span>size<span class="op">(),</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb57-55"><a href="#cb57-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="dt">Paths_t</span> <span class="at">const</span> exp_incs<span class="op">[]{</span></span>
<span id="cb57-56"><a href="#cb57-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-57"><a href="#cb57-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>          <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-58"><a href="#cb57-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>          <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb57-59"><a href="#cb57-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-60"><a href="#cb57-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>          <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb57-61"><a href="#cb57-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         <span class="op">{},</span></span>
<span id="cb57-62"><a href="#cb57-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="op">};</span></span>
<span id="cb57-63"><a href="#cb57-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="dt">Paths_t</span> <span class="at">const</span> exp_not_found<span class="op">[]{</span></span>
<span id="cb57-64"><a href="#cb57-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>         <span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">},</span></span>
<span id="cb57-65"><a href="#cb57-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         <span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">},</span></span>
<span id="cb57-66"><a href="#cb57-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="op">{},</span></span>
<span id="cb57-67"><a href="#cb57-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="op">};</span></span>
<span id="cb57-68"><a href="#cb57-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb57-69"><a href="#cb57-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="kw">auto</span> it_exp_srcs      <span class="op">=</span> srcs<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb57-70"><a href="#cb57-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="kw">auto</span> it_exp_incs      <span class="op">=</span> <span class="bu">std::</span>cbegin<span class="op">(</span>exp_incs<span class="op">);</span></span>
<span id="cb57-71"><a href="#cb57-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="kw">auto</span> it_exp_not_found <span class="op">=</span> <span class="bu">std::</span>cbegin<span class="op">(</span>exp_not_found<span class="op">);</span></span>
<span id="cb57-72"><a href="#cb57-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb57-73"><a href="#cb57-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it_act <span class="op">=</span> cpp_srcs_act<span class="op">.</span>cbegin<span class="op">();</span> it_act <span class="op">!=</span> cpp_srcs_act<span class="op">.</span>cend<span class="op">();</span> <span class="op">++</span>it_act<span class="op">)</span> <span class="op">{</span></span>
<span id="cb57-74"><a href="#cb57-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>         ASSERT_EQ<span class="op">(*</span>it_exp_srcs<span class="op">,</span> it_act<span class="op">-&gt;</span>Path<span class="op">());</span></span>
<span id="cb57-75"><a href="#cb57-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>         ASSERT_EQ<span class="op">(*</span>it_exp_incs<span class="op">,</span> it_act<span class="op">-&gt;</span>GetIncs<span class="op">());</span></span>
<span id="cb57-76"><a href="#cb57-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         ASSERT_EQ<span class="op">(*</span>it_exp_not_found<span class="op">,</span> it_act<span class="op">-&gt;</span>GetIncsNotFound<span class="op">());</span></span>
<span id="cb57-77"><a href="#cb57-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb57-78"><a href="#cb57-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>         <span class="op">++</span>it_exp_srcs<span class="op">;</span></span>
<span id="cb57-79"><a href="#cb57-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>         <span class="op">++</span>it_exp_incs<span class="op">;</span></span>
<span id="cb57-80"><a href="#cb57-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         <span class="op">++</span>it_exp_not_found<span class="op">;</span></span>
<span id="cb57-81"><a href="#cb57-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="op">}</span></span>
<span id="cb57-82"><a href="#cb57-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb57-83"><a href="#cb57-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     ASSERT_EQ<span class="op">(</span>it_exp_srcs<span class="op">,</span> srcs<span class="op">.</span>cend<span class="op">());</span></span>
<span id="cb57-84"><a href="#cb57-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     ASSERT_EQ<span class="op">(</span>it_exp_incs<span class="op">,</span> <span class="bu">std::</span>cend<span class="op">(</span>exp_incs<span class="op">));</span></span>
<span id="cb57-85"><a href="#cb57-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     ASSERT_EQ<span class="op">(</span>it_exp_not_found<span class="op">,</span> <span class="bu">std::</span>cend<span class="op">(</span>exp_not_found<span class="op">));</span></span>
<span id="cb57-86"><a href="#cb57-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> <span class="op">}</span></span>
<span id="cb57-87"><a href="#cb57-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb57-88"><a href="#cb57-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> operator_equal<span class="op">)</span></span>
<span id="cb57-89"><a href="#cb57-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">{</span></span>
<span id="cb57-90"><a href="#cb57-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-91"><a href="#cb57-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb57-92"><a href="#cb57-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb57-93"><a href="#cb57-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>     <span class="kw">auto</span> <span class="at">const</span> db                   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb57-94"><a href="#cb57-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb57-95"><a href="#cb57-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src_0 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-96"><a href="#cb57-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src_1 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-97"><a href="#cb57-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src_2 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-98"><a href="#cb57-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb57-99"><a href="#cb57-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     ASSERT_EQ<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb57-100"><a href="#cb57-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     ASSERT_EQ<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_1<span class="op">);</span></span>
<span id="cb57-101"><a href="#cb57-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     ASSERT_EQ<span class="op">(</span>cpp_src_1<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb57-102"><a href="#cb57-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     ASSERT_NE<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_2<span class="op">);</span></span>
<span id="cb57-103"><a href="#cb57-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">}</span></span>
<span id="cb57-104"><a href="#cb57-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb57-105"><a href="#cb57-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> operator_lt<span class="op">)</span></span>
<span id="cb57-106"><a href="#cb57-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> <span class="op">{</span></span>
<span id="cb57-107"><a href="#cb57-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-108"><a href="#cb57-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb57-109"><a href="#cb57-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb57-110"><a href="#cb57-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="kw">auto</span> <span class="at">const</span> db                   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb57-111"><a href="#cb57-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb57-112"><a href="#cb57-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src_0 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-113"><a href="#cb57-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src_1 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-114"><a href="#cb57-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb57-115"><a href="#cb57-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     ASSERT_LT<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_1<span class="op">);</span></span>
<span id="cb57-116"><a href="#cb57-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>     ASSERT_GT<span class="op">(</span>cpp_src_1<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb57-117"><a href="#cb57-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> <span class="op">}</span></span>
<span id="cb57-118"><a href="#cb57-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb57-119"><a href="#cb57-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> ToString<span class="op">)</span></span>
<span id="cb57-120"><a href="#cb57-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="op">{</span></span>
<span id="cb57-121"><a href="#cb57-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-122"><a href="#cb57-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> </span>
<span id="cb57-123"><a href="#cb57-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb57-124"><a href="#cb57-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="kw">auto</span> <span class="at">const</span> db                   <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb57-125"><a href="#cb57-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="kw">auto</span> <span class="at">const</span> cpp_src              <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb57-126"><a href="#cb57-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb57-127"><a href="#cb57-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span></span>
<span id="cb57-128"><a href="#cb57-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>         <span class="st">&quot;file              : a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb57-129"><a href="#cb57-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>         <span class="st">&quot;path              : ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb57-130"><a href="#cb57-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         <span class="st">&quot;include           : ut_data/app1/a_1_c.h ut_data/app1/a_1_cpp.h &quot;</span></span>
<span id="cb57-131"><a href="#cb57-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp &quot;</span></span>
<span id="cb57-132"><a href="#cb57-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb57-133"><a href="#cb57-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>         <span class="st">&quot;include not found : stdio.h string.h</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb57-134"><a href="#cb57-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> </span>
<span id="cb57-135"><a href="#cb57-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     ASSERT_EQ<span class="op">(</span>ToStringCppSrc<span class="op">(</span>cpp_src<span class="op">),</span> exp<span class="op">);</span></span>
<span id="cb57-136"><a href="#cb57-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> <span class="op">}</span></span>
<span id="cb57-137"><a href="#cb57-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> </span>
<span id="cb57-138"><a href="#cb57-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> GetCppDirsSrcs<span class="op">)</span></span>
<span id="cb57-139"><a href="#cb57-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="op">{</span></span>
<span id="cb57-140"><a href="#cb57-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb57-141"><a href="#cb57-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> </span>
<span id="cb57-142"><a href="#cb57-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="op">{</span></span>
<span id="cb57-143"><a href="#cb57-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>         <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb57-144"><a href="#cb57-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>                                       <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb57-145"><a href="#cb57-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>                                       <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb57-146"><a href="#cb57-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb57-147"><a href="#cb57-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb57-148"><a href="#cb57-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>                                       <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb57-149"><a href="#cb57-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> </span>
<span id="cb57-150"><a href="#cb57-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>         <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb57-151"><a href="#cb57-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>                                       <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb57-152"><a href="#cb57-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-153"><a href="#cb57-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb57-154"><a href="#cb57-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb57-155"><a href="#cb57-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb57-156"><a href="#cb57-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb57-157"><a href="#cb57-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-158"><a href="#cb57-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>                                       <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb57-159"><a href="#cb57-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-160"><a href="#cb57-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-161"><a href="#cb57-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-162"><a href="#cb57-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-163"><a href="#cb57-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-164"><a href="#cb57-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-165"><a href="#cb57-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-166"><a href="#cb57-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-167"><a href="#cb57-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-168"><a href="#cb57-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>                                       <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-169"><a href="#cb57-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>                                       <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb57-170"><a href="#cb57-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb57-171"><a href="#cb57-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;./ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb57-172"><a href="#cb57-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb57-173"><a href="#cb57-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         ASSERT_EQ<span class="op">(</span>act_dirs<span class="op">,</span> exp_dirs<span class="op">);</span></span>
<span id="cb57-174"><a href="#cb57-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         ASSERT_EQ<span class="op">(</span>act_srcs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb57-175"><a href="#cb57-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>     <span class="op">}</span></span>
<span id="cb57-176"><a href="#cb57-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>     <span class="op">{</span></span>
<span id="cb57-177"><a href="#cb57-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>         <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb57-178"><a href="#cb57-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>                                       <span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb57-179"><a href="#cb57-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>                                       <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb57-180"><a href="#cb57-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>                                       <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb57-181"><a href="#cb57-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb57-182"><a href="#cb57-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb57-183"><a href="#cb57-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>                                       <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb57-184"><a href="#cb57-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb57-185"><a href="#cb57-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>         <span class="kw">auto</span> <span class="at">const</span> exp_srcs             <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb57-186"><a href="#cb57-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>                                       <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb57-187"><a href="#cb57-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-188"><a href="#cb57-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb57-189"><a href="#cb57-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb57-190"><a href="#cb57-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb57-191"><a href="#cb57-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb57-192"><a href="#cb57-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-193"><a href="#cb57-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>                                       <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb57-194"><a href="#cb57-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-195"><a href="#cb57-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-196"><a href="#cb57-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-197"><a href="#cb57-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-198"><a href="#cb57-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-199"><a href="#cb57-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-200"><a href="#cb57-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb57-201"><a href="#cb57-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-202"><a href="#cb57-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb57-203"><a href="#cb57-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>                                       <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb57-204"><a href="#cb57-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>                                       <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb57-205"><a href="#cb57-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>         <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;././ut_data&quot;</span><span class="op">});</span></span>
<span id="cb57-206"><a href="#cb57-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb57-207"><a href="#cb57-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>         ASSERT_EQ<span class="op">(</span>act_dirs<span class="op">,</span> exp_dirs<span class="op">);</span></span>
<span id="cb57-208"><a href="#cb57-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>         ASSERT_EQ<span class="op">(</span>act_srcs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb57-209"><a href="#cb57-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>     <span class="op">}</span></span>
<span id="cb57-210"><a href="#cb57-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> <span class="op">}</span></span>
<span id="cb57-211"><a href="#cb57-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb57-212"><a href="#cb57-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutdeps_scenario_ut.cpp">example/deps/dependency/ut/deps_scenario_ut.cpp
<a id="SS_23_2_21"></a></h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> PkgGenerator<span class="op">)</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="op">{</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="op">{</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">{</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb58-41"><a href="#cb58-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-42"><a href="#cb58-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb58-43"><a href="#cb58-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-44"><a href="#cb58-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-45"><a href="#cb58-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">}</span></span>
<span id="cb58-46"><a href="#cb58-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="op">}</span></span>
<span id="cb58-47"><a href="#cb58-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb58-48"><a href="#cb58-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> PkgGenerator2<span class="op">)</span></span>
<span id="cb58-49"><a href="#cb58-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">{</span></span>
<span id="cb58-50"><a href="#cb58-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-51"><a href="#cb58-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb58-52"><a href="#cb58-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="op">{</span></span>
<span id="cb58-53"><a href="#cb58-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-54"><a href="#cb58-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-55"><a href="#cb58-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-56"><a href="#cb58-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-57"><a href="#cb58-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-58"><a href="#cb58-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb58-59"><a href="#cb58-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-60"><a href="#cb58-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb58-61"><a href="#cb58-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-62"><a href="#cb58-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-63"><a href="#cb58-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="op">}</span></span>
<span id="cb58-64"><a href="#cb58-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="op">{</span></span>
<span id="cb58-65"><a href="#cb58-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;hehe&quot;</span><span class="op">};</span></span>
<span id="cb58-66"><a href="#cb58-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-67"><a href="#cb58-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-68"><a href="#cb58-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-69"><a href="#cb58-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-70"><a href="#cb58-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb58-71"><a href="#cb58-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-72"><a href="#cb58-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb58-73"><a href="#cb58-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-74"><a href="#cb58-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-75"><a href="#cb58-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="op">}</span></span>
<span id="cb58-76"><a href="#cb58-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="op">{</span></span>
<span id="cb58-77"><a href="#cb58-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;.*/app2&quot;</span><span class="op">};</span></span>
<span id="cb58-78"><a href="#cb58-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-79"><a href="#cb58-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-80"><a href="#cb58-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-81"><a href="#cb58-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> </span>
<span id="cb58-82"><a href="#cb58-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-83"><a href="#cb58-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb58-84"><a href="#cb58-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-85"><a href="#cb58-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-86"><a href="#cb58-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="op">}</span></span>
<span id="cb58-87"><a href="#cb58-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="op">{</span></span>
<span id="cb58-88"><a href="#cb58-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-89"><a href="#cb58-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-90"><a href="#cb58-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-91"><a href="#cb58-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-92"><a href="#cb58-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-93"><a href="#cb58-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-94"><a href="#cb58-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-95"><a href="#cb58-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-96"><a href="#cb58-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-97"><a href="#cb58-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> </span>
<span id="cb58-98"><a href="#cb58-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-99"><a href="#cb58-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> </span>
<span id="cb58-100"><a href="#cb58-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-101"><a href="#cb58-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-102"><a href="#cb58-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="op">}</span></span>
<span id="cb58-103"><a href="#cb58-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="op">{</span></span>
<span id="cb58-104"><a href="#cb58-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>         <span class="kw">auto</span> pg  <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2/.*&quot;</span><span class="op">};</span></span>
<span id="cb58-105"><a href="#cb58-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-106"><a href="#cb58-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>             <span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-107"><a href="#cb58-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-108"><a href="#cb58-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-109"><a href="#cb58-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-110"><a href="#cb58-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-111"><a href="#cb58-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb58-112"><a href="#cb58-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-113"><a href="#cb58-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> </span>
<span id="cb58-114"><a href="#cb58-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>         pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-115"><a href="#cb58-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-116"><a href="#cb58-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>     <span class="op">}</span></span>
<span id="cb58-117"><a href="#cb58-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> </span>
<span id="cb58-118"><a href="#cb58-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-119"><a href="#cb58-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-120"><a href="#cb58-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>         <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-121"><a href="#cb58-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="op">}</span></span>
<span id="cb58-122"><a href="#cb58-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-123"><a href="#cb58-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-124"><a href="#cb58-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c not directory&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-125"><a href="#cb58-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="op">}</span></span>
<span id="cb58-126"><a href="#cb58-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-127"><a href="#cb58-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="op">}</span></span>
<span id="cb58-128"><a href="#cb58-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb58-129"><a href="#cb58-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> SrcsGenerator<span class="op">)</span></span>
<span id="cb58-130"><a href="#cb58-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> <span class="op">{</span></span>
<span id="cb58-131"><a href="#cb58-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-132"><a href="#cb58-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> </span>
<span id="cb58-133"><a href="#cb58-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="op">{</span></span>
<span id="cb58-134"><a href="#cb58-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>         <span class="kw">auto</span> sg <span class="op">=</span> SrcsGenerator<span class="op">{</span></span>
<span id="cb58-135"><a href="#cb58-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>             <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-136"><a href="#cb58-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb58-137"><a href="#cb58-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="co">// clang-format off</span></span>
<span id="cb58-138"><a href="#cb58-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb58-139"><a href="#cb58-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-140"><a href="#cb58-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>             <span class="st">&quot;mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-141"><a href="#cb58-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>             <span class="st">&quot;file              : mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-142"><a href="#cb58-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-143"><a href="#cb58-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>             <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-144"><a href="#cb58-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>             <span class="st">&quot;include not found : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-145"><a href="#cb58-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-146"><a href="#cb58-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-147"><a href="#cb58-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>             <span class="st">&quot;mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-148"><a href="#cb58-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>             <span class="st">&quot;file              : mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-149"><a href="#cb58-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-150"><a href="#cb58-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-151"><a href="#cb58-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-152"><a href="#cb58-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-153"><a href="#cb58-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-154"><a href="#cb58-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>             <span class="st">&quot;mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-155"><a href="#cb58-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>             <span class="st">&quot;file              : mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-156"><a href="#cb58-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-157"><a href="#cb58-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-158"><a href="#cb58-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-159"><a href="#cb58-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-160"><a href="#cb58-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-161"><a href="#cb58-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>             <span class="st">&quot;mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-162"><a href="#cb58-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>             <span class="st">&quot;file              : mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-163"><a href="#cb58-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-164"><a href="#cb58-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-165"><a href="#cb58-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-166"><a href="#cb58-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-167"><a href="#cb58-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         <span class="co">// clang-format on</span></span>
<span id="cb58-168"><a href="#cb58-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> </span>
<span id="cb58-169"><a href="#cb58-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-170"><a href="#cb58-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb58-171"><a href="#cb58-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-172"><a href="#cb58-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-173"><a href="#cb58-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     <span class="op">}</span></span>
<span id="cb58-174"><a href="#cb58-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     <span class="op">{</span></span>
<span id="cb58-175"><a href="#cb58-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         <span class="kw">auto</span> sg <span class="op">=</span> SrcsGenerator<span class="op">{</span></span>
<span id="cb58-176"><a href="#cb58-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>             <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb58-177"><a href="#cb58-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> </span>
<span id="cb58-178"><a href="#cb58-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-179"><a href="#cb58-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-180"><a href="#cb58-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>             <span class="st">&quot;mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-181"><a href="#cb58-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>             <span class="st">&quot;file              : mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-182"><a href="#cb58-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-183"><a href="#cb58-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>             <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-184"><a href="#cb58-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>             <span class="st">&quot;include not found : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-185"><a href="#cb58-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-186"><a href="#cb58-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-187"><a href="#cb58-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>             <span class="st">&quot;mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-188"><a href="#cb58-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>             <span class="st">&quot;file              : mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-189"><a href="#cb58-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-190"><a href="#cb58-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>             <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-191"><a href="#cb58-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>             <span class="st">&quot;include not found : mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-192"><a href="#cb58-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-193"><a href="#cb58-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> </span>
<span id="cb58-194"><a href="#cb58-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-195"><a href="#cb58-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> </span>
<span id="cb58-196"><a href="#cb58-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>         sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-197"><a href="#cb58-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-198"><a href="#cb58-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="op">}</span></span>
<span id="cb58-199"><a href="#cb58-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> <span class="op">}</span></span>
<span id="cb58-200"><a href="#cb58-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> </span>
<span id="cb58-201"><a href="#cb58-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2SrcsGenerator<span class="op">)</span></span>
<span id="cb58-202"><a href="#cb58-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> <span class="op">{</span></span>
<span id="cb58-203"><a href="#cb58-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-204"><a href="#cb58-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> </span>
<span id="cb58-205"><a href="#cb58-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-206"><a href="#cb58-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb58-207"><a href="#cb58-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-208"><a href="#cb58-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>         <span class="kw">auto</span> p2sg</span>
<span id="cb58-209"><a href="#cb58-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>             <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-210"><a href="#cb58-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>     <span class="op">}</span></span>
<span id="cb58-211"><a href="#cb58-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-212"><a href="#cb58-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-213"><a href="#cb58-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c is illegal&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-214"><a href="#cb58-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>     <span class="op">}</span></span>
<span id="cb58-215"><a href="#cb58-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-216"><a href="#cb58-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span> </span>
<span id="cb58-217"><a href="#cb58-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>     <span class="op">{</span></span>
<span id="cb58-218"><a href="#cb58-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-219"><a href="#cb58-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>                                       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-220"><a href="#cb58-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span> </span>
<span id="cb58-221"><a href="#cb58-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-222"><a href="#cb58-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-223"><a href="#cb58-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-224"><a href="#cb58-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-225"><a href="#cb58-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-226"><a href="#cb58-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-227"><a href="#cb58-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-228"><a href="#cb58-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-229"><a href="#cb58-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-230"><a href="#cb58-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-231"><a href="#cb58-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-232"><a href="#cb58-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-233"><a href="#cb58-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-234"><a href="#cb58-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-235"><a href="#cb58-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-236"><a href="#cb58-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-237"><a href="#cb58-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-238"><a href="#cb58-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-239"><a href="#cb58-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-240"><a href="#cb58-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-241"><a href="#cb58-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-242"><a href="#cb58-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-243"><a href="#cb58-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-244"><a href="#cb58-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-245"><a href="#cb58-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-246"><a href="#cb58-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-247"><a href="#cb58-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-248"><a href="#cb58-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-249"><a href="#cb58-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-250"><a href="#cb58-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-251"><a href="#cb58-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-252"><a href="#cb58-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-253"><a href="#cb58-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-254"><a href="#cb58-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-255"><a href="#cb58-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span> </span>
<span id="cb58-256"><a href="#cb58-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-257"><a href="#cb58-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span> </span>
<span id="cb58-258"><a href="#cb58-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-259"><a href="#cb58-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-260"><a href="#cb58-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span>     <span class="op">}</span></span>
<span id="cb58-261"><a href="#cb58-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>     <span class="op">{</span></span>
<span id="cb58-262"><a href="#cb58-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-263"><a href="#cb58-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span>                                       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2</span><span class="sc">\\</span><span class="st">b.*&quot;</span><span class="op">};</span></span>
<span id="cb58-264"><a href="#cb58-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span> </span>
<span id="cb58-265"><a href="#cb58-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-266"><a href="#cb58-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-267"><a href="#cb58-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-268"><a href="#cb58-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-269"><a href="#cb58-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-270"><a href="#cb58-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-271"><a href="#cb58-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-272"><a href="#cb58-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-273"><a href="#cb58-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-274"><a href="#cb58-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-275"><a href="#cb58-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-276"><a href="#cb58-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-277"><a href="#cb58-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-278"><a href="#cb58-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-279"><a href="#cb58-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-280"><a href="#cb58-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-281"><a href="#cb58-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-282"><a href="#cb58-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-283"><a href="#cb58-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-284"><a href="#cb58-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-285"><a href="#cb58-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-286"><a href="#cb58-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-287"><a href="#cb58-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-288"><a href="#cb58-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-289"><a href="#cb58-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-290"><a href="#cb58-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-291"><a href="#cb58-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-292"><a href="#cb58-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-293"><a href="#cb58-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span> </span>
<span id="cb58-294"><a href="#cb58-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-295"><a href="#cb58-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span> </span>
<span id="cb58-296"><a href="#cb58-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-297"><a href="#cb58-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-298"><a href="#cb58-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span>     <span class="op">}</span></span>
<span id="cb58-299"><a href="#cb58-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>     <span class="op">{</span></span>
<span id="cb58-300"><a href="#cb58-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-301"><a href="#cb58-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span>                                       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-302"><a href="#cb58-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span> </span>
<span id="cb58-303"><a href="#cb58-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-304"><a href="#cb58-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-305"><a href="#cb58-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-306"><a href="#cb58-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-307"><a href="#cb58-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-308"><a href="#cb58-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-309"><a href="#cb58-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-310"><a href="#cb58-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-311"><a href="#cb58-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-312"><a href="#cb58-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-313"><a href="#cb58-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-314"><a href="#cb58-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-315"><a href="#cb58-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-316"><a href="#cb58-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-317"><a href="#cb58-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-318"><a href="#cb58-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-319"><a href="#cb58-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-320"><a href="#cb58-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-321"><a href="#cb58-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-322"><a href="#cb58-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-323"><a href="#cb58-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-324"><a href="#cb58-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-325"><a href="#cb58-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-326"><a href="#cb58-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-327"><a href="#cb58-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-328"><a href="#cb58-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-329"><a href="#cb58-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-330"><a href="#cb58-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-331"><a href="#cb58-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-332"><a href="#cb58-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-333"><a href="#cb58-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-334"><a href="#cb58-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-335"><a href="#cb58-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-336"><a href="#cb58-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span> </span>
<span id="cb58-337"><a href="#cb58-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-338"><a href="#cb58-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span> </span>
<span id="cb58-339"><a href="#cb58-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-340"><a href="#cb58-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-341"><a href="#cb58-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span>     <span class="op">}</span></span>
<span id="cb58-342"><a href="#cb58-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>     <span class="op">{</span></span>
<span id="cb58-343"><a href="#cb58-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-344"><a href="#cb58-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>                                       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb58-345"><a href="#cb58-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span> </span>
<span id="cb58-346"><a href="#cb58-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-347"><a href="#cb58-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-348"><a href="#cb58-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span>             <span class="st">&quot;no_package</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-349"><a href="#cb58-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-350"><a href="#cb58-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-351"><a href="#cb58-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-352"><a href="#cb58-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-353"><a href="#cb58-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-354"><a href="#cb58-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-355"><a href="#cb58-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-356"><a href="#cb58-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-357"><a href="#cb58-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-358"><a href="#cb58-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-359"><a href="#cb58-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-360"><a href="#cb58-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-361"><a href="#cb58-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-362"><a href="#cb58-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-363"><a href="#cb58-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-364"><a href="#cb58-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-365"><a href="#cb58-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-366"><a href="#cb58-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-367"><a href="#cb58-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-368"><a href="#cb58-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-369"><a href="#cb58-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-370"><a href="#cb58-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-371"><a href="#cb58-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-372"><a href="#cb58-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-373"><a href="#cb58-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-374"><a href="#cb58-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-375"><a href="#cb58-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-376"><a href="#cb58-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-377"><a href="#cb58-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-378"><a href="#cb58-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-379"><a href="#cb58-379" aria-hidden="true" tabindex="-1"></a>        <span class="dv">379</span> </span>
<span id="cb58-380"><a href="#cb58-380" aria-hidden="true" tabindex="-1"></a>        <span class="dv">380</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-381"><a href="#cb58-381" aria-hidden="true" tabindex="-1"></a>        <span class="dv">381</span> </span>
<span id="cb58-382"><a href="#cb58-382" aria-hidden="true" tabindex="-1"></a>        <span class="dv">382</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-383"><a href="#cb58-383" aria-hidden="true" tabindex="-1"></a>        <span class="dv">383</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-384"><a href="#cb58-384" aria-hidden="true" tabindex="-1"></a>        <span class="dv">384</span>     <span class="op">}</span></span>
<span id="cb58-385"><a href="#cb58-385" aria-hidden="true" tabindex="-1"></a>        <span class="dv">385</span> <span class="op">}</span></span>
<span id="cb58-386"><a href="#cb58-386" aria-hidden="true" tabindex="-1"></a>        <span class="dv">386</span> </span>
<span id="cb58-387"><a href="#cb58-387" aria-hidden="true" tabindex="-1"></a>        <span class="dv">387</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2SrcsGenerator2<span class="op">)</span></span>
<span id="cb58-388"><a href="#cb58-388" aria-hidden="true" tabindex="-1"></a>        <span class="dv">388</span> <span class="op">{</span></span>
<span id="cb58-389"><a href="#cb58-389" aria-hidden="true" tabindex="-1"></a>        <span class="dv">389</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-390"><a href="#cb58-390" aria-hidden="true" tabindex="-1"></a>        <span class="dv">390</span> </span>
<span id="cb58-391"><a href="#cb58-391" aria-hidden="true" tabindex="-1"></a>        <span class="dv">391</span>     <span class="op">{</span></span>
<span id="cb58-392"><a href="#cb58-392" aria-hidden="true" tabindex="-1"></a>        <span class="dv">392</span>         <span class="kw">auto</span> dirs2srcs_org_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-393"><a href="#cb58-393" aria-hidden="true" tabindex="-1"></a>        <span class="dv">393</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-394"><a href="#cb58-394" aria-hidden="true" tabindex="-1"></a>        <span class="dv">394</span>             <span class="st">&quot;ut_data</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-395"><a href="#cb58-395" aria-hidden="true" tabindex="-1"></a>        <span class="dv">395</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-396"><a href="#cb58-396" aria-hidden="true" tabindex="-1"></a>        <span class="dv">396</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-397"><a href="#cb58-397" aria-hidden="true" tabindex="-1"></a>        <span class="dv">397</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-398"><a href="#cb58-398" aria-hidden="true" tabindex="-1"></a>        <span class="dv">398</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-399"><a href="#cb58-399" aria-hidden="true" tabindex="-1"></a>        <span class="dv">399</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-400"><a href="#cb58-400" aria-hidden="true" tabindex="-1"></a>        <span class="dv">400</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-401"><a href="#cb58-401" aria-hidden="true" tabindex="-1"></a>        <span class="dv">401</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-402"><a href="#cb58-402" aria-hidden="true" tabindex="-1"></a>        <span class="dv">402</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-403"><a href="#cb58-403" aria-hidden="true" tabindex="-1"></a>        <span class="dv">403</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-404"><a href="#cb58-404" aria-hidden="true" tabindex="-1"></a>        <span class="dv">404</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-405"><a href="#cb58-405" aria-hidden="true" tabindex="-1"></a>        <span class="dv">405</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-406"><a href="#cb58-406" aria-hidden="true" tabindex="-1"></a>        <span class="dv">406</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-407"><a href="#cb58-407" aria-hidden="true" tabindex="-1"></a>        <span class="dv">407</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-408"><a href="#cb58-408" aria-hidden="true" tabindex="-1"></a>        <span class="dv">408</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-409"><a href="#cb58-409" aria-hidden="true" tabindex="-1"></a>        <span class="dv">409</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-410"><a href="#cb58-410" aria-hidden="true" tabindex="-1"></a>        <span class="dv">410</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-411"><a href="#cb58-411" aria-hidden="true" tabindex="-1"></a>        <span class="dv">411</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-412"><a href="#cb58-412" aria-hidden="true" tabindex="-1"></a>        <span class="dv">412</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-413"><a href="#cb58-413" aria-hidden="true" tabindex="-1"></a>        <span class="dv">413</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-414"><a href="#cb58-414" aria-hidden="true" tabindex="-1"></a>        <span class="dv">414</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-415"><a href="#cb58-415" aria-hidden="true" tabindex="-1"></a>        <span class="dv">415</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-416"><a href="#cb58-416" aria-hidden="true" tabindex="-1"></a>        <span class="dv">416</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-417"><a href="#cb58-417" aria-hidden="true" tabindex="-1"></a>        <span class="dv">417</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-418"><a href="#cb58-418" aria-hidden="true" tabindex="-1"></a>        <span class="dv">418</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-419"><a href="#cb58-419" aria-hidden="true" tabindex="-1"></a>        <span class="dv">419</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-420"><a href="#cb58-420" aria-hidden="true" tabindex="-1"></a>        <span class="dv">420</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-421"><a href="#cb58-421" aria-hidden="true" tabindex="-1"></a>        <span class="dv">421</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-422"><a href="#cb58-422" aria-hidden="true" tabindex="-1"></a>        <span class="dv">422</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-423"><a href="#cb58-423" aria-hidden="true" tabindex="-1"></a>        <span class="dv">423</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-424"><a href="#cb58-424" aria-hidden="true" tabindex="-1"></a>        <span class="dv">424</span> </span>
<span id="cb58-425"><a href="#cb58-425" aria-hidden="true" tabindex="-1"></a>        <span class="dv">425</span>         <span class="kw">auto</span> p2sg</span>
<span id="cb58-426"><a href="#cb58-426" aria-hidden="true" tabindex="-1"></a>        <span class="dv">426</span>             <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-427"><a href="#cb58-427" aria-hidden="true" tabindex="-1"></a>        <span class="dv">427</span> </span>
<span id="cb58-428"><a href="#cb58-428" aria-hidden="true" tabindex="-1"></a>        <span class="dv">428</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-429"><a href="#cb58-429" aria-hidden="true" tabindex="-1"></a>        <span class="dv">429</span> </span>
<span id="cb58-430"><a href="#cb58-430" aria-hidden="true" tabindex="-1"></a>        <span class="dv">430</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-431"><a href="#cb58-431" aria-hidden="true" tabindex="-1"></a>        <span class="dv">431</span>         ASSERT_EQ<span class="op">(</span>dirs2srcs_org_str<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-432"><a href="#cb58-432" aria-hidden="true" tabindex="-1"></a>        <span class="dv">432</span>     <span class="op">}</span></span>
<span id="cb58-433"><a href="#cb58-433" aria-hidden="true" tabindex="-1"></a>        <span class="dv">433</span>     <span class="op">{</span></span>
<span id="cb58-434"><a href="#cb58-434" aria-hidden="true" tabindex="-1"></a>        <span class="dv">434</span>         <span class="kw">auto</span> dirs2srcs_org_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-435"><a href="#cb58-435" aria-hidden="true" tabindex="-1"></a>        <span class="dv">435</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-436"><a href="#cb58-436" aria-hidden="true" tabindex="-1"></a>        <span class="dv">436</span>             <span class="st">&quot;ut_data</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-437"><a href="#cb58-437" aria-hidden="true" tabindex="-1"></a>        <span class="dv">437</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-438"><a href="#cb58-438" aria-hidden="true" tabindex="-1"></a>        <span class="dv">438</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-439"><a href="#cb58-439" aria-hidden="true" tabindex="-1"></a>        <span class="dv">439</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-440"><a href="#cb58-440" aria-hidden="true" tabindex="-1"></a>        <span class="dv">440</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-441"><a href="#cb58-441" aria-hidden="true" tabindex="-1"></a>        <span class="dv">441</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-442"><a href="#cb58-442" aria-hidden="true" tabindex="-1"></a>        <span class="dv">442</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-443"><a href="#cb58-443" aria-hidden="true" tabindex="-1"></a>        <span class="dv">443</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-444"><a href="#cb58-444" aria-hidden="true" tabindex="-1"></a>        <span class="dv">444</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-445"><a href="#cb58-445" aria-hidden="true" tabindex="-1"></a>        <span class="dv">445</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-446"><a href="#cb58-446" aria-hidden="true" tabindex="-1"></a>        <span class="dv">446</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-447"><a href="#cb58-447" aria-hidden="true" tabindex="-1"></a>        <span class="dv">447</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-448"><a href="#cb58-448" aria-hidden="true" tabindex="-1"></a>        <span class="dv">448</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-449"><a href="#cb58-449" aria-hidden="true" tabindex="-1"></a>        <span class="dv">449</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-450"><a href="#cb58-450" aria-hidden="true" tabindex="-1"></a>        <span class="dv">450</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-451"><a href="#cb58-451" aria-hidden="true" tabindex="-1"></a>        <span class="dv">451</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-452"><a href="#cb58-452" aria-hidden="true" tabindex="-1"></a>        <span class="dv">452</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-453"><a href="#cb58-453" aria-hidden="true" tabindex="-1"></a>        <span class="dv">453</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-454"><a href="#cb58-454" aria-hidden="true" tabindex="-1"></a>        <span class="dv">454</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-455"><a href="#cb58-455" aria-hidden="true" tabindex="-1"></a>        <span class="dv">455</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-456"><a href="#cb58-456" aria-hidden="true" tabindex="-1"></a>        <span class="dv">456</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-457"><a href="#cb58-457" aria-hidden="true" tabindex="-1"></a>        <span class="dv">457</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-458"><a href="#cb58-458" aria-hidden="true" tabindex="-1"></a>        <span class="dv">458</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-459"><a href="#cb58-459" aria-hidden="true" tabindex="-1"></a>        <span class="dv">459</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-460"><a href="#cb58-460" aria-hidden="true" tabindex="-1"></a>        <span class="dv">460</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-461"><a href="#cb58-461" aria-hidden="true" tabindex="-1"></a>        <span class="dv">461</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-462"><a href="#cb58-462" aria-hidden="true" tabindex="-1"></a>        <span class="dv">462</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-463"><a href="#cb58-463" aria-hidden="true" tabindex="-1"></a>        <span class="dv">463</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-464"><a href="#cb58-464" aria-hidden="true" tabindex="-1"></a>        <span class="dv">464</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-465"><a href="#cb58-465" aria-hidden="true" tabindex="-1"></a>        <span class="dv">465</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-466"><a href="#cb58-466" aria-hidden="true" tabindex="-1"></a>        <span class="dv">466</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-467"><a href="#cb58-467" aria-hidden="true" tabindex="-1"></a>        <span class="dv">467</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-468"><a href="#cb58-468" aria-hidden="true" tabindex="-1"></a>        <span class="dv">468</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-469"><a href="#cb58-469" aria-hidden="true" tabindex="-1"></a>        <span class="dv">469</span> </span>
<span id="cb58-470"><a href="#cb58-470" aria-hidden="true" tabindex="-1"></a>        <span class="dv">470</span>         <span class="kw">auto</span> <span class="at">const</span> dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb58-471"><a href="#cb58-471" aria-hidden="true" tabindex="-1"></a>        <span class="dv">471</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb58-472"><a href="#cb58-472" aria-hidden="true" tabindex="-1"></a>        <span class="dv">472</span> </span>
<span id="cb58-473"><a href="#cb58-473" aria-hidden="true" tabindex="-1"></a>        <span class="dv">473</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> dirs<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-474"><a href="#cb58-474" aria-hidden="true" tabindex="-1"></a>        <span class="dv">474</span> </span>
<span id="cb58-475"><a href="#cb58-475" aria-hidden="true" tabindex="-1"></a>        <span class="dv">475</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-476"><a href="#cb58-476" aria-hidden="true" tabindex="-1"></a>        <span class="dv">476</span> </span>
<span id="cb58-477"><a href="#cb58-477" aria-hidden="true" tabindex="-1"></a>        <span class="dv">477</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-478"><a href="#cb58-478" aria-hidden="true" tabindex="-1"></a>        <span class="dv">478</span>         ASSERT_EQ<span class="op">(</span>dirs2srcs_org_str<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-479"><a href="#cb58-479" aria-hidden="true" tabindex="-1"></a>        <span class="dv">479</span>     <span class="op">}</span></span>
<span id="cb58-480"><a href="#cb58-480" aria-hidden="true" tabindex="-1"></a>        <span class="dv">480</span>     <span class="op">{</span></span>
<span id="cb58-481"><a href="#cb58-481" aria-hidden="true" tabindex="-1"></a>        <span class="dv">481</span>         <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-482"><a href="#cb58-482" aria-hidden="true" tabindex="-1"></a>        <span class="dv">482</span> </span>
<span id="cb58-483"><a href="#cb58-483" aria-hidden="true" tabindex="-1"></a>        <span class="dv">483</span>         <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-484"><a href="#cb58-484" aria-hidden="true" tabindex="-1"></a>        <span class="dv">484</span>             <span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-485"><a href="#cb58-485" aria-hidden="true" tabindex="-1"></a>        <span class="dv">485</span>             <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-486"><a href="#cb58-486" aria-hidden="true" tabindex="-1"></a>        <span class="dv">486</span>             <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-487"><a href="#cb58-487" aria-hidden="true" tabindex="-1"></a>        <span class="dv">487</span>             <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-488"><a href="#cb58-488" aria-hidden="true" tabindex="-1"></a>        <span class="dv">488</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-489"><a href="#cb58-489" aria-hidden="true" tabindex="-1"></a>        <span class="dv">489</span>             <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-490"><a href="#cb58-490" aria-hidden="true" tabindex="-1"></a>        <span class="dv">490</span>             <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-491"><a href="#cb58-491" aria-hidden="true" tabindex="-1"></a>        <span class="dv">491</span>             <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-492"><a href="#cb58-492" aria-hidden="true" tabindex="-1"></a>        <span class="dv">492</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-493"><a href="#cb58-493" aria-hidden="true" tabindex="-1"></a>        <span class="dv">493</span>             <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-494"><a href="#cb58-494" aria-hidden="true" tabindex="-1"></a>        <span class="dv">494</span>             <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-495"><a href="#cb58-495" aria-hidden="true" tabindex="-1"></a>        <span class="dv">495</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-496"><a href="#cb58-496" aria-hidden="true" tabindex="-1"></a>        <span class="dv">496</span>             <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-497"><a href="#cb58-497" aria-hidden="true" tabindex="-1"></a>        <span class="dv">497</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-498"><a href="#cb58-498" aria-hidden="true" tabindex="-1"></a>        <span class="dv">498</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-499"><a href="#cb58-499" aria-hidden="true" tabindex="-1"></a>        <span class="dv">499</span>             <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-500"><a href="#cb58-500" aria-hidden="true" tabindex="-1"></a>        <span class="dv">500</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-501"><a href="#cb58-501" aria-hidden="true" tabindex="-1"></a>        <span class="dv">501</span>             <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-502"><a href="#cb58-502" aria-hidden="true" tabindex="-1"></a>        <span class="dv">502</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-503"><a href="#cb58-503" aria-hidden="true" tabindex="-1"></a>        <span class="dv">503</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-504"><a href="#cb58-504" aria-hidden="true" tabindex="-1"></a>        <span class="dv">504</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-505"><a href="#cb58-505" aria-hidden="true" tabindex="-1"></a>        <span class="dv">505</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-506"><a href="#cb58-506" aria-hidden="true" tabindex="-1"></a>        <span class="dv">506</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-507"><a href="#cb58-507" aria-hidden="true" tabindex="-1"></a>        <span class="dv">507</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-508"><a href="#cb58-508" aria-hidden="true" tabindex="-1"></a>        <span class="dv">508</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-509"><a href="#cb58-509" aria-hidden="true" tabindex="-1"></a>        <span class="dv">509</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-510"><a href="#cb58-510" aria-hidden="true" tabindex="-1"></a>        <span class="dv">510</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-511"><a href="#cb58-511" aria-hidden="true" tabindex="-1"></a>        <span class="dv">511</span>             <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-512"><a href="#cb58-512" aria-hidden="true" tabindex="-1"></a>        <span class="dv">512</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-513"><a href="#cb58-513" aria-hidden="true" tabindex="-1"></a>        <span class="dv">513</span>             <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-514"><a href="#cb58-514" aria-hidden="true" tabindex="-1"></a>        <span class="dv">514</span>             <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-515"><a href="#cb58-515" aria-hidden="true" tabindex="-1"></a>        <span class="dv">515</span>             <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-516"><a href="#cb58-516" aria-hidden="true" tabindex="-1"></a>        <span class="dv">516</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-517"><a href="#cb58-517" aria-hidden="true" tabindex="-1"></a>        <span class="dv">517</span> </span>
<span id="cb58-518"><a href="#cb58-518" aria-hidden="true" tabindex="-1"></a>        <span class="dv">518</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-519"><a href="#cb58-519" aria-hidden="true" tabindex="-1"></a>        <span class="dv">519</span> </span>
<span id="cb58-520"><a href="#cb58-520" aria-hidden="true" tabindex="-1"></a>        <span class="dv">520</span>         p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-521"><a href="#cb58-521" aria-hidden="true" tabindex="-1"></a>        <span class="dv">521</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-522"><a href="#cb58-522" aria-hidden="true" tabindex="-1"></a>        <span class="dv">522</span>     <span class="op">}</span></span>
<span id="cb58-523"><a href="#cb58-523" aria-hidden="true" tabindex="-1"></a>        <span class="dv">523</span> <span class="op">}</span></span>
<span id="cb58-524"><a href="#cb58-524" aria-hidden="true" tabindex="-1"></a>        <span class="dv">524</span> </span>
<span id="cb58-525"><a href="#cb58-525" aria-hidden="true" tabindex="-1"></a>        <span class="dv">525</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2PkgGenerator<span class="op">)</span></span>
<span id="cb58-526"><a href="#cb58-526" aria-hidden="true" tabindex="-1"></a>        <span class="dv">526</span> <span class="op">{</span></span>
<span id="cb58-527"><a href="#cb58-527" aria-hidden="true" tabindex="-1"></a>        <span class="dv">527</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-528"><a href="#cb58-528" aria-hidden="true" tabindex="-1"></a>        <span class="dv">528</span> </span>
<span id="cb58-529"><a href="#cb58-529" aria-hidden="true" tabindex="-1"></a>        <span class="dv">529</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-530"><a href="#cb58-530" aria-hidden="true" tabindex="-1"></a>        <span class="dv">530</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-531"><a href="#cb58-531" aria-hidden="true" tabindex="-1"></a>        <span class="dv">531</span>         <span class="kw">auto</span> p2pg</span>
<span id="cb58-532"><a href="#cb58-532" aria-hidden="true" tabindex="-1"></a>        <span class="dv">532</span>             <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-533"><a href="#cb58-533" aria-hidden="true" tabindex="-1"></a>        <span class="dv">533</span>     <span class="op">}</span></span>
<span id="cb58-534"><a href="#cb58-534" aria-hidden="true" tabindex="-1"></a>        <span class="dv">534</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-535"><a href="#cb58-535" aria-hidden="true" tabindex="-1"></a>        <span class="dv">535</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-536"><a href="#cb58-536" aria-hidden="true" tabindex="-1"></a>        <span class="dv">536</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c is illegal&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-537"><a href="#cb58-537" aria-hidden="true" tabindex="-1"></a>        <span class="dv">537</span>     <span class="op">}</span></span>
<span id="cb58-538"><a href="#cb58-538" aria-hidden="true" tabindex="-1"></a>        <span class="dv">538</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-539"><a href="#cb58-539" aria-hidden="true" tabindex="-1"></a>        <span class="dv">539</span> </span>
<span id="cb58-540"><a href="#cb58-540" aria-hidden="true" tabindex="-1"></a>        <span class="dv">540</span>     <span class="op">{</span></span>
<span id="cb58-541"><a href="#cb58-541" aria-hidden="true" tabindex="-1"></a>        <span class="dv">541</span>         <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-542"><a href="#cb58-542" aria-hidden="true" tabindex="-1"></a>        <span class="dv">542</span>                                      <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-543"><a href="#cb58-543" aria-hidden="true" tabindex="-1"></a>        <span class="dv">543</span> </span>
<span id="cb58-544"><a href="#cb58-544" aria-hidden="true" tabindex="-1"></a>        <span class="dv">544</span>         <span class="co">// clang-format off</span></span>
<span id="cb58-545"><a href="#cb58-545" aria-hidden="true" tabindex="-1"></a>        <span class="dv">545</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb58-546"><a href="#cb58-546" aria-hidden="true" tabindex="-1"></a>        <span class="dv">546</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-547"><a href="#cb58-547" aria-hidden="true" tabindex="-1"></a>        <span class="dv">547</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 6 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-548"><a href="#cb58-548" aria-hidden="true" tabindex="-1"></a>        <span class="dv">548</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 1 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-549"><a href="#cb58-549" aria-hidden="true" tabindex="-1"></a>        <span class="dv">549</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-550"><a href="#cb58-550" aria-hidden="true" tabindex="-1"></a>        <span class="dv">550</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-551"><a href="#cb58-551" aria-hidden="true" tabindex="-1"></a>        <span class="dv">551</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-552"><a href="#cb58-552" aria-hidden="true" tabindex="-1"></a>        <span class="dv">552</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-553"><a href="#cb58-553" aria-hidden="true" tabindex="-1"></a>        <span class="dv">553</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 3 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-554"><a href="#cb58-554" aria-hidden="true" tabindex="-1"></a>        <span class="dv">554</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 1 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-555"><a href="#cb58-555" aria-hidden="true" tabindex="-1"></a>        <span class="dv">555</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-556"><a href="#cb58-556" aria-hidden="true" tabindex="-1"></a>        <span class="dv">556</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_2 : 3 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-557"><a href="#cb58-557" aria-hidden="true" tabindex="-1"></a>        <span class="dv">557</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-558"><a href="#cb58-558" aria-hidden="true" tabindex="-1"></a>        <span class="dv">558</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-559"><a href="#cb58-559" aria-hidden="true" tabindex="-1"></a>        <span class="dv">559</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-560"><a href="#cb58-560" aria-hidden="true" tabindex="-1"></a>        <span class="dv">560</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-561"><a href="#cb58-561" aria-hidden="true" tabindex="-1"></a>        <span class="dv">561</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-562"><a href="#cb58-562" aria-hidden="true" tabindex="-1"></a>        <span class="dv">562</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 1 ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-563"><a href="#cb58-563" aria-hidden="true" tabindex="-1"></a>        <span class="dv">563</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-564"><a href="#cb58-564" aria-hidden="true" tabindex="-1"></a>        <span class="dv">564</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-565"><a href="#cb58-565" aria-hidden="true" tabindex="-1"></a>        <span class="dv">565</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-566"><a href="#cb58-566" aria-hidden="true" tabindex="-1"></a>        <span class="dv">566</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-567"><a href="#cb58-567" aria-hidden="true" tabindex="-1"></a>        <span class="dv">567</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-568"><a href="#cb58-568" aria-hidden="true" tabindex="-1"></a>        <span class="dv">568</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_2 : 1 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-569"><a href="#cb58-569" aria-hidden="true" tabindex="-1"></a>        <span class="dv">569</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-570"><a href="#cb58-570" aria-hidden="true" tabindex="-1"></a>        <span class="dv">570</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-571"><a href="#cb58-571" aria-hidden="true" tabindex="-1"></a>        <span class="dv">571</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-572"><a href="#cb58-572" aria-hidden="true" tabindex="-1"></a>        <span class="dv">572</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-573"><a href="#cb58-573" aria-hidden="true" tabindex="-1"></a>        <span class="dv">573</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-574"><a href="#cb58-574" aria-hidden="true" tabindex="-1"></a>        <span class="dv">574</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-575"><a href="#cb58-575" aria-hidden="true" tabindex="-1"></a>        <span class="dv">575</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-576"><a href="#cb58-576" aria-hidden="true" tabindex="-1"></a>        <span class="dv">576</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-577"><a href="#cb58-577" aria-hidden="true" tabindex="-1"></a>        <span class="dv">577</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-578"><a href="#cb58-578" aria-hidden="true" tabindex="-1"></a>        <span class="dv">578</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-579"><a href="#cb58-579" aria-hidden="true" tabindex="-1"></a>        <span class="dv">579</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-580"><a href="#cb58-580" aria-hidden="true" tabindex="-1"></a>        <span class="dv">580</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-581"><a href="#cb58-581" aria-hidden="true" tabindex="-1"></a>        <span class="dv">581</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-582"><a href="#cb58-582" aria-hidden="true" tabindex="-1"></a>        <span class="dv">582</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-583"><a href="#cb58-583" aria-hidden="true" tabindex="-1"></a>        <span class="dv">583</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2/mod2_2 : 1 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-584"><a href="#cb58-584" aria-hidden="true" tabindex="-1"></a>        <span class="dv">584</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-585"><a href="#cb58-585" aria-hidden="true" tabindex="-1"></a>        <span class="dv">585</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-586"><a href="#cb58-586" aria-hidden="true" tabindex="-1"></a>        <span class="dv">586</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-587"><a href="#cb58-587" aria-hidden="true" tabindex="-1"></a>        <span class="dv">587</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-588"><a href="#cb58-588" aria-hidden="true" tabindex="-1"></a>        <span class="dv">588</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-589"><a href="#cb58-589" aria-hidden="true" tabindex="-1"></a>        <span class="dv">589</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-590"><a href="#cb58-590" aria-hidden="true" tabindex="-1"></a>        <span class="dv">590</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_2 : 2 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-591"><a href="#cb58-591" aria-hidden="true" tabindex="-1"></a>        <span class="dv">591</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-592"><a href="#cb58-592" aria-hidden="true" tabindex="-1"></a>        <span class="dv">592</span>         <span class="co">// clang-format on</span></span>
<span id="cb58-593"><a href="#cb58-593" aria-hidden="true" tabindex="-1"></a>        <span class="dv">593</span> </span>
<span id="cb58-594"><a href="#cb58-594" aria-hidden="true" tabindex="-1"></a>        <span class="dv">594</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-595"><a href="#cb58-595" aria-hidden="true" tabindex="-1"></a>        <span class="dv">595</span> </span>
<span id="cb58-596"><a href="#cb58-596" aria-hidden="true" tabindex="-1"></a>        <span class="dv">596</span>         p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-597"><a href="#cb58-597" aria-hidden="true" tabindex="-1"></a>        <span class="dv">597</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-598"><a href="#cb58-598" aria-hidden="true" tabindex="-1"></a>        <span class="dv">598</span>     <span class="op">}</span></span>
<span id="cb58-599"><a href="#cb58-599" aria-hidden="true" tabindex="-1"></a>        <span class="dv">599</span>     <span class="op">{</span></span>
<span id="cb58-600"><a href="#cb58-600" aria-hidden="true" tabindex="-1"></a>        <span class="dv">600</span>         <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-601"><a href="#cb58-601" aria-hidden="true" tabindex="-1"></a>        <span class="dv">601</span>                                      <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2</span><span class="sc">\\</span><span class="st">b.*&quot;</span><span class="op">};</span></span>
<span id="cb58-602"><a href="#cb58-602" aria-hidden="true" tabindex="-1"></a>        <span class="dv">602</span> </span>
<span id="cb58-603"><a href="#cb58-603" aria-hidden="true" tabindex="-1"></a>        <span class="dv">603</span>         <span class="co">// clang-format off</span></span>
<span id="cb58-604"><a href="#cb58-604" aria-hidden="true" tabindex="-1"></a>        <span class="dv">604</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb58-605"><a href="#cb58-605" aria-hidden="true" tabindex="-1"></a>        <span class="dv">605</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-606"><a href="#cb58-606" aria-hidden="true" tabindex="-1"></a>        <span class="dv">606</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 12 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-607"><a href="#cb58-607" aria-hidden="true" tabindex="-1"></a>        <span class="dv">607</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 4 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-608"><a href="#cb58-608" aria-hidden="true" tabindex="-1"></a>        <span class="dv">608</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-609"><a href="#cb58-609" aria-hidden="true" tabindex="-1"></a>        <span class="dv">609</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-610"><a href="#cb58-610" aria-hidden="true" tabindex="-1"></a>        <span class="dv">610</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 7 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-611"><a href="#cb58-611" aria-hidden="true" tabindex="-1"></a>        <span class="dv">611</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-612"><a href="#cb58-612" aria-hidden="true" tabindex="-1"></a>        <span class="dv">612</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-613"><a href="#cb58-613" aria-hidden="true" tabindex="-1"></a>        <span class="dv">613</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-614"><a href="#cb58-614" aria-hidden="true" tabindex="-1"></a>        <span class="dv">614</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-615"><a href="#cb58-615" aria-hidden="true" tabindex="-1"></a>        <span class="dv">615</span>         <span class="co">// clang-format on</span></span>
<span id="cb58-616"><a href="#cb58-616" aria-hidden="true" tabindex="-1"></a>        <span class="dv">616</span> </span>
<span id="cb58-617"><a href="#cb58-617" aria-hidden="true" tabindex="-1"></a>        <span class="dv">617</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-618"><a href="#cb58-618" aria-hidden="true" tabindex="-1"></a>        <span class="dv">618</span> </span>
<span id="cb58-619"><a href="#cb58-619" aria-hidden="true" tabindex="-1"></a>        <span class="dv">619</span>         p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-620"><a href="#cb58-620" aria-hidden="true" tabindex="-1"></a>        <span class="dv">620</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-621"><a href="#cb58-621" aria-hidden="true" tabindex="-1"></a>        <span class="dv">621</span>     <span class="op">}</span></span>
<span id="cb58-622"><a href="#cb58-622" aria-hidden="true" tabindex="-1"></a>        <span class="dv">622</span>     <span class="op">{</span></span>
<span id="cb58-623"><a href="#cb58-623" aria-hidden="true" tabindex="-1"></a>        <span class="dv">623</span>         <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-624"><a href="#cb58-624" aria-hidden="true" tabindex="-1"></a>        <span class="dv">624</span>                                      <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb58-625"><a href="#cb58-625" aria-hidden="true" tabindex="-1"></a>        <span class="dv">625</span> </span>
<span id="cb58-626"><a href="#cb58-626" aria-hidden="true" tabindex="-1"></a>        <span class="dv">626</span>         <span class="co">// clang-format off</span></span>
<span id="cb58-627"><a href="#cb58-627" aria-hidden="true" tabindex="-1"></a>        <span class="dv">627</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb58-628"><a href="#cb58-628" aria-hidden="true" tabindex="-1"></a>        <span class="dv">628</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-629"><a href="#cb58-629" aria-hidden="true" tabindex="-1"></a>        <span class="dv">629</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 10 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-630"><a href="#cb58-630" aria-hidden="true" tabindex="-1"></a>        <span class="dv">630</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-631"><a href="#cb58-631" aria-hidden="true" tabindex="-1"></a>        <span class="dv">631</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-632"><a href="#cb58-632" aria-hidden="true" tabindex="-1"></a>        <span class="dv">632</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-633"><a href="#cb58-633" aria-hidden="true" tabindex="-1"></a>        <span class="dv">633</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-634"><a href="#cb58-634" aria-hidden="true" tabindex="-1"></a>        <span class="dv">634</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-635"><a href="#cb58-635" aria-hidden="true" tabindex="-1"></a>        <span class="dv">635</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 5 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-636"><a href="#cb58-636" aria-hidden="true" tabindex="-1"></a>        <span class="dv">636</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-637"><a href="#cb58-637" aria-hidden="true" tabindex="-1"></a>        <span class="dv">637</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-638"><a href="#cb58-638" aria-hidden="true" tabindex="-1"></a>        <span class="dv">638</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-639"><a href="#cb58-639" aria-hidden="true" tabindex="-1"></a>        <span class="dv">639</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 5 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-640"><a href="#cb58-640" aria-hidden="true" tabindex="-1"></a>        <span class="dv">640</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-641"><a href="#cb58-641" aria-hidden="true" tabindex="-1"></a>        <span class="dv">641</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-642"><a href="#cb58-642" aria-hidden="true" tabindex="-1"></a>        <span class="dv">642</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-643"><a href="#cb58-643" aria-hidden="true" tabindex="-1"></a>        <span class="dv">643</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-644"><a href="#cb58-644" aria-hidden="true" tabindex="-1"></a>        <span class="dv">644</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-645"><a href="#cb58-645" aria-hidden="true" tabindex="-1"></a>        <span class="dv">645</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-646"><a href="#cb58-646" aria-hidden="true" tabindex="-1"></a>        <span class="dv">646</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-647"><a href="#cb58-647" aria-hidden="true" tabindex="-1"></a>        <span class="dv">647</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-648"><a href="#cb58-648" aria-hidden="true" tabindex="-1"></a>        <span class="dv">648</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-649"><a href="#cb58-649" aria-hidden="true" tabindex="-1"></a>        <span class="dv">649</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-650"><a href="#cb58-650" aria-hidden="true" tabindex="-1"></a>        <span class="dv">650</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-651"><a href="#cb58-651" aria-hidden="true" tabindex="-1"></a>        <span class="dv">651</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-652"><a href="#cb58-652" aria-hidden="true" tabindex="-1"></a>        <span class="dv">652</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-653"><a href="#cb58-653" aria-hidden="true" tabindex="-1"></a>        <span class="dv">653</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-654"><a href="#cb58-654" aria-hidden="true" tabindex="-1"></a>        <span class="dv">654</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-655"><a href="#cb58-655" aria-hidden="true" tabindex="-1"></a>        <span class="dv">655</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-656"><a href="#cb58-656" aria-hidden="true" tabindex="-1"></a>        <span class="dv">656</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-657"><a href="#cb58-657" aria-hidden="true" tabindex="-1"></a>        <span class="dv">657</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-658"><a href="#cb58-658" aria-hidden="true" tabindex="-1"></a>        <span class="dv">658</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-659"><a href="#cb58-659" aria-hidden="true" tabindex="-1"></a>        <span class="dv">659</span>         <span class="co">// clang-format on</span></span>
<span id="cb58-660"><a href="#cb58-660" aria-hidden="true" tabindex="-1"></a>        <span class="dv">660</span> </span>
<span id="cb58-661"><a href="#cb58-661" aria-hidden="true" tabindex="-1"></a>        <span class="dv">661</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-662"><a href="#cb58-662" aria-hidden="true" tabindex="-1"></a>        <span class="dv">662</span> </span>
<span id="cb58-663"><a href="#cb58-663" aria-hidden="true" tabindex="-1"></a>        <span class="dv">663</span>         p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-664"><a href="#cb58-664" aria-hidden="true" tabindex="-1"></a>        <span class="dv">664</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-665"><a href="#cb58-665" aria-hidden="true" tabindex="-1"></a>        <span class="dv">665</span>     <span class="op">}</span></span>
<span id="cb58-666"><a href="#cb58-666" aria-hidden="true" tabindex="-1"></a>        <span class="dv">666</span>     <span class="op">{</span></span>
<span id="cb58-667"><a href="#cb58-667" aria-hidden="true" tabindex="-1"></a>        <span class="dv">667</span>         <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb58-668"><a href="#cb58-668" aria-hidden="true" tabindex="-1"></a>        <span class="dv">668</span>                                      <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb58-669"><a href="#cb58-669" aria-hidden="true" tabindex="-1"></a>        <span class="dv">669</span> </span>
<span id="cb58-670"><a href="#cb58-670" aria-hidden="true" tabindex="-1"></a>        <span class="dv">670</span>         <span class="co">// clang-format off</span></span>
<span id="cb58-671"><a href="#cb58-671" aria-hidden="true" tabindex="-1"></a>        <span class="dv">671</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb58-672"><a href="#cb58-672" aria-hidden="true" tabindex="-1"></a>        <span class="dv">672</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-673"><a href="#cb58-673" aria-hidden="true" tabindex="-1"></a>        <span class="dv">673</span>             <span class="st">&quot;no_package -&gt; ut_data/app1 : 5 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-674"><a href="#cb58-674" aria-hidden="true" tabindex="-1"></a>        <span class="dv">674</span>             <span class="st">&quot;ut_data/app1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-675"><a href="#cb58-675" aria-hidden="true" tabindex="-1"></a>        <span class="dv">675</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-676"><a href="#cb58-676" aria-hidden="true" tabindex="-1"></a>        <span class="dv">676</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-677"><a href="#cb58-677" aria-hidden="true" tabindex="-1"></a>        <span class="dv">677</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-678"><a href="#cb58-678" aria-hidden="true" tabindex="-1"></a>        <span class="dv">678</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-679"><a href="#cb58-679" aria-hidden="true" tabindex="-1"></a>        <span class="dv">679</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-680"><a href="#cb58-680" aria-hidden="true" tabindex="-1"></a>        <span class="dv">680</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-681"><a href="#cb58-681" aria-hidden="true" tabindex="-1"></a>        <span class="dv">681</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-682"><a href="#cb58-682" aria-hidden="true" tabindex="-1"></a>        <span class="dv">682</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-683"><a href="#cb58-683" aria-hidden="true" tabindex="-1"></a>        <span class="dv">683</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-684"><a href="#cb58-684" aria-hidden="true" tabindex="-1"></a>        <span class="dv">684</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-685"><a href="#cb58-685" aria-hidden="true" tabindex="-1"></a>        <span class="dv">685</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 10 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-686"><a href="#cb58-686" aria-hidden="true" tabindex="-1"></a>        <span class="dv">686</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-687"><a href="#cb58-687" aria-hidden="true" tabindex="-1"></a>        <span class="dv">687</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-688"><a href="#cb58-688" aria-hidden="true" tabindex="-1"></a>        <span class="dv">688</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-689"><a href="#cb58-689" aria-hidden="true" tabindex="-1"></a>        <span class="dv">689</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-690"><a href="#cb58-690" aria-hidden="true" tabindex="-1"></a>        <span class="dv">690</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-691"><a href="#cb58-691" aria-hidden="true" tabindex="-1"></a>        <span class="dv">691</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 5 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-692"><a href="#cb58-692" aria-hidden="true" tabindex="-1"></a>        <span class="dv">692</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-693"><a href="#cb58-693" aria-hidden="true" tabindex="-1"></a>        <span class="dv">693</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-694"><a href="#cb58-694" aria-hidden="true" tabindex="-1"></a>        <span class="dv">694</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-695"><a href="#cb58-695" aria-hidden="true" tabindex="-1"></a>        <span class="dv">695</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-696"><a href="#cb58-696" aria-hidden="true" tabindex="-1"></a>        <span class="dv">696</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-697"><a href="#cb58-697" aria-hidden="true" tabindex="-1"></a>        <span class="dv">697</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-698"><a href="#cb58-698" aria-hidden="true" tabindex="-1"></a>        <span class="dv">698</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-699"><a href="#cb58-699" aria-hidden="true" tabindex="-1"></a>        <span class="dv">699</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-700"><a href="#cb58-700" aria-hidden="true" tabindex="-1"></a>        <span class="dv">700</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-701"><a href="#cb58-701" aria-hidden="true" tabindex="-1"></a>        <span class="dv">701</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-702"><a href="#cb58-702" aria-hidden="true" tabindex="-1"></a>        <span class="dv">702</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-703"><a href="#cb58-703" aria-hidden="true" tabindex="-1"></a>        <span class="dv">703</span>         <span class="co">// clang-format on</span></span>
<span id="cb58-704"><a href="#cb58-704" aria-hidden="true" tabindex="-1"></a>        <span class="dv">704</span> </span>
<span id="cb58-705"><a href="#cb58-705" aria-hidden="true" tabindex="-1"></a>        <span class="dv">705</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb58-706"><a href="#cb58-706" aria-hidden="true" tabindex="-1"></a>        <span class="dv">706</span> </span>
<span id="cb58-707"><a href="#cb58-707" aria-hidden="true" tabindex="-1"></a>        <span class="dv">707</span>         p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-708"><a href="#cb58-708" aria-hidden="true" tabindex="-1"></a>        <span class="dv">708</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-709"><a href="#cb58-709" aria-hidden="true" tabindex="-1"></a>        <span class="dv">709</span>     <span class="op">}</span></span>
<span id="cb58-710"><a href="#cb58-710" aria-hidden="true" tabindex="-1"></a>        <span class="dv">710</span> <span class="op">}</span></span>
<span id="cb58-711"><a href="#cb58-711" aria-hidden="true" tabindex="-1"></a>        <span class="dv">711</span> </span>
<span id="cb58-712"><a href="#cb58-712" aria-hidden="true" tabindex="-1"></a>        <span class="dv">712</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> ArchGenerator<span class="op">)</span></span>
<span id="cb58-713"><a href="#cb58-713" aria-hidden="true" tabindex="-1"></a>        <span class="dv">713</span> <span class="op">{</span></span>
<span id="cb58-714"><a href="#cb58-714" aria-hidden="true" tabindex="-1"></a>        <span class="dv">714</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb58-715"><a href="#cb58-715" aria-hidden="true" tabindex="-1"></a>        <span class="dv">715</span> </span>
<span id="cb58-716"><a href="#cb58-716" aria-hidden="true" tabindex="-1"></a>        <span class="dv">716</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-717"><a href="#cb58-717" aria-hidden="true" tabindex="-1"></a>        <span class="dv">717</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-718"><a href="#cb58-718" aria-hidden="true" tabindex="-1"></a>        <span class="dv">718</span>         <span class="kw">auto</span> ag <span class="op">=</span> ArchGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb58-719"><a href="#cb58-719" aria-hidden="true" tabindex="-1"></a>        <span class="dv">719</span>     <span class="op">}</span></span>
<span id="cb58-720"><a href="#cb58-720" aria-hidden="true" tabindex="-1"></a>        <span class="dv">720</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-721"><a href="#cb58-721" aria-hidden="true" tabindex="-1"></a>        <span class="dv">721</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-722"><a href="#cb58-722" aria-hidden="true" tabindex="-1"></a>        <span class="dv">722</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-723"><a href="#cb58-723" aria-hidden="true" tabindex="-1"></a>        <span class="dv">723</span>     <span class="op">}</span></span>
<span id="cb58-724"><a href="#cb58-724" aria-hidden="true" tabindex="-1"></a>        <span class="dv">724</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-725"><a href="#cb58-725" aria-hidden="true" tabindex="-1"></a>        <span class="dv">725</span> </span>
<span id="cb58-726"><a href="#cb58-726" aria-hidden="true" tabindex="-1"></a>        <span class="dv">726</span>     <span class="op">{</span></span>
<span id="cb58-727"><a href="#cb58-727" aria-hidden="true" tabindex="-1"></a>        <span class="dv">727</span>         <span class="kw">auto</span> ag <span class="op">=</span> ArchGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb58-728"><a href="#cb58-728" aria-hidden="true" tabindex="-1"></a>        <span class="dv">728</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb58-729"><a href="#cb58-729" aria-hidden="true" tabindex="-1"></a>        <span class="dv">729</span> </span>
<span id="cb58-730"><a href="#cb58-730" aria-hidden="true" tabindex="-1"></a>        <span class="dv">730</span>         ag<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-731"><a href="#cb58-731" aria-hidden="true" tabindex="-1"></a>        <span class="dv">731</span> </span>
<span id="cb58-732"><a href="#cb58-732" aria-hidden="true" tabindex="-1"></a>        <span class="dv">732</span>         <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>FileUtils<span class="op">::</span>Load_Strings<span class="op">(</span>ss<span class="op">)};</span></span>
<span id="cb58-733"><a href="#cb58-733" aria-hidden="true" tabindex="-1"></a>        <span class="dv">733</span> </span>
<span id="cb58-734"><a href="#cb58-734" aria-hidden="true" tabindex="-1"></a>        <span class="dv">734</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb58-735"><a href="#cb58-735" aria-hidden="true" tabindex="-1"></a>        <span class="dv">735</span>             FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb58-736"><a href="#cb58-736" aria-hidden="true" tabindex="-1"></a>        <span class="dv">736</span> </span>
<span id="cb58-737"><a href="#cb58-737" aria-hidden="true" tabindex="-1"></a>        <span class="dv">737</span>         ASSERT_TRUE<span class="op">(</span>exp<span class="op">);</span></span>
<span id="cb58-738"><a href="#cb58-738" aria-hidden="true" tabindex="-1"></a>        <span class="dv">738</span> </span>
<span id="cb58-739"><a href="#cb58-739" aria-hidden="true" tabindex="-1"></a>        <span class="dv">739</span>         ASSERT_EQ<span class="op">(*</span>act<span class="op">,</span> <span class="op">*</span>exp<span class="op">);</span></span>
<span id="cb58-740"><a href="#cb58-740" aria-hidden="true" tabindex="-1"></a>        <span class="dv">740</span>     <span class="op">}</span></span>
<span id="cb58-741"><a href="#cb58-741" aria-hidden="true" tabindex="-1"></a>        <span class="dv">741</span> <span class="op">}</span></span>
<span id="cb58-742"><a href="#cb58-742" aria-hidden="true" tabindex="-1"></a>        <span class="dv">742</span> </span>
<span id="cb58-743"><a href="#cb58-743" aria-hidden="true" tabindex="-1"></a>        <span class="dv">743</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Arch2PUmlGenerator<span class="op">)</span></span>
<span id="cb58-744"><a href="#cb58-744" aria-hidden="true" tabindex="-1"></a>        <span class="dv">744</span> <span class="op">{</span></span>
<span id="cb58-745"><a href="#cb58-745" aria-hidden="true" tabindex="-1"></a>        <span class="dv">745</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-746"><a href="#cb58-746" aria-hidden="true" tabindex="-1"></a>        <span class="dv">746</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-747"><a href="#cb58-747" aria-hidden="true" tabindex="-1"></a>        <span class="dv">747</span>         <span class="kw">auto</span> ag <span class="op">=</span> Arch2PUmlGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb58-748"><a href="#cb58-748" aria-hidden="true" tabindex="-1"></a>        <span class="dv">748</span>     <span class="op">}</span></span>
<span id="cb58-749"><a href="#cb58-749" aria-hidden="true" tabindex="-1"></a>        <span class="dv">749</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-750"><a href="#cb58-750" aria-hidden="true" tabindex="-1"></a>        <span class="dv">750</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-751"><a href="#cb58-751" aria-hidden="true" tabindex="-1"></a>        <span class="dv">751</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-752"><a href="#cb58-752" aria-hidden="true" tabindex="-1"></a>        <span class="dv">752</span>     <span class="op">}</span></span>
<span id="cb58-753"><a href="#cb58-753" aria-hidden="true" tabindex="-1"></a>        <span class="dv">753</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-754"><a href="#cb58-754" aria-hidden="true" tabindex="-1"></a>        <span class="dv">754</span> </span>
<span id="cb58-755"><a href="#cb58-755" aria-hidden="true" tabindex="-1"></a>        <span class="dv">755</span>     <span class="op">{</span></span>
<span id="cb58-756"><a href="#cb58-756" aria-hidden="true" tabindex="-1"></a>        <span class="dv">756</span>         <span class="kw">auto</span> ag <span class="op">=</span> Arch2PUmlGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb58-757"><a href="#cb58-757" aria-hidden="true" tabindex="-1"></a>        <span class="dv">757</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb58-758"><a href="#cb58-758" aria-hidden="true" tabindex="-1"></a>        <span class="dv">758</span> </span>
<span id="cb58-759"><a href="#cb58-759" aria-hidden="true" tabindex="-1"></a>        <span class="dv">759</span>         ag<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb58-760"><a href="#cb58-760" aria-hidden="true" tabindex="-1"></a>        <span class="dv">760</span> </span>
<span id="cb58-761"><a href="#cb58-761" aria-hidden="true" tabindex="-1"></a>        <span class="dv">761</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb58-762"><a href="#cb58-762" aria-hidden="true" tabindex="-1"></a>        <span class="dv">762</span>             <span class="st">&quot;@startuml</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-763"><a href="#cb58-763" aria-hidden="true" tabindex="-1"></a>        <span class="dv">763</span>             <span class="st">&quot;scale max 730 width</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-764"><a href="#cb58-764" aria-hidden="true" tabindex="-1"></a>        <span class="dv">764</span>             <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-765"><a href="#cb58-765" aria-hidden="true" tabindex="-1"></a>        <span class="dv">765</span>             <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-766"><a href="#cb58-766" aria-hidden="true" tabindex="-1"></a>        <span class="dv">766</span>             <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-767"><a href="#cb58-767" aria-hidden="true" tabindex="-1"></a>        <span class="dv">767</span>             <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-768"><a href="#cb58-768" aria-hidden="true" tabindex="-1"></a>        <span class="dv">768</span>             <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-769"><a href="#cb58-769" aria-hidden="true" tabindex="-1"></a>        <span class="dv">769</span>             <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-770"><a href="#cb58-770" aria-hidden="true" tabindex="-1"></a>        <span class="dv">770</span>             <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-771"><a href="#cb58-771" aria-hidden="true" tabindex="-1"></a>        <span class="dv">771</span>             <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-772"><a href="#cb58-772" aria-hidden="true" tabindex="-1"></a>        <span class="dv">772</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-773"><a href="#cb58-773" aria-hidden="true" tabindex="-1"></a>        <span class="dv">773</span>             <span class="st">&quot;ut_data___app1 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-774"><a href="#cb58-774" aria-hidden="true" tabindex="-1"></a>        <span class="dv">774</span>             <span class="st">&quot;ut_data___app1___mod2___mod2_2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-775"><a href="#cb58-775" aria-hidden="true" tabindex="-1"></a>        <span class="dv">775</span>             <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-776"><a href="#cb58-776" aria-hidden="true" tabindex="-1"></a>        <span class="dv">776</span>             <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-777"><a href="#cb58-777" aria-hidden="true" tabindex="-1"></a>        <span class="dv">777</span>             <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-778"><a href="#cb58-778" aria-hidden="true" tabindex="-1"></a>        <span class="dv">778</span>             <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-779"><a href="#cb58-779" aria-hidden="true" tabindex="-1"></a>        <span class="dv">779</span>             <span class="st">&quot;ut_data___app1___mod2___mod2_1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> &lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-780"><a href="#cb58-780" aria-hidden="true" tabindex="-1"></a>        <span class="dv">780</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb58-781"><a href="#cb58-781" aria-hidden="true" tabindex="-1"></a>        <span class="dv">781</span>             <span class="st">&quot;@enduml</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb58-782"><a href="#cb58-782" aria-hidden="true" tabindex="-1"></a>        <span class="dv">782</span> </span>
<span id="cb58-783"><a href="#cb58-783" aria-hidden="true" tabindex="-1"></a>        <span class="dv">783</span>         ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-784"><a href="#cb58-784" aria-hidden="true" tabindex="-1"></a>        <span class="dv">784</span>     <span class="op">}</span></span>
<span id="cb58-785"><a href="#cb58-785" aria-hidden="true" tabindex="-1"></a>        <span class="dv">785</span> <span class="op">}</span></span>
<span id="cb58-786"><a href="#cb58-786" aria-hidden="true" tabindex="-1"></a>        <span class="dv">786</span> </span>
<span id="cb58-787"><a href="#cb58-787" aria-hidden="true" tabindex="-1"></a>        <span class="dv">787</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> CyclicGenerator<span class="op">)</span></span>
<span id="cb58-788"><a href="#cb58-788" aria-hidden="true" tabindex="-1"></a>        <span class="dv">788</span> <span class="op">{</span></span>
<span id="cb58-789"><a href="#cb58-789" aria-hidden="true" tabindex="-1"></a>        <span class="dv">789</span>     <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb58-790"><a href="#cb58-790" aria-hidden="true" tabindex="-1"></a>        <span class="dv">790</span>     <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb58-791"><a href="#cb58-791" aria-hidden="true" tabindex="-1"></a>        <span class="dv">791</span>         <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb58-792"><a href="#cb58-792" aria-hidden="true" tabindex="-1"></a>        <span class="dv">792</span>     <span class="op">}</span></span>
<span id="cb58-793"><a href="#cb58-793" aria-hidden="true" tabindex="-1"></a>        <span class="dv">793</span>     <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span><span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-794"><a href="#cb58-794" aria-hidden="true" tabindex="-1"></a>        <span class="dv">794</span>         exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb58-795"><a href="#cb58-795" aria-hidden="true" tabindex="-1"></a>        <span class="dv">795</span>         ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb58-796"><a href="#cb58-796" aria-hidden="true" tabindex="-1"></a>        <span class="dv">796</span>     <span class="op">}</span></span>
<span id="cb58-797"><a href="#cb58-797" aria-hidden="true" tabindex="-1"></a>        <span class="dv">797</span>     ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb58-798"><a href="#cb58-798" aria-hidden="true" tabindex="-1"></a>        <span class="dv">798</span> </span>
<span id="cb58-799"><a href="#cb58-799" aria-hidden="true" tabindex="-1"></a>        <span class="dv">799</span>     <span class="op">{</span></span>
<span id="cb58-800"><a href="#cb58-800" aria-hidden="true" tabindex="-1"></a>        <span class="dv">800</span>         <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb58-801"><a href="#cb58-801" aria-hidden="true" tabindex="-1"></a>        <span class="dv">801</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb58-802"><a href="#cb58-802" aria-hidden="true" tabindex="-1"></a>        <span class="dv">802</span> </span>
<span id="cb58-803"><a href="#cb58-803" aria-hidden="true" tabindex="-1"></a>        <span class="dv">803</span>         ASSERT_FALSE<span class="op">(</span>cg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">));</span></span>
<span id="cb58-804"><a href="#cb58-804" aria-hidden="true" tabindex="-1"></a>        <span class="dv">804</span> </span>
<span id="cb58-805"><a href="#cb58-805" aria-hidden="true" tabindex="-1"></a>        <span class="dv">805</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;cyclic dependencies found</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-806"><a href="#cb58-806" aria-hidden="true" tabindex="-1"></a>        <span class="dv">806</span>     <span class="op">}</span></span>
<span id="cb58-807"><a href="#cb58-807" aria-hidden="true" tabindex="-1"></a>        <span class="dv">807</span>     <span class="op">{</span></span>
<span id="cb58-808"><a href="#cb58-808" aria-hidden="true" tabindex="-1"></a>        <span class="dv">808</span>         <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org2&quot;</span><span class="op">};</span></span>
<span id="cb58-809"><a href="#cb58-809" aria-hidden="true" tabindex="-1"></a>        <span class="dv">809</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb58-810"><a href="#cb58-810" aria-hidden="true" tabindex="-1"></a>        <span class="dv">810</span> </span>
<span id="cb58-811"><a href="#cb58-811" aria-hidden="true" tabindex="-1"></a>        <span class="dv">811</span>         ASSERT_TRUE<span class="op">(</span>cg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">));</span></span>
<span id="cb58-812"><a href="#cb58-812" aria-hidden="true" tabindex="-1"></a>        <span class="dv">812</span> </span>
<span id="cb58-813"><a href="#cb58-813" aria-hidden="true" tabindex="-1"></a>        <span class="dv">813</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;cyclic dependencies not found</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb58-814"><a href="#cb58-814" aria-hidden="true" tabindex="-1"></a>        <span class="dv">814</span>     <span class="op">}</span></span>
<span id="cb58-815"><a href="#cb58-815" aria-hidden="true" tabindex="-1"></a>        <span class="dv">815</span> <span class="op">}</span></span>
<span id="cb58-816"><a href="#cb58-816" aria-hidden="true" tabindex="-1"></a>        <span class="dv">816</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb58-817"><a href="#cb58-817" aria-hidden="true" tabindex="-1"></a>        <span class="dv">817</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutload_store_format_ut.cpp">example/deps/dependency/ut/load_store_format_ut.cpp
<a id="SS_23_2_22"></a></h3>
<div class="sourceCode" id="cb59"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Paths_t</span><span class="op">)</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">{</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">auto</span> <span class="at">const</span> pkg_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">};</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="kw">auto</span> <span class="at">const</span> pkg_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_act&quot;</span><span class="op">};</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>pkg_act<span class="op">);</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="kw">auto</span> <span class="at">const</span> dir_in</span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>         <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     ASSERT_FALSE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dir_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>pkg_act<span class="op">,</span> dir_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="kw">auto</span> dir_out0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>pkg_org<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     ASSERT_TRUE<span class="op">(</span>dir_out0<span class="op">);</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="kw">auto</span> dir_out1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>pkg_act<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     ASSERT_TRUE<span class="op">(</span>dir_out1<span class="op">);</span></span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     ASSERT_EQ<span class="op">(</span>dir_in<span class="op">,</span> <span class="op">*</span>dir_out0<span class="op">);</span></span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     ASSERT_EQ<span class="op">(</span>dir_in<span class="op">,</span> <span class="op">*</span>dir_out1<span class="op">);</span></span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>pkg_act<span class="op">);</span></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">}</span></span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Dirs2Srcs_t</span><span class="op">)</span></span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="op">{</span></span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="kw">auto</span> <span class="at">const</span> dirs2srcs_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_org&quot;</span><span class="op">};</span></span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="kw">auto</span> <span class="at">const</span> dirs2srcs_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_act&quot;</span><span class="op">};</span></span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>dirs2srcs_act<span class="op">);</span></span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="at">const</span> <span class="kw">auto</span> dir2srcs_in <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>         <span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>           <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>           <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>         <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="op">};</span></span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb59-62"><a href="#cb59-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     ASSERT_FALSE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dir2srcs_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-63"><a href="#cb59-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb59-64"><a href="#cb59-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>dirs2srcs_act<span class="op">,</span> dir2srcs_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-65"><a href="#cb59-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> </span>
<span id="cb59-66"><a href="#cb59-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="kw">auto</span> dir2srcs_out0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb59-67"><a href="#cb59-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>dirs2srcs_org<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb59-68"><a href="#cb59-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     ASSERT_TRUE<span class="op">(</span>dir2srcs_out0<span class="op">);</span></span>
<span id="cb59-69"><a href="#cb59-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb59-70"><a href="#cb59-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="kw">auto</span> dir2srcs_out1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb59-71"><a href="#cb59-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>dirs2srcs_act<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb59-72"><a href="#cb59-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     ASSERT_TRUE<span class="op">(</span>dir2srcs_out1<span class="op">);</span></span>
<span id="cb59-73"><a href="#cb59-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb59-74"><a href="#cb59-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     ASSERT_EQ<span class="op">(</span>dir2srcs_in<span class="op">,</span> <span class="op">*</span>dir2srcs_out0<span class="op">);</span></span>
<span id="cb59-75"><a href="#cb59-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     ASSERT_EQ<span class="op">(</span>dir2srcs_in<span class="op">,</span> <span class="op">*</span>dir2srcs_out1<span class="op">);</span></span>
<span id="cb59-76"><a href="#cb59-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb59-77"><a href="#cb59-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>dirs2srcs_act<span class="op">);</span></span>
<span id="cb59-78"><a href="#cb59-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="op">}</span></span>
<span id="cb59-79"><a href="#cb59-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb59-80"><a href="#cb59-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb59-81"><a href="#cb59-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb59-82"><a href="#cb59-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb59-83"><a href="#cb59-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels<span class="op">{</span></span>
<span id="cb59-84"><a href="#cb59-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb59-85"><a href="#cb59-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">},</span></span>
<span id="cb59-86"><a href="#cb59-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>                  <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-87"><a href="#cb59-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-88"><a href="#cb59-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-89"><a href="#cb59-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb59-90"><a href="#cb59-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">}}},</span></span>
<span id="cb59-91"><a href="#cb59-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb59-92"><a href="#cb59-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb59-93"><a href="#cb59-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">},</span></span>
<span id="cb59-94"><a href="#cb59-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>                  <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-95"><a href="#cb59-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-96"><a href="#cb59-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb59-97"><a href="#cb59-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-98"><a href="#cb59-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb59-99"><a href="#cb59-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb59-100"><a href="#cb59-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-101"><a href="#cb59-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-102"><a href="#cb59-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-103"><a href="#cb59-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb59-104"><a href="#cb59-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb59-105"><a href="#cb59-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-106"><a href="#cb59-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb59-107"><a href="#cb59-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> <span class="op">};</span></span>
<span id="cb59-108"><a href="#cb59-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb59-109"><a href="#cb59-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb59-110"><a href="#cb59-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">DepRels_t</span><span class="op">)</span></span>
<span id="cb59-111"><a href="#cb59-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="op">{</span></span>
<span id="cb59-112"><a href="#cb59-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     <span class="kw">auto</span> <span class="at">const</span> deps_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb59-113"><a href="#cb59-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="kw">auto</span> <span class="at">const</span> deps_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_act&quot;</span><span class="op">};</span></span>
<span id="cb59-114"><a href="#cb59-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb59-115"><a href="#cb59-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>deps_act<span class="op">);</span></span>
<span id="cb59-116"><a href="#cb59-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb59-117"><a href="#cb59-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb59-118"><a href="#cb59-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>     ASSERT_FALSE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dep_rels<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-119"><a href="#cb59-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb59-120"><a href="#cb59-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>deps_act<span class="op">,</span> dep_rels<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-121"><a href="#cb59-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb59-122"><a href="#cb59-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="kw">auto</span> deps_out0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>deps_org<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb59-123"><a href="#cb59-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>     ASSERT_TRUE<span class="op">(</span>deps_out0<span class="op">);</span></span>
<span id="cb59-124"><a href="#cb59-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb59-125"><a href="#cb59-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="kw">auto</span> exp_it     <span class="op">=</span> dep_rels<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb59-126"><a href="#cb59-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="kw">auto</span> exp_it_end <span class="op">=</span> dep_rels<span class="op">.</span>cend<span class="op">();</span></span>
<span id="cb59-127"><a href="#cb59-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">auto</span> act_it     <span class="op">=</span> deps_out0<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb59-128"><a href="#cb59-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb59-129"><a href="#cb59-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="cf">while</span> <span class="op">(</span>exp_it <span class="op">!=</span> exp_it_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-130"><a href="#cb59-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         <span class="kw">auto</span> exp_str <span class="op">=</span> ToStringDepRel<span class="op">(*</span>exp_it<span class="op">);</span></span>
<span id="cb59-131"><a href="#cb59-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="kw">auto</span> act_str <span class="op">=</span> ToStringDepRel<span class="op">(*</span>act_it<span class="op">);</span></span>
<span id="cb59-132"><a href="#cb59-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         ASSERT_EQ<span class="op">(</span>exp_str<span class="op">,</span> act_str<span class="op">);</span></span>
<span id="cb59-133"><a href="#cb59-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>PackageA<span class="op">,</span> act_it<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb59-134"><a href="#cb59-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>CountAtoB<span class="op">,</span> act_it<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb59-135"><a href="#cb59-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>IncsAtoB<span class="op">,</span> act_it<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb59-136"><a href="#cb59-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>PackageB<span class="op">,</span> act_it<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb59-137"><a href="#cb59-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>CountBtoA<span class="op">,</span> act_it<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb59-138"><a href="#cb59-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>         ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>IncsBtoA<span class="op">,</span> act_it<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb59-139"><a href="#cb59-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>         ASSERT_EQ<span class="op">(*</span>exp_it<span class="op">,</span> <span class="op">*</span>act_it<span class="op">);</span></span>
<span id="cb59-140"><a href="#cb59-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> </span>
<span id="cb59-141"><a href="#cb59-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>         <span class="op">++</span>exp_it<span class="op">;</span></span>
<span id="cb59-142"><a href="#cb59-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>         <span class="op">++</span>act_it<span class="op">;</span></span>
<span id="cb59-143"><a href="#cb59-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>     <span class="op">}</span></span>
<span id="cb59-144"><a href="#cb59-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     ASSERT_EQ<span class="op">(</span>dep_rels<span class="op">,</span> <span class="op">*</span>deps_out0<span class="op">);</span></span>
<span id="cb59-145"><a href="#cb59-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> </span>
<span id="cb59-146"><a href="#cb59-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="kw">auto</span> deps_out1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>deps_act<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb59-147"><a href="#cb59-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     ASSERT_TRUE<span class="op">(</span>deps_out1<span class="op">);</span></span>
<span id="cb59-148"><a href="#cb59-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb59-149"><a href="#cb59-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     ASSERT_EQ<span class="op">(</span>dep_rels<span class="op">,</span> <span class="op">*</span>deps_out1<span class="op">);</span></span>
<span id="cb59-150"><a href="#cb59-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> </span>
<span id="cb59-151"><a href="#cb59-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>deps_act<span class="op">);</span></span>
<span id="cb59-152"><a href="#cb59-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="op">}</span></span>
<span id="cb59-153"><a href="#cb59-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb59-154"><a href="#cb59-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Arch_t</span><span class="op">)</span></span>
<span id="cb59-155"><a href="#cb59-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="op">{</span></span>
<span id="cb59-156"><a href="#cb59-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="kw">auto</span> <span class="at">const</span> arch_exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb59-157"><a href="#cb59-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     <span class="kw">auto</span> <span class="at">const</span> arch_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_act&quot;</span><span class="op">};</span></span>
<span id="cb59-158"><a href="#cb59-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> </span>
<span id="cb59-159"><a href="#cb59-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>arch_act<span class="op">);</span></span>
<span id="cb59-160"><a href="#cb59-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb59-161"><a href="#cb59-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="kw">auto</span> row_exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb59-162"><a href="#cb59-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>         FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>arch_exp<span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb59-163"><a href="#cb59-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     ASSERT_TRUE<span class="op">(</span>row_exp<span class="op">);</span></span>
<span id="cb59-164"><a href="#cb59-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb59-165"><a href="#cb59-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels<span class="op">);</span></span>
<span id="cb59-166"><a href="#cb59-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>     ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>arch_act<span class="op">,</span> arch<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb59-167"><a href="#cb59-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> </span>
<span id="cb59-168"><a href="#cb59-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="kw">auto</span> row_act <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb59-169"><a href="#cb59-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>arch_act<span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb59-170"><a href="#cb59-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     ASSERT_TRUE<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb59-171"><a href="#cb59-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb59-172"><a href="#cb59-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>     ASSERT_EQ<span class="op">(</span>row_exp<span class="op">,</span> <span class="op">*</span>row_act<span class="op">);</span></span>
<span id="cb59-173"><a href="#cb59-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb59-174"><a href="#cb59-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>arch_act<span class="op">);</span></span>
<span id="cb59-175"><a href="#cb59-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> <span class="op">}</span></span>
<span id="cb59-176"><a href="#cb59-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb59-177"><a href="#cb59-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> <span class="op">}</span>  <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilsload_store.h">example/deps/file_utils/h/file_utils/load_store.h
<a id="SS_23_2_23"></a></h3>
<div class="sourceCode" id="cb60"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">bool</span> StoreToFile<span class="op">(</span><span class="bu">std::</span>string_view filename<span class="op">,</span> T <span class="at">const</span><span class="op">&amp;</span> t<span class="op">,</span> <span class="dt">bool</span> <span class="op">(*</span>ss<span class="op">)(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> T <span class="at">const</span><span class="op">&amp;))</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="op">{</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="kw">auto</span> fout <span class="op">=</span> <span class="bu">std::</span>ofstream<span class="op">{</span>filename<span class="op">.</span>data<span class="op">()};</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="cf">if</span> <span class="op">(!</span>fout<span class="op">)</span> <span class="op">{</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>         <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">}</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="cf">return</span> <span class="op">(*</span>ss<span class="op">)(</span>fout<span class="op">,</span> t<span class="op">);</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="op">}</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;</span> LoadFromFile<span class="op">(</span><span class="bu">std::</span>string_view filename<span class="op">,</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">(*</span>ls<span class="op">)(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> os<span class="op">))</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="op">{</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="kw">auto</span> fin <span class="op">=</span> <span class="bu">std::</span>ifstream<span class="op">{</span>filename<span class="op">.</span>data<span class="op">()};</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="cf">if</span> <span class="op">(!</span>fin<span class="op">)</span> <span class="op">{</span></span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>         <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="op">}</span></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="cf">return</span> <span class="op">(*</span>ls<span class="op">)(</span>fin<span class="op">);</span></span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="op">}</span></span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilsload_store_row.h">example/deps/file_utils/h/file_utils/load_store_row.h
<a id="SS_23_2_24"></a></h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> <span class="at">const</span><span class="op">&amp;</span> lines<span class="op">);</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;</span> Load_Strings<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">);</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilspath_utils.h">example/deps/file_utils/h/file_utils/path_utils.h
<a id="SS_23_2_25"></a></h3>
<div class="sourceCode" id="cb62"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;map&gt;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">using</span> <span class="dt">Path_t</span> <span class="op">=</span> <span class="bu">std::</span>filesystem::path<span class="op">;</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="bu">std::</span>string ToStringPath<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">);</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">using</span> <span class="dt">Paths_t</span> <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;;</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="dt">Paths_t</span>              NotDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">);</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="bu">std::</span>string          ToStringPaths<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">,</span> <span class="bu">std::</span>string_view sep <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>                                    <span class="bu">std::</span>string_view indent <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">)</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="op">{</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringPaths<span class="op">(</span>paths<span class="op">);</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="op">}</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="co">// first path:  filename</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="co">// second path: pathname</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="kw">using</span> <span class="dt">Filename2Path_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">&gt;;</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="dt">Filename2Path_t</span> GenFilename2Path<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">);</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="co">// first  : package name(directory name)</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="co">// second : srcs assigned to package</span></span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="kw">using</span> <span class="dt">Dirs2Srcs_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;;</span></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="dt">Dirs2Srcs_t</span>          AssginSrcsToDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">);</span></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="bu">std::</span>string          ToStringDirs2Srcs<span class="op">(</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs2srcs<span class="op">);</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs2srcs<span class="op">)</span></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="op">{</span></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDirs2Srcs<span class="op">(</span>dirs2srcs<span class="op">);</span></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">}</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="dt">Path_t</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> path<span class="op">);</span></span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="dt">void</span> RemoveFile<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> filename<span class="op">);</span></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilssrcload_store_row.cpp">example/deps/file_utils/src/load_store_row.cpp
<a id="SS_23_2_26"></a></h3>
<div class="sourceCode" id="cb63"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> <span class="at">const</span><span class="op">&amp;</span> lines<span class="op">)</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="op">{</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> line <span class="op">:</span> lines<span class="op">)</span> <span class="op">{</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>         os <span class="op">&lt;&lt;</span> line<span class="op">;</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">}</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="op">}</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;</span> Load_Strings<span class="op">(</span><span class="bu">std::</span>istream<span class="op">&amp;</span> is<span class="op">)</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="op">{</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="kw">auto</span> content <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{};</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="kw">auto</span> line    <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>         <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         ss <span class="op">&lt;&lt;</span> line <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         content<span class="op">.</span>emplace_back<span class="op">(</span>ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="op">}</span></span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="cf">return</span> content<span class="op">;</span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">}</span></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilssrcpath_utils.cpp">example/deps/file_utils/src/path_utils.cpp
<a id="SS_23_2_27"></a></h3>
<div class="sourceCode" id="cb64"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="bu">std::</span>string ToStringPath<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> path<span class="op">)</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="op">{</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>     <span class="kw">auto</span> pn <span class="op">=</span> path<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="cf">if</span> <span class="op">(</span>pn<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>         pn <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="op">}</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="cf">return</span> pn<span class="op">;</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="op">}</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="bu">std::</span>string ToStringPaths<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">,</span> <span class="bu">std::</span>string_view sep<span class="op">,</span> <span class="bu">std::</span>string_view indent<span class="op">)</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">{</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="kw">auto</span> ss    <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> p <span class="op">:</span> paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>             ss <span class="op">&lt;&lt;</span> sep<span class="op">;</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>         <span class="op">}</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> ToStringPath<span class="op">(</span>p<span class="op">);</span></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="op">}</span></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">}</span></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="bu">std::</span>string ToStringDirs2Srcs<span class="op">(</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs2srcs<span class="op">)</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">{</span></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="kw">auto</span> ss    <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="dt">bool</span><span class="op">{</span><span class="kw">true</span><span class="op">};</span></span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> pair <span class="op">:</span> dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         <span class="cf">if</span> <span class="op">(</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>             first <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>         <span class="op">}</span></span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>             ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         <span class="op">}</span></span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>         ss <span class="op">&lt;&lt;</span> ToStringPath<span class="op">(</span>pair<span class="op">.</span>first<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>         ss <span class="op">&lt;&lt;</span> ToStringPaths<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;    &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="op">}</span></span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="op">}</span></span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="dt">Paths_t</span> NotDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">)</span></span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="op">{</span></span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="bu">std::</span>copy_if<span class="op">(</span>dirs<span class="op">.</span>cbegin<span class="op">(),</span> dirs<span class="op">.</span>cend<span class="op">(),</span> <span class="bu">std::</span>back_inserter<span class="op">(</span>ret<span class="op">),</span></span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>                  <span class="op">[](</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dir<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">!</span><span class="bu">std::</span>filesystem::is_directory<span class="op">(</span>dir<span class="op">);</span> <span class="op">});</span></span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="op">}</span></span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="dt">Filename2Path_t</span> GenFilename2Path<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> paths<span class="op">)</span></span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">{</span></span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Filename2Path_t</span><span class="op">{};</span></span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> p <span class="op">:</span> paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>         ret<span class="op">[</span>p<span class="op">.</span>filename<span class="op">()]</span> <span class="op">=</span> p<span class="op">;</span></span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">}</span></span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="op">}</span></span>
<span id="cb64-75"><a href="#cb64-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb64-76"><a href="#cb64-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb64-77"><a href="#cb64-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> <span class="dt">Path_t</span> <span class="at">const</span> current_dir<span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">};</span></span>
<span id="cb64-78"><a href="#cb64-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb64-79"><a href="#cb64-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="dt">size_t</span> match_count<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> dir<span class="op">,</span> <span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> src<span class="op">)</span></span>
<span id="cb64-80"><a href="#cb64-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="op">{</span></span>
<span id="cb64-81"><a href="#cb64-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="kw">auto</span> <span class="at">const</span> dir_str <span class="op">=</span> dir<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb64-82"><a href="#cb64-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="kw">auto</span> <span class="at">const</span> src_str <span class="op">=</span> dir <span class="op">==</span> current_dir <span class="op">?</span> <span class="st">&quot;./&quot;</span> <span class="op">+</span> src<span class="op">.</span>string<span class="op">()</span> <span class="op">:</span> src<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb64-83"><a href="#cb64-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb64-84"><a href="#cb64-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="cf">if</span> <span class="op">(</span>dir_str<span class="op">.</span>size<span class="op">()</span> <span class="op">&gt;=</span> src_str<span class="op">.</span>size<span class="op">())</span> <span class="op">{</span></span>
<span id="cb64-85"><a href="#cb64-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>         <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb64-86"><a href="#cb64-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="op">}</span></span>
<span id="cb64-87"><a href="#cb64-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb64-88"><a href="#cb64-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="kw">auto</span> count     <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb64-89"><a href="#cb64-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="kw">auto</span> count_max <span class="op">=</span> dir_str<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb64-90"><a href="#cb64-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> </span>
<span id="cb64-91"><a href="#cb64-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     <span class="cf">for</span> <span class="op">(;</span> count <span class="op">&lt;</span> count_max<span class="op">;</span> <span class="op">++</span>count<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-92"><a href="#cb64-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         <span class="cf">if</span> <span class="op">(</span>dir_str<span class="op">[</span>count<span class="op">]</span> <span class="op">!=</span> src_str<span class="op">[</span>count<span class="op">])</span> <span class="op">{</span></span>
<span id="cb64-93"><a href="#cb64-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>             <span class="cf">break</span><span class="op">;</span></span>
<span id="cb64-94"><a href="#cb64-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>         <span class="op">}</span></span>
<span id="cb64-95"><a href="#cb64-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="op">}</span></span>
<span id="cb64-96"><a href="#cb64-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb64-97"><a href="#cb64-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="cf">if</span> <span class="op">(</span>count <span class="op">==</span> count_max <span class="op">&amp;&amp;</span> src_str<span class="op">[</span>count<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-98"><a href="#cb64-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>         <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb64-99"><a href="#cb64-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="op">}</span></span>
<span id="cb64-100"><a href="#cb64-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb64-101"><a href="#cb64-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb64-102"><a href="#cb64-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="op">}</span></span>
<span id="cb64-103"><a href="#cb64-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb64-104"><a href="#cb64-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> <span class="dt">Path_t</span> select_package<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> src<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">)</span></span>
<span id="cb64-105"><a href="#cb64-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="op">{</span></span>
<span id="cb64-106"><a href="#cb64-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="dt">Path_t</span> <span class="at">const</span><span class="op">*</span> best_match<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span></span>
<span id="cb64-107"><a href="#cb64-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="kw">auto</span>          count_max <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb64-108"><a href="#cb64-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb64-109"><a href="#cb64-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-110"><a href="#cb64-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>         <span class="kw">auto</span> count <span class="op">=</span> match_count<span class="op">(</span>dir<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb64-111"><a href="#cb64-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>         <span class="cf">if</span> <span class="op">(</span>count_max <span class="op">&lt;</span> count<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-112"><a href="#cb64-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>             best_match <span class="op">=</span> <span class="op">&amp;</span>dir<span class="op">;</span></span>
<span id="cb64-113"><a href="#cb64-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>             count_max  <span class="op">=</span> count<span class="op">;</span></span>
<span id="cb64-114"><a href="#cb64-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>         <span class="op">}</span></span>
<span id="cb64-115"><a href="#cb64-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="op">}</span></span>
<span id="cb64-116"><a href="#cb64-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb64-117"><a href="#cb64-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="cf">if</span> <span class="op">(</span>best_match <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-118"><a href="#cb64-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>         <span class="cf">return</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;no_package&quot;</span><span class="op">);</span></span>
<span id="cb64-119"><a href="#cb64-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="op">}</span></span>
<span id="cb64-120"><a href="#cb64-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb64-121"><a href="#cb64-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>         <span class="cf">return</span> <span class="op">*</span>best_match<span class="op">;</span></span>
<span id="cb64-122"><a href="#cb64-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="op">}</span></span>
<span id="cb64-123"><a href="#cb64-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> <span class="op">}</span></span>
<span id="cb64-124"><a href="#cb64-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb64-125"><a href="#cb64-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> <span class="dt">Paths_t</span> gen_parent_dirs<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> dir<span class="op">)</span></span>
<span id="cb64-126"><a href="#cb64-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> <span class="op">{</span></span>
<span id="cb64-127"><a href="#cb64-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb64-128"><a href="#cb64-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb64-129"><a href="#cb64-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> p <span class="op">=</span> dir<span class="op">.</span>parent_path<span class="op">(),</span> pp <span class="op">=</span> p<span class="op">.</span>parent_path<span class="op">();</span> <span class="op">!</span>p<span class="op">.</span>empty<span class="op">()</span> <span class="op">&amp;&amp;</span> p <span class="op">!=</span> pp<span class="op">;</span></span>
<span id="cb64-130"><a href="#cb64-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>          p <span class="op">=</span> pp<span class="op">,</span> pp <span class="op">=</span> p<span class="op">.</span>parent_path<span class="op">())</span> <span class="op">{</span></span>
<span id="cb64-131"><a href="#cb64-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         ret<span class="op">.</span>push_front<span class="op">(</span>p<span class="op">);</span></span>
<span id="cb64-132"><a href="#cb64-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>     <span class="op">}</span></span>
<span id="cb64-133"><a href="#cb64-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb64-134"><a href="#cb64-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb64-135"><a href="#cb64-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> <span class="op">}</span></span>
<span id="cb64-136"><a href="#cb64-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb64-137"><a href="#cb64-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> <span class="co">// a/</span></span>
<span id="cb64-138"><a href="#cb64-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="co">//   a0.c</span></span>
<span id="cb64-139"><a href="#cb64-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="co">//   b/</span></span>
<span id="cb64-140"><a href="#cb64-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="co">//     c/</span></span>
<span id="cb64-141"><a href="#cb64-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="co">//       d/</span></span>
<span id="cb64-142"><a href="#cb64-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> <span class="co">//         d.c</span></span>
<span id="cb64-143"><a href="#cb64-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> <span class="co">// のようなファイ構造があった場合、</span></span>
<span id="cb64-144"><a href="#cb64-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> <span class="co">// d2sには a、a/b/c/d が登録され、a/b、a/b/cは登録されていない。</span></span>
<span id="cb64-145"><a href="#cb64-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> <span class="co">// a/b、a/b/cを埋めるのがpad_parent_dirsである。</span></span>
<span id="cb64-146"><a href="#cb64-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span> <span class="dt">void</span> pad_parent_dirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> <span class="dt">Dirs2Srcs_t</span><span class="op">&amp;</span> d2s<span class="op">)</span></span>
<span id="cb64-147"><a href="#cb64-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span> <span class="op">{</span></span>
<span id="cb64-148"><a href="#cb64-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-149"><a href="#cb64-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>         <span class="kw">auto</span> parent_found <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb64-150"><a href="#cb64-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span> </span>
<span id="cb64-151"><a href="#cb64-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> p <span class="op">:</span> gen_parent_dirs<span class="op">(</span>dir<span class="op">))</span> <span class="op">{</span></span>
<span id="cb64-152"><a href="#cb64-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>             <span class="cf">if</span> <span class="op">(!</span>parent_found <span class="op">&amp;&amp;</span> d2s<span class="op">.</span>count<span class="op">(</span>p<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-153"><a href="#cb64-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>                 parent_found <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb64-154"><a href="#cb64-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>             <span class="op">}</span></span>
<span id="cb64-155"><a href="#cb64-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>             <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>parent_found <span class="op">&amp;&amp;</span> d2s<span class="op">.</span>count<span class="op">(</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-156"><a href="#cb64-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                 d2s<span class="op">[</span>p<span class="op">]</span> <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">();</span></span>
<span id="cb64-157"><a href="#cb64-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>             <span class="op">}</span></span>
<span id="cb64-158"><a href="#cb64-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>         <span class="op">}</span></span>
<span id="cb64-159"><a href="#cb64-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="op">}</span></span>
<span id="cb64-160"><a href="#cb64-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> <span class="op">}</span></span>
<span id="cb64-161"><a href="#cb64-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb64-162"><a href="#cb64-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span> </span>
<span id="cb64-163"><a href="#cb64-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> <span class="dt">Dirs2Srcs_t</span> AssginSrcsToDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> dirs<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span><span class="op">&amp;</span> srcs<span class="op">)</span></span>
<span id="cb64-164"><a href="#cb64-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> <span class="op">{</span></span>
<span id="cb64-165"><a href="#cb64-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     <span class="kw">auto</span> ret      <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb64-166"><a href="#cb64-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>     <span class="kw">auto</span> add_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb64-167"><a href="#cb64-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> </span>
<span id="cb64-168"><a href="#cb64-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-169"><a href="#cb64-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="kw">auto</span> dir <span class="op">=</span> select_package<span class="op">(</span>src<span class="op">,</span> dirs<span class="op">);</span></span>
<span id="cb64-170"><a href="#cb64-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb64-171"><a href="#cb64-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="cf">if</span> <span class="op">(</span>ret<span class="op">.</span>count<span class="op">(</span>dir<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-172"><a href="#cb64-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>             ret<span class="op">[</span>dir<span class="op">]</span> <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">();</span></span>
<span id="cb64-173"><a href="#cb64-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>             add_dirs<span class="op">.</span>push_back<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb64-174"><a href="#cb64-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="op">}</span></span>
<span id="cb64-175"><a href="#cb64-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         ret<span class="op">[</span>dir<span class="op">].</span>push_back<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb64-176"><a href="#cb64-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>     <span class="op">}</span></span>
<span id="cb64-177"><a href="#cb64-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> </span>
<span id="cb64-178"><a href="#cb64-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     pad_parent_dirs<span class="op">(</span>add_dirs<span class="op">,</span> ret<span class="op">);</span></span>
<span id="cb64-179"><a href="#cb64-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> </span>
<span id="cb64-180"><a href="#cb64-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb64-181"><a href="#cb64-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> <span class="op">}</span></span>
<span id="cb64-182"><a href="#cb64-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span> </span>
<span id="cb64-183"><a href="#cb64-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span> <span class="dt">Path_t</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> path<span class="op">)</span></span>
<span id="cb64-184"><a href="#cb64-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> <span class="op">{</span></span>
<span id="cb64-185"><a href="#cb64-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     <span class="co">// lexically_normalは&quot;a/../b&quot;を&quot;b&quot;にする</span></span>
<span id="cb64-186"><a href="#cb64-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="co">// 最後の&#39;/&#39;を削除</span></span>
<span id="cb64-187"><a href="#cb64-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="kw">auto</span> path_lex <span class="op">=</span> <span class="dt">Path_t</span><span class="op">(</span>path<span class="op">.</span>string<span class="op">()</span> <span class="op">+</span> <span class="ch">&#39;/&#39;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">();</span></span>
<span id="cb64-188"><a href="#cb64-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>     path_lex<span class="op">.</span>pop_back<span class="op">();</span></span>
<span id="cb64-189"><a href="#cb64-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> </span>
<span id="cb64-190"><a href="#cb64-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>     <span class="cf">if</span> <span class="op">(</span>path_lex<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-191"><a href="#cb64-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>         <span class="cf">return</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">);</span></span>
<span id="cb64-192"><a href="#cb64-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="op">}</span></span>
<span id="cb64-193"><a href="#cb64-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>     <span class="cf">return</span> path_lex<span class="op">;</span></span>
<span id="cb64-194"><a href="#cb64-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> <span class="op">}</span></span>
<span id="cb64-195"><a href="#cb64-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> </span>
<span id="cb64-196"><a href="#cb64-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> <span class="dt">void</span> RemoveFile<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span><span class="op">&amp;</span> filename<span class="op">)</span></span>
<span id="cb64-197"><a href="#cb64-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> <span class="op">{</span></span>
<span id="cb64-198"><a href="#cb64-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>filesystem::exists<span class="op">(</span>filename<span class="op">))</span> <span class="op">{</span></span>
<span id="cb64-199"><a href="#cb64-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>         <span class="bu">std::</span>filesystem::remove<span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb64-200"><a href="#cb64-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>     <span class="op">}</span></span>
<span id="cb64-201"><a href="#cb64-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> <span class="op">}</span></span>
<span id="cb64-202"><a href="#cb64-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilsutload_store_row_ut.cpp">example/deps/file_utils/ut/load_store_row_ut.cpp
<a id="SS_23_2_28"></a></h3>
<div class="sourceCode" id="cb65"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>load_store<span class="op">,</span> Row<span class="op">)</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">{</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="kw">auto</span> <span class="at">const</span> row_exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">};</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">auto</span> <span class="at">const</span> row_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_act&quot;</span><span class="op">};</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     RemoveFile<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="kw">auto</span> row_data0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>LoadFromFile<span class="op">(</span>row_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="co">// row_actはないのでエラーなはず</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     ASSERT_FALSE<span class="op">(</span>row_data0<span class="op">);</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     ASSERT_FALSE<span class="op">(</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="op">*</span>row_data0<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     row_data0 <span class="op">=</span> LoadFromFile<span class="op">(</span>row_exp<span class="op">,</span> Load_Strings<span class="op">);</span></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     ASSERT_TRUE<span class="op">(</span>row_data0<span class="op">);</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     ASSERT_TRUE<span class="op">(</span>StoreToFile<span class="op">(</span>row_act<span class="op">,</span> <span class="op">*</span>row_data0<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="kw">auto</span> row_data1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>LoadFromFile<span class="op">(</span>row_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     ASSERT_TRUE<span class="op">(</span>row_data1<span class="op">);</span></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     ASSERT_EQ<span class="op">(*</span>row_data0<span class="op">,</span> <span class="op">*</span>row_data1<span class="op">);</span></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     RemoveFile<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="op">}</span></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilsutpath_utils_ut.cpp">example/deps/file_utils/ut/path_utils_ut.cpp
<a id="SS_23_2_29"></a></h3>
<div class="sourceCode" id="cb66"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> Logger<span class="op">)</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="op">{</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">auto</span> log_file_org <span class="op">=</span> <span class="st">&quot;ut_data/load_store/logger_org&quot;</span><span class="op">;</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="kw">auto</span> log_file_act <span class="op">=</span> <span class="st">&quot;ut_data/load_store/logger_act&quot;</span><span class="op">;</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     RemoveFile<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     LOGGER_INIT<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     LOGGER<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     LOGGER<span class="op">(</span><span class="st">&quot;xyz&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="kw">auto</span> <span class="at">const</span> dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>                               <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>                               <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>                               <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>                               <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>                               <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     LOGGER<span class="op">(</span>ToStringPaths<span class="op">(</span>dirs<span class="op">));</span></span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     LOGGER<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     Logging<span class="op">::</span>Logger<span class="op">::</span>Inst<span class="op">().</span>Close<span class="op">();</span></span>
<span id="cb66-33"><a href="#cb66-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb66-34"><a href="#cb66-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>LoadFromFile<span class="op">(</span>log_file_org<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb66-35"><a href="#cb66-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     ASSERT_TRUE<span class="op">(</span>exp<span class="op">);</span></span>
<span id="cb66-36"><a href="#cb66-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb66-37"><a href="#cb66-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>LoadFromFile<span class="op">(</span>log_file_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb66-38"><a href="#cb66-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     ASSERT_TRUE<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb66-39"><a href="#cb66-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb66-40"><a href="#cb66-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     ASSERT_EQ<span class="op">(*</span>exp<span class="op">,</span> <span class="op">*</span>act<span class="op">);</span></span>
<span id="cb66-41"><a href="#cb66-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb66-42"><a href="#cb66-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     RemoveFile<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb66-43"><a href="#cb66-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="op">}</span></span>
<span id="cb66-44"><a href="#cb66-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb66-45"><a href="#cb66-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> NotDirs<span class="op">)</span></span>
<span id="cb66-46"><a href="#cb66-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="op">{</span></span>
<span id="cb66-47"><a href="#cb66-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="op">{</span></span>
<span id="cb66-48"><a href="#cb66-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>         <span class="kw">auto</span> <span class="at">const</span> dir_in  <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb66-49"><a href="#cb66-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                                     <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb66-50"><a href="#cb66-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>                                     <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb66-51"><a href="#cb66-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>                                     <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-52"><a href="#cb66-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>                                     <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-53"><a href="#cb66-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>                                     <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-54"><a href="#cb66-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="kw">auto</span> <span class="at">const</span> dir_act <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span>NotDirs<span class="op">(</span>dir_in<span class="op">)};</span></span>
<span id="cb66-55"><a href="#cb66-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb66-56"><a href="#cb66-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> dir_act<span class="op">);</span></span>
<span id="cb66-57"><a href="#cb66-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">}</span></span>
<span id="cb66-58"><a href="#cb66-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="op">{</span></span>
<span id="cb66-59"><a href="#cb66-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         <span class="kw">auto</span> <span class="at">const</span> dir_in  <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb66-60"><a href="#cb66-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>                                     <span class="st">&quot;ut_data/app1/notdir&quot;</span><span class="op">,</span></span>
<span id="cb66-61"><a href="#cb66-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>                                     <span class="st">&quot;ut_data/notdir2&quot;</span><span class="op">,</span></span>
<span id="cb66-62"><a href="#cb66-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>                                     <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-63"><a href="#cb66-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>                                     <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-64"><a href="#cb66-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>                                     <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-65"><a href="#cb66-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         <span class="kw">auto</span> <span class="at">const</span> dir_act <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span>NotDirs<span class="op">(</span>dir_in<span class="op">)};</span></span>
<span id="cb66-66"><a href="#cb66-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="kw">auto</span> <span class="at">const</span> dir_exp <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span></span>
<span id="cb66-67"><a href="#cb66-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>             <span class="st">&quot;ut_data/app1/notdir&quot;</span><span class="op">,</span></span>
<span id="cb66-68"><a href="#cb66-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>             <span class="st">&quot;ut_data/notdir2&quot;</span><span class="op">,</span></span>
<span id="cb66-69"><a href="#cb66-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>         <span class="op">};</span></span>
<span id="cb66-70"><a href="#cb66-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb66-71"><a href="#cb66-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>         ASSERT_EQ<span class="op">(</span>dir_exp<span class="op">,</span> dir_act<span class="op">);</span></span>
<span id="cb66-72"><a href="#cb66-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="op">}</span></span>
<span id="cb66-73"><a href="#cb66-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="op">}</span></span>
<span id="cb66-74"><a href="#cb66-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb66-75"><a href="#cb66-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> NormalizeLexically<span class="op">)</span></span>
<span id="cb66-76"><a href="#cb66-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="op">{</span></span>
<span id="cb66-77"><a href="#cb66-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     <span class="co">// こうなるのでNormalizeLexicallyが必要</span></span>
<span id="cb66-78"><a href="#cb66-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">),</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">));</span></span>
<span id="cb66-79"><a href="#cb66-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     ASSERT_NE<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a/&quot;</span><span class="op">),</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">));</span></span>
<span id="cb66-80"><a href="#cb66-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;a/&quot;</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">());</span></span>
<span id="cb66-81"><a href="#cb66-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a&quot;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">());</span></span>
<span id="cb66-82"><a href="#cb66-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb66-83"><a href="#cb66-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="co">// テストはここから</span></span>
<span id="cb66-84"><a href="#cb66-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb66-85"><a href="#cb66-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;./x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb66-86"><a href="#cb66-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb66-87"><a href="#cb66-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a////&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb66-88"><a href="#cb66-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a/./././&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb66-89"><a href="#cb66-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb66-90"><a href="#cb66-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb66-91"><a href="#cb66-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb66-92"><a href="#cb66-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;./&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb66-93"><a href="#cb66-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb66-94"><a href="#cb66-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> <span class="op">}</span></span>
<span id="cb66-95"><a href="#cb66-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb66-96"><a href="#cb66-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> GenFilename2Path<span class="op">)</span></span>
<span id="cb66-97"><a href="#cb66-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="op">{</span></span>
<span id="cb66-98"><a href="#cb66-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="kw">auto</span> <span class="at">const</span> act_srcs</span>
<span id="cb66-99"><a href="#cb66-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>         <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-100"><a href="#cb66-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">};</span></span>
<span id="cb66-101"><a href="#cb66-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb66-102"><a href="#cb66-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb66-103"><a href="#cb66-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb66-104"><a href="#cb66-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Filename2Path_t</span><span class="op">{</span></span>
<span id="cb66-105"><a href="#cb66-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="op">{</span><span class="st">&quot;a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">},</span>         <span class="op">{</span><span class="st">&quot;a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">},</span></span>
<span id="cb66-106"><a href="#cb66-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>         <span class="op">{</span><span class="st">&quot;a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span></span>
<span id="cb66-107"><a href="#cb66-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         <span class="op">{</span><span class="st">&quot;a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">},</span></span>
<span id="cb66-108"><a href="#cb66-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="op">};</span></span>
<span id="cb66-109"><a href="#cb66-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb66-110"><a href="#cb66-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-111"><a href="#cb66-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="op">}</span></span>
<span id="cb66-112"><a href="#cb66-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb66-113"><a href="#cb66-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> AssginSrcsToDirs<span class="op">)</span></span>
<span id="cb66-114"><a href="#cb66-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">{</span></span>
<span id="cb66-115"><a href="#cb66-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="op">{</span></span>
<span id="cb66-116"><a href="#cb66-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb66-117"><a href="#cb66-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>                                       <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb66-118"><a href="#cb66-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                                       <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb66-119"><a href="#cb66-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-120"><a href="#cb66-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-121"><a href="#cb66-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>                                       <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-122"><a href="#cb66-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> </span>
<span id="cb66-123"><a href="#cb66-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb66-124"><a href="#cb66-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>                                       <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb66-125"><a href="#cb66-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-126"><a href="#cb66-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>                                       <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb66-127"><a href="#cb66-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb66-128"><a href="#cb66-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>                                       <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb66-129"><a href="#cb66-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb66-130"><a href="#cb66-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>                                       <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-131"><a href="#cb66-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>                                       <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb66-132"><a href="#cb66-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-133"><a href="#cb66-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-134"><a href="#cb66-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-135"><a href="#cb66-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-136"><a href="#cb66-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-137"><a href="#cb66-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-138"><a href="#cb66-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-139"><a href="#cb66-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-140"><a href="#cb66-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>                                       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-141"><a href="#cb66-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>                                       <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-142"><a href="#cb66-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>                                       <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb66-143"><a href="#cb66-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb66-144"><a href="#cb66-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>         <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb66-145"><a href="#cb66-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> </span>
<span id="cb66-146"><a href="#cb66-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb66-147"><a href="#cb66-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb66-148"><a href="#cb66-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>              <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-149"><a href="#cb66-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>               <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb66-150"><a href="#cb66-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>               <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">}},</span></span>
<span id="cb66-151"><a href="#cb66-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb66-152"><a href="#cb66-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>              <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-153"><a href="#cb66-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>               <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-154"><a href="#cb66-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-155"><a href="#cb66-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-156"><a href="#cb66-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>              <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-157"><a href="#cb66-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-158"><a href="#cb66-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>              <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-159"><a href="#cb66-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>             <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-160"><a href="#cb66-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>         <span class="op">};</span></span>
<span id="cb66-161"><a href="#cb66-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> </span>
<span id="cb66-162"><a href="#cb66-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-163"><a href="#cb66-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     <span class="op">}</span></span>
<span id="cb66-164"><a href="#cb66-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>     <span class="op">{</span></span>
<span id="cb66-165"><a href="#cb66-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>         <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">};</span></span>
<span id="cb66-166"><a href="#cb66-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;path_utils.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-167"><a href="#cb66-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>                                       <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">};</span></span>
<span id="cb66-168"><a href="#cb66-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> </span>
<span id="cb66-169"><a href="#cb66-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb66-170"><a href="#cb66-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb66-171"><a href="#cb66-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb66-172"><a href="#cb66-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>             <span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;path_utils.cpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-173"><a href="#cb66-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>             <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-174"><a href="#cb66-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="op">};</span></span>
<span id="cb66-175"><a href="#cb66-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> </span>
<span id="cb66-176"><a href="#cb66-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-177"><a href="#cb66-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     <span class="op">}</span></span>
<span id="cb66-178"><a href="#cb66-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span> <span class="op">}</span></span>
<span id="cb66-179"><a href="#cb66-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> </span>
<span id="cb66-180"><a href="#cb66-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> PackageSrcMatcher2<span class="op">)</span></span>
<span id="cb66-181"><a href="#cb66-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> <span class="op">{</span></span>
<span id="cb66-182"><a href="#cb66-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-183"><a href="#cb66-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-184"><a href="#cb66-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb66-185"><a href="#cb66-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb66-186"><a href="#cb66-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>                                   <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb66-187"><a href="#cb66-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-188"><a href="#cb66-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb66-189"><a href="#cb66-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb66-190"><a href="#cb66-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb66-191"><a href="#cb66-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb66-192"><a href="#cb66-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-193"><a href="#cb66-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>                                   <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb66-194"><a href="#cb66-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-195"><a href="#cb66-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-196"><a href="#cb66-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-197"><a href="#cb66-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-198"><a href="#cb66-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-199"><a href="#cb66-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-200"><a href="#cb66-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-201"><a href="#cb66-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-202"><a href="#cb66-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-203"><a href="#cb66-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>                                   <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-204"><a href="#cb66-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>                                   <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb66-205"><a href="#cb66-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span> </span>
<span id="cb66-206"><a href="#cb66-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb66-207"><a href="#cb66-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span> </span>
<span id="cb66-208"><a href="#cb66-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb66-209"><a href="#cb66-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>         <span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb66-210"><a href="#cb66-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-211"><a href="#cb66-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>           <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb66-212"><a href="#cb66-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>           <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb66-213"><a href="#cb66-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-214"><a href="#cb66-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-215"><a href="#cb66-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="op">{}},</span></span>
<span id="cb66-216"><a href="#cb66-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-217"><a href="#cb66-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-218"><a href="#cb66-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-219"><a href="#cb66-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-220"><a href="#cb66-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-221"><a href="#cb66-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>         <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-222"><a href="#cb66-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>     <span class="op">};</span></span>
<span id="cb66-223"><a href="#cb66-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> </span>
<span id="cb66-224"><a href="#cb66-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-225"><a href="#cb66-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span> <span class="op">}</span></span>
<span id="cb66-226"><a href="#cb66-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span> </span>
<span id="cb66-227"><a href="#cb66-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> PackageSrcMatcher3<span class="op">)</span></span>
<span id="cb66-228"><a href="#cb66-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span> <span class="op">{</span></span>
<span id="cb66-229"><a href="#cb66-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs</span>
<span id="cb66-230"><a href="#cb66-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>         <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb66-231"><a href="#cb66-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span> </span>
<span id="cb66-232"><a href="#cb66-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb66-233"><a href="#cb66-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-234"><a href="#cb66-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-235"><a href="#cb66-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-236"><a href="#cb66-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-237"><a href="#cb66-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-238"><a href="#cb66-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-239"><a href="#cb66-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-240"><a href="#cb66-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-241"><a href="#cb66-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb66-242"><a href="#cb66-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>                                   <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-243"><a href="#cb66-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>                                   <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb66-244"><a href="#cb66-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span> </span>
<span id="cb66-245"><a href="#cb66-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb66-246"><a href="#cb66-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span> </span>
<span id="cb66-247"><a href="#cb66-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb66-248"><a href="#cb66-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb66-249"><a href="#cb66-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-250"><a href="#cb66-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb66-251"><a href="#cb66-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-252"><a href="#cb66-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span>         <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb66-253"><a href="#cb66-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span>         <span class="op">{</span><span class="st">&quot;no_package&quot;</span><span class="op">,</span></span>
<span id="cb66-254"><a href="#cb66-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb66-255"><a href="#cb66-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-256"><a href="#cb66-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>           <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb66-257"><a href="#cb66-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span>     <span class="op">};</span></span>
<span id="cb66-258"><a href="#cb66-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span> </span>
<span id="cb66-259"><a href="#cb66-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-260"><a href="#cb66-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span> <span class="op">}</span></span>
<span id="cb66-261"><a href="#cb66-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span> </span>
<span id="cb66-262"><a href="#cb66-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> ToString_Path<span class="op">)</span></span>
<span id="cb66-263"><a href="#cb66-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span> <span class="op">{</span></span>
<span id="cb66-264"><a href="#cb66-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>     <span class="op">{</span></span>
<span id="cb66-265"><a href="#cb66-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span>         <span class="kw">auto</span> <span class="at">const</span> exp_path <span class="op">=</span> <span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">};</span></span>
<span id="cb66-266"><a href="#cb66-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span>         <span class="kw">auto</span> <span class="at">const</span> exp      <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">};</span></span>
<span id="cb66-267"><a href="#cb66-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>         <span class="kw">auto</span> <span class="at">const</span> act      <span class="op">=</span> ToStringPath<span class="op">(</span>exp_path<span class="op">);</span></span>
<span id="cb66-268"><a href="#cb66-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span> </span>
<span id="cb66-269"><a href="#cb66-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-270"><a href="#cb66-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>     <span class="op">}</span></span>
<span id="cb66-271"><a href="#cb66-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span>     <span class="op">{</span></span>
<span id="cb66-272"><a href="#cb66-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>         <span class="kw">auto</span> <span class="at">const</span> exp_path <span class="op">=</span> <span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb66-273"><a href="#cb66-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>         <span class="kw">auto</span> <span class="at">const</span> exp      <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb66-274"><a href="#cb66-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>         <span class="kw">auto</span> <span class="at">const</span> act      <span class="op">=</span> ToStringPath<span class="op">(</span>exp_path<span class="op">);</span></span>
<span id="cb66-275"><a href="#cb66-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span> </span>
<span id="cb66-276"><a href="#cb66-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-277"><a href="#cb66-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>     <span class="op">}</span></span>
<span id="cb66-278"><a href="#cb66-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span> <span class="op">}</span></span>
<span id="cb66-279"><a href="#cb66-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span> </span>
<span id="cb66-280"><a href="#cb66-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> ToString_Paths<span class="op">)</span></span>
<span id="cb66-281"><a href="#cb66-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span> <span class="op">{</span></span>
<span id="cb66-282"><a href="#cb66-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-283"><a href="#cb66-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb66-284"><a href="#cb66-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb66-285"><a href="#cb66-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span> </span>
<span id="cb66-286"><a href="#cb66-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb66-287"><a href="#cb66-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>         <span class="st">&quot;ut_data/app1/a_1_c.c &quot;</span></span>
<span id="cb66-288"><a href="#cb66-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span>         <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp &quot;</span></span>
<span id="cb66-289"><a href="#cb66-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp &quot;</span></span>
<span id="cb66-290"><a href="#cb66-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h &quot;</span></span>
<span id="cb66-291"><a href="#cb66-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>         <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb66-292"><a href="#cb66-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> ToStringPaths<span class="op">(</span>exp_srcs<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">);</span></span>
<span id="cb66-293"><a href="#cb66-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span> </span>
<span id="cb66-294"><a href="#cb66-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb66-295"><a href="#cb66-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span> <span class="op">}</span></span>
<span id="cb66-296"><a href="#cb66-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb66-297"><a href="#cb66-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> <span class="op">}</span>  <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3 id="exampledepslibhlibnstd.h">example/deps/lib/h/lib/nstd.h
<a id="SS_23_2_30"></a></h3>
<div class="sourceCode" id="cb67"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Nstd <span class="op">{</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">,</span> <span class="dt">size_t</span> N<span class="op">&gt;</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">constexpr</span> <span class="dt">size_t</span> ArrayLength<span class="op">(</span>T <span class="at">const</span> <span class="op">(&amp;)[</span>N<span class="op">])</span> <span class="kw">noexcept</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">{</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="cf">return</span> N<span class="op">;</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="op">}</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">void</span> SortUnique<span class="op">(</span><span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> v<span class="op">)</span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="op">{</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="bu">std::</span>sort<span class="op">(</span>v<span class="op">.</span>begin<span class="op">(),</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="kw">auto</span> result <span class="op">=</span> <span class="bu">std::</span>unique<span class="op">(</span>v<span class="op">.</span>begin<span class="op">(),</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     v<span class="op">.</span>erase<span class="op">(</span>result<span class="op">,</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="op">}</span></span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="dt">void</span> SortUnique<span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> v<span class="op">)</span></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">{</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     v<span class="op">.</span>sort<span class="op">();</span></span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     v<span class="op">.</span>unique<span class="op">();</span></span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="op">}</span></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="dt">void</span> Concatenate<span class="op">(</span><span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> v0<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;&amp;&amp;</span> v1<span class="op">)</span></span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="op">{</span></span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> v1_elem <span class="op">:</span> v1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>         v0<span class="op">.</span>insert<span class="op">(</span>v0<span class="op">.</span>end<span class="op">(),</span> <span class="bu">std::</span>move<span class="op">(</span>v1_elem<span class="op">));</span></span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="op">}</span></span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span></span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="dt">void</span> Concatenate<span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> v0<span class="op">,</span> <span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;&amp;&amp;</span> v1<span class="op">)</span></span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="op">{</span></span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     v0<span class="op">.</span>splice<span class="op">(</span>v0<span class="op">.</span>end<span class="op">(),</span> <span class="bu">std::</span>move<span class="op">(</span>v1<span class="op">));</span></span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">}</span></span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> F<span class="op">&gt;</span></span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="kw">class</span> ScopedGuard <span class="op">{</span></span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="kw">explicit</span> ScopedGuard<span class="op">(</span>F<span class="op">&amp;&amp;</span> f<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">:</span> <span class="va">f_</span><span class="op">{</span>f<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="op">~</span>ScopedGuard<span class="op">()</span> <span class="op">{</span> <span class="va">f_</span><span class="op">();</span> <span class="op">}</span></span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     ScopedGuard<span class="op">(</span>ScopedGuard <span class="at">const</span><span class="op">&amp;)</span>            <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb67-50"><a href="#cb67-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     ScopedGuard<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span>ScopedGuard <span class="at">const</span><span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb67-51"><a href="#cb67-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb67-52"><a href="#cb67-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb67-53"><a href="#cb67-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     F <span class="va">f_</span><span class="op">;</span></span>
<span id="cb67-54"><a href="#cb67-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="op">};</span></span>
<span id="cb67-55"><a href="#cb67-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb67-56"><a href="#cb67-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="kw">inline</span> <span class="bu">std::</span>string Replace<span class="op">(</span><span class="bu">std::</span>string in<span class="op">,</span> <span class="bu">std::</span>string_view from<span class="op">,</span> <span class="bu">std::</span>string_view to<span class="op">)</span></span>
<span id="cb67-57"><a href="#cb67-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">{</span></span>
<span id="cb67-58"><a href="#cb67-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">auto</span> pos <span class="op">=</span> in<span class="op">.</span>find<span class="op">(</span>from<span class="op">);</span></span>
<span id="cb67-59"><a href="#cb67-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb67-60"><a href="#cb67-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="cf">while</span> <span class="op">(</span>pos <span class="op">!=</span> <span class="bu">std::</span>string::npos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-61"><a href="#cb67-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         in<span class="op">.</span>replace<span class="op">(</span>pos<span class="op">,</span> from<span class="op">.</span>length<span class="op">(),</span> to<span class="op">);</span></span>
<span id="cb67-62"><a href="#cb67-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>         pos <span class="op">=</span> in<span class="op">.</span>find<span class="op">(</span>from<span class="op">,</span> pos <span class="op">+</span> to<span class="op">.</span>length<span class="op">());</span></span>
<span id="cb67-63"><a href="#cb67-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="op">}</span></span>
<span id="cb67-64"><a href="#cb67-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb67-65"><a href="#cb67-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="cf">return</span> in<span class="op">;</span></span>
<span id="cb67-66"><a href="#cb67-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">}</span></span>
<span id="cb67-67"><a href="#cb67-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb67-68"><a href="#cb67-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="co">//</span></span>
<span id="cb67-69"><a href="#cb67-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> <span class="co">// operator&lt;&lt; for range</span></span>
<span id="cb67-70"><a href="#cb67-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="co">//</span></span>
<span id="cb67-71"><a href="#cb67-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="kw">namespace</span> Inner_ <span class="op">{</span></span>
<span id="cb67-72"><a href="#cb67-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="co">//</span></span>
<span id="cb67-73"><a href="#cb67-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="co">// exists_put_to_as_member</span></span>
<span id="cb67-74"><a href="#cb67-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="co">//</span></span>
<span id="cb67-75"><a href="#cb67-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="bu">std::</span>ostream<span class="op">&amp;&gt;</span></span>
<span id="cb67-76"><a href="#cb67-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="kw">struct</span> exists_put_to_as_member <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{</span></span>
<span id="cb67-77"><a href="#cb67-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> <span class="op">};</span></span>
<span id="cb67-78"><a href="#cb67-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb67-79"><a href="#cb67-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-80"><a href="#cb67-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="kw">struct</span> exists_put_to_as_member<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">decltype</span><span class="op">(</span><span class="bu">std::</span>declval<span class="op">&lt;</span><span class="bu">std::</span>ostream<span class="op">&amp;&gt;().</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span></span>
<span id="cb67-81"><a href="#cb67-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>                                       <span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()))&gt;</span> <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{</span></span>
<span id="cb67-82"><a href="#cb67-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="op">};</span></span>
<span id="cb67-83"><a href="#cb67-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb67-84"><a href="#cb67-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-85"><a href="#cb67-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_as_member_v<span class="op">{</span>exists_put_to_as_member<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb67-86"><a href="#cb67-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb67-87"><a href="#cb67-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> <span class="co">//</span></span>
<span id="cb67-88"><a href="#cb67-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> <span class="co">// exists_put_to_as_non_member</span></span>
<span id="cb67-89"><a href="#cb67-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="co">//</span></span>
<span id="cb67-90"><a href="#cb67-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="bu">std::</span>ostream<span class="op">&amp;&gt;</span></span>
<span id="cb67-91"><a href="#cb67-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> <span class="kw">struct</span> exists_put_to_as_non_member <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{</span></span>
<span id="cb67-92"><a href="#cb67-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> <span class="op">};</span></span>
<span id="cb67-93"><a href="#cb67-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb67-94"><a href="#cb67-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-95"><a href="#cb67-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="kw">struct</span> exists_put_to_as_non_member<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">decltype</span><span class="op">(</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>declval<span class="op">&lt;</span><span class="bu">std::</span>ostream<span class="op">&amp;&gt;(),</span></span>
<span id="cb67-96"><a href="#cb67-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>                                                           <span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()))&gt;</span> <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{</span></span>
<span id="cb67-97"><a href="#cb67-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="op">};</span></span>
<span id="cb67-98"><a href="#cb67-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb67-99"><a href="#cb67-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-100"><a href="#cb67-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_as_non_member_v<span class="op">{</span>exists_put_to_as_non_member<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb67-101"><a href="#cb67-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb67-102"><a href="#cb67-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="co">//</span></span>
<span id="cb67-103"><a href="#cb67-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="co">// exists_put_to_v</span></span>
<span id="cb67-104"><a href="#cb67-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> <span class="co">//</span></span>
<span id="cb67-105"><a href="#cb67-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-106"><a href="#cb67-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_v<span class="op">{</span></span>
<span id="cb67-107"><a href="#cb67-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     Nstd<span class="op">::</span>Inner_<span class="op">::</span>exists_put_to_as_member_v<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">||</span> Nstd<span class="op">::</span>Inner_<span class="op">::</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>T<span class="op">&gt;};</span></span>
<span id="cb67-108"><a href="#cb67-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb67-109"><a href="#cb67-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> <span class="co">//</span></span>
<span id="cb67-110"><a href="#cb67-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> <span class="co">// is_range</span></span>
<span id="cb67-111"><a href="#cb67-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="co">//</span></span>
<span id="cb67-112"><a href="#cb67-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="dt">bool</span><span class="op">&gt;</span></span>
<span id="cb67-113"><a href="#cb67-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="kw">struct</span> is_range <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{</span></span>
<span id="cb67-114"><a href="#cb67-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">};</span></span>
<span id="cb67-115"><a href="#cb67-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> </span>
<span id="cb67-116"><a href="#cb67-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-117"><a href="#cb67-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> <span class="kw">struct</span> is_range<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;!</span><span class="bu">std::</span>is_array_v<span class="op">&lt;</span>T<span class="op">&gt;,</span></span>
<span id="cb67-118"><a href="#cb67-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                                              <span class="kw">decltype</span><span class="op">(</span><span class="bu">std::</span>begin<span class="op">(</span><span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()),</span> <span class="dt">bool</span><span class="op">{})&gt;&gt;</span></span>
<span id="cb67-119"><a href="#cb67-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{</span></span>
<span id="cb67-120"><a href="#cb67-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="op">};</span></span>
<span id="cb67-121"><a href="#cb67-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb67-122"><a href="#cb67-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-123"><a href="#cb67-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> <span class="kw">struct</span> is_range<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;</span><span class="bu">std::</span>is_array_v<span class="op">&lt;</span>T<span class="op">&gt;,</span> <span class="dt">bool</span><span class="op">&gt;&gt;</span> <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{</span></span>
<span id="cb67-124"><a href="#cb67-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> <span class="op">};</span></span>
<span id="cb67-125"><a href="#cb67-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb67-126"><a href="#cb67-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> <span class="co">//</span></span>
<span id="cb67-127"><a href="#cb67-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="co">// is_range_v</span></span>
<span id="cb67-128"><a href="#cb67-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> <span class="co">//</span></span>
<span id="cb67-129"><a href="#cb67-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-130"><a href="#cb67-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> <span class="kw">constexpr</span> <span class="dt">bool</span> is_range_v<span class="op">{</span>is_range<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb67-131"><a href="#cb67-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span> </span>
<span id="cb67-132"><a href="#cb67-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> <span class="op">}</span>  <span class="co">// namespace Inner_</span></span>
<span id="cb67-133"><a href="#cb67-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb67-134"><a href="#cb67-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> <span class="co">//</span></span>
<span id="cb67-135"><a href="#cb67-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> <span class="co">// operator&lt;&lt; for range</span></span>
<span id="cb67-136"><a href="#cb67-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> <span class="co">//</span></span>
<span id="cb67-137"><a href="#cb67-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb67-138"><a href="#cb67-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="kw">auto</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> T <span class="at">const</span><span class="op">&amp;</span> t<span class="op">)</span> <span class="op">-&gt;</span></span>
<span id="cb67-139"><a href="#cb67-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>     <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;</span>Inner_<span class="op">::</span>is_range_v<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>Inner_<span class="op">::</span>exists_put_to_v<span class="op">&lt;</span>T<span class="op">&gt;,</span> <span class="bu">std::</span>ostream<span class="op">&amp;&gt;</span></span>
<span id="cb67-140"><a href="#cb67-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="op">{</span></span>
<span id="cb67-141"><a href="#cb67-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>     <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb67-142"><a href="#cb67-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> </span>
<span id="cb67-143"><a href="#cb67-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> i <span class="op">:</span> t<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-144"><a href="#cb67-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>         <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb67-145"><a href="#cb67-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>             os <span class="op">&lt;&lt;</span> <span class="st">&quot;, &quot;</span><span class="op">;</span></span>
<span id="cb67-146"><a href="#cb67-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="op">}</span></span>
<span id="cb67-147"><a href="#cb67-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>         os <span class="op">&lt;&lt;</span> i<span class="op">;</span></span>
<span id="cb67-148"><a href="#cb67-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="op">}</span></span>
<span id="cb67-149"><a href="#cb67-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> </span>
<span id="cb67-150"><a href="#cb67-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="cf">return</span> os<span class="op">;</span></span>
<span id="cb67-151"><a href="#cb67-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span> <span class="op">}</span></span>
<span id="cb67-152"><a href="#cb67-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="op">}</span>  <span class="co">// namespace Nstd</span></span></code></pre></div>
<h3 id="exampledepslibutnstd_ut.cpp">example/deps/lib/ut/nstd_ut.cpp
<a id="SS_23_2_31"></a></h3>
<div class="sourceCode" id="cb68"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;ostream&gt;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">namespace</span> Nstd <span class="op">{</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> ArrayLength<span class="op">)</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="op">{</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="op">{</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         <span class="dt">char</span> <span class="at">const</span><span class="op">*</span> act<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>         ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> ArrayLength<span class="op">(</span>act<span class="op">));</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="op">}</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="op">{</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>         <span class="bu">std::</span>string <span class="at">const</span> act<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;Ab&quot;</span><span class="op">};</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>         ASSERT_EQ<span class="op">(</span><span class="dv">3</span><span class="op">,</span> ArrayLength<span class="op">(</span>act<span class="op">));</span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="op">}</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="op">}</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> SortUnique<span class="op">)</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="op">{</span></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="op">{</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>         <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         SortUnique<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>         ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">}),</span> act<span class="op">);</span></span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="op">}</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="op">{</span></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>         <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;Ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>         SortUnique<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb68-42"><a href="#cb68-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;Ab&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">}),</span> act<span class="op">);</span></span>
<span id="cb68-43"><a href="#cb68-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="op">}</span></span>
<span id="cb68-44"><a href="#cb68-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb68-45"><a href="#cb68-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb68-46"><a href="#cb68-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> Concatenate<span class="op">)</span></span>
<span id="cb68-47"><a href="#cb68-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="op">{</span></span>
<span id="cb68-48"><a href="#cb68-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="op">{</span></span>
<span id="cb68-49"><a href="#cb68-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>         <span class="kw">auto</span> act0 <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">};</span></span>
<span id="cb68-50"><a href="#cb68-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         <span class="kw">auto</span> act1 <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">};</span></span>
<span id="cb68-51"><a href="#cb68-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb68-52"><a href="#cb68-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         Concatenate<span class="op">(</span>act0<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>act1<span class="op">));</span></span>
<span id="cb68-53"><a href="#cb68-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">}),</span> act0<span class="op">);</span></span>
<span id="cb68-54"><a href="#cb68-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="op">}</span></span>
<span id="cb68-55"><a href="#cb68-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="op">{</span></span>
<span id="cb68-56"><a href="#cb68-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="kw">auto</span> act0 <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">};</span></span>
<span id="cb68-57"><a href="#cb68-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>         <span class="kw">auto</span> act1 <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">};</span></span>
<span id="cb68-58"><a href="#cb68-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb68-59"><a href="#cb68-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         Concatenate<span class="op">(</span>act0<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>act1<span class="op">));</span></span>
<span id="cb68-60"><a href="#cb68-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">}),</span> act0<span class="op">);</span></span>
<span id="cb68-61"><a href="#cb68-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="op">}</span></span>
<span id="cb68-62"><a href="#cb68-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="op">}</span></span>
<span id="cb68-63"><a href="#cb68-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb68-64"><a href="#cb68-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> ScopedGuard<span class="op">)</span></span>
<span id="cb68-65"><a href="#cb68-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="op">{</span></span>
<span id="cb68-66"><a href="#cb68-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="kw">auto</span> s <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;not called&quot;</span><span class="op">};</span></span>
<span id="cb68-67"><a href="#cb68-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb68-68"><a href="#cb68-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="op">{</span></span>
<span id="cb68-69"><a href="#cb68-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>         <span class="kw">auto</span> sg <span class="op">=</span> ScopedGuard<span class="op">{[&amp;</span>s<span class="op">]()</span> <span class="kw">noexcept</span> <span class="op">{</span> s <span class="op">=</span> <span class="st">&quot;called&quot;</span><span class="op">;</span> <span class="op">}};</span></span>
<span id="cb68-70"><a href="#cb68-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>         ASSERT_EQ<span class="op">(</span>s<span class="op">,</span> <span class="st">&quot;not called&quot;</span><span class="op">);</span></span>
<span id="cb68-71"><a href="#cb68-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="op">}</span></span>
<span id="cb68-72"><a href="#cb68-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb68-73"><a href="#cb68-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     ASSERT_EQ<span class="op">(</span>s<span class="op">,</span> <span class="st">&quot;called&quot;</span><span class="op">);</span></span>
<span id="cb68-74"><a href="#cb68-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="op">}</span></span>
<span id="cb68-75"><a href="#cb68-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb68-76"><a href="#cb68-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> Replace<span class="op">)</span></span>
<span id="cb68-77"><a href="#cb68-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> <span class="op">{</span></span>
<span id="cb68-78"><a href="#cb68-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="op">{</span></span>
<span id="cb68-79"><a href="#cb68-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>         <span class="kw">auto</span> in  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb68-80"><a href="#cb68-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">);</span></span>
<span id="cb68-81"><a href="#cb68-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;a/b/c/d&quot;</span><span class="op">);</span></span>
<span id="cb68-82"><a href="#cb68-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">}</span></span>
<span id="cb68-83"><a href="#cb68-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="op">{</span></span>
<span id="cb68-84"><a href="#cb68-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>         <span class="kw">auto</span> in  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb68-85"><a href="#cb68-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>         <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;///////&quot;</span><span class="op">);</span></span>
<span id="cb68-86"><a href="#cb68-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;a///////b///////c///////d&quot;</span><span class="op">);</span></span>
<span id="cb68-87"><a href="#cb68-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="op">}</span></span>
<span id="cb68-88"><a href="#cb68-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="op">{</span></span>
<span id="cb68-89"><a href="#cb68-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         <span class="kw">auto</span> in  <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb68-90"><a href="#cb68-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>         <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb68-91"><a href="#cb68-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;abcd&quot;</span><span class="op">);</span></span>
<span id="cb68-92"><a href="#cb68-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="op">}</span></span>
<span id="cb68-93"><a href="#cb68-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> <span class="op">}</span></span>
<span id="cb68-94"><a href="#cb68-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb68-95"><a href="#cb68-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> TEST<span class="op">(</span>stl_try<span class="op">,</span> exclude<span class="op">)</span></span>
<span id="cb68-96"><a href="#cb68-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> <span class="op">{</span></span>
<span id="cb68-97"><a href="#cb68-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="kw">auto</span>       dirs    <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="st">&quot;A/e&quot;</span><span class="op">,</span> <span class="st">&quot;A/e/f&quot;</span><span class="op">,</span> <span class="st">&quot;B/xxx/ef&quot;</span><span class="op">};</span></span>
<span id="cb68-98"><a href="#cb68-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="kw">auto</span>       exclude <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">.*/e\b.*</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb68-99"><a href="#cb68-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="kw">auto</span> <span class="at">const</span> pattern <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span>exclude<span class="op">};</span></span>
<span id="cb68-100"><a href="#cb68-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb68-101"><a href="#cb68-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     dirs<span class="op">.</span>remove_if<span class="op">([&amp;</span>pattern<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span><span class="op">&amp;</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-102"><a href="#cb68-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>         <span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb68-103"><a href="#cb68-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>         <span class="cf">return</span> <span class="bu">std::</span>regex_match<span class="op">(</span>d<span class="op">,</span> results<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb68-104"><a href="#cb68-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="op">});</span></span>
<span id="cb68-105"><a href="#cb68-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb68-106"><a href="#cb68-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     ASSERT_EQ<span class="op">(</span>dirs<span class="op">,</span> <span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="st">&quot;B/xxx/ef&quot;</span><span class="op">}));</span></span>
<span id="cb68-107"><a href="#cb68-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> <span class="op">}</span></span>
<span id="cb68-108"><a href="#cb68-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb68-109"><a href="#cb68-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb68-110"><a href="#cb68-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> <span class="kw">namespace</span> Inner_ <span class="op">{</span></span>
<span id="cb68-111"><a href="#cb68-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb68-112"><a href="#cb68-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="kw">class</span> test_class_exits_put_to <span class="op">{};</span></span>
<span id="cb68-113"><a href="#cb68-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> </span>
<span id="cb68-114"><a href="#cb68-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream<span class="op">&amp;</span> os<span class="op">,</span> test_class_exits_put_to<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> os<span class="op">;</span> <span class="op">}</span></span>
<span id="cb68-115"><a href="#cb68-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> </span>
<span id="cb68-116"><a href="#cb68-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> <span class="kw">class</span> test_class_not_exits_put_to <span class="op">{};</span></span>
<span id="cb68-117"><a href="#cb68-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> </span>
<span id="cb68-118"><a href="#cb68-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> exists_put_to_as_member<span class="op">)</span></span>
<span id="cb68-119"><a href="#cb68-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> <span class="op">{</span></span>
<span id="cb68-120"><a href="#cb68-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb68-121"><a href="#cb68-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="dt">char</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-122"><a href="#cb68-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb68-123"><a href="#cb68-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb68-124"><a href="#cb68-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;*&gt;);</span></span>
<span id="cb68-125"><a href="#cb68-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-126"><a href="#cb68-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-127"><a href="#cb68-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-128"><a href="#cb68-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>     <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb68-129"><a href="#cb68-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     oss <span class="op">&lt;&lt;</span> test_class_exits_put_to<span class="op">{};</span></span>
<span id="cb68-130"><a href="#cb68-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> <span class="op">}</span></span>
<span id="cb68-131"><a href="#cb68-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span> </span>
<span id="cb68-132"><a href="#cb68-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> TEST<span class="op">(</span>Template<span class="op">,</span> exists_put_to_as_non_member<span class="op">)</span></span>
<span id="cb68-133"><a href="#cb68-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> <span class="op">{</span></span>
<span id="cb68-134"><a href="#cb68-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb68-135"><a href="#cb68-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb68-136"><a href="#cb68-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb68-137"><a href="#cb68-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;*&gt;);</span></span>
<span id="cb68-138"><a href="#cb68-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-139"><a href="#cb68-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-140"><a href="#cb68-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-141"><a href="#cb68-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="op">}</span></span>
<span id="cb68-142"><a href="#cb68-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> </span>
<span id="cb68-143"><a href="#cb68-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> TEST<span class="op">(</span>Template<span class="op">,</span> exists_put_to_v<span class="op">)</span></span>
<span id="cb68-144"><a href="#cb68-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> <span class="op">{</span></span>
<span id="cb68-145"><a href="#cb68-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb68-146"><a href="#cb68-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb68-147"><a href="#cb68-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb68-148"><a href="#cb68-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;*&gt;);</span></span>
<span id="cb68-149"><a href="#cb68-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-150"><a href="#cb68-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb68-151"><a href="#cb68-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-152"><a href="#cb68-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="op">}</span></span>
<span id="cb68-153"><a href="#cb68-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb68-154"><a href="#cb68-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span> TEST<span class="op">(</span>Template<span class="op">,</span> is_range<span class="op">)</span></span>
<span id="cb68-155"><a href="#cb68-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="op">{</span></span>
<span id="cb68-156"><a href="#cb68-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb68-157"><a href="#cb68-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     <span class="kw">static_assert</span><span class="op">(!</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;);</span></span>
<span id="cb68-158"><a href="#cb68-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>     <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span> <span class="at">const</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-159"><a href="#cb68-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb68-160"><a href="#cb68-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> <span class="op">}</span></span>
<span id="cb68-161"><a href="#cb68-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb68-162"><a href="#cb68-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span> <span class="op">}</span>  <span class="co">// namespace Inner_</span></span>
<span id="cb68-163"><a href="#cb68-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> </span>
<span id="cb68-164"><a href="#cb68-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb68-165"><a href="#cb68-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> TEST<span class="op">(</span>Template<span class="op">,</span> PutTo<span class="op">)</span></span>
<span id="cb68-166"><a href="#cb68-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> <span class="op">{</span></span>
<span id="cb68-167"><a href="#cb68-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>     <span class="op">{</span></span>
<span id="cb68-168"><a href="#cb68-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>         <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb68-169"><a href="#cb68-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="dt">char</span> c<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;c3&quot;</span><span class="op">;</span></span>
<span id="cb68-170"><a href="#cb68-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb68-171"><a href="#cb68-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         oss <span class="op">&lt;&lt;</span> c<span class="op">;</span></span>
<span id="cb68-172"><a href="#cb68-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;c3&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb68-173"><a href="#cb68-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     <span class="op">}</span></span>
<span id="cb68-174"><a href="#cb68-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     <span class="op">{</span></span>
<span id="cb68-175"><a href="#cb68-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb68-176"><a href="#cb68-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         <span class="kw">auto</span> str <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;1&quot;</span><span class="op">,</span> <span class="st">&quot;2&quot;</span><span class="op">,</span> <span class="st">&quot;3&quot;</span><span class="op">};</span></span>
<span id="cb68-177"><a href="#cb68-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> </span>
<span id="cb68-178"><a href="#cb68-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>         oss <span class="op">&lt;&lt;</span> str<span class="op">;</span></span>
<span id="cb68-179"><a href="#cb68-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;1, 2, 3&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb68-180"><a href="#cb68-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     <span class="op">}</span></span>
<span id="cb68-181"><a href="#cb68-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     <span class="op">{</span></span>
<span id="cb68-182"><a href="#cb68-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>         <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb68-183"><a href="#cb68-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         <span class="kw">auto</span> p   <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;1&quot;</span><span class="op">,</span> <span class="st">&quot;2&quot;</span><span class="op">,</span> <span class="st">&quot;3&quot;</span><span class="op">};</span></span>
<span id="cb68-184"><a href="#cb68-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb68-185"><a href="#cb68-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>         oss <span class="op">&lt;&lt;</span> p<span class="op">;</span></span>
<span id="cb68-186"><a href="#cb68-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">3</span><span class="sc">\&quot;</span><span class="st">&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb68-187"><a href="#cb68-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="op">}</span></span>
<span id="cb68-188"><a href="#cb68-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> <span class="op">}</span></span>
<span id="cb68-189"><a href="#cb68-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb68-190"><a href="#cb68-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> <span class="op">}</span>  <span class="co">// namespace Nstd</span></span></code></pre></div>
<h3
id="exampledepslogginghlogginglogger.h">example/deps/logging/h/logging/logger.h
<a id="SS_23_2_32"></a></h3>
<div class="sourceCode" id="cb69"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &lt;string_view&gt;</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">namespace</span> Logging <span class="op">{</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="kw">class</span> Logger <span class="op">{</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="at">static</span> Logger<span class="op">&amp;</span> Inst<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename <span class="op">=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="dt">void</span> Set<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename<span class="op">,</span> <span class="dt">uint32_t</span> line_no<span class="op">,</span> HEAD <span class="at">const</span><span class="op">&amp;</span> head<span class="op">,</span> TAIL<span class="op">...</span> tails<span class="op">)</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     <span class="op">{</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>         <span class="kw">auto</span>   path     <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span>filename<span class="op">};</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>         <span class="dt">size_t</span> npos     <span class="op">=</span> path<span class="op">.</span>find_last_of<span class="op">(</span><span class="ch">&#39;/&#39;</span><span class="op">);</span></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>         <span class="kw">auto</span>   basename <span class="op">=</span> <span class="op">(</span>npos <span class="op">!=</span> <span class="bu">std::</span>string_view::npos<span class="op">)</span> <span class="op">?</span> path<span class="op">.</span>substr<span class="op">(</span>npos <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> path<span class="op">;</span></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>         <span class="va">os_</span><span class="op">.</span>width<span class="op">(</span><span class="dv">12</span><span class="op">);</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>         <span class="va">os_</span> <span class="op">&lt;&lt;</span> basename <span class="op">&lt;&lt;</span> <span class="st">&quot;:&quot;</span><span class="op">;</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         <span class="va">os_</span><span class="op">.</span>width<span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         <span class="va">os_</span> <span class="op">&lt;&lt;</span> line_no<span class="op">;</span></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>         set_inner<span class="op">(</span>head<span class="op">,</span> tails<span class="op">...);</span></span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">}</span></span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="dt">void</span> Close<span class="op">();</span></span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     Logger<span class="op">(</span>Logger <span class="at">const</span><span class="op">&amp;)</span>            <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     Logger<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span>Logger <span class="at">const</span><span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="dt">void</span> set_inner<span class="op">()</span> <span class="op">{</span> <span class="va">os_</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> <span class="op">}</span></span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="dt">void</span> set_inner<span class="op">(</span>HEAD <span class="at">const</span><span class="op">&amp;</span> head<span class="op">,</span> TAIL<span class="op">...</span> tails<span class="op">)</span></span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">{</span></span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         <span class="kw">using</span> Nstd<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>         <span class="va">os_</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;:&quot;</span> <span class="op">&lt;&lt;</span> head<span class="op">;</span></span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>         set_inner<span class="op">(</span>tails<span class="op">...);</span></span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="op">}</span></span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="dt">void</span> set_inner<span class="op">(</span><span class="dt">char</span> sep<span class="op">,</span> HEAD <span class="at">const</span><span class="op">&amp;</span> head<span class="op">,</span> TAIL<span class="op">...</span> tails<span class="op">)</span></span>
<span id="cb69-53"><a href="#cb69-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="op">{</span></span>
<span id="cb69-54"><a href="#cb69-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="kw">using</span> Nstd<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb69-55"><a href="#cb69-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         <span class="va">os_</span> <span class="op">&lt;&lt;</span> sep <span class="op">&lt;&lt;</span> head<span class="op">;</span></span>
<span id="cb69-56"><a href="#cb69-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         set_inner<span class="op">(</span>tails<span class="op">...);</span></span>
<span id="cb69-57"><a href="#cb69-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">}</span></span>
<span id="cb69-58"><a href="#cb69-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb69-59"><a href="#cb69-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb69-60"><a href="#cb69-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="kw">explicit</span> Logger<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename<span class="op">);</span></span>
<span id="cb69-61"><a href="#cb69-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb69-62"><a href="#cb69-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="bu">std::</span>ofstream <span class="va">ofs_</span><span class="op">{};</span></span>
<span id="cb69-63"><a href="#cb69-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="bu">std::</span>ostream<span class="op">&amp;</span> <span class="va">os_</span><span class="op">;</span></span>
<span id="cb69-64"><a href="#cb69-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb69-65"><a href="#cb69-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb69-66"><a href="#cb69-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">};</span></span>
<span id="cb69-67"><a href="#cb69-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> <span class="op">}</span>  <span class="co">// namespace Logging</span></span>
<span id="cb69-68"><a href="#cb69-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb69-69"><a href="#cb69-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> <span class="er">#define LOGGER_INIT(filename) Logging::Logger::Inst(filename)</span></span>
<span id="cb69-70"><a href="#cb69-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="er">#define LOGGER(...) Logging::Logger::Inst().Set(__FILE__, __LINE__, __VA_ARGS__)</span></span>
<span id="cb69-71"><a href="#cb69-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h3
id="exampledepsloggingsrclogger.cpp">example/deps/logging/src/logger.cpp
<a id="SS_23_2_33"></a></h3>
<div class="sourceCode" id="cb70"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="kw">class</span> null_ostream <span class="op">:</span> <span class="kw">private</span> <span class="bu">std::</span>streambuf<span class="op">,</span> <span class="kw">public</span> <span class="bu">std::</span>ostream <span class="op">{</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span>     <span class="at">static</span> null_ostream<span class="op">&amp;</span> Inst<span class="op">()</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span>     <span class="op">{</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span>         <span class="at">static</span> null_ostream inst<span class="op">;</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span>         <span class="cf">return</span> inst<span class="op">;</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>     <span class="op">}</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">protected</span><span class="op">:</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="kw">virtual</span> <span class="dt">int</span> overflow<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="op">{</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>         setp<span class="op">(</span><span class="va">buf_</span><span class="op">,</span> <span class="va">buf_</span> <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="va">buf_</span><span class="op">));</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>         <span class="cf">return</span> <span class="op">(</span>c <span class="op">==</span> eof<span class="op">()</span> <span class="op">?</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span> <span class="op">:</span> c<span class="op">);</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="op">}</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     null_ostream<span class="op">()</span> <span class="op">:</span> <span class="bu">std::</span>ostream<span class="op">{</span><span class="kw">this</span><span class="op">}</span> <span class="op">{}</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="dt">char</span> <span class="va">buf_</span><span class="op">[</span><span class="dv">128</span><span class="op">];</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="op">};</span></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="bu">std::</span>ostream<span class="op">&amp;</span> init_os<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename<span class="op">,</span> <span class="bu">std::</span>ofstream<span class="op">&amp;</span> ofs<span class="op">)</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">{</span></span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="cf">if</span> <span class="op">(</span>filename <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>         <span class="cf">return</span> <span class="bu">std::</span>cout<span class="op">;</span></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="op">}</span></span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>string<span class="op">{</span>filename<span class="op">}.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>             <span class="cf">return</span> null_ostream<span class="op">::</span>Inst<span class="op">();</span></span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>         <span class="op">}</span></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>             ofs<span class="op">.</span>open<span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>             <span class="cf">return</span> ofs<span class="op">;</span></span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>         <span class="op">}</span></span>
<span id="cb70-37"><a href="#cb70-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="op">}</span></span>
<span id="cb70-38"><a href="#cb70-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">}</span></span>
<span id="cb70-39"><a href="#cb70-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb70-40"><a href="#cb70-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb70-41"><a href="#cb70-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">namespace</span> Logging <span class="op">{</span></span>
<span id="cb70-42"><a href="#cb70-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> Logger<span class="op">::</span>Logger<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename<span class="op">)</span> <span class="op">:</span> <span class="va">os_</span><span class="op">{</span>init_os<span class="op">(</span>filename<span class="op">,</span> <span class="va">ofs_</span><span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb70-43"><a href="#cb70-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb70-44"><a href="#cb70-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> Logger<span class="op">&amp;</span> Logger<span class="op">::</span>Inst<span class="op">(</span><span class="dt">char</span> <span class="at">const</span><span class="op">*</span> filename<span class="op">)</span></span>
<span id="cb70-45"><a href="#cb70-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="op">{</span></span>
<span id="cb70-46"><a href="#cb70-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="at">static</span> <span class="kw">auto</span> inst <span class="op">=</span> Logger<span class="op">{</span>filename<span class="op">};</span></span>
<span id="cb70-47"><a href="#cb70-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb70-48"><a href="#cb70-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="cf">return</span> inst<span class="op">;</span></span>
<span id="cb70-49"><a href="#cb70-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span></span>
<span id="cb70-50"><a href="#cb70-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb70-51"><a href="#cb70-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="dt">void</span> Logger<span class="op">::</span>Close<span class="op">()</span></span>
<span id="cb70-52"><a href="#cb70-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="op">{</span></span>
<span id="cb70-53"><a href="#cb70-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="cf">if</span> <span class="op">(&amp;</span><span class="bu">std::</span>cout <span class="op">!=</span> <span class="op">&amp;</span><span class="va">os_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-54"><a href="#cb70-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="va">ofs_</span><span class="op">.</span>close<span class="op">();</span></span>
<span id="cb70-55"><a href="#cb70-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="op">}</span></span>
<span id="cb70-56"><a href="#cb70-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="op">}</span></span>
<span id="cb70-57"><a href="#cb70-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">}</span>  <span class="co">// namespace Logging</span></span></code></pre></div>
<h3
id="exampledepsloggingutlogger_ut.cpp">example/deps/logging/ut/logger_ut.cpp
<a id="SS_23_2_34"></a></h3>
<div class="sourceCode" id="cb71"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>log<span class="op">,</span> Logger<span class="op">)</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="op">{</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="co">// loggingのテストは他のライブラリで行う。</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     <span class="co">// ここではコンパイルできることの確認のみ。</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     LOGGER_INIT<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     LOGGER<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     LOGGER<span class="op">(</span><span class="st">&quot;xyz&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">auto</span> file <span class="op">=</span> <span class="bu">std::</span>filesystem::path<span class="op">{</span><span class="st">&quot;hehe&quot;</span><span class="op">};</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     LOGGER<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">}</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="op">}</span>  <span class="co">// namespace</span></span></code></pre></div>
<h3
id="exampledynamic_memory_allocationmalloc_ut.cpp">example/dynamic_memory_allocation/malloc_ut.cpp
<a id="SS_23_2_35"></a></h3>
<div class="sourceCode" id="cb72"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;sys/unistd.h&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;cstdint&gt;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;mutex&gt;</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;dynamic_memory_allocation_ut.h&quot;</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="er">#include &quot;spin_lock.h&quot;</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="er">#include &quot;utils.h&quot;</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="at">extern</span> <span class="st">&quot;C&quot;</span> <span class="dt">void</span><span class="op">*</span> sbrk<span class="op">(</span><span class="dt">ptrdiff_t</span> __incr<span class="op">);</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="co">// @@@ sample end</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">namespace</span> MallocFree <span class="op">{</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="co">// @@@ sample begin 1:0</span></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="kw">struct</span> <span class="dt">header_t</span> <span class="op">{</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="dt">header_t</span><span class="op">*</span> next<span class="op">;</span></span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="dt">size_t</span>    n_nuits<span class="op">;</span>  <span class="co">// header_tが何個あるか</span></span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="op">};</span></span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="dt">header_t</span><span class="op">*</span>        header<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span></span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> SpinLock         spin_lock<span class="op">{};</span></span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="kw">constexpr</span> <span class="dt">size_t</span> unit_size<span class="op">{</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">header_t</span><span class="op">)};</span></span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="kw">inline</span> <span class="dt">bool</span> sprit<span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> header<span class="op">,</span> <span class="dt">size_t</span> n_nuits<span class="op">,</span> <span class="dt">header_t</span><span class="op">*&amp;</span> next<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">{</span></span>
<span id="cb72-34"><a href="#cb72-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb72-35"><a href="#cb72-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="ot">assert</span><span class="op">(</span>n_nuits <span class="op">&gt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// ヘッダとバッファなので最低でも2</span></span>
<span id="cb72-36"><a href="#cb72-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb72-37"><a href="#cb72-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     next <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb72-38"><a href="#cb72-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb72-39"><a href="#cb72-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="cf">if</span> <span class="op">(</span>header<span class="op">-&gt;</span>n_nuits <span class="op">==</span> n_nuits <span class="op">||</span> header<span class="op">-&gt;</span>n_nuits <span class="op">==</span> n_nuits <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-40"><a href="#cb72-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>         next <span class="op">=</span> header<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb72-41"><a href="#cb72-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb72-42"><a href="#cb72-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="op">}</span></span>
<span id="cb72-43"><a href="#cb72-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>header<span class="op">-&gt;</span>n_nuits <span class="op">&gt;</span> n_nuits<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-44"><a href="#cb72-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>         next            <span class="op">=</span> header <span class="op">+</span> n_nuits<span class="op">;</span></span>
<span id="cb72-45"><a href="#cb72-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         next<span class="op">-&gt;</span>n_nuits   <span class="op">=</span> header<span class="op">-&gt;</span>n_nuits <span class="op">-</span> n_nuits<span class="op">;</span></span>
<span id="cb72-46"><a href="#cb72-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         next<span class="op">-&gt;</span>next      <span class="op">=</span> header<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb72-47"><a href="#cb72-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>         header<span class="op">-&gt;</span>n_nuits <span class="op">=</span> n_nuits<span class="op">;</span></span>
<span id="cb72-48"><a href="#cb72-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb72-49"><a href="#cb72-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="op">}</span></span>
<span id="cb72-50"><a href="#cb72-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb72-51"><a href="#cb72-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb72-52"><a href="#cb72-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb72-53"><a href="#cb72-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="op">}</span></span>
<span id="cb72-54"><a href="#cb72-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb72-55"><a href="#cb72-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="kw">inline</span> <span class="dt">void</span> concat<span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> front<span class="op">,</span> <span class="dt">header_t</span><span class="op">*</span> rear<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb72-56"><a href="#cb72-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="op">{</span></span>
<span id="cb72-57"><a href="#cb72-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb72-58"><a href="#cb72-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="cf">if</span> <span class="op">(</span>front <span class="op">+</span> front<span class="op">-&gt;</span>n_nuits <span class="op">==</span> rear<span class="op">)</span> <span class="op">{</span>  <span class="co">// 1枚のメモリになる</span></span>
<span id="cb72-59"><a href="#cb72-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>         front<span class="op">-&gt;</span>n_nuits <span class="op">+=</span> rear<span class="op">-&gt;</span>n_nuits<span class="op">;</span></span>
<span id="cb72-60"><a href="#cb72-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         front<span class="op">-&gt;</span>next <span class="op">=</span> rear<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb72-61"><a href="#cb72-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="op">}</span></span>
<span id="cb72-62"><a href="#cb72-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb72-63"><a href="#cb72-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>         front<span class="op">-&gt;</span>next <span class="op">=</span> rear<span class="op">;</span></span>
<span id="cb72-64"><a href="#cb72-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="op">}</span></span>
<span id="cb72-65"><a href="#cb72-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb72-66"><a href="#cb72-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">}</span></span>
<span id="cb72-67"><a href="#cb72-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb72-68"><a href="#cb72-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="dt">header_t</span><span class="op">*</span> set_back<span class="op">(</span><span class="dt">void</span><span class="op">*</span> mem<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;(</span>mem<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb72-69"><a href="#cb72-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb72-70"><a href="#cb72-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="kw">static_assert</span><span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">header_t</span><span class="op">)</span> <span class="op">==</span> <span class="kw">alignof</span><span class="op">(</span><span class="bu">std::</span>max_align_t<span class="op">));</span></span>
<span id="cb72-71"><a href="#cb72-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb72-72"><a href="#cb72-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="dt">void</span><span class="op">*</span> malloc_inner<span class="op">(</span><span class="dt">size_t</span> size<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb72-73"><a href="#cb72-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="op">{</span></span>
<span id="cb72-74"><a href="#cb72-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb72-75"><a href="#cb72-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="co">// size分のメモリとヘッダ</span></span>
<span id="cb72-76"><a href="#cb72-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">auto</span> n_nuits <span class="op">=</span> <span class="op">(</span>Roundup<span class="op">(</span>unit_size<span class="op">,</span> size<span class="op">)</span> <span class="op">/</span> unit_size<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb72-77"><a href="#cb72-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     <span class="kw">auto</span> lock    <span class="op">=</span> <span class="bu">std::</span>lock_guard<span class="op">{</span>spin_lock<span class="op">};</span></span>
<span id="cb72-78"><a href="#cb72-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb72-79"><a href="#cb72-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="kw">auto</span> curr <span class="op">=</span> header<span class="op">;</span></span>
<span id="cb72-80"><a href="#cb72-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="cf">for</span> <span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> prev <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span> curr <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">;</span> prev <span class="op">=</span> curr<span class="op">,</span> curr <span class="op">=</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-81"><a href="#cb72-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         <span class="dt">header_t</span><span class="op">*</span> next<span class="op">;</span></span>
<span id="cb72-82"><a href="#cb72-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb72-83"><a href="#cb72-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>         <span class="cf">if</span> <span class="op">(!</span>sprit<span class="op">(</span>curr<span class="op">,</span> n_nuits<span class="op">,</span> next<span class="op">))</span> <span class="op">{</span></span>
<span id="cb72-84"><a href="#cb72-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>             <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb72-85"><a href="#cb72-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>         <span class="op">}</span></span>
<span id="cb72-86"><a href="#cb72-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb72-87"><a href="#cb72-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>         <span class="cf">if</span> <span class="op">(</span>prev <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-88"><a href="#cb72-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>             header <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb72-89"><a href="#cb72-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         <span class="op">}</span></span>
<span id="cb72-90"><a href="#cb72-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>         <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb72-91"><a href="#cb72-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>             prev<span class="op">-&gt;</span>next <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb72-92"><a href="#cb72-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         <span class="op">}</span></span>
<span id="cb72-93"><a href="#cb72-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         <span class="cf">break</span><span class="op">;</span></span>
<span id="cb72-94"><a href="#cb72-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="op">}</span></span>
<span id="cb72-95"><a href="#cb72-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb72-96"><a href="#cb72-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="cf">if</span> <span class="op">(</span>curr <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-97"><a href="#cb72-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>         <span class="op">++</span>curr<span class="op">;</span></span>
<span id="cb72-98"><a href="#cb72-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="op">}</span></span>
<span id="cb72-99"><a href="#cb72-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> </span>
<span id="cb72-100"><a href="#cb72-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="cf">return</span> curr<span class="op">;</span></span>
<span id="cb72-101"><a href="#cb72-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb72-102"><a href="#cb72-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="op">}</span></span>
<span id="cb72-103"><a href="#cb72-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb72-104"><a href="#cb72-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> <span class="co">// @@@ sample end</span></span>
<span id="cb72-105"><a href="#cb72-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="co">// @@@ sample begin 2:0</span></span>
<span id="cb72-106"><a href="#cb72-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb72-107"><a href="#cb72-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> <span class="dt">void</span> free<span class="op">(</span><span class="dt">void</span><span class="op">*</span> mem<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb72-108"><a href="#cb72-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">{</span></span>
<span id="cb72-109"><a href="#cb72-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="dt">header_t</span><span class="op">*</span> mem_to_free <span class="op">=</span> set_back<span class="op">(</span>mem<span class="op">);</span></span>
<span id="cb72-110"><a href="#cb72-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb72-111"><a href="#cb72-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>     mem_to_free<span class="op">-&gt;</span>next <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb72-112"><a href="#cb72-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb72-113"><a href="#cb72-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="kw">auto</span> lock <span class="op">=</span> <span class="bu">std::</span>lock_guard<span class="op">{</span>spin_lock<span class="op">};</span></span>
<span id="cb72-114"><a href="#cb72-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb72-115"><a href="#cb72-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="cf">if</span> <span class="op">(</span>header <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-116"><a href="#cb72-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         header <span class="op">=</span> mem_to_free<span class="op">;</span></span>
<span id="cb72-117"><a href="#cb72-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>         <span class="cf">return</span><span class="op">;</span></span>
<span id="cb72-118"><a href="#cb72-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>     <span class="op">}</span></span>
<span id="cb72-119"><a href="#cb72-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb72-120"><a href="#cb72-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     <span class="co">// @@@ sample begin 2:1</span></span>
<span id="cb72-121"><a href="#cb72-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb72-122"><a href="#cb72-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     <span class="cf">if</span> <span class="op">(</span>mem_to_free <span class="op">&lt;</span> header<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-123"><a href="#cb72-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>         concat<span class="op">(</span>mem_to_free<span class="op">,</span> header<span class="op">);</span></span>
<span id="cb72-124"><a href="#cb72-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>         header <span class="op">=</span> mem_to_free<span class="op">;</span></span>
<span id="cb72-125"><a href="#cb72-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>         <span class="cf">return</span><span class="op">;</span></span>
<span id="cb72-126"><a href="#cb72-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="op">}</span></span>
<span id="cb72-127"><a href="#cb72-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> </span>
<span id="cb72-128"><a href="#cb72-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>     <span class="kw">auto</span> curr <span class="op">=</span> header<span class="op">;</span></span>
<span id="cb72-129"><a href="#cb72-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="cf">for</span> <span class="op">(;</span> curr<span class="op">-&gt;</span>next <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">;</span> curr <span class="op">=</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-130"><a href="#cb72-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         <span class="cf">if</span> <span class="op">(</span>mem_to_free <span class="op">&lt;</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span>  <span class="co">// 常に curr &lt; mem_to_free</span></span>
<span id="cb72-131"><a href="#cb72-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>             concat<span class="op">(</span>mem_to_free<span class="op">,</span> curr<span class="op">-&gt;</span>next<span class="op">);</span></span>
<span id="cb72-132"><a href="#cb72-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>             concat<span class="op">(</span>curr<span class="op">,</span> mem_to_free<span class="op">);</span></span>
<span id="cb72-133"><a href="#cb72-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>             <span class="cf">return</span><span class="op">;</span></span>
<span id="cb72-134"><a href="#cb72-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>         <span class="op">}</span></span>
<span id="cb72-135"><a href="#cb72-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="op">}</span></span>
<span id="cb72-136"><a href="#cb72-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb72-137"><a href="#cb72-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>     concat<span class="op">(</span>curr<span class="op">,</span> mem_to_free<span class="op">);</span></span>
<span id="cb72-138"><a href="#cb72-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb72-139"><a href="#cb72-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>     <span class="co">// @@@ sample begin 2:2</span></span>
<span id="cb72-140"><a href="#cb72-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="op">}</span></span>
<span id="cb72-141"><a href="#cb72-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="co">// @@@ sample end</span></span>
<span id="cb72-142"><a href="#cb72-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> <span class="co">// @@@ sample begin 3:0</span></span>
<span id="cb72-143"><a href="#cb72-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb72-144"><a href="#cb72-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> <span class="dt">void</span><span class="op">*</span> malloc<span class="op">(</span><span class="dt">size_t</span> size<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb72-145"><a href="#cb72-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> <span class="op">{</span></span>
<span id="cb72-146"><a href="#cb72-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="dt">void</span><span class="op">*</span> mem <span class="op">=</span> malloc_inner<span class="op">(</span>size<span class="op">);</span></span>
<span id="cb72-147"><a href="#cb72-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb72-148"><a href="#cb72-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="co">// @@@ sample begin 3:1</span></span>
<span id="cb72-149"><a href="#cb72-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> </span>
<span id="cb72-150"><a href="#cb72-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="cf">if</span> <span class="op">(</span>mem <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-151"><a href="#cb72-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         <span class="kw">auto</span> <span class="at">const</span> add_size <span class="op">=</span> Roundup<span class="op">(</span>unit_size<span class="op">,</span> <span class="dv">1024</span> <span class="op">*</span> <span class="dv">1024</span> <span class="op">+</span> size<span class="op">);</span>  <span class="co">// 1MB追加</span></span>
<span id="cb72-152"><a href="#cb72-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> </span>
<span id="cb72-153"><a href="#cb72-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>         <span class="dt">header_t</span><span class="op">*</span> add <span class="op">=</span> <span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;(</span>sbrk<span class="op">(</span>add_size<span class="op">));</span></span>
<span id="cb72-154"><a href="#cb72-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>         add<span class="op">-&gt;</span>n_nuits  <span class="op">=</span> add_size <span class="op">/</span> unit_size<span class="op">;</span></span>
<span id="cb72-155"><a href="#cb72-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>         free<span class="op">(++</span>add<span class="op">);</span></span>
<span id="cb72-156"><a href="#cb72-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>         mem <span class="op">=</span> malloc_inner<span class="op">(</span>size<span class="op">);</span></span>
<span id="cb72-157"><a href="#cb72-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     <span class="op">}</span></span>
<span id="cb72-158"><a href="#cb72-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb72-159"><a href="#cb72-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="co">// @@@ sample begin 3:2</span></span>
<span id="cb72-160"><a href="#cb72-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb72-161"><a href="#cb72-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="cf">return</span> mem<span class="op">;</span></span>
<span id="cb72-162"><a href="#cb72-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span> <span class="op">}</span></span>
<span id="cb72-163"><a href="#cb72-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> <span class="co">// @@@ sample end</span></span>
<span id="cb72-164"><a href="#cb72-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb72-165"><a href="#cb72-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb72-166"><a href="#cb72-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> TEST<span class="op">(</span>NewDelete_Opt<span class="op">,</span> malloc<span class="op">)</span></span>
<span id="cb72-167"><a href="#cb72-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> <span class="op">{</span></span>
<span id="cb72-168"><a href="#cb72-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="op">{</span></span>
<span id="cb72-169"><a href="#cb72-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         <span class="dt">void</span><span class="op">*</span> mem <span class="op">=</span> malloc<span class="op">(</span><span class="dv">1024</span><span class="op">);</span></span>
<span id="cb72-170"><a href="#cb72-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb72-171"><a href="#cb72-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> mem<span class="op">);</span></span>
<span id="cb72-172"><a href="#cb72-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         free<span class="op">(</span>mem<span class="op">);</span></span>
<span id="cb72-173"><a href="#cb72-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb72-174"><a href="#cb72-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="dt">void</span><span class="op">*</span> ints<span class="op">[</span><span class="dv">8</span><span class="op">]{};</span></span>
<span id="cb72-175"><a href="#cb72-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> </span>
<span id="cb72-176"><a href="#cb72-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         <span class="kw">constexpr</span> <span class="kw">auto</span> n_nuits <span class="op">=</span> Roundup<span class="op">(</span>unit_size<span class="op">,</span> unit_size <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">))</span> <span class="op">/</span> unit_size<span class="op">;</span></span>
<span id="cb72-177"><a href="#cb72-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> </span>
<span id="cb72-178"><a href="#cb72-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> i <span class="op">:</span> ints<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-179"><a href="#cb72-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>             i <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb72-180"><a href="#cb72-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> </span>
<span id="cb72-181"><a href="#cb72-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>             <span class="dt">header_t</span><span class="op">*</span> h <span class="op">=</span> set_back<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb72-182"><a href="#cb72-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>             ASSERT_EQ<span class="op">(</span>h<span class="op">-&gt;</span>n_nuits<span class="op">,</span> n_nuits<span class="op">);</span></span>
<span id="cb72-183"><a href="#cb72-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         <span class="op">}</span></span>
<span id="cb72-184"><a href="#cb72-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb72-185"><a href="#cb72-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>         <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> i <span class="op">:</span> ints<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-186"><a href="#cb72-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>             free<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb72-187"><a href="#cb72-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>         <span class="op">}</span></span>
<span id="cb72-188"><a href="#cb72-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>     <span class="op">}</span></span>
<span id="cb72-189"><a href="#cb72-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> </span>
<span id="cb72-190"><a href="#cb72-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>     <span class="co">// @@@ sample begin 4:0</span></span>
<span id="cb72-191"><a href="#cb72-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> </span>
<span id="cb72-192"><a href="#cb72-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="dt">void</span><span class="op">*</span> mem<span class="op">[</span><span class="dv">1024</span><span class="op">];</span></span>
<span id="cb72-193"><a href="#cb72-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> </span>
<span id="cb72-194"><a href="#cb72-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> m <span class="op">:</span> mem<span class="op">)</span> <span class="op">{</span>  <span class="co">// 32バイト x 1024個のメモリ確保</span></span>
<span id="cb72-195"><a href="#cb72-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>         m <span class="op">=</span> malloc<span class="op">(</span><span class="dv">32</span><span class="op">);</span></span>
<span id="cb72-196"><a href="#cb72-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="op">}</span></span>
<span id="cb72-197"><a href="#cb72-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> </span>
<span id="cb72-198"><a href="#cb72-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="co">// memを使用した何らかの処理</span></span>
<span id="cb72-199"><a href="#cb72-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb72-200"><a href="#cb72-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb72-201"><a href="#cb72-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> </span>
<span id="cb72-202"><a href="#cb72-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> i <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span> i <span class="op">&lt;</span> ArrayLength<span class="op">(</span>mem<span class="op">);</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span>  <span class="co">// 512個のメモリを解放</span></span>
<span id="cb72-203"><a href="#cb72-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>         free<span class="op">(</span>mem<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb72-204"><a href="#cb72-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="op">}</span></span>
<span id="cb72-205"><a href="#cb72-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb72-206"><a href="#cb72-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb72-207"><a href="#cb72-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> i <span class="op">=</span> <span class="dv">1</span><span class="bu">U</span><span class="op">;</span> i <span class="op">&lt;</span> ArrayLength<span class="op">(</span>mem<span class="op">);</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-208"><a href="#cb72-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>         free<span class="op">(</span>mem<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb72-209"><a href="#cb72-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>     <span class="op">}</span></span>
<span id="cb72-210"><a href="#cb72-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> <span class="op">}</span></span>
<span id="cb72-211"><a href="#cb72-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> <span class="op">}</span>  <span class="co">// namespace</span></span>
<span id="cb72-212"><a href="#cb72-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="op">}</span>  <span class="co">// namespace MallocFree</span></span></code></pre></div>
<h3
id="exampledynamic_memory_allocationmpool_variable.h">example/dynamic_memory_allocation/mpool_variable.h
<a id="SS_23_2_36"></a></h3>
<div class="sourceCode" id="cb73"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;cstdint&gt;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;mutex&gt;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;mpool.h&quot;</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;spin_lock.h&quot;</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;utils.h&quot;</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">namespace</span> Inner_ <span class="op">{</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">struct</span> <span class="dt">header_t</span> <span class="op">{</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="dt">header_t</span><span class="op">*</span> next<span class="op">;</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="dt">size_t</span>    n_nuits<span class="op">;</span>  <span class="co">// header_tが何個あるか</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="op">};</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">constexpr</span> <span class="kw">auto</span> unit_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">header_t</span><span class="op">);</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="kw">inline</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;</span> sprit<span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> header<span class="op">,</span> <span class="dt">size_t</span> n_nuits<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="op">{</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="ot">assert</span><span class="op">(</span>n_nuits <span class="op">&gt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// ヘッダとバッファなので最低でも2</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="cf">if</span> <span class="op">(</span>header<span class="op">-&gt;</span>n_nuits <span class="op">==</span> n_nuits <span class="op">||</span> header<span class="op">-&gt;</span>n_nuits <span class="op">==</span> n_nuits <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>         <span class="cf">return</span> header<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="op">}</span></span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>header<span class="op">-&gt;</span>n_nuits <span class="op">&gt;</span> n_nuits<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>         <span class="kw">auto</span> next       <span class="op">=</span> header <span class="op">+</span> n_nuits<span class="op">;</span></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         next<span class="op">-&gt;</span>n_nuits   <span class="op">=</span> header<span class="op">-&gt;</span>n_nuits <span class="op">-</span> n_nuits<span class="op">;</span></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         next<span class="op">-&gt;</span>next      <span class="op">=</span> header<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>         header<span class="op">-&gt;</span>n_nuits <span class="op">=</span> n_nuits<span class="op">;</span></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>         <span class="cf">return</span> next<span class="op">;</span></span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="op">}</span></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span></span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="kw">inline</span> <span class="dt">void</span> concat<span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> front<span class="op">,</span> <span class="dt">header_t</span><span class="op">*</span> rear<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">{</span></span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">if</span> <span class="op">(</span>front <span class="op">+</span> front<span class="op">-&gt;</span>n_nuits <span class="op">==</span> rear<span class="op">)</span> <span class="op">{</span>  <span class="co">// 1枚のメモリになる</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>         front<span class="op">-&gt;</span>n_nuits <span class="op">+=</span> rear<span class="op">-&gt;</span>n_nuits<span class="op">;</span></span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>         front<span class="op">-&gt;</span>next <span class="op">=</span> rear<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="op">}</span></span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>         front<span class="op">-&gt;</span>next <span class="op">=</span> rear<span class="op">;</span></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="op">}</span></span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="op">}</span></span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="kw">inline</span> <span class="dt">header_t</span><span class="op">*</span> set_back<span class="op">(</span><span class="dt">void</span><span class="op">*</span> mem<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;(</span>mem<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="kw">static_assert</span><span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">header_t</span><span class="op">)</span> <span class="op">==</span> <span class="kw">alignof</span><span class="op">(</span><span class="bu">std::</span>max_align_t<span class="op">));</span></span>
<span id="cb73-52"><a href="#cb73-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb73-53"><a href="#cb73-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="dt">uint32_t</span> MEM_SIZE<span class="op">&gt;</span></span>
<span id="cb73-54"><a href="#cb73-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="kw">struct</span> <span class="dt">buffer_t</span> <span class="op">{</span></span>
<span id="cb73-55"><a href="#cb73-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="kw">alignas</span><span class="op">(</span><span class="kw">alignof</span><span class="op">(</span><span class="bu">std::</span>max_align_t<span class="op">))</span> <span class="dt">uint8_t</span> buffer<span class="op">[</span>Roundup<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">header_t</span><span class="op">),</span> MEM_SIZE<span class="op">)];</span></span>
<span id="cb73-56"><a href="#cb73-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="op">};</span></span>
<span id="cb73-57"><a href="#cb73-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="op">}</span>  <span class="co">// namespace Inner_</span></span>
<span id="cb73-58"><a href="#cb73-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb73-59"><a href="#cb73-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb73-60"><a href="#cb73-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb73-61"><a href="#cb73-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="dt">uint32_t</span> MEM_SIZE<span class="op">&gt;</span></span>
<span id="cb73-62"><a href="#cb73-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="kw">class</span> MPoolVariable <span class="kw">final</span> <span class="op">:</span> <span class="kw">public</span> MPool <span class="op">{</span></span>
<span id="cb73-63"><a href="#cb73-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb73-64"><a href="#cb73-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb73-65"><a href="#cb73-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="co">// @@@ sample begin 0:1</span></span>
<span id="cb73-66"><a href="#cb73-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     MPoolVariable<span class="op">()</span> <span class="kw">noexcept</span> <span class="op">:</span> MPool<span class="op">{</span>MEM_SIZE<span class="op">}</span></span>
<span id="cb73-67"><a href="#cb73-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="op">{</span></span>
<span id="cb73-68"><a href="#cb73-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         <span class="va">header_</span><span class="op">-&gt;</span>next    <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb73-69"><a href="#cb73-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>         <span class="va">header_</span><span class="op">-&gt;</span>n_nuits <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span><span class="va">buff_</span><span class="op">)</span> <span class="op">/</span> Inner_<span class="op">::</span>unit_size<span class="op">;</span></span>
<span id="cb73-70"><a href="#cb73-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="op">}</span></span>
<span id="cb73-71"><a href="#cb73-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb73-72"><a href="#cb73-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="co">// @@@ sample begin 0:2</span></span>
<span id="cb73-73"><a href="#cb73-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb73-74"><a href="#cb73-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="kw">class</span> const_iterator <span class="op">{</span></span>
<span id="cb73-75"><a href="#cb73-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="kw">public</span><span class="op">:</span></span>
<span id="cb73-76"><a href="#cb73-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         <span class="kw">explicit</span> const_iterator<span class="op">(</span>Inner_<span class="op">::</span><span class="dt">header_t</span> <span class="at">const</span><span class="op">*</span> header<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">:</span> <span class="va">header_</span><span class="op">{</span>header<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb73-77"><a href="#cb73-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>         const_iterator<span class="op">(</span>const_iterator <span class="at">const</span><span class="op">&amp;)</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb73-78"><a href="#cb73-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>         const_iterator<span class="op">(</span>const_iterator<span class="op">&amp;&amp;)</span>      <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb73-79"><a href="#cb73-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb73-80"><a href="#cb73-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>         const_iterator<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">++()</span> <span class="kw">noexcept</span>  <span class="co">// 前置++のみ実装</span></span>
<span id="cb73-81"><a href="#cb73-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>         <span class="op">{</span></span>
<span id="cb73-82"><a href="#cb73-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>             <span class="ot">assert</span><span class="op">(</span><span class="va">header_</span> <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb73-83"><a href="#cb73-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>             <span class="va">header_</span> <span class="op">=</span> <span class="va">header_</span><span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb73-84"><a href="#cb73-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> </span>
<span id="cb73-85"><a href="#cb73-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>             <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb73-86"><a href="#cb73-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         <span class="op">}</span></span>
<span id="cb73-87"><a href="#cb73-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb73-88"><a href="#cb73-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>         Inner_<span class="op">::</span><span class="dt">header_t</span> <span class="at">const</span><span class="op">*</span> <span class="kw">operator</span><span class="op">*()</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">header_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb73-89"><a href="#cb73-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>         <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>const_iterator <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">header_</span> <span class="op">==</span> rhs<span class="op">.</span><span class="va">header_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb73-90"><a href="#cb73-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>         <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span>const_iterator <span class="at">const</span><span class="op">&amp;</span> rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">!(*</span><span class="kw">this</span> <span class="op">==</span> rhs<span class="op">);</span> <span class="op">}</span></span>
<span id="cb73-91"><a href="#cb73-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb73-92"><a href="#cb73-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     <span class="kw">private</span><span class="op">:</span></span>
<span id="cb73-93"><a href="#cb73-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         Inner_<span class="op">::</span><span class="dt">header_t</span> <span class="at">const</span><span class="op">*</span> <span class="va">header_</span><span class="op">;</span></span>
<span id="cb73-94"><a href="#cb73-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="op">};</span></span>
<span id="cb73-95"><a href="#cb73-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb73-96"><a href="#cb73-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     const_iterator begin<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> const_iterator<span class="op">{</span><span class="va">header_</span><span class="op">};</span> <span class="op">}</span></span>
<span id="cb73-97"><a href="#cb73-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     const_iterator end<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> const_iterator<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span> <span class="op">}</span></span>
<span id="cb73-98"><a href="#cb73-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     const_iterator cbegin<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> const_iterator<span class="op">{</span><span class="va">header_</span><span class="op">};</span> <span class="op">}</span></span>
<span id="cb73-99"><a href="#cb73-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     const_iterator cend<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> const_iterator<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span> <span class="op">}</span></span>
<span id="cb73-100"><a href="#cb73-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb73-101"><a href="#cb73-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="co">// @@@ sample begin 0:3</span></span>
<span id="cb73-102"><a href="#cb73-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> </span>
<span id="cb73-103"><a href="#cb73-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb73-104"><a href="#cb73-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="kw">using</span> <span class="dt">header_t</span> <span class="op">=</span> Inner_<span class="op">::</span><span class="dt">header_t</span><span class="op">;</span></span>
<span id="cb73-105"><a href="#cb73-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb73-106"><a href="#cb73-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     Inner_<span class="op">::</span><span class="dt">buffer_t</span><span class="op">&lt;</span>MEM_SIZE<span class="op">&gt;</span> <span class="va">buff_</span><span class="op">{};</span></span>
<span id="cb73-107"><a href="#cb73-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="dt">header_t</span><span class="op">*</span>                  <span class="va">header_</span><span class="op">{</span><span class="kw">reinterpret_cast</span><span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;(</span><span class="va">buff_</span><span class="op">.</span>buffer<span class="op">)};</span></span>
<span id="cb73-108"><a href="#cb73-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="at">mutable</span> SpinLock           <span class="va">spin_lock_</span><span class="op">{};</span></span>
<span id="cb73-109"><a href="#cb73-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="dt">size_t</span>                     <span class="va">unit_count_</span><span class="op">{</span><span class="kw">sizeof</span><span class="op">(</span><span class="va">buff_</span><span class="op">)</span> <span class="op">/</span> Inner_<span class="op">::</span>unit_size<span class="op">};</span></span>
<span id="cb73-110"><a href="#cb73-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="dt">size_t</span>                     <span class="va">unit_count_min_</span><span class="op">{</span><span class="kw">sizeof</span><span class="op">(</span><span class="va">buff_</span><span class="op">)</span> <span class="op">/</span> Inner_<span class="op">::</span>unit_size<span class="op">};</span></span>
<span id="cb73-111"><a href="#cb73-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb73-112"><a href="#cb73-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     <span class="kw">virtual</span> <span class="dt">void</span><span class="op">*</span> alloc<span class="op">(</span><span class="dt">size_t</span> size<span class="op">)</span> <span class="kw">noexcept</span> <span class="kw">override</span></span>
<span id="cb73-113"><a href="#cb73-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="op">{</span></span>
<span id="cb73-114"><a href="#cb73-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>         <span class="co">// @@@ ignore begin</span></span>
<span id="cb73-115"><a href="#cb73-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>         <span class="co">// size分のメモリとヘッダ</span></span>
<span id="cb73-116"><a href="#cb73-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>         <span class="kw">auto</span> n_nuits <span class="op">=</span> <span class="op">(</span>Roundup<span class="op">(</span>Inner_<span class="op">::</span>unit_size<span class="op">,</span> size<span class="op">)</span> <span class="op">/</span> Inner_<span class="op">::</span>unit_size<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb73-117"><a href="#cb73-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> </span>
<span id="cb73-118"><a href="#cb73-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>         <span class="kw">auto</span> lock <span class="op">=</span> <span class="bu">std::</span>lock_guard<span class="op">{</span><span class="va">spin_lock_</span><span class="op">};</span></span>
<span id="cb73-119"><a href="#cb73-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb73-120"><a href="#cb73-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>         <span class="kw">auto</span> curr <span class="op">=</span> <span class="va">header_</span><span class="op">;</span></span>
<span id="cb73-121"><a href="#cb73-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb73-122"><a href="#cb73-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>         <span class="cf">for</span> <span class="op">(</span><span class="dt">header_t</span><span class="op">*</span> prev<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span> curr <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">;</span> prev <span class="op">=</span> curr<span class="op">,</span> curr <span class="op">=</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-123"><a href="#cb73-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>             <span class="kw">auto</span> opt_next <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">header_t</span><span class="op">*&gt;{</span>sprit<span class="op">(</span>curr<span class="op">,</span> n_nuits<span class="op">)};</span></span>
<span id="cb73-124"><a href="#cb73-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb73-125"><a href="#cb73-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>             <span class="cf">if</span> <span class="op">(!</span>opt_next<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-126"><a href="#cb73-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>                 <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb73-127"><a href="#cb73-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>             <span class="op">}</span></span>
<span id="cb73-128"><a href="#cb73-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb73-129"><a href="#cb73-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>             <span class="kw">auto</span> next <span class="op">=</span> <span class="op">*</span>opt_next<span class="op">;</span></span>
<span id="cb73-130"><a href="#cb73-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>             <span class="cf">if</span> <span class="op">(</span>prev <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-131"><a href="#cb73-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>                 <span class="va">header_</span> <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb73-132"><a href="#cb73-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>             <span class="op">}</span></span>
<span id="cb73-133"><a href="#cb73-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>             <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb73-134"><a href="#cb73-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>                 prev<span class="op">-&gt;</span>next <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb73-135"><a href="#cb73-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>             <span class="op">}</span></span>
<span id="cb73-136"><a href="#cb73-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>             <span class="cf">break</span><span class="op">;</span></span>
<span id="cb73-137"><a href="#cb73-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="op">}</span></span>
<span id="cb73-138"><a href="#cb73-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> </span>
<span id="cb73-139"><a href="#cb73-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>         <span class="cf">if</span> <span class="op">(</span>curr <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-140"><a href="#cb73-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>             <span class="va">unit_count_</span> <span class="op">-=</span> curr<span class="op">-&gt;</span>n_nuits<span class="op">;</span></span>
<span id="cb73-141"><a href="#cb73-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>             <span class="va">unit_count_min_</span> <span class="op">=</span> <span class="bu">std::</span>min<span class="op">(</span><span class="va">unit_count_</span><span class="op">,</span> <span class="va">unit_count_min_</span><span class="op">);</span></span>
<span id="cb73-142"><a href="#cb73-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>             <span class="op">++</span>curr<span class="op">;</span></span>
<span id="cb73-143"><a href="#cb73-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>         <span class="op">}</span></span>
<span id="cb73-144"><a href="#cb73-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> </span>
<span id="cb73-145"><a href="#cb73-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>         <span class="cf">return</span> curr<span class="op">;</span></span>
<span id="cb73-146"><a href="#cb73-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         <span class="co">// @@@ ignore end</span></span>
<span id="cb73-147"><a href="#cb73-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="op">}</span></span>
<span id="cb73-148"><a href="#cb73-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb73-149"><a href="#cb73-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="kw">virtual</span> <span class="dt">void</span> free<span class="op">(</span><span class="dt">void</span><span class="op">*</span> mem<span class="op">)</span> <span class="kw">noexcept</span> <span class="kw">override</span></span>
<span id="cb73-150"><a href="#cb73-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="op">{</span></span>
<span id="cb73-151"><a href="#cb73-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         <span class="co">// @@@ ignore begin</span></span>
<span id="cb73-152"><a href="#cb73-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>         <span class="dt">header_t</span><span class="op">*</span> to_free <span class="op">=</span> Inner_<span class="op">::</span>set_back<span class="op">(</span>mem<span class="op">);</span></span>
<span id="cb73-153"><a href="#cb73-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb73-154"><a href="#cb73-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>         to_free<span class="op">-&gt;</span>next <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb73-155"><a href="#cb73-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> </span>
<span id="cb73-156"><a href="#cb73-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>         <span class="kw">auto</span> lock <span class="op">=</span> <span class="bu">std::</span>lock_guard<span class="op">{</span><span class="va">spin_lock_</span><span class="op">};</span></span>
<span id="cb73-157"><a href="#cb73-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span> </span>
<span id="cb73-158"><a href="#cb73-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>         <span class="va">unit_count_</span> <span class="op">+=</span> to_free<span class="op">-&gt;</span>n_nuits<span class="op">;</span></span>
<span id="cb73-159"><a href="#cb73-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>         <span class="va">unit_count_min_</span> <span class="op">=</span> <span class="bu">std::</span>min<span class="op">(</span><span class="va">unit_count_</span><span class="op">,</span> <span class="va">unit_count_min_</span><span class="op">);</span></span>
<span id="cb73-160"><a href="#cb73-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb73-161"><a href="#cb73-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>         <span class="cf">if</span> <span class="op">(</span><span class="va">header_</span> <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-162"><a href="#cb73-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>             <span class="va">header_</span> <span class="op">=</span> to_free<span class="op">;</span></span>
<span id="cb73-163"><a href="#cb73-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>             <span class="cf">return</span><span class="op">;</span></span>
<span id="cb73-164"><a href="#cb73-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>         <span class="op">}</span></span>
<span id="cb73-165"><a href="#cb73-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> </span>
<span id="cb73-166"><a href="#cb73-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>         <span class="cf">if</span> <span class="op">(</span>to_free <span class="op">&lt;</span> <span class="va">header_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-167"><a href="#cb73-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>             concat<span class="op">(</span>to_free<span class="op">,</span> <span class="va">header_</span><span class="op">);</span></span>
<span id="cb73-168"><a href="#cb73-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>             <span class="va">header_</span> <span class="op">=</span> to_free<span class="op">;</span></span>
<span id="cb73-169"><a href="#cb73-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>             <span class="cf">return</span><span class="op">;</span></span>
<span id="cb73-170"><a href="#cb73-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>         <span class="op">}</span></span>
<span id="cb73-171"><a href="#cb73-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb73-172"><a href="#cb73-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>         <span class="dt">header_t</span><span class="op">*</span> curr <span class="op">=</span> <span class="va">header_</span><span class="op">;</span></span>
<span id="cb73-173"><a href="#cb73-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb73-174"><a href="#cb73-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="cf">for</span> <span class="op">(;</span> curr<span class="op">-&gt;</span>next <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">;</span> curr <span class="op">=</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-175"><a href="#cb73-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>             <span class="cf">if</span> <span class="op">(</span>to_free <span class="op">&lt;</span> curr<span class="op">-&gt;</span>next<span class="op">)</span> <span class="op">{</span>  <span class="co">// 常に curr &lt; to_free</span></span>
<span id="cb73-176"><a href="#cb73-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>                 concat<span class="op">(</span>to_free<span class="op">,</span> curr<span class="op">-&gt;</span>next<span class="op">);</span></span>
<span id="cb73-177"><a href="#cb73-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>                 concat<span class="op">(</span>curr<span class="op">,</span> to_free<span class="op">);</span></span>
<span id="cb73-178"><a href="#cb73-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>                 <span class="cf">return</span><span class="op">;</span></span>
<span id="cb73-179"><a href="#cb73-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>             <span class="op">}</span></span>
<span id="cb73-180"><a href="#cb73-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>         <span class="op">}</span></span>
<span id="cb73-181"><a href="#cb73-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> </span>
<span id="cb73-182"><a href="#cb73-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>         concat<span class="op">(</span>curr<span class="op">,</span> to_free<span class="op">);</span></span>
<span id="cb73-183"><a href="#cb73-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         <span class="co">// @@@ ignore end</span></span>
<span id="cb73-184"><a href="#cb73-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>     <span class="op">}</span></span>
<span id="cb73-185"><a href="#cb73-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb73-186"><a href="#cb73-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="kw">virtual</span> <span class="dt">size_t</span> get_size<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span> <span class="op">{</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb73-187"><a href="#cb73-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>     <span class="kw">virtual</span> <span class="dt">size_t</span> get_count<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">unit_count_</span> <span class="op">*</span> Inner_<span class="op">::</span>unit_size<span class="op">;</span> <span class="op">}</span></span>
<span id="cb73-188"><a href="#cb73-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>     <span class="kw">virtual</span> <span class="dt">size_t</span> get_count_min<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span></span>
<span id="cb73-189"><a href="#cb73-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>     <span class="op">{</span></span>
<span id="cb73-190"><a href="#cb73-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>         <span class="cf">return</span> <span class="va">unit_count_min_</span> <span class="op">*</span> Inner_<span class="op">::</span>unit_size<span class="op">;</span></span>
<span id="cb73-191"><a href="#cb73-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>     <span class="op">}</span></span>
<span id="cb73-192"><a href="#cb73-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span> </span>
<span id="cb73-193"><a href="#cb73-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>     <span class="kw">virtual</span> <span class="dt">bool</span> is_valid<span class="op">(</span><span class="dt">void</span> <span class="at">const</span><span class="op">*</span> mem<span class="op">)</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span></span>
<span id="cb73-194"><a href="#cb73-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>     <span class="op">{</span></span>
<span id="cb73-195"><a href="#cb73-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>         <span class="cf">return</span> <span class="op">(&amp;</span><span class="va">buff_</span> <span class="op">&lt;</span> mem<span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">(</span>mem <span class="op">&lt;</span> <span class="op">&amp;</span><span class="va">buff_</span><span class="op">.</span>buffer<span class="op">[</span>ArrayLength<span class="op">(</span><span class="va">buff_</span><span class="op">.</span>buffer<span class="op">)]);</span></span>
<span id="cb73-196"><a href="#cb73-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="op">}</span></span>
<span id="cb73-197"><a href="#cb73-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb73-198"><a href="#cb73-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="co">// @@@ sample begin 0:4</span></span>
<span id="cb73-199"><a href="#cb73-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> <span class="op">};</span></span>
<span id="cb73-200"><a href="#cb73-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h3
id="exampleprogramming_conventionfixed_point.h">example/programming_convention/fixed_point.h
<a id="SS_23_2_37"></a></h3>
<div class="sourceCode" id="cb74"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;cstdint&gt;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;type_traits&gt;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="co">/// </span><span class="an">@class</span><span class="co"> </span><span class="cv">FixedPoint</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="co">/// </span><span class="an">@brief</span><span class="co"> BASIC_TYPEで指定する基本型のビット長を持つ固定小数点を扱うためのクラス</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="co">/// </span><span class="an">@tparam</span><span class="co"> </span><span class="cv">BASIC_TYPE</span><span class="co">       全体のビット長や、符号を指定するための整数型</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="co">/// </span><span class="an">@tparam</span><span class="co"> </span><span class="cv">FRACTION_BIT_NUM</span><span class="co"> 小数点保持のためのビット長</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> BASIC_TYPE<span class="op">,</span> <span class="dt">uint32_t</span> FRACTION_BIT_NUM<span class="op">&gt;</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">class</span> FixedPoint <span class="op">{</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     FixedPoint<span class="op">(</span>BASIC_TYPE                                integer  <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>                <span class="kw">typename</span> <span class="bu">std::</span>make_unsigned_t<span class="op">&lt;</span>BASIC_TYPE<span class="op">&gt;</span> fraction <span class="op">=</span> <span class="dv">0</span><span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         <span class="op">:</span> <span class="va">value_</span><span class="op">{</span>get_init_value<span class="op">(</span>integer<span class="op">,</span> fraction<span class="op">)}</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="op">{</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>         <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>         <span class="co">// signedに対する右ビットシフトの仕様が、算術右ビットシフトでないと</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>         <span class="co">// このクラスは成立しない。下記のstatic_assertはその確認。</span></span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>         <span class="kw">static_assert</span><span class="op">(</span>IsSigned<span class="op">()</span> <span class="op">?</span> <span class="op">(-</span><span class="dv">1</span> <span class="op">&gt;&gt;</span> <span class="dv">1</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="st">&quot;need logical right bit sift&quot;</span><span class="op">);</span></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>         <span class="co">// BASIC_TYPEをcharにすることは認めない。</span></span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>         <span class="kw">static_assert</span><span class="op">(!</span><span class="bu">std::</span>is_same_v<span class="op">&lt;</span>BASIC_TYPE<span class="op">,</span> <span class="dt">char</span><span class="op">&gt;,</span> <span class="st">&quot;BASIC_TYPE should not be char&quot;</span><span class="op">);</span></span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>         <span class="co">// @@@ ignore end</span></span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="op">}</span></span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="co">// @@@ sample end</span></span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="co">// @@@ sample begin 0:1</span></span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">~</span>FixedPoint<span class="op">()</span>                                <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     FixedPoint<span class="op">(</span>FixedPoint <span class="at">const</span><span class="op">&amp;)</span>                <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span>FixedPoint <span class="at">const</span><span class="op">&amp;)</span>     <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     FixedPoint<span class="op">(</span>FixedPoint<span class="op">&amp;&amp;)</span> <span class="kw">noexcept</span>            <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span>FixedPoint<span class="op">&amp;&amp;)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     BASIC_TYPE GetValue<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">value_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb74-40"><a href="#cb74-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     BASIC_TYPE GetInteger<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">value_</span> <span class="op">&gt;&gt;</span> <span class="va">fraction_bit_num_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb74-41"><a href="#cb74-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb74-42"><a href="#cb74-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     BASIC_TYPE GetFraction<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">value_</span> <span class="op">&amp;</span> <span class="va">fraction_bit_mask_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb74-43"><a href="#cb74-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb74-44"><a href="#cb74-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="dt">double</span> ToFloatPoint<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span></span>
<span id="cb74-45"><a href="#cb74-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">{</span></span>
<span id="cb74-46"><a href="#cb74-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>         <span class="cf">return</span> GetInteger<span class="op">()</span> <span class="op">+</span> <span class="op">(</span><span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;(</span>GetFraction<span class="op">())</span> <span class="op">/</span> <span class="op">(</span><span class="va">fraction_bit_mask_</span> <span class="op">+</span> <span class="dv">1</span><span class="op">));</span></span>
<span id="cb74-47"><a href="#cb74-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="op">}</span></span>
<span id="cb74-48"><a href="#cb74-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb74-49"><a href="#cb74-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="kw">constexpr</span> <span class="kw">typename</span> <span class="bu">std::</span>make_unsigned_t<span class="op">&lt;</span>BASIC_TYPE<span class="op">&gt;</span> GetFractionMask<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span></span>
<span id="cb74-50"><a href="#cb74-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="op">{</span></span>
<span id="cb74-51"><a href="#cb74-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         <span class="cf">return</span> <span class="va">fraction_bit_mask_</span><span class="op">;</span></span>
<span id="cb74-52"><a href="#cb74-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="op">}</span></span>
<span id="cb74-53"><a href="#cb74-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> </span>
<span id="cb74-54"><a href="#cb74-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="kw">constexpr</span> <span class="kw">typename</span> <span class="bu">std::</span>make_unsigned_t<span class="op">&lt;</span>BASIC_TYPE<span class="op">&gt;</span> GetIntegerMask<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span></span>
<span id="cb74-55"><a href="#cb74-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="op">{</span></span>
<span id="cb74-56"><a href="#cb74-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="cf">return</span> <span class="va">integer_bit_mask_</span><span class="op">;</span></span>
<span id="cb74-57"><a href="#cb74-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">}</span></span>
<span id="cb74-58"><a href="#cb74-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb74-59"><a href="#cb74-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> IsSigned<span class="op">()</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="bu">std::</span>is_signed_v<span class="op">&lt;</span>BASIC_TYPE<span class="op">&gt;;</span> <span class="op">}</span></span>
<span id="cb74-60"><a href="#cb74-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb74-61"><a href="#cb74-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> IsUnsigned<span class="op">()</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="bu">std::</span>is_unsigned_v<span class="op">&lt;</span>BASIC_TYPE<span class="op">&gt;;</span> <span class="op">}</span></span>
<span id="cb74-62"><a href="#cb74-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb74-63"><a href="#cb74-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-64"><a href="#cb74-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">+=(</span>FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-65"><a href="#cb74-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-66"><a href="#cb74-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="op">{</span></span>
<span id="cb74-67"><a href="#cb74-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>         <span class="va">value_</span> <span class="op">+=</span> rhs<span class="op">.</span><span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-68"><a href="#cb74-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>         <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb74-69"><a href="#cb74-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="op">}</span></span>
<span id="cb74-70"><a href="#cb74-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb74-71"><a href="#cb74-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-72"><a href="#cb74-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">-=(</span>FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-73"><a href="#cb74-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-74"><a href="#cb74-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="op">{</span></span>
<span id="cb74-75"><a href="#cb74-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>         <span class="va">value_</span> <span class="op">-=</span> rhs<span class="op">.</span><span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-76"><a href="#cb74-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>         <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb74-77"><a href="#cb74-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     <span class="op">}</span></span>
<span id="cb74-78"><a href="#cb74-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb74-79"><a href="#cb74-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-80"><a href="#cb74-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">*=(</span>FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-81"><a href="#cb74-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-82"><a href="#cb74-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">{</span></span>
<span id="cb74-83"><a href="#cb74-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>         <span class="va">value_</span> <span class="op">*=</span> rhs<span class="op">.</span><span class="va">value_</span> <span class="op">&gt;&gt;</span> <span class="va">fraction_bit_num_</span><span class="op">;</span></span>
<span id="cb74-84"><a href="#cb74-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>         <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb74-85"><a href="#cb74-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="op">}</span></span>
<span id="cb74-86"><a href="#cb74-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb74-87"><a href="#cb74-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-88"><a href="#cb74-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     FixedPoint<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">/=(</span>FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-89"><a href="#cb74-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-90"><a href="#cb74-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="op">{</span></span>
<span id="cb74-91"><a href="#cb74-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         <span class="kw">using</span> T <span class="op">=</span> <span class="bu">std::</span>conditional_t<span class="op">&lt;</span>IsSigned<span class="op">(),</span> <span class="dt">int64_t</span><span class="op">,</span> <span class="dt">uint64_t</span><span class="op">&gt;;</span></span>
<span id="cb74-92"><a href="#cb74-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> </span>
<span id="cb74-93"><a href="#cb74-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         <span class="va">value_</span> <span class="op">=</span> <span class="op">(</span><span class="kw">static_cast</span><span class="op">&lt;</span>T<span class="op">&gt;(</span><span class="va">value_</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="va">fraction_bit_num_</span><span class="op">)</span> <span class="op">/</span> rhs<span class="op">.</span><span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-94"><a href="#cb74-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb74-95"><a href="#cb74-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>         <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb74-96"><a href="#cb74-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="op">}</span></span>
<span id="cb74-97"><a href="#cb74-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> </span>
<span id="cb74-98"><a href="#cb74-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-99"><a href="#cb74-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb74-100"><a href="#cb74-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     BASIC_TYPE <span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-101"><a href="#cb74-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-102"><a href="#cb74-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> </span>
<span id="cb74-103"><a href="#cb74-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">uint32_t</span> bit_mask<span class="op">(</span><span class="dt">uint32_t</span> bit_len<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-104"><a href="#cb74-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="op">{</span></span>
<span id="cb74-105"><a href="#cb74-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>         <span class="cf">if</span> <span class="op">(</span>bit_len <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb74-106"><a href="#cb74-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>             <span class="cf">return</span> <span class="bn">0x0</span><span class="op">;</span></span>
<span id="cb74-107"><a href="#cb74-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>         <span class="op">}</span></span>
<span id="cb74-108"><a href="#cb74-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb74-109"><a href="#cb74-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>         <span class="cf">return</span> bit_mask<span class="op">(</span>bit_len <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="bn">0x01</span> <span class="op">&lt;&lt;</span> <span class="op">(</span>bit_len <span class="op">-</span> <span class="dv">1</span><span class="op">));</span></span>
<span id="cb74-110"><a href="#cb74-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="op">}</span></span>
<span id="cb74-111"><a href="#cb74-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb74-112"><a href="#cb74-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">uint32_t</span> <span class="va">fraction_bit_num_</span><span class="op">{</span>FRACTION_BIT_NUM<span class="op">};</span></span>
<span id="cb74-113"><a href="#cb74-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">uint32_t</span> <span class="va">fraction_bit_mask_</span><span class="op">{</span>bit_mask<span class="op">(</span><span class="va">fraction_bit_num_</span><span class="op">)};</span></span>
<span id="cb74-114"><a href="#cb74-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">uint32_t</span> <span class="va">integer_bit_num_</span><span class="op">{</span><span class="kw">sizeof</span><span class="op">(</span>BASIC_TYPE<span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">-</span> FRACTION_BIT_NUM<span class="op">};</span></span>
<span id="cb74-115"><a href="#cb74-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">uint32_t</span> <span class="va">integer_bit_mask_</span><span class="op">{</span>bit_mask<span class="op">(</span><span class="va">integer_bit_num_</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="va">fraction_bit_num_</span><span class="op">};</span></span>
<span id="cb74-116"><a href="#cb74-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb74-117"><a href="#cb74-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="at">static</span> <span class="kw">constexpr</span> BASIC_TYPE get_init_value<span class="op">(</span>BASIC_TYPE integer<span class="op">,</span> BASIC_TYPE fraction<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-118"><a href="#cb74-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>     <span class="op">{</span></span>
<span id="cb74-119"><a href="#cb74-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> <span class="er">#if 0  // 本来は左シフト&lt;&lt;を使いたいが、signedに対しての&lt;&lt;は良くないので</span></span>
<span id="cb74-120"><a href="#cb74-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>         <span class="cf">return</span> <span class="op">(</span>integer <span class="op">&lt;&lt;</span> <span class="va">fraction_bit_num_</span><span class="op">)</span> <span class="op">|</span> fraction<span class="op">;</span></span>
<span id="cb74-121"><a href="#cb74-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> <span class="er">#else</span></span>
<span id="cb74-122"><a href="#cb74-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>         <span class="cf">return</span> <span class="op">(</span>integer <span class="op">*</span> <span class="op">(</span><span class="va">fraction_bit_mask_</span> <span class="op">+</span> <span class="dv">1</span><span class="op">))</span> <span class="op">|</span> fraction<span class="op">;</span></span>
<span id="cb74-123"><a href="#cb74-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> <span class="er">#endif</span></span>
<span id="cb74-124"><a href="#cb74-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="op">}</span></span>
<span id="cb74-125"><a href="#cb74-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-126"><a href="#cb74-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb74-127"><a href="#cb74-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-128"><a href="#cb74-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-129"><a href="#cb74-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="op">{</span></span>
<span id="cb74-130"><a href="#cb74-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>         <span class="cf">return</span> lhs<span class="op">.</span><span class="va">value_</span> <span class="op">==</span> rhs<span class="op">.</span><span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-131"><a href="#cb74-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     <span class="op">}</span></span>
<span id="cb74-132"><a href="#cb74-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> </span>
<span id="cb74-133"><a href="#cb74-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">!(</span>lhs <span class="op">==</span> rhs<span class="op">);</span> <span class="op">}</span></span>
<span id="cb74-134"><a href="#cb74-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> </span>
<span id="cb74-135"><a href="#cb74-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-136"><a href="#cb74-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>     <span class="op">{</span></span>
<span id="cb74-137"><a href="#cb74-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>         <span class="cf">return</span> lhs<span class="op">.</span><span class="va">value_</span> <span class="op">&gt;</span> rhs<span class="op">.</span><span class="va">value_</span><span class="op">;</span></span>
<span id="cb74-138"><a href="#cb74-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="op">}</span></span>
<span id="cb74-139"><a href="#cb74-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> </span>
<span id="cb74-140"><a href="#cb74-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&gt;=(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-141"><a href="#cb74-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>     <span class="op">{</span></span>
<span id="cb74-142"><a href="#cb74-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>         <span class="cf">return</span> <span class="op">(</span>lhs <span class="op">&gt;</span> rhs<span class="op">)</span> <span class="op">||</span> <span class="op">(</span>lhs <span class="op">==</span> rhs<span class="op">);</span></span>
<span id="cb74-143"><a href="#cb74-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>     <span class="op">}</span></span>
<span id="cb74-144"><a href="#cb74-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> </span>
<span id="cb74-145"><a href="#cb74-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span>rhs <span class="op">&gt;</span> lhs<span class="op">);</span> <span class="op">}</span></span>
<span id="cb74-146"><a href="#cb74-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span> </span>
<span id="cb74-147"><a href="#cb74-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">&lt;=(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-148"><a href="#cb74-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="op">{</span></span>
<span id="cb74-149"><a href="#cb74-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>         <span class="cf">return</span> <span class="op">(</span>lhs <span class="op">&lt;</span> rhs<span class="op">)</span> <span class="op">||</span> <span class="op">(</span>lhs <span class="op">==</span> rhs<span class="op">);</span></span>
<span id="cb74-150"><a href="#cb74-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="op">}</span></span>
<span id="cb74-151"><a href="#cb74-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-152"><a href="#cb74-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> </span>
<span id="cb74-153"><a href="#cb74-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="co">// FixedPoint() + intのようなオーバーロードを作るためにあえてfriend</span></span>
<span id="cb74-154"><a href="#cb74-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="kw">friend</span> FixedPoint <span class="kw">operator</span><span class="op">+(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-155"><a href="#cb74-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     <span class="co">// @@@ ignore begin</span></span>
<span id="cb74-156"><a href="#cb74-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="op">{</span></span>
<span id="cb74-157"><a href="#cb74-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>         lhs <span class="op">+=</span> rhs<span class="op">;</span></span>
<span id="cb74-158"><a href="#cb74-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>         <span class="cf">return</span> lhs<span class="op">;</span></span>
<span id="cb74-159"><a href="#cb74-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="op">}</span></span>
<span id="cb74-160"><a href="#cb74-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb74-161"><a href="#cb74-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="kw">friend</span> FixedPoint <span class="kw">operator</span><span class="op">-(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-162"><a href="#cb74-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="op">{</span></span>
<span id="cb74-163"><a href="#cb74-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>         lhs <span class="op">-=</span> rhs<span class="op">;</span></span>
<span id="cb74-164"><a href="#cb74-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>         <span class="cf">return</span> lhs<span class="op">;</span></span>
<span id="cb74-165"><a href="#cb74-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     <span class="op">}</span></span>
<span id="cb74-166"><a href="#cb74-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> </span>
<span id="cb74-167"><a href="#cb74-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>     <span class="kw">friend</span> FixedPoint <span class="kw">operator</span><span class="op">*(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-168"><a href="#cb74-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="op">{</span></span>
<span id="cb74-169"><a href="#cb74-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>         lhs <span class="op">*=</span> rhs<span class="op">;</span></span>
<span id="cb74-170"><a href="#cb74-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>         <span class="cf">return</span> lhs<span class="op">;</span></span>
<span id="cb74-171"><a href="#cb74-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>     <span class="op">}</span></span>
<span id="cb74-172"><a href="#cb74-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb74-173"><a href="#cb74-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     <span class="kw">friend</span> FixedPoint <span class="kw">operator</span><span class="op">/(</span>FixedPoint lhs<span class="op">,</span> FixedPoint rhs<span class="op">)</span> <span class="kw">noexcept</span></span>
<span id="cb74-174"><a href="#cb74-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     <span class="op">{</span></span>
<span id="cb74-175"><a href="#cb74-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         lhs <span class="op">/=</span> rhs<span class="op">;</span></span>
<span id="cb74-176"><a href="#cb74-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         <span class="cf">return</span> lhs<span class="op">;</span></span>
<span id="cb74-177"><a href="#cb74-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     <span class="op">}</span></span>
<span id="cb74-178"><a href="#cb74-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb74-179"><a href="#cb74-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> <span class="op">};</span></span>
<span id="cb74-180"><a href="#cb74-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h2 id="etc">etc <a id="SS_23_3"></a></h2>
<h3 id="exampledepscmakelists.txt">example/deps/CMakeLists.txt
<a id="SS_23_3_1"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(main_project)
          4 
          5 set(CMAKE_CXX_STANDARD 17)
          6 set(CMAKE_CXX_STANDARD_REQUIRED True)
          7 
          8 set(GTEST_DIR &quot;../../googletest&quot;)
          9 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
         10 
         11 include_directories(&quot;${GTEST_DIR}/googletest/include&quot;)
         12 
         13 # googletestサブディレクトリを追加
         14 add_subdirectory(${GTEST_DIR} ${CMAKE_BINARY_DIR}/googletest EXCLUDE_FROM_ALL)
         15 
         16 add_subdirectory(lib)
         17 add_subdirectory(logging)
         18 add_subdirectory(file_utils)
         19 add_subdirectory(dependency)
         20 add_subdirectory(app)
         21 
         22 # すべてのテストを実行するカスタムターゲットを追加
         23 add_custom_target(tests
         24     DEPENDS app_ut dependency_ut file_utils_ut lib_ut logging_ut deps_it
         25     WORKING_DIRECTORY ${CMAKE_BINARY_DIR}
         26 )
         27 </code></pre>
<h3
id="exampledepsdependencycmakelists.txt">example/deps/dependency/CMakeLists.txt
<a id="SS_23_3_2"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(dependency VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          8 
          9 # ライブラリのソースファイルを追加
         10 add_library(dependency STATIC
         11     src/arch_pkg.cpp
         12     src/cpp_deps.cpp
         13     src/cpp_dir.cpp
         14     src/cpp_src.cpp
         15     src/deps_scenario.cpp
         16     src/load_store_format.cpp
         17 )
         18 
         19 # @@@ sample begin 0:0
         20 
         21 # dependency.aをリンクするファイルに
         22 # ../dependency/h ../file_utils/h ../lib/h
         23 # のヘッダファイルを公開する
         24 
         25 target_include_directories(dependency PUBLIC ../dependency/h ../file_utils/h ../lib/h)
         26 # @@@ sample end
         27 
         28 # テスト用のソースファイルを追加して単一の実行ファイルを生成
         29 add_executable(dependency_ut_exe
         30     ut/arch_pkg_ut.cpp
         31     ut/cpp_deps_ut.cpp
         32     ut/cpp_dir_ut.cpp
         33     ut/cpp_src_ut.cpp
         34     ut/deps_scenario_ut.cpp
         35     ut/load_store_format_ut.cpp
         36 )
         37 
         38 # @@@ sample begin 1:0
         39 
         40 # dependency_ut_exeはdependency.aの単体テスト
         41 # dependency_ut_exeが使用するライブラリのヘッダは下記の記述で公開される
         42 target_link_libraries(dependency_ut_exe dependency file_utils logging gtest gtest_main)
         43 
         44 # dependency_ut_exeに上記では公開範囲が不十分である場合、
         45 # dependency_ut_exeが使用するライブラリのヘッダは下記の記述で限定的に公開される
         46 # dependency_ut_exeにはdependency/src/*.hへのアクセスが必要
         47 target_include_directories(dependency_ut_exe PRIVATE ../../../deep/h src)
         48 # @@@ sample end
         49 
         50 # テストを追加
         51 enable_testing()
         52 add_test(NAME dependency_ut COMMAND dependency_ut_exe)
         53 
         54 add_custom_target(dependency_ut_copy_test_data
         55     COMMAND ${CMAKE_COMMAND} -E copy_directory 
         56     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:dependency_ut_exe&gt;/ut_data
         57 )
         58 
         59 # カスタムターゲットを追加して、ビルド後にテストを実行
         60 add_custom_target(dependency_ut
         61     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         62     DEPENDS dependency_ut_exe dependency_ut_copy_test_data
         63 )
         64 </code></pre>
<h3
id="exampledepsfile_utilscmakelists.txt">example/deps/file_utils/CMakeLists.txt
<a id="SS_23_3_3"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(file_utils VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          8 
          9 add_library(file_utils STATIC
         10     src/load_store_row.cpp
         11     src/path_utils.cpp
         12 )
         13 
         14 target_include_directories(file_utils PUBLIC ../file_utils/h)
         15 
         16 add_executable(file_utils_ut_exe ut/load_store_row_ut.cpp ut/path_utils_ut.cpp)
         17 
         18 target_link_libraries(file_utils_ut_exe file_utils logging gtest gtest_main)
         19 
         20 target_include_directories(file_utils_ut_exe PRIVATE h ../../../deep/h ../logging/h ../lib/h)
         21 
         22 add_custom_command(TARGET file_utils_ut_exe POST_BUILD
         23     COMMAND ${CMAKE_COMMAND} -E copy_directory
         24     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:file_utils_ut_exe&gt;/ut_data
         25 )
         26 
         27 enable_testing()
         28 add_test(NAME file_utils_ut COMMAND file_utils_ut_exe)
         29 
         30 add_custom_target(file_utils_ut_copy_test_data
         31     COMMAND ${CMAKE_COMMAND} -E copy_directory 
         32     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:file_utils_ut_exe&gt;/ut_data
         33 )
         34 
         35 # カスタムターゲットを追加して、ビルド後にテストを実行
         36 add_custom_target(file_utils_ut
         37     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         38     DEPENDS file_utils_ut_exe file_utils_ut_copy_test_data
         39 )
         40 </code></pre>
<h3 id="exampledepslibcmakelists.txt">example/deps/lib/CMakeLists.txt
<a id="SS_23_3_4"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(lib VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_CXX_STANDARD_REQUIRED True)
          8 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          9 
         10 add_executable(lib_ut_exe ut/nstd_ut.cpp)
         11 
         12 if(NOT TARGET gtest)
         13     message(FATAL_ERROR &quot;gtest target not found. Make sure googletest is added at the top level CMakeLists.txt&quot;)
         14 endif()
         15 
         16 target_include_directories(lib_ut_exe PRIVATE h ../../h/ ../../../deep/h)
         17 target_link_libraries(lib_ut_exe gtest gtest_main)
         18 
         19 enable_testing()
         20 add_test(NAME lib_ut COMMAND lib_ut_exe)
         21 
         22 add_custom_target(lib_ut
         23     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         24     DEPENDS lib_ut_exe
         25 )
         26 </code></pre>
<h3
id="exampledepsloggingcmakelists.txt">example/deps/logging/CMakeLists.txt
<a id="SS_23_3_5"></a></h3>
<pre><code>          1 #logging/CMakeLists.txt
          2 
          3 cmake_minimum_required(VERSION 3.10)
          4 
          5 project(logging VERSION 1.0)
          6 
          7 # C++の標準を設定
          8 set(CMAKE_CXX_STANDARD 17)
          9 set(CMAKE_CXX_STANDARD_REQUIRED True)
         10 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
         11 
         12 add_library(logging STATIC src/logger.cpp)
         13 
         14 target_include_directories(logging PUBLIC h ../lib/h)
         15 
         16 add_executable(logging_ut_exe ut/logger_ut.cpp)
         17 
         18 target_include_directories(logging_ut_exe PRIVATE ../../../deep/h ../lib/h)
         19 target_link_libraries(logging_ut_exe logging gtest gtest_main)
         20 
         21 enable_testing()
         22 add_test(NAME logging_ut COMMAND logging_ut_exe)
         23 
         24 add_custom_target(logging_ut
         25     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         26     DEPENDS logging_ut_exe
         27 )
         28 </code></pre>
</body>
</html>
