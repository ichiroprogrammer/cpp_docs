<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Dependency generator(Deps/V00.03)</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #cccccc; background-color: #303030; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ffcfaf; } /* Alert */
    code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #dca3a3; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #f0dfaf; } /* ControlFlow */
    code span.ch { color: #dca3a3; } /* Char */
    code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
    code span.co { color: #7f9f7f; } /* Comment */
    code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
    code span.do { color: #7f9f7f; } /* Documentation */
    code span.dt { color: #dfdfbf; } /* DataType */
    code span.dv { color: #dcdccc; } /* DecVal */
    code span.er { color: #c3bf9f; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #c0bed1; } /* Float */
    code span.fu { color: #efef8f; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
    code span.kw { color: #f0dfaf; } /* Keyword */
    code span.op { color: #f0efd0; } /* Operator */
    code span.ot { color: #efef8f; } /* Other */
    code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
    code span.sc { color: #dca3a3; } /* SpecialChar */
    code span.ss { color: #cc9393; } /* SpecialString */
    code span.st { color: #cc9393; } /* String */
    code span.va { } /* Variable */
    code span.vs { color: #cc9393; } /* VerbatimString */
    code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

    body {
        margin: 0 auto;
        max-width: none;
        width: 1000px;
        padding-left: 50px;
        padding-right: 50px;
        padding-top: 50px;
        padding-bottom: 50px;
        hyphens: auto;
        overflow-wrap: break-word;
        text-rendering: optimizeLegibility;
        font-kerning: normal;
    }

    table {
        border-collapse: collapse;
    }

    table, th, td {
        border: 2px solid black;
    }

    header {
        margin-bottom: 4em;
        text-align: center;
        color: white;
        background-color: lightblue;
    }

    h1:not(:first-of-type) {
        page-break-before: always;
    }

  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Dependency generator(Deps/V00.03)</h1>
<p class="author">autor:ichiroprogrammer</p>
</header>
<!-- ./md/sample_code.md -->
<h1 id="sample-code">Sample Code <a id="SS_3"></a></h1>
<h2 id="c">C++ <a id="SS_3_1"></a></h2>
<h3
id="exampledepsappsrcdeps_opts.cpp">example/deps/app/src/deps_opts.cpp
<a id="SS_3_1_1"></a></h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;getopt.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="bu">std::</span>string DepsOpts<span class="op">::</span>Help<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;deps CMD [option] [DIRS] ...&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   CMD:&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p    : generate package to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         s    : generate srcs with incs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p2s  : generate package and srcs pairs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         p2p  : generate packages&#39; dependencies to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         a    : generate structure to OUT from p2p output.&quot;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         a2pu : generate plant uml package to OUT from p2p output.&quot;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         cyc  : exit !0 if found cyclic dependencies.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         help : show help message.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         h    : same as help(-h, --help).&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   options:&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --in IN     : use IN to execute CMD.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --out OUT   : CMD outputs to OUT.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --recursive : search dir as package from DIRS or IN contents.&quot;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -R          : same as --recursive.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --src_as_pkg: every src is as a package.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -s          : same as --src_as_pkg.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --log LOG   : logging to LOG(if LOG is </span><span class="sc">\&quot;</span><span class="st">-</span><span class="sc">\&quot;</span><span class="st">, using STDOUT).&quot;</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         --exclude PTN : exclude dirs which matchs to PTN(JS regex).&quot;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         -e PTN      : same as --exclude.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   DIRS: use DIRS to execute CMD.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;   IN  : 1st line in this file must be&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;             #dir2srcs for pkg-srcs file&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;         or&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;             #dir for pkg file.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="op">}</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> DepsOpts<span class="op">::</span>Cmd DepsOpts<span class="op">::</span>parse_command<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> <span class="op">*</span>argv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="cf">if</span> <span class="op">(</span>argc <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="cf">return</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>   <span class="op">}</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="kw">auto</span> command <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]};</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg<span class="op">;</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>   <span class="op">}</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>   <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;s&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenSrc<span class="op">;</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p2s&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">;</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;p2p&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;a&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenArch<span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;a2pu&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenPlantUml<span class="op">;</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;cyc&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="cf">return</span> Cmd<span class="op">::</span>GenCyclic<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>command <span class="op">==</span> <span class="st">&quot;h&quot;</span> <span class="op">||</span> command <span class="op">==</span> <span class="st">&quot;help&quot;</span> <span class="op">||</span> command <span class="op">==</span> <span class="st">&quot;-h&quot;</span> <span class="op">||</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>              command <span class="op">==</span> <span class="st">&quot;--help&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="cf">return</span> Cmd<span class="op">::</span>Help<span class="op">;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="op">}</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>   <span class="cf">return</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="op">}</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="dt">bool</span> DepsOpts<span class="op">::</span>parse_opt<span class="op">(</span><span class="dt">int</span> opt_char<span class="op">,</span> DepsOpts<span class="op">::</span>DepsOptsData <span class="op">&amp;</span>data<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="cf">switch</span> <span class="op">(</span>opt_char<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>   <span class="cf">case</span> <span class="ch">&#39;i&#39;</span><span class="op">:</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     data<span class="op">.</span>in <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="cf">case</span> <span class="ch">&#39;e&#39;</span><span class="op">:</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     data<span class="op">.</span>exclude <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="cf">case</span> <span class="ch">&#39;o&#39;</span><span class="op">:</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     data<span class="op">.</span>out <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>   <span class="cf">case</span> <span class="ch">&#39;l&#39;</span><span class="op">:</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     data<span class="op">.</span>log <span class="op">=</span> optarg<span class="op">;</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   <span class="cf">case</span> <span class="ch">&#39;R&#39;</span><span class="op">:</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     data<span class="op">.</span>recursive <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>   <span class="cf">case</span> <span class="ch">&#39;s&#39;</span><span class="op">:</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     data<span class="op">.</span>src_as_pkg <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   <span class="cf">case</span> <span class="ch">&#39;h&#39;</span><span class="op">:</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     data<span class="op">.</span>cmd <span class="op">=</span> Cmd<span class="op">::</span>Help<span class="op">;</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>   <span class="cf">default</span><span class="op">:</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>   <span class="op">}</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> <span class="op">}</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> </span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> DepsOpts<span class="op">::</span>DepsOptsData DepsOpts<span class="op">::</span>parse<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> <span class="op">*</span>argv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   DepsOptsData data<span class="op">{</span>parse_command<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">)};</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   <span class="cf">if</span> <span class="op">(</span>data<span class="op">.</span>cmd <span class="op">==</span> Cmd<span class="op">::</span>NotCmd <span class="op">||</span> data<span class="op">.</span>cmd <span class="op">==</span> Cmd<span class="op">::</span>Help<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="op">}</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>   optind <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="at">static</span> <span class="kw">struct</span> option <span class="at">const</span> opts<span class="op">[]</span> <span class="op">=</span> <span class="op">{{</span><span class="st">&quot;in&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;i&#39;</span><span class="op">},</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>                                        <span class="op">{</span><span class="st">&quot;out&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">},</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                                        <span class="op">{</span><span class="st">&quot;exclude&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">},</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>                                        <span class="op">{</span><span class="st">&quot;recursive&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;R&#39;</span><span class="op">},</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>                                        <span class="op">{</span><span class="st">&quot;src_as_pkg&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;s&#39;</span><span class="op">},</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>                                        <span class="op">{</span><span class="st">&quot;log&quot;</span><span class="op">,</span> required_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">},</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>                                        <span class="op">{</span><span class="st">&quot;help&quot;</span><span class="op">,</span> no_argument<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39;h&#39;</span><span class="op">},</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>                                        <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">}};</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>   <span class="cf">for</span> <span class="op">(;;)</span> <span class="op">{</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     <span class="kw">auto</span> opt_char <span class="op">=</span> getopt_long<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">,</span> <span class="st">&quot;i:o:e:l:Rsh&quot;</span><span class="op">,</span> opts<span class="op">,</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> </span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>     <span class="cf">if</span> <span class="op">(!</span>parse_opt<span class="op">(</span>opt_char<span class="op">,</span> data<span class="op">))</span> <span class="op">{</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>       <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>     <span class="op">}</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>   <span class="op">}</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> </span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>   <span class="cf">if</span> <span class="op">(</span>optind <span class="op">&lt;</span> argc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="cf">while</span> <span class="op">(</span>optind <span class="op">&lt;</span> argc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>       data<span class="op">.</span>dirs<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>argv<span class="op">[</span>optind<span class="op">++]));</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>     <span class="op">}</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>   <span class="op">}</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> </span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>   <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="op">}</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> </span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> <span class="bu">std::</span>string to_string_cmd<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd cmd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>   <span class="cf">switch</span> <span class="op">(</span>cmd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">:</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     <span class="cf">return</span> <span class="st">&quot;GenPkg&quot;</span><span class="op">;</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">:</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     <span class="cf">return</span> <span class="st">&quot;GenSrc&quot;</span><span class="op">;</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">:</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="cf">return</span> <span class="st">&quot;GenPkg2Srcs&quot;</span><span class="op">;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">:</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>     <span class="cf">return</span> <span class="st">&quot;GenPkg2Pkg&quot;</span><span class="op">;</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">:</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="cf">return</span> <span class="st">&quot;GenPlantUml&quot;</span><span class="op">;</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenCyclic<span class="op">:</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="cf">return</span> <span class="st">&quot;GenCyclic&quot;</span><span class="op">;</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">:</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>     <span class="cf">return</span> <span class="st">&quot;Help&quot;</span><span class="op">;</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>   <span class="cf">case</span> DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">:</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>   <span class="cf">default</span><span class="op">:</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="cf">return</span> <span class="st">&quot;NotCmd&quot;</span><span class="op">;</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>   <span class="op">}</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> <span class="op">}</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> </span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span> <span class="bu">std::</span>string ToStringDepsOpts<span class="op">(</span>DepsOpts <span class="at">const</span> <span class="op">&amp;</span>deps_opts<span class="op">,</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>                              <span class="bu">std::</span>string_view indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>   <span class="dt">char</span> <span class="at">const</span> cmd<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;cmd       : &quot;</span><span class="op">;</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>   <span class="kw">auto</span> <span class="at">const</span> indent2 <span class="op">=</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>       <span class="bu">std::</span>string<span class="op">(</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>cmd<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">+</span> <span class="bu">std::</span>string<span class="op">{</span>indent<span class="op">};</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>   ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>boolalpha<span class="op">;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> </span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> cmd <span class="op">&lt;&lt;</span> to_string_cmd<span class="op">(</span>deps_opts<span class="op">.</span>GetCmd<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;in        : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>In<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;out       : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Out<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;recursive : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>IsRecursive<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;src_as_pkg: &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>IsSrcPkg<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;log       : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Log<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;dirs      : &quot;</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>      <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>deps_opts<span class="op">.</span>Dirs<span class="op">(),</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span> <span class="op">+</span> indent2<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;exclude   : &quot;</span> <span class="op">&lt;&lt;</span> deps_opts<span class="op">.</span>Exclude<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>   ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> <span class="st">&quot;parsed    : &quot;</span> <span class="op">&lt;&lt;</span> <span class="op">!!</span>deps_opts<span class="op">;</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> <span class="op">}</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> <span class="op">}</span> <span class="co">// namespace App</span></span></code></pre></div>
<h3 id="exampledepsappsrcdeps_opts.h">example/deps/app/src/deps_opts.h
<a id="SS_3_1_2"></a></h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;ostream&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">class</span> DepsOpts <span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span>   <span class="kw">enum</span> <span class="kw">class</span> Cmd <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>     GenPkg<span class="op">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     GenSrc<span class="op">,</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>     GenPkg2Srcs<span class="op">,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     GenPkg2Pkg<span class="op">,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     GenArch<span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     GenPlantUml<span class="op">,</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     GenCyclic<span class="op">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     Help<span class="op">,</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     NotCmd<span class="op">,</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="op">};</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="kw">explicit</span> DepsOpts<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> <span class="op">*</span>argv<span class="op">)</span> <span class="op">:</span> <span class="va">data_</span><span class="op">{</span>parse<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="at">static</span> <span class="bu">std::</span>string Help<span class="op">();</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   Cmd GetCmd<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>cmd<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>In<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>in<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>Out<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>out<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>Log<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>log<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="dt">bool</span> IsRecursive<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>recursive<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="dt">bool</span> IsSrcPkg<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>src_as_pkg<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>Dirs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>dirs<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>Exclude<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>exclude<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="kw">explicit</span> <span class="kw">operator</span> <span class="dt">bool</span><span class="op">()</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">data_</span><span class="op">.</span>cmd <span class="op">!=</span> Cmd<span class="op">::</span>NotCmd<span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="kw">struct</span> DepsOptsData <span class="op">{</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     DepsOptsData<span class="op">(</span>Cmd cmd_arg<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">:</span> cmd<span class="op">{</span>cmd_arg<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     Cmd cmd<span class="op">;</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="bu">std::</span>string in<span class="op">{};</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="bu">std::</span>string out<span class="op">{};</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="bu">std::</span>string log<span class="op">{};</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     FileUtils<span class="op">::</span><span class="dt">Paths_t</span> dirs<span class="op">{};</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="bu">std::</span>string exclude<span class="op">{};</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="dt">bool</span> recursive<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="dt">bool</span> src_as_pkg<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="op">};</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   DepsOptsData <span class="at">const</span> <span class="va">data_</span><span class="op">;</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="at">static</span> DepsOptsData parse<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> <span class="op">*</span>argv<span class="op">);</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="at">static</span> Cmd parse_command<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> <span class="op">*</span>argv<span class="op">);</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="at">static</span> <span class="dt">bool</span> parse_opt<span class="op">(</span><span class="dt">int</span> opt_char<span class="op">,</span> DepsOptsData <span class="op">&amp;</span>data<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">};</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="bu">std::</span>string ToStringDepsOpts<span class="op">(</span>DepsOpts <span class="at">const</span> <span class="op">&amp;</span>deps_opts<span class="op">,</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>                              <span class="bu">std::</span>string_view indent <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> DepsOpts <span class="at">const</span> <span class="op">&amp;</span>opts<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepsOpts<span class="op">(</span>opts<span class="op">);</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">}</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="co">// @@@ sample end</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span> <span class="co">// namespace App</span></span></code></pre></div>
<h3 id="exampledepsappsrcmain.cpp">example/deps/app/src/main.cpp
<a id="SS_3_1_3"></a></h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;stdexcept&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">class</span> OStreamSelector <span class="op">{</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="kw">explicit</span> OStreamSelector<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>out<span class="op">)</span> <span class="op">:</span> <span class="va">os_</span><span class="op">{</span>select<span class="op">(</span>out<span class="op">,</span> <span class="va">out_f_</span><span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="bu">std::</span>ostream <span class="op">&amp;</span>OStream<span class="op">()</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">os_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="bu">std::</span>ofstream <span class="va">out_f_</span><span class="op">{};</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="va">os_</span><span class="op">;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="at">static</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span>select<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>out<span class="op">,</span> <span class="bu">std::</span>ofstream <span class="op">&amp;</span>out_f<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="cf">if</span> <span class="op">(</span>out<span class="op">.</span>size<span class="op">())</span> <span class="op">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>       out_f<span class="op">.</span>open<span class="op">(</span>out<span class="op">);</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>       <span class="ot">assert</span><span class="op">(</span>out_f<span class="op">);</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>       <span class="cf">return</span> out_f<span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>       <span class="cf">return</span> <span class="bu">std::</span>cout<span class="op">;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="op">}</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="op">}</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="op">};</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="kw">class</span> ScenarioGeneratorNop <span class="op">:</span> <span class="kw">public</span> Dependency<span class="op">::</span>ScenarioGenerator <span class="op">{</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="kw">explicit</span> ScenarioGeneratorNop<span class="op">(</span><span class="dt">bool</span> no_error<span class="op">)</span> <span class="op">:</span> <span class="va">no_error_</span><span class="op">{</span>no_error<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;)</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="cf">return</span> <span class="va">no_error_</span><span class="op">;</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="op">}</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="dt">bool</span> <span class="va">no_error_</span><span class="op">;</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">};</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>Dependency<span class="op">::</span>ScenarioGenerator<span class="op">&gt;</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> gen_scenario<span class="op">(</span>App<span class="op">::</span>DepsOpts <span class="at">const</span> <span class="op">&amp;</span>opt<span class="op">)</span> <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="kw">using</span> <span class="kw">namespace</span> Dependency<span class="op">;</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="cf">switch</span> <span class="op">(</span>opt<span class="op">.</span>GetCmd<span class="op">())</span> <span class="op">{</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">:</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg&quot;</span><span class="op">);</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>PkgGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>                                           opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">:</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg&quot;</span><span class="op">);</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>SrcsGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>                                            opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="co">// @@@ ignore begin</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">:</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg2Srcs&quot;</span><span class="op">);</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Pkg2SrcsGenerator<span class="op">&gt;(</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>IsSrcPkg<span class="op">(),</span> opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">:</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenPkg2Pkg&quot;</span><span class="op">);</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Pkg2PkgGenerator<span class="op">&gt;(</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>         opt<span class="op">.</span>In<span class="op">(),</span> opt<span class="op">.</span>IsRecursive<span class="op">(),</span> opt<span class="op">.</span>IsSrcPkg<span class="op">(),</span> opt<span class="op">.</span>Dirs<span class="op">(),</span> opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenArch<span class="op">:</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenArch&quot;</span><span class="op">);</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">:</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenPlantUml&quot;</span><span class="op">);</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>Arch2PUmlGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenCyclic<span class="op">:</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     LOGGER<span class="op">(</span><span class="st">&quot;start GenCyclic&quot;</span><span class="op">);</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>CyclicGenerator<span class="op">&gt;(</span>opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">:</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Help<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   <span class="cf">case</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">:</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="cf">default</span><span class="op">:</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> App<span class="op">::</span>DepsOpts<span class="op">::</span>Help<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="co">// @@@ ignore end</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   LOGGER<span class="op">(</span><span class="st">&quot;error occured:&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> e<span class="op">.</span>what<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> </span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>   <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="op">}</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> <span class="co">// @@@ ignore begin</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> <span class="cf">catch</span> <span class="op">(...)</span> <span class="op">{</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   LOGGER<span class="op">(</span><span class="st">&quot;unknown error occured:&quot;</span><span class="op">);</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   <span class="cf">return</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ScenarioGeneratorNop<span class="op">&gt;(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="op">}</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="co">// @@@ ignore end</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> <span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   App<span class="op">::</span>DepsOpts d_opt<span class="op">{</span>argc<span class="op">,</span> argv<span class="op">};</span></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>   LOGGER_INIT<span class="op">(</span>d_opt<span class="op">.</span>Log<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;-&quot;</span> <span class="op">?</span> <span class="kw">nullptr</span> <span class="op">:</span> d_opt<span class="op">.</span>Log<span class="op">().</span>c_str<span class="op">());</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>   LOGGER<span class="op">(</span><span class="st">&quot;Options&quot;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">,</span> d_opt<span class="op">);</span></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> </span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>   <span class="kw">auto</span> out_sel <span class="op">=</span> OStreamSelector<span class="op">{</span>d_opt<span class="op">.</span>Out<span class="op">()};</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   <span class="kw">auto</span> exit_code <span class="op">=</span> gen_scenario<span class="op">(</span>d_opt<span class="op">)-&gt;</span>Output<span class="op">(</span>out_sel<span class="op">.</span>OStream<span class="op">())</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   LOGGER<span class="op">(</span><span class="st">&quot;Exit&quot;</span><span class="op">,</span> exit_code<span class="op">);</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="cf">return</span> exit_code<span class="op">;</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="op">}</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h3
id="exampledepsapputdeps_opts_ut.cpp">example/deps/app/ut/deps_opts_ut.cpp
<a id="SS_3_1_4"></a></h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;deps_opts.h&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> App <span class="op">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>deps_args<span class="op">,</span> DepsOpts<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="dt">char</span> prog<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;prog&quot;</span><span class="op">;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="dt">char</span> cmd_p<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;p&quot;</span><span class="op">;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="dt">char</span> cmd_s<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;s&quot;</span><span class="op">;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="dt">char</span> cmd_p2s<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;p2s&quot;</span><span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="dt">char</span> cmd_p2p<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;p2p&quot;</span><span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="dt">char</span> cmd_a<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;a&quot;</span><span class="op">;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="dt">char</span> cmd_a2pu<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;a2pu&quot;</span><span class="op">;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="dt">char</span> cmd_help<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;help&quot;</span><span class="op">;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="dt">char</span> cmd_dd_help<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--help&quot;</span><span class="op">;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="dt">char</span> cmd_h<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;h&quot;</span><span class="op">;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="dt">char</span> cmd_d_h<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-h&quot;</span><span class="op">;</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="dt">char</span> cmd_unknown<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;unknown&quot;</span><span class="op">;</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="dt">char</span> opt_in<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--in&quot;</span><span class="op">;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="dt">char</span> opt_in_arg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;in-file&quot;</span><span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="dt">char</span> opt_out<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--out&quot;</span><span class="op">;</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="dt">char</span> opt_out_arg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;out-file&quot;</span><span class="op">;</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="dt">char</span> opt_e<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-e&quot;</span><span class="op">;</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="dt">char</span> opt_exclude<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--exclude&quot;</span><span class="op">;</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="dt">char</span> opt_e_arg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;pattern.*&quot;</span><span class="op">;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="dt">char</span> opt_recursive<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--recursive&quot;</span><span class="op">;</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="dt">char</span> opt_src_pkg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--src_as_pkg&quot;</span><span class="op">;</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="dt">char</span> opt_log<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--log&quot;</span><span class="op">;</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="dt">char</span> opt_log_arg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;log-file&quot;</span><span class="op">;</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="dt">char</span> opt_log_dash<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-&quot;</span><span class="op">;</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="dt">char</span> opt_R<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-R&quot;</span><span class="op">;</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="dt">char</span> opt_s<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-s&quot;</span><span class="op">;</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="dt">char</span> opt_help<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;--help&quot;</span><span class="op">;</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="dt">char</span> opt_h<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;-h&quot;</span><span class="op">;</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="dt">char</span> dir0<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;dir0&quot;</span><span class="op">;</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   <span class="dt">char</span> dir1<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;dir1&quot;</span><span class="op">;</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="dt">char</span> dir2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;dir2&quot;</span><span class="op">;</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="op">{</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>        cmd_p<span class="op">,</span> opt_recursive<span class="op">,</span> opt_out<span class="op">,</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>                        opt_out_arg<span class="op">,</span> dir0<span class="op">,</span>  dir1<span class="op">,</span>          dir2<span class="op">};</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   <span class="op">}</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="op">{</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span>prog<span class="op">,</span>        cmd_p<span class="op">,</span> opt_src_pkg<span class="op">,</span> opt_out<span class="op">,</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>                           opt_out_arg<span class="op">,</span> dir0<span class="op">,</span>  dir1<span class="op">,</span>        dir2<span class="op">};</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   <span class="op">}</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>   <span class="op">{</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>        cmd_s<span class="op">,</span> opt_src_pkg<span class="op">,</span> opt_out<span class="op">,</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>                        opt_out_arg<span class="op">,</span> dir0<span class="op">,</span>  dir1<span class="op">,</span>        dir2<span class="op">};</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenSrc<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">,</span> dir1<span class="op">,</span> dir2<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>   <span class="op">}</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="op">{</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>       cmd_p2s<span class="op">,</span>     opt_R<span class="op">,</span>     opt_in<span class="op">,</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>                        opt_in_arg<span class="op">,</span> opt_exclude<span class="op">,</span> opt_e_arg<span class="op">,</span> dir0<span class="op">};</span></span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> </span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> </span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     ASSERT_EQ<span class="op">(</span>opt_e_arg<span class="op">,</span> d_opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>   <span class="op">}</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   <span class="op">{</span></span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>       cmd_p2s<span class="op">,</span> opt_s<span class="op">,</span>     opt_in<span class="op">,</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>                        opt_in_arg<span class="op">,</span> opt_e<span class="op">,</span>   opt_e_arg<span class="op">,</span> dir0<span class="op">};</span></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> </span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Srcs<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">.</span>IsSrcPkg<span class="op">());</span></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span>dir0<span class="op">}),</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     ASSERT_EQ<span class="op">(</span>opt_e_arg<span class="op">,</span> d_opt<span class="op">.</span>Exclude<span class="op">());</span></span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="op">}</span></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>   <span class="op">{</span></span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p2p<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg2Pkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>   <span class="op">}</span></span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>   <span class="op">{</span></span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_a<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> </span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenArch<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>   <span class="op">}</span></span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>   <span class="op">{</span></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>       cmd_a2pu<span class="op">,</span> opt_in<span class="op">,</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>                        opt_in_arg<span class="op">,</span> opt_out<span class="op">,</span>  opt_out_arg<span class="op">};</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> </span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPlantUml<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">.</span>IsRecursive<span class="op">());</span></span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> d_opt<span class="op">.</span>Dirs<span class="op">());</span></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>   <span class="op">}</span></span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="op">{</span></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_help<span class="op">};</span></span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> </span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>   <span class="op">}</span></span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>   <span class="op">{</span></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_dd_help<span class="op">};</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> </span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> </span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>   <span class="op">}</span></span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>   <span class="op">{</span></span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_h<span class="op">};</span></span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> </span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>   <span class="op">}</span></span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>   <span class="op">{</span></span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_d_h<span class="op">};</span></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> </span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> </span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>   <span class="op">}</span></span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   <span class="op">{</span></span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_unknown<span class="op">};</span></span>
<span id="cb4-185"><a href="#cb4-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb4-186"><a href="#cb4-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-187"><a href="#cb4-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> </span>
<span id="cb4-188"><a href="#cb4-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>NotCmd<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-189"><a href="#cb4-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>     ASSERT_FALSE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-190"><a href="#cb4-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>   <span class="op">}</span></span>
<span id="cb4-191"><a href="#cb4-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>   <span class="op">{</span></span>
<span id="cb4-192"><a href="#cb4-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span>    cmd_p<span class="op">,</span>       opt_recursive<span class="op">,</span></span>
<span id="cb4-193"><a href="#cb4-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>                        opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> opt_help<span class="op">};</span></span>
<span id="cb4-194"><a href="#cb4-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb4-195"><a href="#cb4-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-196"><a href="#cb4-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> </span>
<span id="cb4-197"><a href="#cb4-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-198"><a href="#cb4-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-199"><a href="#cb4-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>   <span class="op">}</span></span>
<span id="cb4-200"><a href="#cb4-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>   <span class="op">{</span></span>
<span id="cb4-201"><a href="#cb4-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_recursive<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">,</span> opt_h<span class="op">};</span></span>
<span id="cb4-202"><a href="#cb4-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> </span>
<span id="cb4-203"><a href="#cb4-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-204"><a href="#cb4-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> </span>
<span id="cb4-205"><a href="#cb4-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>Help<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-206"><a href="#cb4-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-207"><a href="#cb4-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>   <span class="op">}</span></span>
<span id="cb4-208"><a href="#cb4-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>   <span class="op">{</span></span>
<span id="cb4-209"><a href="#cb4-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_log<span class="op">,</span> opt_log_arg<span class="op">,</span> opt_out<span class="op">,</span> opt_out_arg<span class="op">};</span></span>
<span id="cb4-210"><a href="#cb4-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> </span>
<span id="cb4-211"><a href="#cb4-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-212"><a href="#cb4-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> </span>
<span id="cb4-213"><a href="#cb4-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-214"><a href="#cb4-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>     ASSERT_EQ<span class="op">(</span>opt_log_arg<span class="op">,</span> d_opt<span class="op">.</span>Log<span class="op">());</span></span>
<span id="cb4-215"><a href="#cb4-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>     ASSERT_EQ<span class="op">(</span>opt_out_arg<span class="op">,</span> d_opt<span class="op">.</span>Out<span class="op">());</span></span>
<span id="cb4-216"><a href="#cb4-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-217"><a href="#cb4-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>   <span class="op">}</span></span>
<span id="cb4-218"><a href="#cb4-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>   <span class="op">{</span></span>
<span id="cb4-219"><a href="#cb4-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>     <span class="dt">char</span> <span class="op">*</span><span class="at">const</span> argv<span class="op">[]{</span>prog<span class="op">,</span> cmd_p<span class="op">,</span> opt_log<span class="op">,</span> opt_log_dash<span class="op">,</span> opt_in<span class="op">,</span> opt_in_arg<span class="op">};</span></span>
<span id="cb4-220"><a href="#cb4-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span> </span>
<span id="cb4-221"><a href="#cb4-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     <span class="kw">auto</span> d_opt <span class="op">=</span> DepsOpts<span class="op">{</span>Nstd<span class="op">::</span>ArrayLength<span class="op">(</span>argv<span class="op">),</span> argv<span class="op">};</span></span>
<span id="cb4-222"><a href="#cb4-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> </span>
<span id="cb4-223"><a href="#cb4-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>     ASSERT_EQ<span class="op">(</span>DepsOpts<span class="op">::</span>Cmd<span class="op">::</span>GenPkg<span class="op">,</span> d_opt<span class="op">.</span>GetCmd<span class="op">());</span></span>
<span id="cb4-224"><a href="#cb4-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>     ASSERT_EQ<span class="op">(</span>opt_log_dash<span class="op">,</span> d_opt<span class="op">.</span>Log<span class="op">());</span></span>
<span id="cb4-225"><a href="#cb4-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>     ASSERT_EQ<span class="op">(</span>opt_in_arg<span class="op">,</span> d_opt<span class="op">.</span>In<span class="op">());</span></span>
<span id="cb4-226"><a href="#cb4-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>     ASSERT_TRUE<span class="op">(</span>d_opt<span class="op">);</span></span>
<span id="cb4-227"><a href="#cb4-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>   <span class="op">}</span></span>
<span id="cb4-228"><a href="#cb4-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span> <span class="op">}</span></span>
<span id="cb4-229"><a href="#cb4-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb4-230"><a href="#cb4-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span> <span class="op">}</span> <span class="co">// namespace App</span></span></code></pre></div>
<h3
id="exampledepsdependencyhdependencydeps_scenario.h">example/deps/dependency/h/dependency/deps_scenario.h
<a id="SS_3_1_5"></a></h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;memory&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">class</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">virtual</span> <span class="op">~</span>ScenarioGenerator<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">};</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="kw">class</span> PkgGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="kw">explicit</span> PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                         FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>                         <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">);</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="va">dirs_</span><span class="op">;</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">};</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="kw">class</span> SrcsGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="kw">explicit</span> SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>                          FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>                          <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">);</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="va">dirs_</span><span class="op">;</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">};</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="kw">class</span> Pkg2SrcsGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="kw">explicit</span> Pkg2SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>                              <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>                              FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>                              <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">);</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="va">dirs2srcs_</span><span class="op">;</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="op">};</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="kw">class</span> Pkg2PkgGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="kw">explicit</span> Pkg2PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>                             <span class="dt">bool</span> src_as_pkg<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>                             <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">);</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="va">dirs2srcs_</span><span class="op">;</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">};</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="kw">class</span> ArchGenerator <span class="op">:</span> <span class="kw">public</span> ScenarioGenerator <span class="op">{</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="kw">explicit</span> ArchGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">);</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="op">~</span>ArchGenerator<span class="op">();</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> </span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> <span class="kw">protected</span><span class="op">:</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>   <span class="kw">struct</span> Impl<span class="op">;</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>Impl<span class="op">&gt;</span> <span class="va">impl_</span><span class="op">;</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="op">};</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="kw">class</span> Arch2PUmlGenerator <span class="op">:</span> <span class="kw">public</span> ArchGenerator <span class="op">{</span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>   <span class="kw">explicit</span> Arch2PUmlGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">);</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="op">};</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="kw">class</span> CyclicGenerator <span class="op">:</span> <span class="kw">public</span> ArchGenerator <span class="op">{</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>   <span class="kw">explicit</span> CyclicGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">);</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="kw">virtual</span> <span class="dt">bool</span> Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>   <span class="dt">bool</span> <span class="va">has_cyclic_dep_</span><span class="op">;</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> <span class="op">};</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcarch_pkg.cpp">example/deps/dependency/src/arch_pkg.cpp
<a id="SS_3_1_6"></a></h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">void</span> ArchPkg<span class="op">::</span>set_cyclic<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">*</span>pkg<span class="op">,</span> <span class="dt">bool</span> is_cyclic<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>   <span class="ot">assert</span><span class="op">(</span><span class="bu">std::</span>count<span class="op">(</span><span class="va">depend_on_</span><span class="op">.</span>cbegin<span class="op">(),</span> <span class="va">depend_on_</span><span class="op">.</span>cend<span class="op">(),</span> pkg<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="ot">assert</span><span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> <span class="va">cyclic_</span><span class="op">[</span>pkg<span class="op">]</span> <span class="op">==</span> is_cyclic<span class="op">);</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="va">cyclic_</span><span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>pkg<span class="op">,</span> is_cyclic<span class="op">));</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">}</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>is_cyclic<span class="op">(</span><span class="dt">ArchPkgs_t</span> <span class="op">&amp;</span>history<span class="op">,</span> <span class="dt">size_t</span> depth<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="cf">if</span> <span class="op">(++</span>depth <span class="op">&gt;</span> <span class="va">max_depth_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">&quot;too deep dependency:&quot;</span> <span class="op">&lt;&lt;</span> <span class="va">name_</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="op">}</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="kw">auto</span> <span class="at">const</span> it <span class="op">=</span> find<span class="op">(</span>history<span class="op">.</span>cbegin<span class="op">(),</span> history<span class="op">.</span>cend<span class="op">(),</span> <span class="kw">this</span><span class="op">);</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="cf">if</span> <span class="op">(</span>it <span class="op">!=</span> history<span class="op">.</span>cend<span class="op">())</span> <span class="op">{</span> <span class="co">// 循環検出</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it2 <span class="op">=</span> it<span class="op">;</span> it2 <span class="op">!=</span> history<span class="op">.</span>cend<span class="op">();</span> <span class="op">++</span>it2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>       <span class="kw">auto</span> next <span class="op">=</span> <span class="op">(</span><span class="bu">std::</span>next<span class="op">(</span>it2<span class="op">)</span> <span class="op">==</span> history<span class="op">.</span>cend<span class="op">())</span> <span class="op">?</span> it <span class="op">:</span> <span class="bu">std::</span>next<span class="op">(</span>it2<span class="op">);</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>       <span class="op">(*</span>it2<span class="op">)-&gt;</span>set_cyclic<span class="op">(*</span>next<span class="op">,</span> <span class="kw">true</span><span class="op">);</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="op">}</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="co">// it == history.cbegin()ならば、一番上からの循環 A-&gt;B-&gt;C-&gt;...-&gt;A</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="co">// it != history.cbegin()ならば、上記以外の循環 A-&gt;B-&gt;C-&gt;...-&gt;B</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="cf">return</span> it <span class="op">==</span> history<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="op">}</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="kw">auto</span> gs <span class="op">=</span> Nstd<span class="op">::</span>ScopedGuard<span class="op">{[&amp;</span>history<span class="op">]</span> <span class="op">{</span> history<span class="op">.</span>pop_back<span class="op">();</span> <span class="op">}};</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   history<span class="op">.</span>push_back<span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">*</span>pkg <span class="op">:</span> <span class="va">depend_on_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">-&gt;</span>is_cyclic<span class="op">(</span>history<span class="op">,</span> depth<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     <span class="op">}</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="op">}</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="op">}</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>IsCyclic<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>count<span class="op">(</span><span class="va">depend_on_</span><span class="op">.</span>cbegin<span class="op">(),</span> <span class="va">depend_on_</span><span class="op">.</span>cend<span class="op">(),</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="op">}</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="cf">if</span> <span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(&amp;</span>pkg<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="dt">ArchPkgs_t</span> history<span class="op">{</span><span class="kw">this</span><span class="op">};</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     set_cyclic<span class="op">(&amp;</span>pkg<span class="op">,</span> pkg<span class="op">.</span>is_cyclic<span class="op">(</span>history<span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="op">}</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="ot">assert</span><span class="op">(</span><span class="va">cyclic_</span><span class="op">.</span>count<span class="op">(&amp;</span>pkg<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>   <span class="cf">return</span> <span class="va">cyclic_</span><span class="op">[&amp;</span>pkg<span class="op">];</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="op">}</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="dt">bool</span> ArchPkg<span class="op">::</span>IsCyclic<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">*</span>pkg <span class="op">:</span> DependOn<span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="cf">if</span> <span class="op">(</span>IsCyclic<span class="op">(*</span>pkg<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="op">}</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>   <span class="op">}</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="op">}</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> ArchPkg<span class="op">::</span><span class="dt">Map_Path_ArchPkg_t</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> ArchPkg<span class="op">::</span>build_depend_on<span class="op">(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>dep_rel<span class="op">,</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>                          <span class="dt">Map_Path_ArchPkg_t</span> <span class="op">&amp;&amp;</span>pkg_all<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="kw">auto</span> <span class="at">const</span> a_path <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">);</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>   <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>a_path<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     pkg_all<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>a_path<span class="op">,</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchPkg<span class="op">&gt;(</span>a_path<span class="op">)));</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   <span class="op">}</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>   <span class="kw">auto</span> <span class="at">const</span> b_path <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">);</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>b_path<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     pkg_all<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>b_path<span class="op">,</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchPkg<span class="op">&gt;(</span>b_path<span class="op">)));</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> </span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="dt">ArchPkgPtr_t</span> <span class="op">&amp;</span>a_ptr <span class="op">=</span> pkg_all<span class="op">.</span>at<span class="op">(</span>a_path<span class="op">);</span></span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   <span class="dt">ArchPkgPtr_t</span> <span class="op">&amp;</span>b_ptr <span class="op">=</span> pkg_all<span class="op">.</span>at<span class="op">(</span>b_path<span class="op">);</span></span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     a_ptr<span class="op">-&gt;</span><span class="va">depend_on_</span><span class="op">.</span>push_back<span class="op">(</span>b_ptr<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>   <span class="op">}</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>   <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>     b_ptr<span class="op">-&gt;</span><span class="va">depend_on_</span><span class="op">.</span>push_back<span class="op">(</span>a_ptr<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   <span class="op">}</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>   <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">);</span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> <span class="op">}</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> </span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> <span class="dt">Arch_t</span> ArchPkg<span class="op">::</span>build_children<span class="op">(</span><span class="dt">Map_Path_ArchPkg_t</span> <span class="op">&amp;&amp;</span>pkg_all<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   <span class="kw">auto</span> cache <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> ArchPkg <span class="op">*&gt;{};</span></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   <span class="kw">auto</span> top <span class="op">=</span> <span class="dt">Arch_t</span><span class="op">{};</span></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> </span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;[</span>path<span class="op">,</span> pkg<span class="op">]</span> <span class="op">:</span> pkg_all<span class="op">)</span> <span class="op">{</span> <span class="co">// C++17 style</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>     <span class="kw">auto</span> <span class="at">const</span> parent_name <span class="op">=</span> path<span class="op">.</span>parent_path<span class="op">();</span></span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>     cache<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>path<span class="op">,</span> pkg<span class="op">.</span>get<span class="op">()));</span></span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="cf">if</span> <span class="op">(</span>pkg_all<span class="op">.</span>count<span class="op">(</span>parent_name<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>       top<span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg<span class="op">));</span></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>       ArchPkg <span class="op">*</span>parent <span class="op">=</span> cache<span class="op">.</span>count<span class="op">(</span>parent_name<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span></span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>                             <span class="op">?</span> cache<span class="op">.</span>at<span class="op">(</span>parent_name<span class="op">)</span></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>                             <span class="op">:</span> pkg_all<span class="op">.</span>at<span class="op">(</span>parent_name<span class="op">).</span>get<span class="op">();</span></span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> </span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>       pkg<span class="op">-&gt;</span><span class="va">parent_</span> <span class="op">=</span> parent<span class="op">;</span></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>       parent<span class="op">-&gt;</span><span class="va">children_</span><span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg<span class="op">));</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>     <span class="op">}</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>   <span class="op">}</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>   <span class="cf">return</span> top<span class="op">;</span></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="op">}</span></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> <span class="dt">Arch_t</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>   <span class="kw">auto</span> pkg_all <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">ArchPkgPtr_t</span><span class="op">&gt;{};</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> </span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>     pkg_all <span class="op">=</span> build_depend_on<span class="op">(</span>d<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">));</span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>   <span class="op">}</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>   <span class="kw">auto</span> top <span class="op">=</span> <span class="dt">Arch_t</span><span class="op">{</span>build_children<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>pkg_all<span class="op">))};</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> </span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>   <span class="cf">return</span> top<span class="op">;</span></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> <span class="op">}</span></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> <span class="bu">std::</span>string ArchPkg<span class="op">::</span>make_full_name<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>   <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>Parent<span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>     <span class="cf">return</span> make_full_name<span class="op">(*</span>pkg<span class="op">.</span>Parent<span class="op">())</span> <span class="op">+</span> <span class="st">&quot;/&quot;</span> <span class="op">+</span> pkg<span class="op">.</span>Name<span class="op">();</span></span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="cf">return</span> pkg<span class="op">.</span>Name<span class="op">();</span></span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>   <span class="op">}</span></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="op">}</span></span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> </span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> ArchPkg <span class="at">const</span> <span class="op">*</span>FindArchPkgByName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>                                  <span class="bu">std::</span>string_view pkg_name<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>   <span class="cf">for</span> <span class="op">(</span><span class="dt">ArchPkgPtr_t</span> <span class="at">const</span> <span class="op">&amp;</span>pkg_ptr <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>     <span class="cf">if</span> <span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Name<span class="op">()</span> <span class="op">==</span> pkg_name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>       <span class="cf">return</span> pkg_ptr<span class="op">.</span>get<span class="op">();</span></span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>       ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_found <span class="op">=</span></span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>           FindArchPkgByName<span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Children<span class="op">(),</span> pkg_name<span class="op">);</span></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>       <span class="cf">if</span> <span class="op">(</span>pkg_found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>         <span class="cf">return</span> pkg_found<span class="op">;</span></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>       <span class="op">}</span></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     <span class="op">}</span></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>   <span class="op">}</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>   <span class="cf">return</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> <span class="op">}</span></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span> </span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> ArchPkg <span class="at">const</span> <span class="op">*</span>FindArchPkgByFullName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                                      <span class="bu">std::</span>string_view full_name<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>   <span class="cf">for</span> <span class="op">(</span><span class="dt">ArchPkgPtr_t</span> <span class="at">const</span> <span class="op">&amp;</span>pkg_ptr <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="cf">if</span> <span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>FullName<span class="op">()</span> <span class="op">==</span> full_name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>       <span class="cf">return</span> pkg_ptr<span class="op">.</span>get<span class="op">();</span></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>       ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_found <span class="op">=</span></span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>           FindArchPkgByFullName<span class="op">(</span>pkg_ptr<span class="op">-&gt;</span>Children<span class="op">(),</span> full_name<span class="op">);</span></span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>       <span class="cf">if</span> <span class="op">(</span>pkg_found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>         <span class="cf">return</span> pkg_found<span class="op">;</span></span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>       <span class="op">}</span></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>     <span class="op">}</span></span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>   <span class="op">}</span></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>   <span class="cf">return</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> <span class="op">}</span></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> </span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> <span class="bu">std::</span>string unique_str_name<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>full_name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>   <span class="kw">auto</span> ret <span class="op">=</span> Nstd<span class="op">::</span>Replace<span class="op">(</span>full_name<span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">,</span> <span class="st">&quot;___&quot;</span><span class="op">);</span></span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>   <span class="cf">return</span> Nstd<span class="op">::</span>Replace<span class="op">(</span>ret<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> <span class="op">}</span></span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> </span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> <span class="bu">std::</span>string_view cyclic_str<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>   <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>IsCyclic<span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>     <span class="cf">return</span> <span class="st">&quot;:CYCLIC&quot;</span><span class="op">;</span></span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>   <span class="op">}</span></span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>   <span class="cf">return</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> <span class="op">}</span></span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span> </span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> <span class="bu">std::</span>string to_string_depend_on<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg_top<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>   <span class="kw">auto</span> indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span> </span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>   <span class="cf">for</span> <span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">*</span>pkg <span class="op">:</span> pkg_top<span class="op">.</span>DependOn<span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="op">}</span></span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> </span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> pkg<span class="op">-&gt;</span>Name<span class="op">();</span></span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> </span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>     <span class="cf">if</span> <span class="op">(</span>pkg_top<span class="op">.</span>IsCyclic<span class="op">(*</span>pkg<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>       ss <span class="op">&lt;&lt;</span> <span class="st">&quot; : CYCLIC&quot;</span><span class="op">;</span></span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>       ss <span class="op">&lt;&lt;</span> <span class="st">&quot; : STRAIGHT&quot;</span><span class="op">;</span></span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="op">}</span></span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>   <span class="op">}</span></span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span> </span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> <span class="op">}</span></span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> </span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="bu">std::</span>string to_string_pkg<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>arch_pkg<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> top <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;TOP&quot;</span><span class="op">};</span></span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>   <span class="kw">auto</span> indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span> </span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>   <span class="kw">auto</span> package <span class="op">=</span> <span class="st">&quot;package  :&quot;</span><span class="op">;</span></span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>   <span class="kw">auto</span> full <span class="op">=</span> <span class="st">&quot;fullname :&quot;</span><span class="op">;</span></span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>   <span class="kw">auto</span> parent <span class="op">=</span> <span class="st">&quot;parent   :&quot;</span><span class="op">;</span></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>   <span class="kw">auto</span> children <span class="op">=</span> <span class="st">&quot;children : {&quot;</span><span class="op">;</span></span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>   <span class="kw">auto</span> depend_on <span class="op">=</span> <span class="st">&quot;depend_on: {&quot;</span><span class="op">;</span></span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> </span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>   <span class="kw">constexpr</span> <span class="kw">auto</span> next_indent <span class="op">=</span> <span class="dv">4</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span> </span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> package <span class="op">&lt;&lt;</span> arch_pkg<span class="op">.</span>Name<span class="op">()</span> <span class="op">&lt;&lt;</span> cyclic_str<span class="op">(</span>arch_pkg<span class="op">)</span></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> full <span class="op">&lt;&lt;</span> arch_pkg<span class="op">.</span>FullName<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> parent</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>      <span class="op">&lt;&lt;</span> <span class="op">(</span>arch_pkg<span class="op">.</span>Parent<span class="op">()</span> <span class="op">?</span> arch_pkg<span class="op">.</span>Parent<span class="op">()-&gt;</span>Name<span class="op">()</span> <span class="op">:</span> top<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span> </span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> depend_on<span class="op">;</span></span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>   <span class="cf">if</span> <span class="op">(</span>arch_pkg<span class="op">.</span>DependOn<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>     ss <span class="op">&lt;&lt;</span> to_string_depend_on<span class="op">(</span>arch_pkg<span class="op">,</span> indent <span class="op">+</span> next_indent<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot; }&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>   <span class="op">}</span></span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span> </span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> children<span class="op">;</span></span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>   <span class="cf">if</span> <span class="op">(</span>arch_pkg<span class="op">.</span>Children<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>     ss <span class="op">&lt;&lt;</span> ToStringArch<span class="op">(</span>arch_pkg<span class="op">.</span>Children<span class="op">(),</span> indent <span class="op">+</span> next_indent<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>     ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span><span class="op">;</span></span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot; }&quot;</span><span class="op">;</span></span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>   <span class="op">}</span></span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span> </span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span> <span class="op">}</span></span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span> </span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span> <span class="bu">std::</span>string ToStringArch<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span> </span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pkg <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span>     <span class="op">}</span></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>     ss <span class="op">&lt;&lt;</span> to_string_pkg<span class="op">(*</span>pkg<span class="op">,</span> indent<span class="op">);</span></span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span>   <span class="op">}</span></span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span> </span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span> <span class="op">}</span></span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span> </span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span> <span class="bu">std::</span>string to_pu_rectangle<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>   <span class="kw">auto</span> indent_str <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span>indent<span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">);</span></span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span> </span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>   ss <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> pkg<span class="op">.</span>Name<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> as &quot;</span></span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>      <span class="op">&lt;&lt;</span> unique_str_name<span class="op">(</span>pkg<span class="op">.</span>FullName<span class="op">());</span></span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span> </span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span>   <span class="cf">if</span> <span class="op">(</span>pkg<span class="op">.</span>Children<span class="op">().</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>     ss <span class="op">&lt;&lt;</span> <span class="st">&quot; {&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>     ss <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span>pkg<span class="op">.</span>Children<span class="op">(),</span> indent <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span>     ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl <span class="op">&lt;&lt;</span> indent_str <span class="op">&lt;&lt;</span> <span class="st">&quot;}&quot;</span><span class="op">;</span></span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span>   <span class="op">}</span></span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span> </span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span> <span class="op">}</span></span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span> </span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">uint32_t</span> indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span> </span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pkg <span class="op">:</span> arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-290"><a href="#cb6-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-291"><a href="#cb6-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>     <span class="op">}</span></span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span>     ss <span class="op">&lt;&lt;</span> to_pu_rectangle<span class="op">(*</span>pkg<span class="op">,</span> indent<span class="op">);</span></span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>   <span class="op">}</span></span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span> </span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> <span class="op">}</span></span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span> </span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span> </span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span> <span class="co">// 単方向依存のみ</span></span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span> <span class="dt">bool</span> dep_is_cyclic<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>from<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>to<span class="op">,</span></span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>                    <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span>   ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_from <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> from<span class="op">);</span></span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>   ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_to <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> to<span class="op">);</span></span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span> </span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>   <span class="ot">assert</span><span class="op">(</span>pkg_from <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>   <span class="ot">assert</span><span class="op">(</span>pkg_to <span class="op">!=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span> </span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>   <span class="cf">return</span> pkg_from<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>pkg_to<span class="op">);</span></span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span> <span class="op">}</span></span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span> </span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span> <span class="bu">std::</span>string_view pu_link_color<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>from<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>to<span class="op">,</span></span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>                                <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>   <span class="cf">return</span> dep_is_cyclic<span class="op">(</span>from<span class="op">,</span> to<span class="op">,</span> arch<span class="op">)</span> <span class="op">?</span> <span class="st">&quot;orange&quot;</span> <span class="op">:</span> <span class="st">&quot;green&quot;</span><span class="op">;</span></span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span> <span class="op">}</span></span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span> </span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span> <span class="bu">std::</span>string to_pu_rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> DepRelation <span class="at">const</span> <span class="op">&amp;</span>dep_rel<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>   <span class="kw">auto</span> a <span class="op">=</span> unique_str_name<span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">);</span></span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>   <span class="kw">auto</span> b <span class="op">=</span> unique_str_name<span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">);</span></span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span> </span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>   <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>     ss <span class="op">&lt;&lt;</span> a <span class="op">&lt;&lt;</span> <span class="st">&quot; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountAtoB <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> &quot;</span><span class="op">;</span></span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span>     <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>       ss <span class="op">&lt;&lt;</span> <span class="st">&quot;&lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountBtoA <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> &quot;</span> <span class="op">&lt;&lt;</span> b<span class="op">;</span></span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>       ss <span class="op">&lt;&lt;</span> <span class="st">&quot;-[#&quot;</span> <span class="op">&lt;&lt;</span> pu_link_color<span class="op">(</span>dep_rel<span class="op">.</span>PackageA<span class="op">,</span> dep_rel<span class="op">.</span>PackageB<span class="op">,</span> arch<span class="op">)</span></span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>          <span class="op">&lt;&lt;</span> <span class="st">&quot;]-&gt; &quot;</span> <span class="op">&lt;&lt;</span> b<span class="op">;</span></span>
<span id="cb6-330"><a href="#cb6-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span>     <span class="op">}</span></span>
<span id="cb6-331"><a href="#cb6-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span>   <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>dep_rel<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-332"><a href="#cb6-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>     ss <span class="op">&lt;&lt;</span> b <span class="op">&lt;&lt;</span> <span class="st">&quot; </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">&lt;&lt;</span> dep_rel<span class="op">.</span>CountBtoA <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st"> -[#&quot;</span></span>
<span id="cb6-333"><a href="#cb6-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>        <span class="op">&lt;&lt;</span> pu_link_color<span class="op">(</span>dep_rel<span class="op">.</span>PackageB<span class="op">,</span> dep_rel<span class="op">.</span>PackageA<span class="op">,</span> arch<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;]-&gt; &quot;</span></span>
<span id="cb6-334"><a href="#cb6-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>        <span class="op">&lt;&lt;</span> a<span class="op">;</span></span>
<span id="cb6-335"><a href="#cb6-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>   <span class="op">}</span></span>
<span id="cb6-336"><a href="#cb6-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span> </span>
<span id="cb6-337"><a href="#cb6-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-338"><a href="#cb6-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span> <span class="op">}</span></span>
<span id="cb6-339"><a href="#cb6-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb6-340"><a href="#cb6-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span> </span>
<span id="cb6-341"><a href="#cb6-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span> <span class="dt">bool</span> HasCyclicDeps<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb6-342"><a href="#cb6-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dep <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-343"><a href="#cb6-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>     <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountAtoB <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-344"><a href="#cb6-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>       <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-345"><a href="#cb6-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-346"><a href="#cb6-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>       <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-347"><a href="#cb6-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>         <span class="cf">if</span> <span class="op">(</span>dep_is_cyclic<span class="op">(</span>dep<span class="op">.</span>PackageA<span class="op">,</span> dep<span class="op">.</span>PackageB<span class="op">,</span> arch<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-348"><a href="#cb6-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span>           <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-349"><a href="#cb6-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>         <span class="op">}</span></span>
<span id="cb6-350"><a href="#cb6-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>       <span class="op">}</span></span>
<span id="cb6-351"><a href="#cb6-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>     <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>dep<span class="op">.</span>CountBtoA <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-352"><a href="#cb6-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span>       <span class="cf">if</span> <span class="op">(</span>dep_is_cyclic<span class="op">(</span>dep<span class="op">.</span>PackageB<span class="op">,</span> dep<span class="op">.</span>PackageA<span class="op">,</span> arch<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-353"><a href="#cb6-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>         <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span>       <span class="op">}</span></span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>     <span class="op">}</span></span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span>   <span class="op">}</span></span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span> </span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span> <span class="op">}</span></span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span> </span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span></span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>                                  <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-363"><a href="#cb6-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span> </span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb6-366"><a href="#cb6-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-367"><a href="#cb6-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>     <span class="kw">auto</span> rel_s <span class="op">=</span> to_pu_rectangle<span class="op">(</span>arch<span class="op">,</span> d<span class="op">);</span></span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span> </span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>     <span class="cf">if</span> <span class="op">(</span>rel_s<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span>       <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>         ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span>       <span class="op">}</span></span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span>       ss <span class="op">&lt;&lt;</span> rel_s<span class="op">;</span></span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span>     <span class="op">}</span></span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span>   <span class="op">}</span></span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span> <span class="op">}</span></span>
<span id="cb6-378"><a href="#cb6-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcarch_pkg.h">example/deps/dependency/src/arch_pkg.h
<a id="SS_3_1_7"></a></h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">class</span> ArchPkg<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">using</span> <span class="dt">ArchPkgPtr_t</span> <span class="op">=</span> <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span>ArchPkg<span class="op">&gt;;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">using</span> <span class="dt">Arch_t</span> <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="dt">ArchPkgPtr_t</span><span class="op">&gt;;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">using</span> <span class="dt">ArchPkgs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>ArchPkg <span class="at">const</span> <span class="op">*&gt;;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="kw">class</span> ArchPkg <span class="op">{</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="kw">explicit</span> ArchPkg<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>full_name<span class="op">)</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>       <span class="op">:</span> <span class="va">name_</span><span class="op">{</span>full_name<span class="op">.</span>filename<span class="op">()},</span> <span class="va">full_name_</span><span class="op">{</span>full_name<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>Name<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">name_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   ArchPkg <span class="at">const</span> <span class="op">*</span>Parent<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">parent_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>Children<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">children_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="dt">ArchPkgs_t</span> <span class="at">const</span> <span class="op">&amp;</span>DependOn<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">depend_on_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="dt">bool</span> IsCyclic<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="dt">bool</span> IsCyclic<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>FullName<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">full_name_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   ArchPkg<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   ArchPkg <span class="op">&amp;</span><span class="kw">operator</span><span class="op">=(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="at">static</span> <span class="dt">Arch_t</span> GenArch<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>deps<span class="op">);</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="va">name_</span><span class="op">;</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="bu">std::</span>string <span class="at">const</span> <span class="va">full_name_</span><span class="op">{};</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   ArchPkg <span class="at">const</span> <span class="op">*</span><span class="va">parent_</span><span class="op">{};</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="dt">Arch_t</span> <span class="va">children_</span><span class="op">{};</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="dt">ArchPkgs_t</span> <span class="va">depend_on_</span><span class="op">{};</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="at">mutable</span> <span class="bu">std::</span>map<span class="op">&lt;</span>ArchPkg <span class="at">const</span> <span class="op">*,</span> <span class="dt">bool</span><span class="op">&gt;</span> <span class="va">cyclic_</span><span class="op">{};</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="at">static</span> <span class="kw">constexpr</span> <span class="dt">size_t</span> <span class="va">max_depth_</span><span class="op">{</span><span class="dv">12</span><span class="op">};</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   <span class="dt">void</span> set_cyclic<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">*</span>pkg<span class="op">,</span> <span class="dt">bool</span> is_cyclic<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="kw">using</span> <span class="dt">Map_Path_ArchPkg_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">ArchPkgPtr_t</span><span class="op">&gt;;</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="at">static</span> <span class="dt">Map_Path_ArchPkg_t</span> build_depend_on<span class="op">(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>dep_rel<span class="op">,</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>                                             <span class="dt">Map_Path_ArchPkg_t</span> <span class="op">&amp;&amp;</span>pkg_all<span class="op">);</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="at">static</span> <span class="dt">Arch_t</span> build_children<span class="op">(</span><span class="dt">Map_Path_ArchPkg_t</span> <span class="op">&amp;&amp;</span>pkg_all<span class="op">);</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="at">static</span> <span class="bu">std::</span>string make_full_name<span class="op">(</span>ArchPkg <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">);</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="dt">bool</span> is_cyclic<span class="op">(</span><span class="dt">ArchPkgs_t</span> <span class="op">&amp;</span>history<span class="op">,</span> <span class="dt">size_t</span> depth<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">};</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="bu">std::</span>string ToStringArch<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">uint32_t</span> indent <span class="op">=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringArch<span class="op">(</span>arch<span class="op">);</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="op">}</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">uint32_t</span> indent <span class="op">=</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="bu">std::</span>string ToPlantUML_Rectangle<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">);</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> <span class="dt">bool</span> HasCyclicDeps<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> ArchPkg <span class="at">const</span> <span class="op">*</span>FindArchPkgByName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>                                  <span class="bu">std::</span>string_view pkg_name<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> ArchPkg <span class="at">const</span> <span class="op">*</span>FindArchPkgByFullName<span class="op">(</span><span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">,</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>                                      <span class="bu">std::</span>string_view full_name<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_deps.cpp">example/deps/dependency/src/cpp_deps.cpp
<a id="SS_3_1_8"></a></h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;memory&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="bu">std::</span>string ToStringDepRel<span class="op">(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>rep_rel<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageA<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; -&gt; &quot;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>      <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageB<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> rep_rel<span class="op">.</span>CountAtoB</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>      <span class="op">&lt;&lt;</span> <span class="st">&quot; &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>rep_rel<span class="op">.</span>IncsAtoB<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageB<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; -&gt; &quot;</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>      <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>rep_rel<span class="op">.</span>PackageA<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> rep_rel<span class="op">.</span>CountBtoA</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>      <span class="op">&lt;&lt;</span> <span class="st">&quot; &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>rep_rel<span class="op">.</span>IncsBtoA<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">);</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">}</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="bu">std::</span>string ToStringDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dep <span class="op">:</span> dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="op">}</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     ss <span class="op">&lt;&lt;</span> ToStringDepRel<span class="op">(</span>dep<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="op">}</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">}</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> DepRelation gen_DepRelation<span class="op">(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>dirA<span class="op">,</span> CppDir <span class="at">const</span> <span class="op">&amp;</span>dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="kw">auto</span> a_dep <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>dirA<span class="op">.</span>DependsOn<span class="op">(</span>dirB<span class="op">)};</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="kw">auto</span> count_from_a <span class="op">=</span> a_dep<span class="op">.</span>first<span class="op">;</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="kw">auto</span> incs_from_a <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(</span>a_dep<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="kw">auto</span> b_dep <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>dirB<span class="op">.</span>DependsOn<span class="op">(</span>dirA<span class="op">)};</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="kw">auto</span> count_from_b <span class="op">=</span> b_dep<span class="op">.</span>first<span class="op">;</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="kw">auto</span> incs_from_b <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(</span>b_dep<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="cf">if</span> <span class="op">(</span>dirA <span class="op">&lt;</span> dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="cf">return</span> DepRelation<span class="op">{</span>dirA<span class="op">.</span>Path<span class="op">(),</span> count_from_a<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_a<span class="op">),</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>                        dirB<span class="op">.</span>Path<span class="op">(),</span> count_from_b<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_b<span class="op">)};</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     <span class="cf">return</span> DepRelation<span class="op">{</span>dirB<span class="op">.</span>Path<span class="op">(),</span> count_from_b<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_b<span class="op">),</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>                        dirA<span class="op">.</span>Path<span class="op">(),</span> count_from_a<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs_from_a<span class="op">)};</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="op">}</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> <span class="op">}</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="dt">Dir2Dir_t</span> GenDir2Dir<span class="op">(</span><span class="bu">std::</span>string dirA<span class="op">,</span> <span class="bu">std::</span>string dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>   <span class="cf">return</span> dirA <span class="op">&lt;</span> dirB <span class="op">?</span> <span class="bu">std::</span>make_pair<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirA<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirB<span class="op">))</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>                      <span class="op">:</span> <span class="bu">std::</span>make_pair<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirB<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirA<span class="op">));</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="op">}</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> </span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="dt">DepRels_t</span> GenDepRels<span class="op">(</span><span class="dt">CppDirs_t</span> <span class="at">const</span> <span class="op">&amp;</span>cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">DepRels_t</span><span class="op">{};</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dirA <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dirB <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>       <span class="cf">if</span> <span class="op">(</span>dirA <span class="op">&lt;=</span> dirB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>         <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>       <span class="op">}</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>       ret<span class="op">.</span>emplace_back<span class="op">(</span>gen_DepRelation<span class="op">(</span>dirA<span class="op">,</span> dirB<span class="op">));</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="op">}</span></span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>   <span class="op">}</span></span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   ret<span class="op">.</span>sort<span class="op">();</span></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="op">}</span></span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> <span class="dt">DepRels_t</span><span class="op">::</span>const_iterator FindDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">,</span></span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>                                       <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirA<span class="op">,</span></span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>                                       <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirB<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   <span class="ot">assert</span><span class="op">(</span>dirA <span class="op">!=</span> dirB<span class="op">);</span></span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="kw">auto</span> dirs <span class="op">=</span> <span class="bu">std::</span>minmax<span class="op">(</span>dirA<span class="op">,</span> dirB<span class="op">);</span></span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>   <span class="cf">return</span> <span class="bu">std::</span>find_if<span class="op">(</span></span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>       dep_rels<span class="op">.</span>cbegin<span class="op">(),</span> dep_rels<span class="op">.</span>cend<span class="op">(),</span> <span class="op">[&amp;</span>dirs<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         <span class="cf">return</span> d<span class="op">.</span>PackageA <span class="op">==</span> dirs<span class="op">.</span>first <span class="op">&amp;&amp;</span> d<span class="op">.</span>PackageB <span class="op">==</span> dirs<span class="op">.</span>second<span class="op">;</span></span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>       <span class="op">});</span></span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> <span class="op">}</span></span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_deps.h">example/deps/dependency/src/cpp_deps.h
<a id="SS_3_1_9"></a></h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;compare&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">struct</span> DepRelation <span class="op">{</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">explicit</span> DepRelation<span class="op">(</span><span class="bu">std::</span>string package_a<span class="op">,</span> <span class="dt">uint32_t</span> count_a2b<span class="op">,</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>                        FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="op">&amp;&amp;</span>incs_a2b<span class="op">,</span> <span class="bu">std::</span>string package_b<span class="op">,</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>                        <span class="dt">uint32_t</span> count_b2a<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="op">&amp;&amp;</span>incs_b2a<span class="op">)</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>       <span class="op">:</span> PackageA<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>package_a<span class="op">)},</span> CountAtoB<span class="op">{</span>count_a2b<span class="op">},</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>         IncsAtoB<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>incs_a2b<span class="op">)},</span> PackageB<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>package_b<span class="op">)},</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>         CountBtoA<span class="op">{</span>count_b2a<span class="op">},</span> IncsBtoA<span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>incs_b2a<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="bu">std::</span>string <span class="at">const</span> PackageA<span class="op">;</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="dt">uint32_t</span> <span class="at">const</span> CountAtoB<span class="op">;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> IncsAtoB<span class="op">;</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="bu">std::</span>string <span class="at">const</span> PackageB<span class="op">;</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="dt">uint32_t</span> <span class="at">const</span> CountBtoA<span class="op">;</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> IncsBtoA<span class="op">;</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>                          DepRelation <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="op">};</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="kw">inline</span> <span class="kw">auto</span> <span class="kw">operator</span><span class="op">&lt;=&gt;(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>                         DepRelation <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="co">// PackageA を比較し、等しくなければその比較結果を返す</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> cmp <span class="op">=</span> lhs<span class="op">.</span>PackageA <span class="op">&lt;=&gt;</span> rhs<span class="op">.</span>PackageA<span class="op">;</span> cmp <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     <span class="cf">return</span> cmp<span class="op">;</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="op">}</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="cf">return</span> lhs<span class="op">.</span>PackageB <span class="op">&lt;=&gt;</span> rhs<span class="op">.</span>PackageB<span class="op">;</span> <span class="co">// PackageAが等しければ PackageBを比較</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">}</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">using</span> <span class="dt">Dir2Dir_t</span> <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">,</span> <span class="bu">std::</span>string<span class="op">&gt;;</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="kw">using</span> <span class="dt">DepRels_t</span> <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span>DepRelation<span class="op">&gt;;</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="bu">std::</span>string ToStringDepRel<span class="op">(</span>DepRelation <span class="at">const</span> <span class="op">&amp;</span>rep_rel<span class="op">);</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> DepRelation <span class="at">const</span> <span class="op">&amp;</span>dep_rel<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepRel<span class="op">(</span>dep_rel<span class="op">);</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="op">}</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="dt">Dir2Dir_t</span> GenDir2Dir<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirA<span class="op">,</span> <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirB<span class="op">);</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="bu">std::</span>string ToStringDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">);</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDepRels<span class="op">(</span>dep_rels<span class="op">);</span></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="op">}</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> <span class="dt">DepRels_t</span> GenDepRels<span class="op">(</span><span class="dt">CppDirs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">);</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> <span class="dt">DepRels_t</span><span class="op">::</span>const_iterator FindDepRels<span class="op">(</span><span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">,</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>                                       <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirA<span class="op">,</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>                                       <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>dirB<span class="op">)</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_dir.cpp">example/deps/dependency/src/cpp_dir.cpp
<a id="SS_3_1_10"></a></h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="dt">bool</span> CppDir<span class="op">::</span>Contains<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>inc_path<span class="op">)</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> <span class="va">srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     <span class="cf">if</span> <span class="op">(</span>src<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> inc_path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">}</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="op">}</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="op">}</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> CppDir<span class="op">::</span>DependsOn<span class="op">(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>cpp_pack<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="kw">auto</span> count <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="kw">auto</span> incs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> <span class="va">srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>inc <span class="op">:</span> src<span class="op">.</span>GetIncs<span class="op">())</span> <span class="op">{</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>       <span class="cf">if</span> <span class="op">(</span>cpp_pack<span class="op">.</span>Contains<span class="op">(</span>inc<span class="op">))</span> <span class="op">{</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         incs<span class="op">.</span>push_back<span class="op">(</span>inc<span class="op">);</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>         <span class="op">++</span>count<span class="op">;</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>       <span class="op">}</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">}</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="op">}</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   Nstd<span class="op">::</span>SortUnique<span class="op">(</span>incs<span class="op">);</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="cf">return</span> <span class="op">{</span>count<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>incs<span class="op">)};</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">}</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="dt">CppDirs_t</span> GenCppDirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">,</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>                      FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="kw">auto</span> cpp_src <span class="op">=</span> CppSrc<span class="op">{</span>src<span class="op">,</span> db<span class="op">};</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     ret<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>cpp_src<span class="op">.</span>Filename<span class="op">(),</span> <span class="op">{</span>cpp_src<span class="op">}});</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="op">}</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="op">}</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="bu">std::</span>string ToStringCppDir<span class="op">(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>cpp_pack<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> </span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   ss <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_pack<span class="op">.</span>Path<span class="op">())</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> cpp_pack<span class="op">.</span>GetSrcs<span class="op">())</span> <span class="op">{</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="cf">if</span> <span class="op">(</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>       first <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="op">}</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     ss <span class="op">&lt;&lt;</span> ToStringCppSrc<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="op">}</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> </span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="op">}</span></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_dir.h">example/deps/dependency/src/cpp_dir.h
<a id="SS_3_1_11"></a></h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">class</span> CppDir <span class="op">{</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">explicit</span> CppDir<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>path<span class="op">,</span> <span class="dt">CppSrcs_t</span> <span class="op">&amp;&amp;</span>srcs<span class="op">)</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>       <span class="op">:</span> <span class="va">path_</span><span class="op">{</span>path<span class="op">},</span> <span class="va">srcs_</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>srcs<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>Path<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">path_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="dt">bool</span> Contains<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>inc_path<span class="op">)</span> <span class="at">const</span> <span class="kw">noexcept</span><span class="op">;</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="co">// first  依存するヘッダファイルのインクルード数</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="co">// second 依存するヘッダファイル</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   DependsOn<span class="op">(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>cpp_pack<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="dt">CppSrcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>GetSrcs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">srcs_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">path_</span><span class="op">;</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="dt">CppSrcs_t</span> <span class="at">const</span> <span class="va">srcs_</span><span class="op">;</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>                          CppDir <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="kw">friend</span> <span class="kw">auto</span> <span class="kw">operator</span><span class="op">&lt;=&gt;(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>                           CppDir <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">};</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="kw">using</span> <span class="dt">CppDirs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>CppDir<span class="op">&gt;;</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="dt">CppDirs_t</span> GenCppDirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">,</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>                      FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">);</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="bu">std::</span>string ToStringCppDir<span class="op">(</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>cpp_pack<span class="op">);</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> CppDir <span class="at">const</span> <span class="op">&amp;</span>dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringCppDir<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="op">}</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_src.cpp">example/deps/dependency/src/cpp_src.cpp
<a id="SS_3_1_12"></a></h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;tuple&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> get_incs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> include_line <span class="op">=</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>       <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*#include\s+[&quot;&lt;]([\w/.]+)[&quot;&gt;](.*)</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="kw">auto</span> f <span class="op">=</span> <span class="bu">std::</span>ifstream<span class="op">{</span>src<span class="op">};</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>f<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="cf">if</span> <span class="op">(</span>line<span class="op">.</span>size<span class="op">()</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="co">// CRLF対策</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>       <span class="kw">auto</span> last <span class="op">=</span> <span class="op">--</span>line<span class="op">.</span>end<span class="op">();</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>       <span class="cf">if</span> <span class="op">(*</span>last <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\xa</span><span class="ch">&#39;</span> <span class="op">||</span> <span class="op">*</span>last <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\xd</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>         line<span class="op">.</span>erase<span class="op">(</span>last<span class="op">);</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>       <span class="op">}</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="op">}</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> include_line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>       ret<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">()).</span>filename<span class="op">());</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="op">}</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="op">}</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="dt">void</span> get_incs_full<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">,</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>                    FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>src<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="op">&amp;</span>incs<span class="op">,</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>                    FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="op">&amp;</span>not_found<span class="op">,</span> <span class="dt">bool</span> sort_uniq<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="kw">auto</span> <span class="at">const</span> inc_files <span class="op">=</span> get_incs<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>f <span class="op">:</span> inc_files<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>     <span class="cf">if</span> <span class="op">(</span>db<span class="op">.</span>count<span class="op">(</span>f<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>       not_found<span class="op">.</span>push_back<span class="op">(</span>f<span class="op">);</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>       <span class="kw">auto</span> full_path <span class="op">=</span> db<span class="op">.</span>at<span class="op">(</span>f<span class="op">);</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>       <span class="cf">if</span> <span class="op">(!</span>any_of<span class="op">(</span>incs<span class="op">.</span>cbegin<span class="op">(),</span> incs<span class="op">.</span>cend<span class="op">(),</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>                   <span class="op">[&amp;</span>full_path<span class="op">](</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                     <span class="cf">return</span> p <span class="op">==</span> full_path<span class="op">;</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>                   <span class="op">}))</span> <span class="op">{</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         incs<span class="op">.</span>emplace_back<span class="op">(</span>full_path<span class="op">);</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         get_incs_full<span class="op">(</span>db<span class="op">,</span> full_path<span class="op">,</span> incs<span class="op">,</span> not_found<span class="op">,</span> <span class="kw">false</span><span class="op">);</span></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>       <span class="op">}</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="op">}</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="op">}</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="cf">if</span> <span class="op">(</span>sort_uniq<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     Nstd<span class="op">::</span>SortUnique<span class="op">(</span>incs<span class="op">);</span></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     Nstd<span class="op">::</span>SortUnique<span class="op">(</span>not_found<span class="op">);</span></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>   <span class="op">}</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="op">}</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> </span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> CppSrc<span class="op">::</span>CppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>pathname<span class="op">,</span></span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>                FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">)</span></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="op">:</span> <span class="va">path_</span><span class="op">{</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>pathname<span class="op">)},</span></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>       <span class="va">filename_</span><span class="op">{</span><span class="va">path_</span><span class="op">.</span>filename<span class="op">()},</span> <span class="va">incs_</span><span class="op">{},</span> <span class="va">not_found_</span><span class="op">{}</span> <span class="op">{</span></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   get_incs_full<span class="op">(</span>db<span class="op">,</span> pathname<span class="op">,</span> <span class="va">incs_</span><span class="op">,</span> <span class="va">not_found_</span><span class="op">,</span> <span class="kw">true</span><span class="op">);</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="op">}</span></span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="dt">CppSrcs_t</span> GenCppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">,</span></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>                     FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">CppSrcs_t</span><span class="op">{};</span></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ret<span class="op">.</span>emplace_back<span class="op">(</span>CppSrc<span class="op">{</span>src<span class="op">,</span> db<span class="op">});</span></span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="op">}</span></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> </span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="op">}</span></span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="bu">std::</span>string ToStringCppSrc<span class="op">(</span>CppSrc <span class="at">const</span> <span class="op">&amp;</span>cpp_src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;file              : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_src<span class="op">.</span>Filename<span class="op">())</span></span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;path              : &quot;</span> <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPath<span class="op">(</span>cpp_src<span class="op">.</span>Path<span class="op">())</span></span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;include           : &quot;</span></span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>      <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>cpp_src<span class="op">.</span>GetIncs<span class="op">(),</span> <span class="st">&quot; &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   ss <span class="op">&lt;&lt;</span> <span class="st">&quot;include not found : &quot;</span></span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>      <span class="op">&lt;&lt;</span> FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>cpp_src<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="st">&quot; &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="op">}</span></span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span> </span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="kw">constexpr</span> <span class="bu">std::</span>string_view target_ext<span class="op">[]{</span><span class="st">&quot;.c&quot;</span><span class="op">,</span>  <span class="st">&quot;.h&quot;</span><span class="op">,</span>   <span class="st">&quot;.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;.cxx&quot;</span><span class="op">,</span></span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>                                         <span class="st">&quot;.cc&quot;</span><span class="op">,</span> <span class="st">&quot;.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;.hxx&quot;</span><span class="op">,</span> <span class="st">&quot;.tcc&quot;</span><span class="op">};</span></span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> </span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="dt">bool</span> is_c_or_cpp<span class="op">(</span><span class="bu">std::</span>string ext<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>   <span class="bu">std::</span>transform<span class="op">(</span>ext<span class="op">.</span>begin<span class="op">(),</span> ext<span class="op">.</span>end<span class="op">(),</span> ext<span class="op">.</span>begin<span class="op">(),</span> <span class="op">::</span>tolower<span class="op">);</span></span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>any_of<span class="op">(</span><span class="bu">std::</span>begin<span class="op">(</span>target_ext<span class="op">),</span> <span class="bu">std::</span>end<span class="op">(</span>target_ext<span class="op">),</span></span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>                   <span class="op">[&amp;</span>ext<span class="op">](</span><span class="bu">std::</span>string_view s<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> s <span class="op">==</span> ext<span class="op">;</span> <span class="op">}))</span> <span class="op">{</span></span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   <span class="op">}</span></span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="op">}</span></span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> </span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>top_dir<span class="op">,</span></span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>                             FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="kw">auto</span> dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>top_dir<span class="op">};</span></span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>   <span class="kw">auto</span> <span class="at">const</span> top_dir2 <span class="op">=</span></span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>       FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">};</span> <span class="co">// top_dirが&quot;.&quot;の場合、parent_path()は&quot;&quot;になる}。</span></span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> dir <span class="op">=</span> src<span class="op">.</span>parent_path<span class="op">();</span> dir <span class="op">!=</span> top_dir <span class="op">&amp;&amp;</span> dir <span class="op">!=</span> top_dir2<span class="op">;</span></span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>          dir <span class="op">=</span> dir<span class="op">.</span>parent_path<span class="op">())</span> <span class="op">{</span></span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>       dirs<span class="op">.</span>push_back<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>     <span class="op">}</span></span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>   <span class="op">}</span></span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>   <span class="cf">return</span> dirs<span class="op">;</span></span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> <span class="op">}</span></span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> </span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> find_c_or_cpp_srcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>top_path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> </span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>   <span class="kw">namespace</span> fs <span class="op">=</span> <span class="bu">std::</span>filesystem<span class="op">;</span></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>   <span class="cf">for</span> <span class="op">(</span>fs<span class="op">::</span>path <span class="at">const</span> <span class="op">&amp;</span>p <span class="op">:</span> fs<span class="op">::</span>recursive_directory_iterator<span class="op">{</span>top_path<span class="op">})</span> <span class="op">{</span></span>
<span id="cb12-135"><a href="#cb12-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="cf">if</span> <span class="op">(</span>fs<span class="op">::</span>is_regular_file<span class="op">(</span>p<span class="op">)</span> <span class="op">&amp;&amp;</span> is_c_or_cpp<span class="op">(</span>p<span class="op">.</span>extension<span class="op">()))</span> <span class="op">{</span></span>
<span id="cb12-136"><a href="#cb12-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>       srcs<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>p<span class="op">));</span></span>
<span id="cb12-137"><a href="#cb12-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>     <span class="op">}</span></span>
<span id="cb12-138"><a href="#cb12-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>   <span class="op">}</span></span>
<span id="cb12-139"><a href="#cb12-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> </span>
<span id="cb12-140"><a href="#cb12-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>   <span class="cf">return</span> srcs<span class="op">;</span></span>
<span id="cb12-141"><a href="#cb12-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="op">}</span></span>
<span id="cb12-142"><a href="#cb12-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb12-143"><a href="#cb12-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb12-144"><a href="#cb12-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span></span>
<span id="cb12-145"><a href="#cb12-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> GetCppDirsSrcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-146"><a href="#cb12-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>   <span class="kw">auto</span> dirs_srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb12-147"><a href="#cb12-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb12-148"><a href="#cb12-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb12-149"><a href="#cb12-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-150"><a href="#cb12-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> top_path <span class="op">=</span> FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb12-151"><a href="#cb12-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="kw">auto</span> sub_srcs <span class="op">=</span> find_c_or_cpp_srcs<span class="op">(</span>top_path<span class="op">);</span></span>
<span id="cb12-152"><a href="#cb12-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>     <span class="kw">auto</span> sub_dirs_srcs <span class="op">=</span> gen_dirs<span class="op">(</span>top_path<span class="op">,</span> sub_srcs<span class="op">);</span></span>
<span id="cb12-153"><a href="#cb12-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb12-154"><a href="#cb12-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     Nstd<span class="op">::</span>Concatenate<span class="op">(</span>srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>sub_srcs<span class="op">));</span></span>
<span id="cb12-155"><a href="#cb12-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs_srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>sub_dirs_srcs<span class="op">));</span></span>
<span id="cb12-156"><a href="#cb12-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>   <span class="op">}</span></span>
<span id="cb12-157"><a href="#cb12-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span> </span>
<span id="cb12-158"><a href="#cb12-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>   Nstd<span class="op">::</span>SortUnique<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb12-159"><a href="#cb12-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>   Nstd<span class="op">::</span>SortUnique<span class="op">(</span>dirs_srcs<span class="op">);</span></span>
<span id="cb12-160"><a href="#cb12-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb12-161"><a href="#cb12-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>   <span class="cf">return</span> <span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs_srcs<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>srcs<span class="op">)};</span></span>
<span id="cb12-162"><a href="#cb12-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span> <span class="op">}</span></span>
<span id="cb12-163"><a href="#cb12-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrccpp_src.h">example/deps/dependency/src/cpp_src.h
<a id="SS_3_1_13"></a></h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">class</span> CppSrc <span class="op">{</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">explicit</span> CppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>pathname<span class="op">,</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>                   FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">);</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>GetIncs<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">incs_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>GetIncsNotFound<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="cf">return</span> <span class="va">not_found_</span><span class="op">;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="op">}</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>Filename<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">filename_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>Path<span class="op">()</span> <span class="at">const</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">path_</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">path_</span><span class="op">;</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="va">filename_</span><span class="op">;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="va">incs_</span><span class="op">;</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="va">not_found_</span><span class="op">;</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="kw">friend</span> <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span>CppSrc <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>                          CppSrc <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="kw">friend</span> <span class="kw">auto</span> <span class="kw">operator</span><span class="op">&lt;=&gt;(</span>CppSrc <span class="at">const</span> <span class="op">&amp;</span>lhs<span class="op">,</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>                           CppSrc <span class="at">const</span> <span class="op">&amp;</span>rhs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="op">};</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="kw">using</span> <span class="dt">CppSrcs_t</span> <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>CppSrc<span class="op">&gt;;</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="dt">CppSrcs_t</span> GenCppSrc<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">,</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>                     FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>db<span class="op">);</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="bu">std::</span>string ToStringCppSrc<span class="op">(</span>CppSrc <span class="at">const</span> <span class="op">&amp;</span>cpp_src<span class="op">);</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> CppSrc <span class="at">const</span> <span class="op">&amp;</span>cpp_src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringCppSrc<span class="op">(</span>cpp_src<span class="op">);</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">}</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="co">// first  dirs配下のソースファイルを含むディレクトリ</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="co">// second dirs配下のソースファイル</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> GetCppDirsSrcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">);</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcdeps_scenario.cpp">example/deps/dependency/src/deps_scenario.cpp
<a id="SS_3_1_14"></a></h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;stdexcept&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;arch_pkg.h&quot; // 実装用ヘッダファイル</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;cpp_deps.h&quot;                 // 実装用ヘッダファイル</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="er">#include &quot;cpp_dir.h&quot;                  // 実装用ヘッダファイル</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="er">#include &quot;cpp_src.h&quot;                  // 実装用ヘッダファイル</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot; // dependencyパッケージからのインポート</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="er">#include &quot;file_utils/load_store.h&quot; // file_utilsパッケージからのインポート</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="er">#include &quot;lib/nstd.h&quot;              // libパッケージからのインポート</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="co">// @@@ sample end</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="dt">bool</span> has_error_for_dir<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="cf">if</span> <span class="op">(</span>dirs<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;need directories to generate package&quot;</span><span class="op">};</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="op">}</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="kw">auto</span> not_dirs <span class="op">=</span> FileUtils<span class="op">::</span>NotDirs<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="cf">if</span> <span class="op">(</span>not_dirs<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>FileUtils<span class="op">::</span>ToStringPaths<span class="op">(</span>not_dirs<span class="op">)</span> <span class="op">+</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>                              <span class="st">&quot; not directory&quot;</span><span class="op">};</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="op">}</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> remove_dirs_match_pattern<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="op">&amp;&amp;</span>dirs<span class="op">,</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>                                              <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   <span class="cf">if</span> <span class="op">(</span>pattern<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="op">}</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="kw">auto</span> <span class="at">const</span> re_pattern <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span>pattern<span class="op">};</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   dirs<span class="op">.</span>remove_if<span class="op">([&amp;</span>re_pattern<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     <span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="kw">auto</span> d_str <span class="op">=</span> d<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="cf">return</span> <span class="bu">std::</span>regex_match<span class="op">(</span>d_str<span class="op">,</span> results<span class="op">,</span> re_pattern<span class="op">);</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="op">});</span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">}</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="co">// first  dirs配下のソースファイルを含むディレクトリ(パッケージ)</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span> <span class="co">// second 上記パッケージに含まれるソースファイル</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span></span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> gen_dirs_and_dirs2srcs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>                        <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="kw">auto</span> ret <span class="op">=</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>       <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>GetCppDirsSrcs<span class="op">(</span>dirs<span class="op">)};</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>   <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>recursive <span class="op">?</span> <span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)</span> <span class="op">:</span> dirs<span class="op">};</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   dirs_pkg <span class="op">=</span> remove_dirs_match_pattern<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dirs_pkg<span class="op">),</span> pattern<span class="op">);</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="kw">auto</span> dirs2srcs <span class="op">=</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>       FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span>FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs_pkg<span class="op">,</span> srcs<span class="op">)};</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>   <span class="cf">return</span> <span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs_pkg<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">)};</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> <span class="op">}</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>                             <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>   <span class="kw">auto</span> dirs2srcs <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>       gen_dirs_and_dirs2srcs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">)};</span></span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>   <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>   <span class="kw">auto</span> assign <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>dirs2srcs<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;</span>dir <span class="op">:</span> dirs_pkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="cf">if</span> <span class="op">(</span>assign<span class="op">.</span>count<span class="op">(</span>dir<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>       <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> dir <span class="op">&lt;&lt;</span> <span class="st">&quot; not including C++ files&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>       ret<span class="op">.</span>emplace_back<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>dir<span class="op">));</span></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="op">}</span></span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   <span class="op">}</span></span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">}</span></span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> </span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_dirs<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>                             FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>                             <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-94"><a href="#cb14-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   <span class="kw">auto</span> dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb14-95"><a href="#cb14-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="kw">auto</span> ret <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span></span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>         FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>     <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>       <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>in <span class="op">+</span> <span class="st">&quot; is illegal&quot;</span><span class="op">};</span></span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="op">}</span></span>
<span id="cb14-102"><a href="#cb14-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     dirs <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb14-103"><a href="#cb14-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>   <span class="op">}</span></span>
<span id="cb14-104"><a href="#cb14-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb14-105"><a href="#cb14-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>   Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">(</span>dirs_opt<span class="op">));</span></span>
<span id="cb14-106"><a href="#cb14-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb14-107"><a href="#cb14-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>   <span class="cf">if</span> <span class="op">(</span>has_error_for_dir<span class="op">(</span>dirs<span class="op">))</span> <span class="op">{</span></span>
<span id="cb14-108"><a href="#cb14-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>     <span class="cf">return</span> dirs<span class="op">;</span></span>
<span id="cb14-109"><a href="#cb14-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   <span class="op">}</span></span>
<span id="cb14-110"><a href="#cb14-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb14-111"><a href="#cb14-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   <span class="cf">return</span> gen_dirs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb14-112"><a href="#cb14-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="op">}</span></span>
<span id="cb14-113"><a href="#cb14-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> </span>
<span id="cb14-114"><a href="#cb14-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> <span class="dt">bool</span> includes<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span></span>
<span id="cb14-115"><a href="#cb14-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>               FileUtils<span class="op">::</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>dir<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb14-116"><a href="#cb14-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="kw">auto</span> <span class="at">const</span> count <span class="op">=</span> <span class="bu">std::</span>count_if<span class="op">(</span></span>
<span id="cb14-117"><a href="#cb14-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>       dirs<span class="op">.</span>cbegin<span class="op">(),</span> dirs<span class="op">.</span>cend<span class="op">(),</span></span>
<span id="cb14-118"><a href="#cb14-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>       <span class="op">[&amp;</span>dir<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dir_in_dirs<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span> <span class="cf">return</span> dir_in_dirs <span class="op">==</span> dir<span class="op">;</span> <span class="op">});</span></span>
<span id="cb14-119"><a href="#cb14-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb14-120"><a href="#cb14-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>   <span class="cf">return</span> count <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb14-121"><a href="#cb14-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> <span class="op">}</span></span>
<span id="cb14-122"><a href="#cb14-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> </span>
<span id="cb14-123"><a href="#cb14-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span></span>
<span id="cb14-124"><a href="#cb14-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> dirs2srcs_to_src2src<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-125"><a href="#cb14-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>                      FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> dirs2srcs<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-126"><a href="#cb14-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>   <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb14-127"><a href="#cb14-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> </span>
<span id="cb14-128"><a href="#cb14-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pair <span class="op">:</span> dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-129"><a href="#cb14-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> pair<span class="op">.</span>second<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-130"><a href="#cb14-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>       <span class="cf">if</span> <span class="op">(</span>recursive<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-131"><a href="#cb14-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         ret<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>src<span class="op">.</span>filename<span class="op">(),</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>src<span class="op">}));</span></span>
<span id="cb14-132"><a href="#cb14-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>       <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb14-133"><a href="#cb14-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>         <span class="cf">if</span> <span class="op">(</span>includes<span class="op">(</span>dirs_opt<span class="op">,</span> pair<span class="op">.</span>first<span class="op">))</span> <span class="op">{</span></span>
<span id="cb14-134"><a href="#cb14-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>           <span class="kw">auto</span> dir <span class="op">=</span> FileUtils<span class="op">::</span>NormalizeLexically<span class="op">(</span>src<span class="op">.</span>parent_path<span class="op">());</span></span>
<span id="cb14-135"><a href="#cb14-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> </span>
<span id="cb14-136"><a href="#cb14-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>           <span class="cf">if</span> <span class="op">(</span>dir <span class="op">==</span> pair<span class="op">.</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-137"><a href="#cb14-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>             ret<span class="op">.</span>insert<span class="op">(</span><span class="bu">std::</span>make_pair<span class="op">(</span>src<span class="op">.</span>filename<span class="op">(),</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span>src<span class="op">}));</span></span>
<span id="cb14-138"><a href="#cb14-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>           <span class="op">}</span></span>
<span id="cb14-139"><a href="#cb14-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>         <span class="op">}</span></span>
<span id="cb14-140"><a href="#cb14-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>       <span class="op">}</span></span>
<span id="cb14-141"><a href="#cb14-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>     <span class="op">}</span></span>
<span id="cb14-142"><a href="#cb14-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>   <span class="op">}</span></span>
<span id="cb14-143"><a href="#cb14-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb14-144"><a href="#cb14-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb14-145"><a href="#cb14-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span> <span class="op">}</span></span>
<span id="cb14-146"><a href="#cb14-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span> </span>
<span id="cb14-147"><a href="#cb14-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> gen_dirs2srcs<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-148"><a href="#cb14-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>                                      <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb14-149"><a href="#cb14-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>                                      FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-150"><a href="#cb14-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>                                      <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-151"><a href="#cb14-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb14-152"><a href="#cb14-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>   <span class="kw">auto</span> dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb14-153"><a href="#cb14-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> </span>
<span id="cb14-154"><a href="#cb14-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>   <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-155"><a href="#cb14-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     <span class="kw">using</span> FileUtils<span class="op">::</span>LoadFromFile<span class="op">;</span></span>
<span id="cb14-156"><a href="#cb14-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     <span class="kw">auto</span> ret <span class="op">=</span></span>
<span id="cb14-157"><a href="#cb14-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>         <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb14-158"><a href="#cb14-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> </span>
<span id="cb14-159"><a href="#cb14-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="cf">if</span> <span class="op">(</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-160"><a href="#cb14-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>       <span class="cf">if</span> <span class="op">(</span>dirs_opt<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-161"><a href="#cb14-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>         <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;DIRS ignored.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-162"><a href="#cb14-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>       <span class="op">}</span></span>
<span id="cb14-163"><a href="#cb14-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> </span>
<span id="cb14-164"><a href="#cb14-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>       <span class="cf">if</span> <span class="op">(</span>recursive<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-165"><a href="#cb14-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>         <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;option </span><span class="sc">\&quot;</span><span class="st">recursive</span><span class="sc">\&quot;</span><span class="st"> ignored.&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-166"><a href="#cb14-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>       <span class="op">}</span></span>
<span id="cb14-167"><a href="#cb14-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>       <span class="cf">return</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb14-168"><a href="#cb14-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb14-169"><a href="#cb14-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>       <span class="kw">auto</span> ret <span class="op">=</span></span>
<span id="cb14-170"><a href="#cb14-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>           <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb14-171"><a href="#cb14-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb14-172"><a href="#cb14-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>       <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-173"><a href="#cb14-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span>in <span class="op">+</span> <span class="st">&quot; is illegal&quot;</span><span class="op">};</span></span>
<span id="cb14-174"><a href="#cb14-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>       <span class="op">}</span></span>
<span id="cb14-175"><a href="#cb14-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>       dirs <span class="op">=</span> <span class="bu">std::</span>move<span class="op">(*</span>ret<span class="op">);</span></span>
<span id="cb14-176"><a href="#cb14-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>     <span class="op">}</span></span>
<span id="cb14-177"><a href="#cb14-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>   <span class="op">}</span></span>
<span id="cb14-178"><a href="#cb14-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span> </span>
<span id="cb14-179"><a href="#cb14-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>   Nstd<span class="op">::</span>Concatenate<span class="op">(</span>dirs<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">(</span>dirs_opt<span class="op">));</span></span>
<span id="cb14-180"><a href="#cb14-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> </span>
<span id="cb14-181"><a href="#cb14-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>   <span class="cf">if</span> <span class="op">(</span>has_error_for_dir<span class="op">(</span>dirs<span class="op">))</span> <span class="op">{</span></span>
<span id="cb14-182"><a href="#cb14-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>     <span class="cf">return</span> dirs2srcs<span class="op">;</span></span>
<span id="cb14-183"><a href="#cb14-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   <span class="op">}</span></span>
<span id="cb14-184"><a href="#cb14-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb14-185"><a href="#cb14-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>   <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> ret <span class="op">=</span></span>
<span id="cb14-186"><a href="#cb14-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>       gen_dirs_and_dirs2srcs<span class="op">(</span>dirs<span class="op">,</span> recursive<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb14-187"><a href="#cb14-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> </span>
<span id="cb14-188"><a href="#cb14-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>   <span class="kw">auto</span> dirs_pkg <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb14-189"><a href="#cb14-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>   <span class="kw">auto</span> assign <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb14-190"><a href="#cb14-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> </span>
<span id="cb14-191"><a href="#cb14-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>   <span class="cf">return</span> src_as_pkg <span class="op">?</span> dirs2srcs_to_src2src<span class="op">(</span>dirs_opt<span class="op">,</span> assign<span class="op">,</span> recursive<span class="op">)</span></span>
<span id="cb14-192"><a href="#cb14-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>                     <span class="op">:</span> assign<span class="op">;</span></span>
<span id="cb14-193"><a href="#cb14-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> <span class="op">}</span></span>
<span id="cb14-194"><a href="#cb14-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb14-195"><a href="#cb14-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> FileUtils<span class="op">::</span><span class="dt">Filename2Path_t</span> gen_src_db<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dir2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-196"><a href="#cb14-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb14-197"><a href="#cb14-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> </span>
<span id="cb14-198"><a href="#cb14-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pair <span class="op">:</span> dir2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-199"><a href="#cb14-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>     <span class="kw">auto</span> s <span class="op">=</span> pair<span class="op">.</span>second<span class="op">;</span></span>
<span id="cb14-200"><a href="#cb14-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>     Nstd<span class="op">::</span>Concatenate<span class="op">(</span>srcs<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>s<span class="op">));</span></span>
<span id="cb14-201"><a href="#cb14-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>   <span class="op">}</span></span>
<span id="cb14-202"><a href="#cb14-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> </span>
<span id="cb14-203"><a href="#cb14-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>   <span class="cf">return</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb14-204"><a href="#cb14-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> <span class="op">}</span></span>
<span id="cb14-205"><a href="#cb14-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb14-206"><a href="#cb14-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb14-207"><a href="#cb14-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span> PkgGenerator<span class="op">::</span>PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-208"><a href="#cb14-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>                            FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-209"><a href="#cb14-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>                            <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span></span>
<span id="cb14-210"><a href="#cb14-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>     <span class="op">:</span> <span class="va">dirs_</span><span class="op">{</span>gen_dirs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb14-211"><a href="#cb14-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> </span>
<span id="cb14-212"><a href="#cb14-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="dt">bool</span> PkgGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-213"><a href="#cb14-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>   StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">dirs_</span><span class="op">);</span></span>
<span id="cb14-214"><a href="#cb14-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span> </span>
<span id="cb14-215"><a href="#cb14-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-216"><a href="#cb14-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span> <span class="op">}</span></span>
<span id="cb14-217"><a href="#cb14-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span> </span>
<span id="cb14-218"><a href="#cb14-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span> SrcsGenerator<span class="op">::</span>SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-219"><a href="#cb14-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>                              FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-220"><a href="#cb14-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>                              <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span></span>
<span id="cb14-221"><a href="#cb14-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     <span class="op">:</span> <span class="va">dirs_</span><span class="op">{</span>gen_dirs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb14-222"><a href="#cb14-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span> </span>
<span id="cb14-223"><a href="#cb14-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> <span class="dt">bool</span> SrcsGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-224"><a href="#cb14-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>   <span class="kw">auto</span> ret <span class="op">=</span></span>
<span id="cb14-225"><a href="#cb14-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>       <span class="bu">std::</span>pair<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>GetCppDirsSrcs<span class="op">(</span><span class="va">dirs_</span><span class="op">)};</span></span>
<span id="cb14-226"><a href="#cb14-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>   <span class="kw">auto</span> dirs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>first<span class="op">)};</span></span>
<span id="cb14-227"><a href="#cb14-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{</span><span class="bu">std::</span>move<span class="op">(</span>ret<span class="op">.</span>second<span class="op">)};</span></span>
<span id="cb14-228"><a href="#cb14-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb14-229"><a href="#cb14-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span> </span>
<span id="cb14-230"><a href="#cb14-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>   <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{</span>GenCppDirs<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">)};</span></span>
<span id="cb14-231"><a href="#cb14-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span> </span>
<span id="cb14-232"><a href="#cb14-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d <span class="op">:</span> cpp_dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-233"><a href="#cb14-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     os <span class="op">&lt;&lt;</span> <span class="st">&quot;---&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-234"><a href="#cb14-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>     os <span class="op">&lt;&lt;</span> d <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-235"><a href="#cb14-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>   <span class="op">}</span></span>
<span id="cb14-236"><a href="#cb14-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span> </span>
<span id="cb14-237"><a href="#cb14-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-238"><a href="#cb14-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span> <span class="op">}</span></span>
<span id="cb14-239"><a href="#cb14-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span> </span>
<span id="cb14-240"><a href="#cb14-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span> Pkg2SrcsGenerator<span class="op">::</span>Pkg2SrcsGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-241"><a href="#cb14-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>                                      <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb14-242"><a href="#cb14-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>                                      FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-243"><a href="#cb14-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>                                      <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span></span>
<span id="cb14-244"><a href="#cb14-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>     <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">{</span>gen_dirs2srcs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> src_as_pkg<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb14-245"><a href="#cb14-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span> </span>
<span id="cb14-246"><a href="#cb14-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span> <span class="dt">bool</span> Pkg2SrcsGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-247"><a href="#cb14-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>   StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">dirs2srcs_</span><span class="op">);</span></span>
<span id="cb14-248"><a href="#cb14-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span> </span>
<span id="cb14-249"><a href="#cb14-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-250"><a href="#cb14-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span> <span class="op">}</span></span>
<span id="cb14-251"><a href="#cb14-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span> </span>
<span id="cb14-252"><a href="#cb14-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span> Pkg2PkgGenerator<span class="op">::</span>Pkg2PkgGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">,</span> <span class="dt">bool</span> recursive<span class="op">,</span></span>
<span id="cb14-253"><a href="#cb14-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span>                                    <span class="dt">bool</span> src_as_pkg<span class="op">,</span></span>
<span id="cb14-254"><a href="#cb14-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>                                    FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs_opt<span class="op">,</span></span>
<span id="cb14-255"><a href="#cb14-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>                                    <span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>pattern<span class="op">)</span></span>
<span id="cb14-256"><a href="#cb14-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>     <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">{</span>gen_dirs2srcs<span class="op">(</span>in<span class="op">,</span> recursive<span class="op">,</span> src_as_pkg<span class="op">,</span> dirs_opt<span class="op">,</span> pattern<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb14-257"><a href="#cb14-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span> </span>
<span id="cb14-258"><a href="#cb14-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span> <span class="dt">bool</span> Pkg2PkgGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-259"><a href="#cb14-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>   <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb14-260"><a href="#cb14-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span> </span>
<span id="cb14-261"><a href="#cb14-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> gen_src_db<span class="op">(</span><span class="va">dirs2srcs_</span><span class="op">);</span></span>
<span id="cb14-262"><a href="#cb14-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span> </span>
<span id="cb14-263"><a href="#cb14-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pair <span class="op">:</span> <span class="va">dirs2srcs_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-264"><a href="#cb14-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>     cpp_dirs<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>pair<span class="op">.</span>first<span class="op">,</span> GenCppSrc<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> db<span class="op">)});</span></span>
<span id="cb14-265"><a href="#cb14-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span>   <span class="op">}</span></span>
<span id="cb14-266"><a href="#cb14-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span> </span>
<span id="cb14-267"><a href="#cb14-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>   <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels <span class="op">=</span> GenDepRels<span class="op">(</span>cpp_dirs<span class="op">);</span></span>
<span id="cb14-268"><a href="#cb14-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span> </span>
<span id="cb14-269"><a href="#cb14-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>   StoreToStream<span class="op">(</span>os<span class="op">,</span> dep_rels<span class="op">);</span></span>
<span id="cb14-270"><a href="#cb14-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span> </span>
<span id="cb14-271"><a href="#cb14-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-272"><a href="#cb14-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span> <span class="op">}</span></span>
<span id="cb14-273"><a href="#cb14-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span> </span>
<span id="cb14-274"><a href="#cb14-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb14-275"><a href="#cb14-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span> <span class="dt">DepRels_t</span> gen_dep_rel<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-276"><a href="#cb14-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>   <span class="cf">if</span> <span class="op">(</span>in<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-277"><a href="#cb14-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>     <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;IN-file needed&quot;</span><span class="op">};</span></span>
<span id="cb14-278"><a href="#cb14-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span>   <span class="op">}</span></span>
<span id="cb14-279"><a href="#cb14-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span> </span>
<span id="cb14-280"><a href="#cb14-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span>   <span class="kw">auto</span> ret <span class="op">=</span></span>
<span id="cb14-281"><a href="#cb14-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>       <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>in<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb14-282"><a href="#cb14-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span> </span>
<span id="cb14-283"><a href="#cb14-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>   <span class="cf">if</span> <span class="op">(!</span>ret<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-284"><a href="#cb14-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>     <span class="cf">throw</span> <span class="bu">std::</span>runtime_error<span class="op">{</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">};</span></span>
<span id="cb14-285"><a href="#cb14-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span>   <span class="op">}</span></span>
<span id="cb14-286"><a href="#cb14-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span> </span>
<span id="cb14-287"><a href="#cb14-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>   <span class="cf">return</span> <span class="op">*</span>ret<span class="op">;</span></span>
<span id="cb14-288"><a href="#cb14-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span> <span class="op">}</span></span>
<span id="cb14-289"><a href="#cb14-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb14-290"><a href="#cb14-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span> </span>
<span id="cb14-291"><a href="#cb14-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span> <span class="kw">struct</span> ArchGenerator<span class="op">::</span>Impl <span class="op">{</span></span>
<span id="cb14-292"><a href="#cb14-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>   Impl<span class="op">(</span><span class="dt">DepRels_t</span> <span class="op">&amp;&amp;</span>a_dep_rels<span class="op">)</span></span>
<span id="cb14-293"><a href="#cb14-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span>       <span class="op">:</span> dep_rels<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>a_dep_rels<span class="op">)),</span> arch<span class="op">(</span>ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels<span class="op">))</span> <span class="op">{}</span></span>
<span id="cb14-294"><a href="#cb14-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>   <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels<span class="op">;</span></span>
<span id="cb14-295"><a href="#cb14-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>   <span class="dt">Arch_t</span> <span class="at">const</span> arch<span class="op">;</span></span>
<span id="cb14-296"><a href="#cb14-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span> <span class="op">};</span></span>
<span id="cb14-297"><a href="#cb14-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> </span>
<span id="cb14-298"><a href="#cb14-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span> ArchGenerator<span class="op">::</span>ArchGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">)</span></span>
<span id="cb14-299"><a href="#cb14-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>     <span class="op">:</span> <span class="va">impl_</span><span class="op">{</span><span class="bu">std::</span>make_unique<span class="op">&lt;</span>ArchGenerator<span class="op">::</span>Impl<span class="op">&gt;(</span>gen_dep_rel<span class="op">(</span>in<span class="op">))}</span> <span class="op">{}</span></span>
<span id="cb14-300"><a href="#cb14-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span> </span>
<span id="cb14-301"><a href="#cb14-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span> <span class="dt">bool</span> ArchGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-302"><a href="#cb14-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>   StoreToStream<span class="op">(</span>os<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">);</span></span>
<span id="cb14-303"><a href="#cb14-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span> </span>
<span id="cb14-304"><a href="#cb14-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-305"><a href="#cb14-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span> <span class="op">}</span></span>
<span id="cb14-306"><a href="#cb14-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span> ArchGenerator<span class="op">::~</span>ArchGenerator<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb14-307"><a href="#cb14-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span> </span>
<span id="cb14-308"><a href="#cb14-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span> Arch2PUmlGenerator<span class="op">::</span>Arch2PUmlGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">)</span></span>
<span id="cb14-309"><a href="#cb14-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>     <span class="op">:</span> ArchGenerator<span class="op">{</span>in<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb14-310"><a href="#cb14-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span> </span>
<span id="cb14-311"><a href="#cb14-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span> <span class="dt">bool</span> Arch2PUmlGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-312"><a href="#cb14-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>   os <span class="op">&lt;&lt;</span> <span class="st">&quot;@startuml&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-313"><a href="#cb14-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>   os <span class="op">&lt;&lt;</span> <span class="st">&quot;scale max 730 width&quot;</span></span>
<span id="cb14-314"><a href="#cb14-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> <span class="co">// これ以上大きいとpdfにした時に右端が切れる</span></span>
<span id="cb14-315"><a href="#cb14-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span> </span>
<span id="cb14-316"><a href="#cb14-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>   os <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-317"><a href="#cb14-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>   os <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-318"><a href="#cb14-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span> </span>
<span id="cb14-319"><a href="#cb14-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>   os <span class="op">&lt;&lt;</span> ToPlantUML_Rectangle<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>dep_rels<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-320"><a href="#cb14-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>   os <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-321"><a href="#cb14-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span> </span>
<span id="cb14-322"><a href="#cb14-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span>   os <span class="op">&lt;&lt;</span> <span class="st">&quot;@enduml&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-323"><a href="#cb14-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span> </span>
<span id="cb14-324"><a href="#cb14-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb14-325"><a href="#cb14-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span> <span class="op">}</span></span>
<span id="cb14-326"><a href="#cb14-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span> </span>
<span id="cb14-327"><a href="#cb14-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span> CyclicGenerator<span class="op">::</span>CyclicGenerator<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>in<span class="op">)</span></span>
<span id="cb14-328"><a href="#cb14-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>     <span class="op">:</span> ArchGenerator<span class="op">{</span>in<span class="op">},</span> <span class="va">has_cyclic_dep_</span><span class="op">{</span></span>
<span id="cb14-329"><a href="#cb14-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>                              HasCyclicDeps<span class="op">(</span><span class="va">impl_</span><span class="op">-&gt;</span>arch<span class="op">,</span> <span class="va">impl_</span><span class="op">-&gt;</span>dep_rels<span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb14-330"><a href="#cb14-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span> </span>
<span id="cb14-331"><a href="#cb14-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span> <span class="dt">bool</span> CyclicGenerator<span class="op">::</span>Output<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb14-332"><a href="#cb14-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>   os <span class="op">&lt;&lt;</span> <span class="st">&quot;cyclic dependencies &quot;</span> <span class="op">&lt;&lt;</span> <span class="op">(</span><span class="va">has_cyclic_dep_</span> <span class="op">?</span> <span class="st">&quot;&quot;</span> <span class="op">:</span> <span class="st">&quot;not &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;found&quot;</span></span>
<span id="cb14-333"><a href="#cb14-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>      <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb14-334"><a href="#cb14-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span> </span>
<span id="cb14-335"><a href="#cb14-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>   <span class="cf">return</span> <span class="op">!</span><span class="va">has_cyclic_dep_</span><span class="op">;</span></span>
<span id="cb14-336"><a href="#cb14-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span> <span class="op">}</span></span>
<span id="cb14-337"><a href="#cb14-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcload_store_format.cpp">example/deps/dependency/src/load_store_format.cpp
<a id="SS_3_1_15"></a></h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">auto</span> <span class="at">const</span> file_format_dir2srcs <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#dir2srcs&quot;</span><span class="op">};</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">auto</span> <span class="at">const</span> file_format_dir <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#dir&quot;</span><span class="op">};</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">auto</span> <span class="at">const</span> file_format_deps <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#deps&quot;</span><span class="op">};</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">auto</span> <span class="at">const</span> file_format_arch <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span><span class="st">&quot;#arch&quot;</span><span class="op">};</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   os <span class="op">&lt;&lt;</span> file_format_dir <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   os <span class="op">&lt;&lt;</span> paths <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="op">}</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   os <span class="op">&lt;&lt;</span> file_format_dir2srcs <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   os <span class="op">&lt;&lt;</span> dirs2srcs <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="op">}</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="dt">bool</span> is_format_dirs2srcs<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_dir2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="op">}</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="op">}</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="op">}</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="dt">load_Dirs2Srcs_t</span><span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_dir <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^([\w/.]+)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_src <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s+([\w/.]+)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   <span class="kw">auto</span> dir <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">{};</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="kw">auto</span> srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> </span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>         <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_sep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>       dirs2srcs<span class="op">[</span>dir<span class="op">].</span>swap<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_dir<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>       dir <span class="op">=</span> results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_src<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>       srcs<span class="op">.</span>push_back<span class="op">(</span>results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>       <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> line <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>       <span class="ot">assert</span><span class="op">(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="op">}</span></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   <span class="op">}</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="cf">return</span> dirs2srcs<span class="op">;</span></span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> <span class="op">}</span></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> Load_Dirs2Srcs<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>   <span class="kw">auto</span> dirs2srcs <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="cf">if</span> <span class="op">(!</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="op">}</span></span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="cf">if</span> <span class="op">(!</span>is_format_dirs2srcs<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="op">}</span></span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> </span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   <span class="cf">return</span> <span class="dt">load_Dirs2Srcs_t</span><span class="op">(</span>is<span class="op">);</span></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> <span class="op">}</span></span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> <span class="dt">bool</span> is_format_dirs<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="op">}</span></span>
<span id="cb15-99"><a href="#cb15-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   <span class="op">}</span></span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="op">}</span></span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> Load_Paths<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>   <span class="kw">auto</span> paths <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb15-107"><a href="#cb15-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> </span>
<span id="cb15-108"><a href="#cb15-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>   <span class="cf">if</span> <span class="op">(!</span>is_format_dirs<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-109"><a href="#cb15-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb15-110"><a href="#cb15-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>   <span class="op">}</span></span>
<span id="cb15-111"><a href="#cb15-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb15-112"><a href="#cb15-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-113"><a href="#cb15-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-114"><a href="#cb15-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>     paths<span class="op">.</span>emplace_back<span class="op">(</span>FileUtils<span class="op">::</span><span class="dt">Path_t</span><span class="op">(</span>line<span class="op">));</span></span>
<span id="cb15-115"><a href="#cb15-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>   <span class="op">}</span></span>
<span id="cb15-116"><a href="#cb15-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> </span>
<span id="cb15-117"><a href="#cb15-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>   <span class="cf">return</span> paths<span class="op">;</span></span>
<span id="cb15-118"><a href="#cb15-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> <span class="op">}</span></span>
<span id="cb15-119"><a href="#cb15-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb15-120"><a href="#cb15-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-121"><a href="#cb15-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>   os <span class="op">&lt;&lt;</span> file_format_deps <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-122"><a href="#cb15-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>   os <span class="op">&lt;&lt;</span> dep_rels <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-123"><a href="#cb15-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> </span>
<span id="cb15-124"><a href="#cb15-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-125"><a href="#cb15-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> <span class="op">}</span></span>
<span id="cb15-126"><a href="#cb15-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> </span>
<span id="cb15-127"><a href="#cb15-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb15-128"><a href="#cb15-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb15-129"><a href="#cb15-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> <span class="dt">bool</span> is_format_deps<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-130"><a href="#cb15-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-131"><a href="#cb15-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span> </span>
<span id="cb15-132"><a href="#cb15-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-133"><a href="#cb15-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="cf">if</span> <span class="op">(</span>line <span class="op">==</span> file_format_deps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-134"><a href="#cb15-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>       <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-135"><a href="#cb15-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>     <span class="op">}</span></span>
<span id="cb15-136"><a href="#cb15-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>   <span class="op">}</span></span>
<span id="cb15-137"><a href="#cb15-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> </span>
<span id="cb15-138"><a href="#cb15-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>   <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb15-139"><a href="#cb15-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="op">}</span></span>
<span id="cb15-140"><a href="#cb15-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> </span>
<span id="cb15-141"><a href="#cb15-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span> <span class="kw">struct</span> <span class="dt">dep_half_t</span> <span class="op">{</span></span>
<span id="cb15-142"><a href="#cb15-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>   <span class="dt">bool</span> valid<span class="op">{</span><span class="kw">false</span><span class="op">};</span></span>
<span id="cb15-143"><a href="#cb15-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>   <span class="bu">std::</span>string from<span class="op">{};</span></span>
<span id="cb15-144"><a href="#cb15-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>   <span class="bu">std::</span>string to<span class="op">{};</span></span>
<span id="cb15-145"><a href="#cb15-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>   <span class="dt">uint32_t</span> count<span class="op">{</span><span class="dv">0</span><span class="op">};</span></span>
<span id="cb15-146"><a href="#cb15-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>   FileUtils<span class="op">::</span><span class="dt">Paths_t</span> headers<span class="op">{};</span></span>
<span id="cb15-147"><a href="#cb15-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span> <span class="op">};</span></span>
<span id="cb15-148"><a href="#cb15-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb15-149"><a href="#cb15-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> gen_paths<span class="op">(</span><span class="bu">std::</span>string <span class="at">const</span> <span class="op">&amp;</span>paths_str<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-150"><a href="#cb15-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>   <span class="kw">auto</span> <span class="at">const</span> sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs"> +</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-151"><a href="#cb15-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="kw">auto</span> ret <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb15-152"><a href="#cb15-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> </span>
<span id="cb15-153"><a href="#cb15-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>   <span class="cf">if</span> <span class="op">(</span>paths_str<span class="op">.</span>size<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-154"><a href="#cb15-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     <span class="kw">auto</span> end <span class="op">=</span> <span class="bu">std::</span>sregex_token_iterator<span class="op">{};</span></span>
<span id="cb15-155"><a href="#cb15-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it <span class="op">=</span> <span class="bu">std::</span>sregex_token_iterator<span class="op">{</span>paths_str<span class="op">.</span>begin<span class="op">(),</span></span>
<span id="cb15-156"><a href="#cb15-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                                               paths_str<span class="op">.</span>end<span class="op">(),</span> sep<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">};</span></span>
<span id="cb15-157"><a href="#cb15-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>          it <span class="op">!=</span> end<span class="op">;</span> <span class="op">++</span>it<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-158"><a href="#cb15-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>       ret<span class="op">.</span>emplace_back<span class="op">(</span>it<span class="op">-&gt;</span>str<span class="op">());</span></span>
<span id="cb15-159"><a href="#cb15-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="op">}</span></span>
<span id="cb15-160"><a href="#cb15-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>   <span class="op">}</span></span>
<span id="cb15-161"><a href="#cb15-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> </span>
<span id="cb15-162"><a href="#cb15-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb15-163"><a href="#cb15-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span> <span class="op">}</span></span>
<span id="cb15-164"><a href="#cb15-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span> </span>
<span id="cb15-165"><a href="#cb15-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> <span class="dt">dep_half_t</span> get_dep_half<span class="op">(</span><span class="bu">std::</span>smatch <span class="at">const</span> <span class="op">&amp;</span>results<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-166"><a href="#cb15-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>   <span class="kw">auto</span> dep_half <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb15-167"><a href="#cb15-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> </span>
<span id="cb15-168"><a href="#cb15-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>   dep_half<span class="op">.</span>valid <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-169"><a href="#cb15-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>   dep_half<span class="op">.</span>from <span class="op">=</span> results<span class="op">[</span><span class="dv">1</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb15-170"><a href="#cb15-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>   dep_half<span class="op">.</span>to <span class="op">=</span> results<span class="op">[</span><span class="dv">2</span><span class="op">].</span>str<span class="op">();</span></span>
<span id="cb15-171"><a href="#cb15-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>   dep_half<span class="op">.</span>count <span class="op">=</span> <span class="bu">std::</span>stoi<span class="op">(</span>results<span class="op">[</span><span class="dv">3</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb15-172"><a href="#cb15-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>   dep_half<span class="op">.</span>headers <span class="op">=</span> gen_paths<span class="op">(</span>results<span class="op">[</span><span class="dv">4</span><span class="op">].</span>str<span class="op">());</span></span>
<span id="cb15-173"><a href="#cb15-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb15-174"><a href="#cb15-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>   <span class="cf">return</span> dep_half<span class="op">;</span></span>
<span id="cb15-175"><a href="#cb15-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> <span class="op">}</span></span>
<span id="cb15-176"><a href="#cb15-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> </span>
<span id="cb15-177"><a href="#cb15-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span> DepRelation gen_dep_rel<span class="op">(</span><span class="dt">dep_half_t</span> <span class="op">&amp;&amp;</span>first<span class="op">,</span> <span class="dt">dep_half_t</span> <span class="op">&amp;&amp;</span>second<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-178"><a href="#cb15-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>   <span class="ot">assert</span><span class="op">(</span>first<span class="op">.</span>valid<span class="op">);</span></span>
<span id="cb15-179"><a href="#cb15-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>   <span class="ot">assert</span><span class="op">(</span>second<span class="op">.</span>valid<span class="op">);</span></span>
<span id="cb15-180"><a href="#cb15-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>   <span class="ot">assert</span><span class="op">(</span>first<span class="op">.</span>from <span class="op">&lt;</span> second<span class="op">.</span>from<span class="op">);</span></span>
<span id="cb15-181"><a href="#cb15-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> </span>
<span id="cb15-182"><a href="#cb15-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>   <span class="cf">return</span> DepRelation<span class="op">{</span>first<span class="op">.</span>from<span class="op">,</span>  first<span class="op">.</span>count<span class="op">,</span>  <span class="bu">std::</span>move<span class="op">(</span>first<span class="op">.</span>headers<span class="op">),</span></span>
<span id="cb15-183"><a href="#cb15-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>                      second<span class="op">.</span>from<span class="op">,</span> second<span class="op">.</span>count<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>second<span class="op">.</span>headers<span class="op">)};</span></span>
<span id="cb15-184"><a href="#cb15-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> <span class="op">}</span></span>
<span id="cb15-185"><a href="#cb15-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb15-186"><a href="#cb15-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span> <span class="dt">DepRels_t</span> <span class="dt">load_DepRelations_t</span><span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-187"><a href="#cb15-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_sep <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^\s*$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-188"><a href="#cb15-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>   <span class="at">static</span> <span class="kw">auto</span> <span class="at">const</span> line_dep <span class="op">=</span></span>
<span id="cb15-189"><a href="#cb15-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>       <span class="bu">std::</span>regex<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">^([\w/.-]+) -&gt; ([\w/.-]+) : ([\d]+) *(.*)$</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb15-190"><a href="#cb15-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> </span>
<span id="cb15-191"><a href="#cb15-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb15-192"><a href="#cb15-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb15-193"><a href="#cb15-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>   <span class="kw">auto</span> second <span class="op">=</span> <span class="dt">dep_half_t</span><span class="op">{};</span></span>
<span id="cb15-194"><a href="#cb15-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb15-195"><a href="#cb15-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>   <span class="kw">auto</span> dep_rels <span class="op">=</span> <span class="dt">DepRels_t</span><span class="op">{};</span></span>
<span id="cb15-196"><a href="#cb15-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> </span>
<span id="cb15-197"><a href="#cb15-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>   <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-198"><a href="#cb15-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     <span class="cf">if</span> <span class="op">(</span><span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb15-199"><a href="#cb15-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>         <span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_sep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-200"><a href="#cb15-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>       dep_rels<span class="op">.</span>emplace_back<span class="op">(</span>gen_dep_rel<span class="op">(</span><span class="bu">std::</span>move<span class="op">(</span>first<span class="op">),</span> <span class="bu">std::</span>move<span class="op">(</span>second<span class="op">)));</span></span>
<span id="cb15-201"><a href="#cb15-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> </span>
<span id="cb15-202"><a href="#cb15-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>       first<span class="op">.</span>valid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb15-203"><a href="#cb15-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>       second<span class="op">.</span>valid <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb15-204"><a href="#cb15-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>     <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>regex_match<span class="op">(</span>line<span class="op">,</span> results<span class="op">,</span> line_dep<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-205"><a href="#cb15-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>       <span class="op">(!</span>first<span class="op">.</span>valid <span class="op">?</span> first <span class="op">:</span> second<span class="op">)</span> <span class="op">=</span> get_dep_half<span class="op">(</span>results<span class="op">);</span></span>
<span id="cb15-206"><a href="#cb15-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb15-207"><a href="#cb15-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>       <span class="ot">assert</span><span class="op">(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb15-208"><a href="#cb15-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>     <span class="op">}</span></span>
<span id="cb15-209"><a href="#cb15-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>   <span class="op">}</span></span>
<span id="cb15-210"><a href="#cb15-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> </span>
<span id="cb15-211"><a href="#cb15-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>   <span class="cf">return</span> dep_rels<span class="op">;</span></span>
<span id="cb15-212"><a href="#cb15-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="op">}</span></span>
<span id="cb15-213"><a href="#cb15-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb15-214"><a href="#cb15-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span> </span>
<span id="cb15-215"><a href="#cb15-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;</span> Load_DepRels<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-216"><a href="#cb15-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>   <span class="cf">if</span> <span class="op">(!</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-217"><a href="#cb15-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb15-218"><a href="#cb15-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>   <span class="op">}</span></span>
<span id="cb15-219"><a href="#cb15-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span> </span>
<span id="cb15-220"><a href="#cb15-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>   <span class="cf">if</span> <span class="op">(!</span>is_format_deps<span class="op">(</span>is<span class="op">))</span> <span class="op">{</span></span>
<span id="cb15-221"><a href="#cb15-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb15-222"><a href="#cb15-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>   <span class="op">}</span></span>
<span id="cb15-223"><a href="#cb15-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> </span>
<span id="cb15-224"><a href="#cb15-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>   <span class="cf">return</span> <span class="dt">load_DepRelations_t</span><span class="op">(</span>is<span class="op">);</span></span>
<span id="cb15-225"><a href="#cb15-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span> <span class="op">}</span></span>
<span id="cb15-226"><a href="#cb15-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span> </span>
<span id="cb15-227"><a href="#cb15-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-228"><a href="#cb15-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>   os <span class="op">&lt;&lt;</span> file_format_arch <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-229"><a href="#cb15-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>   os <span class="op">&lt;&lt;</span> arch <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb15-230"><a href="#cb15-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span> </span>
<span id="cb15-231"><a href="#cb15-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb15-232"><a href="#cb15-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span> <span class="op">}</span></span>
<span id="cb15-233"><a href="#cb15-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencysrcload_store_format.h">example/deps/dependency/src/load_store_format.h
<a id="SS_3_1_16"></a></h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="co">// LoadStore</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">);</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">&gt;</span> Load_Paths<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">);</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="co">// Dirs2Srcs_t</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs2srcs<span class="op">);</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;</span> Load_Dirs2Srcs<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">);</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="co">// DepRels_t</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">DepRels_t</span> <span class="at">const</span> <span class="op">&amp;</span>dep_rels<span class="op">);</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;</span> Load_DepRels<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">);</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="co">// Arch_t</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">&amp;</span>arch<span class="op">);</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutarch_pkg_ut.cpp">example/deps/dependency/ut/arch_pkg_ut.cpp
<a id="SS_3_1_17"></a></h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;arch_pkg.h&quot;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple<span class="op">{</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b.h&quot;</span><span class="op">},</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="op">};</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple2<span class="op">{</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">},</span> <span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;c&quot;</span><span class="op">},</span> <span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;X/E&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">},</span> <span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/B&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;c&quot;</span><span class="op">},</span> <span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">},</span> <span class="st">&quot;X/D&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">},</span> <span class="st">&quot;X/E&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">}}},</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="op">};</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_simple3<span class="op">{</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="co">// A -&gt; B</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="co">// A -&gt; C -&gt; D -&gt; A</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="co">//      C -&gt; B</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">}}},</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">}}},</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">}}},</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">},</span> <span class="st">&quot;D&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> <span class="op">};</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_middle<span class="op">{</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="op">};</span></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels_complex<span class="op">{</span></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="op">{</span>DepRelation<span class="op">{</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>         <span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">},</span></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>         <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">}}},</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>                          <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="op">};</span></span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> </span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>   ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> arch<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>a <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> a<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> a<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>   ASSERT_FALSE<span class="op">(</span>a<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   ASSERT_FALSE<span class="op">(</span>a<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>a<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>children <span class="op">=</span> a<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>   ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> </span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>b <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>arch<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> b<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> b<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> b<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>   ASSERT_FALSE<span class="op">(</span>b<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="op">}</span></span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-116"><a href="#cb17-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple2<span class="op">);</span></span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> </span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>   <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;package  :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>                          <span class="st">&quot;fullname :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>                          <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>                          <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>                          <span class="st">&quot;    A : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-123"><a href="#cb17-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>                          <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-124"><a href="#cb17-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>                          <span class="st">&quot;    C : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>                          <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>                          <span class="st">&quot;children : {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>                          <span class="st">&quot;    package  :A:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>                          <span class="st">&quot;    fullname :X/A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-129"><a href="#cb17-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>                          <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-130"><a href="#cb17-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>                          <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>                          <span class="st">&quot;        B : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>                          <span class="st">&quot;        E : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>                          <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>                          <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>                          <span class="st">&quot;    package  :B:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>                          <span class="st">&quot;    fullname :X/B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>                          <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>                          <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>                          <span class="st">&quot;        C : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>                          <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>                          <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>                          <span class="st">&quot;    package  :C:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>                          <span class="st">&quot;    fullname :X/C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>                          <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>                          <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>                          <span class="st">&quot;        D : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>                          <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>                          <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>                          <span class="st">&quot;    package  :D:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>                          <span class="st">&quot;    fullname :X/D</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>                          <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-155"><a href="#cb17-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>                          <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-156"><a href="#cb17-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                          <span class="st">&quot;        A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-157"><a href="#cb17-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>                          <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-158"><a href="#cb17-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>                          <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-159"><a href="#cb17-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-160"><a href="#cb17-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>                          <span class="st">&quot;    package  :E:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-161"><a href="#cb17-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>                          <span class="st">&quot;    fullname :X/E</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-162"><a href="#cb17-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>                          <span class="st">&quot;    parent   :X</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-163"><a href="#cb17-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>                          <span class="st">&quot;    depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-164"><a href="#cb17-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>                          <span class="st">&quot;        A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-165"><a href="#cb17-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>                          <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-166"><a href="#cb17-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>                          <span class="st">&quot;    children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-167"><a href="#cb17-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>                          <span class="st">&quot;}&quot;</span><span class="op">};</span></span>
<span id="cb17-168"><a href="#cb17-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> </span>
<span id="cb17-169"><a href="#cb17-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>   ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToStringArch<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb17-170"><a href="#cb17-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> <span class="op">}</span></span>
<span id="cb17-171"><a href="#cb17-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb17-172"><a href="#cb17-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkgSimple3<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-173"><a href="#cb17-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple3<span class="op">);</span></span>
<span id="cb17-174"><a href="#cb17-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> </span>
<span id="cb17-175"><a href="#cb17-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>   <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;package  :A:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-176"><a href="#cb17-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>                          <span class="st">&quot;fullname :A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-177"><a href="#cb17-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>                          <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-178"><a href="#cb17-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>                          <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-179"><a href="#cb17-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>                          <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-180"><a href="#cb17-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>                          <span class="st">&quot;    C : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-181"><a href="#cb17-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>                          <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-182"><a href="#cb17-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>                          <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-183"><a href="#cb17-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-184"><a href="#cb17-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>                          <span class="st">&quot;package  :B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-185"><a href="#cb17-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>                          <span class="st">&quot;fullname :B</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-186"><a href="#cb17-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>                          <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-187"><a href="#cb17-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>                          <span class="st">&quot;depend_on: { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-188"><a href="#cb17-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>                          <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-189"><a href="#cb17-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-190"><a href="#cb17-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>                          <span class="st">&quot;package  :C:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-191"><a href="#cb17-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>                          <span class="st">&quot;fullname :C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-192"><a href="#cb17-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>                          <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-193"><a href="#cb17-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>                          <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-194"><a href="#cb17-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>                          <span class="st">&quot;    B : STRAIGHT</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-195"><a href="#cb17-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>                          <span class="st">&quot;    D : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-196"><a href="#cb17-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>                          <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-197"><a href="#cb17-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>                          <span class="st">&quot;children : { }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-198"><a href="#cb17-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>                          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-199"><a href="#cb17-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>                          <span class="st">&quot;package  :D:CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-200"><a href="#cb17-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>                          <span class="st">&quot;fullname :D</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-201"><a href="#cb17-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>                          <span class="st">&quot;parent   :TOP</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-202"><a href="#cb17-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>                          <span class="st">&quot;depend_on: {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-203"><a href="#cb17-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>                          <span class="st">&quot;    A : CYCLIC</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-204"><a href="#cb17-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>                          <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-205"><a href="#cb17-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>                          <span class="st">&quot;children : { }&quot;</span><span class="op">};</span></span>
<span id="cb17-206"><a href="#cb17-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb17-207"><a href="#cb17-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>   ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToStringArch<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb17-208"><a href="#cb17-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span> <span class="op">}</span></span>
<span id="cb17-209"><a href="#cb17-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span> </span>
<span id="cb17-210"><a href="#cb17-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkg2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-211"><a href="#cb17-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb17-212"><a href="#cb17-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> </span>
<span id="cb17-213"><a href="#cb17-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>   ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> arch<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb17-214"><a href="#cb17-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span> </span>
<span id="cb17-215"><a href="#cb17-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>   <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">*</span>mod2_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb17-216"><a href="#cb17-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>   <span class="op">{</span></span>
<span id="cb17-217"><a href="#cb17-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2 <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb17-218"><a href="#cb17-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span> </span>
<span id="cb17-219"><a href="#cb17-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-220"><a href="#cb17-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb17-221"><a href="#cb17-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-222"><a href="#cb17-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>     ASSERT_FALSE<span class="op">(</span>mod2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-223"><a href="#cb17-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span> </span>
<span id="cb17-224"><a href="#cb17-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>     mod2_children <span class="op">=</span> <span class="op">&amp;</span>mod2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-225"><a href="#cb17-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>     ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb17-226"><a href="#cb17-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>   <span class="op">}</span></span>
<span id="cb17-227"><a href="#cb17-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>   <span class="op">{</span></span>
<span id="cb17-228"><a href="#cb17-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2_1 <span class="op">=</span> <span class="op">*</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb17-229"><a href="#cb17-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-230"><a href="#cb17-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-231"><a href="#cb17-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-232"><a href="#cb17-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>     ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-233"><a href="#cb17-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>     ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb17-234"><a href="#cb17-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span> </span>
<span id="cb17-235"><a href="#cb17-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>children <span class="op">=</span> mod2_1<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-236"><a href="#cb17-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb17-237"><a href="#cb17-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>   <span class="op">}</span></span>
<span id="cb17-238"><a href="#cb17-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>   <span class="op">{</span></span>
<span id="cb17-239"><a href="#cb17-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2_2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb17-240"><a href="#cb17-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-241"><a href="#cb17-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-242"><a href="#cb17-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-243"><a href="#cb17-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>     ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-244"><a href="#cb17-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>     ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>front<span class="op">()));</span></span>
<span id="cb17-245"><a href="#cb17-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span> </span>
<span id="cb17-246"><a href="#cb17-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>children <span class="op">=</span> mod2_2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-247"><a href="#cb17-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> children<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb17-248"><a href="#cb17-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>   <span class="op">}</span></span>
<span id="cb17-249"><a href="#cb17-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span> <span class="op">}</span></span>
<span id="cb17-250"><a href="#cb17-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span> </span>
<span id="cb17-251"><a href="#cb17-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ArchPkg3<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-252"><a href="#cb17-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb17-253"><a href="#cb17-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span> </span>
<span id="cb17-254"><a href="#cb17-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>   <span class="co">/* std::cout &lt;&lt; ToStringArch(arch) &lt;&lt; std::endl;</span></span>
<span id="cb17-255"><a href="#cb17-255" aria-hidden="true" tabindex="-1"></a><span class="co">        255 </span></span>
<span id="cb17-256"><a href="#cb17-256" aria-hidden="true" tabindex="-1"></a><span class="co">        256       package  :app1:CYCLIC</span></span>
<span id="cb17-257"><a href="#cb17-257" aria-hidden="true" tabindex="-1"></a><span class="co">        257       parent   :TOP</span></span>
<span id="cb17-258"><a href="#cb17-258" aria-hidden="true" tabindex="-1"></a><span class="co">        258       depend_on: {</span></span>
<span id="cb17-259"><a href="#cb17-259" aria-hidden="true" tabindex="-1"></a><span class="co">        259           mod1</span></span>
<span id="cb17-260"><a href="#cb17-260" aria-hidden="true" tabindex="-1"></a><span class="co">        260       }</span></span>
<span id="cb17-261"><a href="#cb17-261" aria-hidden="true" tabindex="-1"></a><span class="co">        261       children : {</span></span>
<span id="cb17-262"><a href="#cb17-262" aria-hidden="true" tabindex="-1"></a><span class="co">        262           package  :mod1:CYCLIC</span></span>
<span id="cb17-263"><a href="#cb17-263" aria-hidden="true" tabindex="-1"></a><span class="co">        263           parent   :app1</span></span>
<span id="cb17-264"><a href="#cb17-264" aria-hidden="true" tabindex="-1"></a><span class="co">        264           depend_on: {</span></span>
<span id="cb17-265"><a href="#cb17-265" aria-hidden="true" tabindex="-1"></a><span class="co">        265               mod2</span></span>
<span id="cb17-266"><a href="#cb17-266" aria-hidden="true" tabindex="-1"></a><span class="co">        266               mod2_2</span></span>
<span id="cb17-267"><a href="#cb17-267" aria-hidden="true" tabindex="-1"></a><span class="co">        267           }</span></span>
<span id="cb17-268"><a href="#cb17-268" aria-hidden="true" tabindex="-1"></a><span class="co">        268 </span></span>
<span id="cb17-269"><a href="#cb17-269" aria-hidden="true" tabindex="-1"></a><span class="co">        269           package  :mod2</span></span>
<span id="cb17-270"><a href="#cb17-270" aria-hidden="true" tabindex="-1"></a><span class="co">        270           parent   :app1</span></span>
<span id="cb17-271"><a href="#cb17-271" aria-hidden="true" tabindex="-1"></a><span class="co">        271           children : {</span></span>
<span id="cb17-272"><a href="#cb17-272" aria-hidden="true" tabindex="-1"></a><span class="co">        272               package  :mod2_1:CYCLIC</span></span>
<span id="cb17-273"><a href="#cb17-273" aria-hidden="true" tabindex="-1"></a><span class="co">        273               parent   :mod2</span></span>
<span id="cb17-274"><a href="#cb17-274" aria-hidden="true" tabindex="-1"></a><span class="co">        274               depend_on: {</span></span>
<span id="cb17-275"><a href="#cb17-275" aria-hidden="true" tabindex="-1"></a><span class="co">        275                   mod2_2</span></span>
<span id="cb17-276"><a href="#cb17-276" aria-hidden="true" tabindex="-1"></a><span class="co">        276               }</span></span>
<span id="cb17-277"><a href="#cb17-277" aria-hidden="true" tabindex="-1"></a><span class="co">        277 </span></span>
<span id="cb17-278"><a href="#cb17-278" aria-hidden="true" tabindex="-1"></a><span class="co">        278               package  :mod2_2:CYCLIC</span></span>
<span id="cb17-279"><a href="#cb17-279" aria-hidden="true" tabindex="-1"></a><span class="co">        279               parent   :mod2</span></span>
<span id="cb17-280"><a href="#cb17-280" aria-hidden="true" tabindex="-1"></a><span class="co">        280               depend_on: {</span></span>
<span id="cb17-281"><a href="#cb17-281" aria-hidden="true" tabindex="-1"></a><span class="co">        281                   app1</span></span>
<span id="cb17-282"><a href="#cb17-282" aria-hidden="true" tabindex="-1"></a><span class="co">        282                   mod2_1</span></span>
<span id="cb17-283"><a href="#cb17-283" aria-hidden="true" tabindex="-1"></a><span class="co">        283               }</span></span>
<span id="cb17-284"><a href="#cb17-284" aria-hidden="true" tabindex="-1"></a><span class="co">        284           }</span></span>
<span id="cb17-285"><a href="#cb17-285" aria-hidden="true" tabindex="-1"></a><span class="co">        285       }</span></span>
<span id="cb17-286"><a href="#cb17-286" aria-hidden="true" tabindex="-1"></a><span class="co">        286       package  :app2</span></span>
<span id="cb17-287"><a href="#cb17-287" aria-hidden="true" tabindex="-1"></a><span class="co">        287       parent   :TOP</span></span>
<span id="cb17-288"><a href="#cb17-288" aria-hidden="true" tabindex="-1"></a><span class="co">        288       depend_on: {</span></span>
<span id="cb17-289"><a href="#cb17-289" aria-hidden="true" tabindex="-1"></a><span class="co">        289           app1</span></span>
<span id="cb17-290"><a href="#cb17-290" aria-hidden="true" tabindex="-1"></a><span class="co">        290           mod1</span></span>
<span id="cb17-291"><a href="#cb17-291" aria-hidden="true" tabindex="-1"></a><span class="co">        291       }</span></span>
<span id="cb17-292"><a href="#cb17-292" aria-hidden="true" tabindex="-1"></a><span class="co">        292   */</span></span>
<span id="cb17-293"><a href="#cb17-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span> </span>
<span id="cb17-294"><a href="#cb17-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>   <span class="op">{</span></span>
<span id="cb17-295"><a href="#cb17-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>     <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">*</span>app1_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb17-296"><a href="#cb17-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>     <span class="op">{</span></span>
<span id="cb17-297"><a href="#cb17-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span>       <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>app1 <span class="op">=</span> <span class="op">*</span>arch<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb17-298"><a href="#cb17-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span> </span>
<span id="cb17-299"><a href="#cb17-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>       ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> app1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-300"><a href="#cb17-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span>       ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> app1<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb17-301"><a href="#cb17-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span>       ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-302"><a href="#cb17-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>       <span class="op">{</span></span>
<span id="cb17-303"><a href="#cb17-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>         <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>depend <span class="op">=</span> app1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb17-304"><a href="#cb17-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span> </span>
<span id="cb17-305"><a href="#cb17-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-306"><a href="#cb17-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span>         ASSERT_TRUE<span class="op">(</span>app1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb17-307"><a href="#cb17-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>       <span class="op">}</span></span>
<span id="cb17-308"><a href="#cb17-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span> </span>
<span id="cb17-309"><a href="#cb17-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>       ASSERT_TRUE<span class="op">(</span>app1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-310"><a href="#cb17-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span> </span>
<span id="cb17-311"><a href="#cb17-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span>       app1_children <span class="op">=</span> <span class="op">&amp;</span>app1<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-312"><a href="#cb17-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>       ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app1_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb17-313"><a href="#cb17-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>     <span class="op">}</span></span>
<span id="cb17-314"><a href="#cb17-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>     <span class="op">{</span></span>
<span id="cb17-315"><a href="#cb17-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>       <span class="op">{</span></span>
<span id="cb17-316"><a href="#cb17-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>         <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod1 <span class="op">=</span> <span class="op">*</span>app1_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb17-317"><a href="#cb17-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> mod1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-318"><a href="#cb17-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> mod1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-319"><a href="#cb17-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>         ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-320"><a href="#cb17-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>         <span class="op">{</span></span>
<span id="cb17-321"><a href="#cb17-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>           <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>depend <span class="op">=</span> mod1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb17-322"><a href="#cb17-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span> </span>
<span id="cb17-323"><a href="#cb17-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-324"><a href="#cb17-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>           ASSERT_FALSE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb17-325"><a href="#cb17-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span> </span>
<span id="cb17-326"><a href="#cb17-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>           <span class="kw">auto</span> <span class="at">const</span> next <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb17-327"><a href="#cb17-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> next<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-328"><a href="#cb17-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>           ASSERT_TRUE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>next<span class="op">));</span></span>
<span id="cb17-329"><a href="#cb17-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>         <span class="op">}</span></span>
<span id="cb17-330"><a href="#cb17-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span>         ASSERT_TRUE<span class="op">(</span>mod1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-331"><a href="#cb17-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span>       <span class="op">}</span></span>
<span id="cb17-332"><a href="#cb17-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span>       <span class="dt">Arch_t</span> <span class="at">const</span> <span class="op">*</span>mod2_children<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb17-333"><a href="#cb17-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>       <span class="op">{</span></span>
<span id="cb17-334"><a href="#cb17-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>         <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>app1_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb17-335"><a href="#cb17-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-336"><a href="#cb17-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span>         ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> mod2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-337"><a href="#cb17-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span>         ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-338"><a href="#cb17-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span> </span>
<span id="cb17-339"><a href="#cb17-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span>         mod2_children <span class="op">=</span> <span class="op">&amp;</span>mod2<span class="op">-&gt;</span>Children<span class="op">();</span></span>
<span id="cb17-340"><a href="#cb17-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span>         ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_children<span class="op">-&gt;</span>size<span class="op">());</span></span>
<span id="cb17-341"><a href="#cb17-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span> </span>
<span id="cb17-342"><a href="#cb17-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>         ASSERT_FALSE<span class="op">(</span>mod2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-343"><a href="#cb17-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>       <span class="op">}</span></span>
<span id="cb17-344"><a href="#cb17-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>       <span class="op">{</span></span>
<span id="cb17-345"><a href="#cb17-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span>         <span class="op">{</span></span>
<span id="cb17-346"><a href="#cb17-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>           <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2_1 <span class="op">=</span> <span class="op">*</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb17-347"><a href="#cb17-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-348"><a href="#cb17-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span> </span>
<span id="cb17-349"><a href="#cb17-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-350"><a href="#cb17-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>           ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-351"><a href="#cb17-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>           <span class="op">{</span></span>
<span id="cb17-352"><a href="#cb17-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span>             <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>depend <span class="op">=</span> mod2_1<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb17-353"><a href="#cb17-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-354"><a href="#cb17-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span>             ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb17-355"><a href="#cb17-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>           <span class="op">}</span></span>
<span id="cb17-356"><a href="#cb17-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span> </span>
<span id="cb17-357"><a href="#cb17-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span>           ASSERT_TRUE<span class="op">(</span>mod2_1<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-358"><a href="#cb17-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span>           ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2_1<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-359"><a href="#cb17-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span>         <span class="op">}</span></span>
<span id="cb17-360"><a href="#cb17-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span>         <span class="op">{</span></span>
<span id="cb17-361"><a href="#cb17-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span>           <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>mod2_2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>mod2_children<span class="op">-&gt;</span>cbegin<span class="op">());</span></span>
<span id="cb17-362"><a href="#cb17-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-363"><a href="#cb17-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span> </span>
<span id="cb17-364"><a href="#cb17-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span>           ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2&quot;</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Parent<span class="op">()-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-365"><a href="#cb17-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>           ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-366"><a href="#cb17-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>           <span class="op">{</span></span>
<span id="cb17-367"><a href="#cb17-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>             <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>depend <span class="op">=</span> mod2_2<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb17-368"><a href="#cb17-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-369"><a href="#cb17-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>             ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*(*</span>depend<span class="op">.</span>cbegin<span class="op">())));</span></span>
<span id="cb17-370"><a href="#cb17-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span> </span>
<span id="cb17-371"><a href="#cb17-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>             <span class="kw">auto</span> <span class="at">const</span> next <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb17-372"><a href="#cb17-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span>             ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> <span class="op">(*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">()))-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-373"><a href="#cb17-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span>             ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">(*</span>next<span class="op">));</span></span>
<span id="cb17-374"><a href="#cb17-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span>           <span class="op">}</span></span>
<span id="cb17-375"><a href="#cb17-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span> </span>
<span id="cb17-376"><a href="#cb17-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>           ASSERT_TRUE<span class="op">(</span>mod2_2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-377"><a href="#cb17-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span>           ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> mod2_2<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-378"><a href="#cb17-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span>         <span class="op">}</span></span>
<span id="cb17-379"><a href="#cb17-379" aria-hidden="true" tabindex="-1"></a>        <span class="dv">379</span>       <span class="op">}</span></span>
<span id="cb17-380"><a href="#cb17-380" aria-hidden="true" tabindex="-1"></a>        <span class="dv">380</span>     <span class="op">}</span></span>
<span id="cb17-381"><a href="#cb17-381" aria-hidden="true" tabindex="-1"></a>        <span class="dv">381</span>   <span class="op">}</span></span>
<span id="cb17-382"><a href="#cb17-382" aria-hidden="true" tabindex="-1"></a>        <span class="dv">382</span>   <span class="op">{</span></span>
<span id="cb17-383"><a href="#cb17-383" aria-hidden="true" tabindex="-1"></a>        <span class="dv">383</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>app2 <span class="op">=</span> <span class="op">*</span><span class="bu">std::</span>next<span class="op">(</span>arch<span class="op">.</span>cbegin<span class="op">());</span></span>
<span id="cb17-384"><a href="#cb17-384" aria-hidden="true" tabindex="-1"></a>        <span class="dv">384</span> </span>
<span id="cb17-385"><a href="#cb17-385" aria-hidden="true" tabindex="-1"></a>        <span class="dv">385</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;app2&quot;</span><span class="op">,</span> app2<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-386"><a href="#cb17-386" aria-hidden="true" tabindex="-1"></a>        <span class="dv">386</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> app2<span class="op">-&gt;</span>Parent<span class="op">());</span></span>
<span id="cb17-387"><a href="#cb17-387" aria-hidden="true" tabindex="-1"></a>        <span class="dv">387</span>     ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app2<span class="op">-&gt;</span>DependOn<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-388"><a href="#cb17-388" aria-hidden="true" tabindex="-1"></a>        <span class="dv">388</span>     <span class="op">{</span></span>
<span id="cb17-389"><a href="#cb17-389" aria-hidden="true" tabindex="-1"></a>        <span class="dv">389</span>       <span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>depend <span class="op">=</span> app2<span class="op">-&gt;</span>DependOn<span class="op">();</span></span>
<span id="cb17-390"><a href="#cb17-390" aria-hidden="true" tabindex="-1"></a>        <span class="dv">390</span> </span>
<span id="cb17-391"><a href="#cb17-391" aria-hidden="true" tabindex="-1"></a>        <span class="dv">391</span>       ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> <span class="op">(*</span>depend<span class="op">.</span>cbegin<span class="op">())-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-392"><a href="#cb17-392" aria-hidden="true" tabindex="-1"></a>        <span class="dv">392</span>       ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod1&quot;</span><span class="op">,</span> <span class="op">(*</span><span class="bu">std::</span>next<span class="op">(</span>depend<span class="op">.</span>cbegin<span class="op">()))-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-393"><a href="#cb17-393" aria-hidden="true" tabindex="-1"></a>        <span class="dv">393</span>     <span class="op">}</span></span>
<span id="cb17-394"><a href="#cb17-394" aria-hidden="true" tabindex="-1"></a>        <span class="dv">394</span> </span>
<span id="cb17-395"><a href="#cb17-395" aria-hidden="true" tabindex="-1"></a>        <span class="dv">395</span>     ASSERT_FALSE<span class="op">(</span>app2<span class="op">-&gt;</span>IsCyclic<span class="op">());</span></span>
<span id="cb17-396"><a href="#cb17-396" aria-hidden="true" tabindex="-1"></a>        <span class="dv">396</span>     ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> app2<span class="op">-&gt;</span>Children<span class="op">().</span>size<span class="op">());</span></span>
<span id="cb17-397"><a href="#cb17-397" aria-hidden="true" tabindex="-1"></a>        <span class="dv">397</span>   <span class="op">}</span></span>
<span id="cb17-398"><a href="#cb17-398" aria-hidden="true" tabindex="-1"></a>        <span class="dv">398</span> <span class="op">}</span></span>
<span id="cb17-399"><a href="#cb17-399" aria-hidden="true" tabindex="-1"></a>        <span class="dv">399</span> </span>
<span id="cb17-400"><a href="#cb17-400" aria-hidden="true" tabindex="-1"></a>        <span class="dv">400</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ToPlantUML_Rectangle<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-401"><a href="#cb17-401" aria-hidden="true" tabindex="-1"></a>        <span class="dv">401</span>   <span class="op">{</span></span>
<span id="cb17-402"><a href="#cb17-402" aria-hidden="true" tabindex="-1"></a>        <span class="dv">402</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb17-403"><a href="#cb17-403" aria-hidden="true" tabindex="-1"></a>        <span class="dv">403</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">A</span><span class="sc">\&quot;</span><span class="st"> as A</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-404"><a href="#cb17-404" aria-hidden="true" tabindex="-1"></a>        <span class="dv">404</span>                                  <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">B</span><span class="sc">\&quot;</span><span class="st"> as B&quot;</span><span class="op">};</span></span>
<span id="cb17-405"><a href="#cb17-405" aria-hidden="true" tabindex="-1"></a>        <span class="dv">405</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb17-406"><a href="#cb17-406" aria-hidden="true" tabindex="-1"></a>        <span class="dv">406</span>   <span class="op">}</span></span>
<span id="cb17-407"><a href="#cb17-407" aria-hidden="true" tabindex="-1"></a>        <span class="dv">407</span>   <span class="op">{</span></span>
<span id="cb17-408"><a href="#cb17-408" aria-hidden="true" tabindex="-1"></a>        <span class="dv">408</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb17-409"><a href="#cb17-409" aria-hidden="true" tabindex="-1"></a>        <span class="dv">409</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb17-410"><a href="#cb17-410" aria-hidden="true" tabindex="-1"></a>        <span class="dv">410</span>         <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-411"><a href="#cb17-411" aria-hidden="true" tabindex="-1"></a>        <span class="dv">411</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-412"><a href="#cb17-412" aria-hidden="true" tabindex="-1"></a>        <span class="dv">412</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-413"><a href="#cb17-413" aria-hidden="true" tabindex="-1"></a>        <span class="dv">413</span>         <span class="st">&quot;}&quot;</span><span class="op">};</span></span>
<span id="cb17-414"><a href="#cb17-414" aria-hidden="true" tabindex="-1"></a>        <span class="dv">414</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb17-415"><a href="#cb17-415" aria-hidden="true" tabindex="-1"></a>        <span class="dv">415</span>   <span class="op">}</span></span>
<span id="cb17-416"><a href="#cb17-416" aria-hidden="true" tabindex="-1"></a>        <span class="dv">416</span>   <span class="op">{</span></span>
<span id="cb17-417"><a href="#cb17-417" aria-hidden="true" tabindex="-1"></a>        <span class="dv">417</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb17-418"><a href="#cb17-418" aria-hidden="true" tabindex="-1"></a>        <span class="dv">418</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb17-419"><a href="#cb17-419" aria-hidden="true" tabindex="-1"></a>        <span class="dv">419</span>         <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-420"><a href="#cb17-420" aria-hidden="true" tabindex="-1"></a>        <span class="dv">420</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-421"><a href="#cb17-421" aria-hidden="true" tabindex="-1"></a>        <span class="dv">421</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-422"><a href="#cb17-422" aria-hidden="true" tabindex="-1"></a>        <span class="dv">422</span>         <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-423"><a href="#cb17-423" aria-hidden="true" tabindex="-1"></a>        <span class="dv">423</span>         <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-424"><a href="#cb17-424" aria-hidden="true" tabindex="-1"></a>        <span class="dv">424</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-425"><a href="#cb17-425" aria-hidden="true" tabindex="-1"></a>        <span class="dv">425</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-426"><a href="#cb17-426" aria-hidden="true" tabindex="-1"></a>        <span class="dv">426</span>         <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app2&quot;</span><span class="op">};</span></span>
<span id="cb17-427"><a href="#cb17-427" aria-hidden="true" tabindex="-1"></a>        <span class="dv">427</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">));</span></span>
<span id="cb17-428"><a href="#cb17-428" aria-hidden="true" tabindex="-1"></a>        <span class="dv">428</span>   <span class="op">}</span></span>
<span id="cb17-429"><a href="#cb17-429" aria-hidden="true" tabindex="-1"></a>        <span class="dv">429</span> <span class="op">}</span></span>
<span id="cb17-430"><a href="#cb17-430" aria-hidden="true" tabindex="-1"></a>        <span class="dv">430</span> </span>
<span id="cb17-431"><a href="#cb17-431" aria-hidden="true" tabindex="-1"></a>        <span class="dv">431</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> ToPlantUML_Rectangle2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-432"><a href="#cb17-432" aria-hidden="true" tabindex="-1"></a>        <span class="dv">432</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb17-433"><a href="#cb17-433" aria-hidden="true" tabindex="-1"></a>        <span class="dv">433</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb17-434"><a href="#cb17-434" aria-hidden="true" tabindex="-1"></a>        <span class="dv">434</span>       <span class="st">&quot;ut_data___app1 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-435"><a href="#cb17-435" aria-hidden="true" tabindex="-1"></a>        <span class="dv">435</span>       <span class="st">&quot;ut_data___app1___mod2___mod2_2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-436"><a href="#cb17-436" aria-hidden="true" tabindex="-1"></a>        <span class="dv">436</span>       <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-437"><a href="#cb17-437" aria-hidden="true" tabindex="-1"></a>        <span class="dv">437</span>       <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-438"><a href="#cb17-438" aria-hidden="true" tabindex="-1"></a>        <span class="dv">438</span>       <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; &quot;</span></span>
<span id="cb17-439"><a href="#cb17-439" aria-hidden="true" tabindex="-1"></a>        <span class="dv">439</span>       <span class="st">&quot;ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-440"><a href="#cb17-440" aria-hidden="true" tabindex="-1"></a>        <span class="dv">440</span>       <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb17-441"><a href="#cb17-441" aria-hidden="true" tabindex="-1"></a>        <span class="dv">441</span>       <span class="st">&quot;ut_data___app1___mod2___mod2_1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> &lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> &quot;</span></span>
<span id="cb17-442"><a href="#cb17-442" aria-hidden="true" tabindex="-1"></a>        <span class="dv">442</span>       <span class="st">&quot;ut_data___app1___mod2___mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb17-443"><a href="#cb17-443" aria-hidden="true" tabindex="-1"></a>        <span class="dv">443</span> </span>
<span id="cb17-444"><a href="#cb17-444" aria-hidden="true" tabindex="-1"></a>        <span class="dv">444</span>   ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ToPlantUML_Rectangle<span class="op">(</span>arch<span class="op">,</span> dep_rels_complex<span class="op">));</span></span>
<span id="cb17-445"><a href="#cb17-445" aria-hidden="true" tabindex="-1"></a>        <span class="dv">445</span> <span class="op">}</span></span>
<span id="cb17-446"><a href="#cb17-446" aria-hidden="true" tabindex="-1"></a>        <span class="dv">446</span> </span>
<span id="cb17-447"><a href="#cb17-447" aria-hidden="true" tabindex="-1"></a>        <span class="dv">447</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> HasCyclicDeps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-448"><a href="#cb17-448" aria-hidden="true" tabindex="-1"></a>        <span class="dv">448</span>   <span class="op">{</span></span>
<span id="cb17-449"><a href="#cb17-449" aria-hidden="true" tabindex="-1"></a>        <span class="dv">449</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb17-450"><a href="#cb17-450" aria-hidden="true" tabindex="-1"></a>        <span class="dv">450</span>     ASSERT_FALSE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_simple<span class="op">));</span></span>
<span id="cb17-451"><a href="#cb17-451" aria-hidden="true" tabindex="-1"></a>        <span class="dv">451</span>   <span class="op">}</span></span>
<span id="cb17-452"><a href="#cb17-452" aria-hidden="true" tabindex="-1"></a>        <span class="dv">452</span>   <span class="op">{</span></span>
<span id="cb17-453"><a href="#cb17-453" aria-hidden="true" tabindex="-1"></a>        <span class="dv">453</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_middle<span class="op">);</span></span>
<span id="cb17-454"><a href="#cb17-454" aria-hidden="true" tabindex="-1"></a>        <span class="dv">454</span>     ASSERT_TRUE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_middle<span class="op">));</span></span>
<span id="cb17-455"><a href="#cb17-455" aria-hidden="true" tabindex="-1"></a>        <span class="dv">455</span>   <span class="op">}</span></span>
<span id="cb17-456"><a href="#cb17-456" aria-hidden="true" tabindex="-1"></a>        <span class="dv">456</span>   <span class="op">{</span></span>
<span id="cb17-457"><a href="#cb17-457" aria-hidden="true" tabindex="-1"></a>        <span class="dv">457</span>     <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb17-458"><a href="#cb17-458" aria-hidden="true" tabindex="-1"></a>        <span class="dv">458</span>     ASSERT_TRUE<span class="op">(</span>HasCyclicDeps<span class="op">(</span>arch<span class="op">,</span> dep_rels_complex<span class="op">));</span></span>
<span id="cb17-459"><a href="#cb17-459" aria-hidden="true" tabindex="-1"></a>        <span class="dv">459</span>   <span class="op">}</span></span>
<span id="cb17-460"><a href="#cb17-460" aria-hidden="true" tabindex="-1"></a>        <span class="dv">460</span> <span class="op">}</span></span>
<span id="cb17-461"><a href="#cb17-461" aria-hidden="true" tabindex="-1"></a>        <span class="dv">461</span> </span>
<span id="cb17-462"><a href="#cb17-462" aria-hidden="true" tabindex="-1"></a>        <span class="dv">462</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-463"><a href="#cb17-463" aria-hidden="true" tabindex="-1"></a>        <span class="dv">463</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple<span class="op">);</span></span>
<span id="cb17-464"><a href="#cb17-464" aria-hidden="true" tabindex="-1"></a>        <span class="dv">464</span> </span>
<span id="cb17-465"><a href="#cb17-465" aria-hidden="true" tabindex="-1"></a>        <span class="dv">465</span>   <span class="op">{</span></span>
<span id="cb17-466"><a href="#cb17-466" aria-hidden="true" tabindex="-1"></a>        <span class="dv">466</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_a <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb17-467"><a href="#cb17-467" aria-hidden="true" tabindex="-1"></a>        <span class="dv">467</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a<span class="op">);</span></span>
<span id="cb17-468"><a href="#cb17-468" aria-hidden="true" tabindex="-1"></a>        <span class="dv">468</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-469"><a href="#cb17-469" aria-hidden="true" tabindex="-1"></a>        <span class="dv">469</span>   <span class="op">}</span></span>
<span id="cb17-470"><a href="#cb17-470" aria-hidden="true" tabindex="-1"></a>        <span class="dv">470</span>   <span class="op">{</span></span>
<span id="cb17-471"><a href="#cb17-471" aria-hidden="true" tabindex="-1"></a>        <span class="dv">471</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_a_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb17-472"><a href="#cb17-472" aria-hidden="true" tabindex="-1"></a>        <span class="dv">472</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a_f<span class="op">);</span></span>
<span id="cb17-473"><a href="#cb17-473" aria-hidden="true" tabindex="-1"></a>        <span class="dv">473</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-474"><a href="#cb17-474" aria-hidden="true" tabindex="-1"></a>        <span class="dv">474</span>   <span class="op">}</span></span>
<span id="cb17-475"><a href="#cb17-475" aria-hidden="true" tabindex="-1"></a>        <span class="dv">475</span>   <span class="op">{</span></span>
<span id="cb17-476"><a href="#cb17-476" aria-hidden="true" tabindex="-1"></a>        <span class="dv">476</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_b <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">);</span></span>
<span id="cb17-477"><a href="#cb17-477" aria-hidden="true" tabindex="-1"></a>        <span class="dv">477</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_b<span class="op">);</span></span>
<span id="cb17-478"><a href="#cb17-478" aria-hidden="true" tabindex="-1"></a>        <span class="dv">478</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> pkg_b<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-479"><a href="#cb17-479" aria-hidden="true" tabindex="-1"></a>        <span class="dv">479</span>   <span class="op">}</span></span>
<span id="cb17-480"><a href="#cb17-480" aria-hidden="true" tabindex="-1"></a>        <span class="dv">480</span>   <span class="op">{</span></span>
<span id="cb17-481"><a href="#cb17-481" aria-hidden="true" tabindex="-1"></a>        <span class="dv">481</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_b_f <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">);</span></span>
<span id="cb17-482"><a href="#cb17-482" aria-hidden="true" tabindex="-1"></a>        <span class="dv">482</span> </span>
<span id="cb17-483"><a href="#cb17-483" aria-hidden="true" tabindex="-1"></a>        <span class="dv">483</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_b_f<span class="op">);</span></span>
<span id="cb17-484"><a href="#cb17-484" aria-hidden="true" tabindex="-1"></a>        <span class="dv">484</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">,</span> pkg_b_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-485"><a href="#cb17-485" aria-hidden="true" tabindex="-1"></a>        <span class="dv">485</span>   <span class="op">}</span></span>
<span id="cb17-486"><a href="#cb17-486" aria-hidden="true" tabindex="-1"></a>        <span class="dv">486</span> <span class="op">}</span></span>
<span id="cb17-487"><a href="#cb17-487" aria-hidden="true" tabindex="-1"></a>        <span class="dv">487</span> </span>
<span id="cb17-488"><a href="#cb17-488" aria-hidden="true" tabindex="-1"></a>        <span class="dv">488</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-489"><a href="#cb17-489" aria-hidden="true" tabindex="-1"></a>        <span class="dv">489</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_simple2<span class="op">);</span></span>
<span id="cb17-490"><a href="#cb17-490" aria-hidden="true" tabindex="-1"></a>        <span class="dv">490</span> </span>
<span id="cb17-491"><a href="#cb17-491" aria-hidden="true" tabindex="-1"></a>        <span class="dv">491</span>   <span class="op">{</span></span>
<span id="cb17-492"><a href="#cb17-492" aria-hidden="true" tabindex="-1"></a>        <span class="dv">492</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_x <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X&quot;</span><span class="op">);</span></span>
<span id="cb17-493"><a href="#cb17-493" aria-hidden="true" tabindex="-1"></a>        <span class="dv">493</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_x<span class="op">);</span></span>
<span id="cb17-494"><a href="#cb17-494" aria-hidden="true" tabindex="-1"></a>        <span class="dv">494</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;X&quot;</span><span class="op">,</span> pkg_x<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-495"><a href="#cb17-495" aria-hidden="true" tabindex="-1"></a>        <span class="dv">495</span>   <span class="op">}</span></span>
<span id="cb17-496"><a href="#cb17-496" aria-hidden="true" tabindex="-1"></a>        <span class="dv">496</span>   <span class="op">{</span></span>
<span id="cb17-497"><a href="#cb17-497" aria-hidden="true" tabindex="-1"></a>        <span class="dv">497</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_x_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X&quot;</span><span class="op">);</span></span>
<span id="cb17-498"><a href="#cb17-498" aria-hidden="true" tabindex="-1"></a>        <span class="dv">498</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_x_f<span class="op">);</span></span>
<span id="cb17-499"><a href="#cb17-499" aria-hidden="true" tabindex="-1"></a>        <span class="dv">499</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;X&quot;</span><span class="op">,</span> pkg_x_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-500"><a href="#cb17-500" aria-hidden="true" tabindex="-1"></a>        <span class="dv">500</span>   <span class="op">}</span></span>
<span id="cb17-501"><a href="#cb17-501" aria-hidden="true" tabindex="-1"></a>        <span class="dv">501</span>   <span class="op">{</span></span>
<span id="cb17-502"><a href="#cb17-502" aria-hidden="true" tabindex="-1"></a>        <span class="dv">502</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_a <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;A&quot;</span><span class="op">);</span></span>
<span id="cb17-503"><a href="#cb17-503" aria-hidden="true" tabindex="-1"></a>        <span class="dv">503</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a<span class="op">);</span></span>
<span id="cb17-504"><a href="#cb17-504" aria-hidden="true" tabindex="-1"></a>        <span class="dv">504</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">,</span> pkg_a<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-505"><a href="#cb17-505" aria-hidden="true" tabindex="-1"></a>        <span class="dv">505</span>   <span class="op">}</span></span>
<span id="cb17-506"><a href="#cb17-506" aria-hidden="true" tabindex="-1"></a>        <span class="dv">506</span>   <span class="op">{</span></span>
<span id="cb17-507"><a href="#cb17-507" aria-hidden="true" tabindex="-1"></a>        <span class="dv">507</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_a_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;X/A&quot;</span><span class="op">);</span></span>
<span id="cb17-508"><a href="#cb17-508" aria-hidden="true" tabindex="-1"></a>        <span class="dv">508</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_a_f<span class="op">);</span></span>
<span id="cb17-509"><a href="#cb17-509" aria-hidden="true" tabindex="-1"></a>        <span class="dv">509</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;X/A&quot;</span><span class="op">,</span> pkg_a_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-510"><a href="#cb17-510" aria-hidden="true" tabindex="-1"></a>        <span class="dv">510</span>   <span class="op">}</span></span>
<span id="cb17-511"><a href="#cb17-511" aria-hidden="true" tabindex="-1"></a>        <span class="dv">511</span>   <span class="op">{</span></span>
<span id="cb17-512"><a href="#cb17-512" aria-hidden="true" tabindex="-1"></a>        <span class="dv">512</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_y <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;Y&quot;</span><span class="op">);</span></span>
<span id="cb17-513"><a href="#cb17-513" aria-hidden="true" tabindex="-1"></a>        <span class="dv">513</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_y<span class="op">);</span></span>
<span id="cb17-514"><a href="#cb17-514" aria-hidden="true" tabindex="-1"></a>        <span class="dv">514</span>   <span class="op">}</span></span>
<span id="cb17-515"><a href="#cb17-515" aria-hidden="true" tabindex="-1"></a>        <span class="dv">515</span>   <span class="op">{</span></span>
<span id="cb17-516"><a href="#cb17-516" aria-hidden="true" tabindex="-1"></a>        <span class="dv">516</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_y_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;Y&quot;</span><span class="op">);</span></span>
<span id="cb17-517"><a href="#cb17-517" aria-hidden="true" tabindex="-1"></a>        <span class="dv">517</span>     ASSERT_EQ<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_y_f<span class="op">);</span></span>
<span id="cb17-518"><a href="#cb17-518" aria-hidden="true" tabindex="-1"></a>        <span class="dv">518</span>   <span class="op">}</span></span>
<span id="cb17-519"><a href="#cb17-519" aria-hidden="true" tabindex="-1"></a>        <span class="dv">519</span> <span class="op">}</span></span>
<span id="cb17-520"><a href="#cb17-520" aria-hidden="true" tabindex="-1"></a>        <span class="dv">520</span> </span>
<span id="cb17-521"><a href="#cb17-521" aria-hidden="true" tabindex="-1"></a>        <span class="dv">521</span> TEST<span class="op">(</span>arch_pkg<span class="op">,</span> FindArchPkg3<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-522"><a href="#cb17-522" aria-hidden="true" tabindex="-1"></a>        <span class="dv">522</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels_complex<span class="op">);</span></span>
<span id="cb17-523"><a href="#cb17-523" aria-hidden="true" tabindex="-1"></a>        <span class="dv">523</span> </span>
<span id="cb17-524"><a href="#cb17-524" aria-hidden="true" tabindex="-1"></a>        <span class="dv">524</span>   <span class="op">{</span></span>
<span id="cb17-525"><a href="#cb17-525" aria-hidden="true" tabindex="-1"></a>        <span class="dv">525</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_app1 <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;app1&quot;</span><span class="op">);</span></span>
<span id="cb17-526"><a href="#cb17-526" aria-hidden="true" tabindex="-1"></a>        <span class="dv">526</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_app1<span class="op">);</span></span>
<span id="cb17-527"><a href="#cb17-527" aria-hidden="true" tabindex="-1"></a>        <span class="dv">527</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> pkg_app1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-528"><a href="#cb17-528" aria-hidden="true" tabindex="-1"></a>        <span class="dv">528</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> pkg_app1<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-529"><a href="#cb17-529" aria-hidden="true" tabindex="-1"></a>        <span class="dv">529</span>   <span class="op">}</span></span>
<span id="cb17-530"><a href="#cb17-530" aria-hidden="true" tabindex="-1"></a>        <span class="dv">530</span>   <span class="op">{</span></span>
<span id="cb17-531"><a href="#cb17-531" aria-hidden="true" tabindex="-1"></a>        <span class="dv">531</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_app1_f <span class="op">=</span> FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;ut_data/app1&quot;</span><span class="op">);</span></span>
<span id="cb17-532"><a href="#cb17-532" aria-hidden="true" tabindex="-1"></a>        <span class="dv">532</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_app1_f<span class="op">);</span></span>
<span id="cb17-533"><a href="#cb17-533" aria-hidden="true" tabindex="-1"></a>        <span class="dv">533</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;app1&quot;</span><span class="op">,</span> pkg_app1_f<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-534"><a href="#cb17-534" aria-hidden="true" tabindex="-1"></a>        <span class="dv">534</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> pkg_app1_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-535"><a href="#cb17-535" aria-hidden="true" tabindex="-1"></a>        <span class="dv">535</span>   <span class="op">}</span></span>
<span id="cb17-536"><a href="#cb17-536" aria-hidden="true" tabindex="-1"></a>        <span class="dv">536</span>   <span class="op">{</span></span>
<span id="cb17-537"><a href="#cb17-537" aria-hidden="true" tabindex="-1"></a>        <span class="dv">537</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_mod2_1 <span class="op">=</span> FindArchPkgByName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;mod2_1&quot;</span><span class="op">);</span></span>
<span id="cb17-538"><a href="#cb17-538" aria-hidden="true" tabindex="-1"></a>        <span class="dv">538</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_mod2_1<span class="op">);</span></span>
<span id="cb17-539"><a href="#cb17-539" aria-hidden="true" tabindex="-1"></a>        <span class="dv">539</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-540"><a href="#cb17-540" aria-hidden="true" tabindex="-1"></a>        <span class="dv">540</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-541"><a href="#cb17-541" aria-hidden="true" tabindex="-1"></a>        <span class="dv">541</span>   <span class="op">}</span></span>
<span id="cb17-542"><a href="#cb17-542" aria-hidden="true" tabindex="-1"></a>        <span class="dv">542</span>   <span class="op">{</span></span>
<span id="cb17-543"><a href="#cb17-543" aria-hidden="true" tabindex="-1"></a>        <span class="dv">543</span>     ArchPkg <span class="at">const</span> <span class="op">*</span>pkg_mod2_1_f <span class="op">=</span></span>
<span id="cb17-544"><a href="#cb17-544" aria-hidden="true" tabindex="-1"></a>        <span class="dv">544</span>         FindArchPkgByFullName<span class="op">(</span>arch<span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">);</span></span>
<span id="cb17-545"><a href="#cb17-545" aria-hidden="true" tabindex="-1"></a>        <span class="dv">545</span>     ASSERT_NE<span class="op">(</span><span class="kw">nullptr</span><span class="op">,</span> pkg_mod2_1_f<span class="op">);</span></span>
<span id="cb17-546"><a href="#cb17-546" aria-hidden="true" tabindex="-1"></a>        <span class="dv">546</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1_f<span class="op">-&gt;</span>Name<span class="op">());</span></span>
<span id="cb17-547"><a href="#cb17-547" aria-hidden="true" tabindex="-1"></a>        <span class="dv">547</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> pkg_mod2_1_f<span class="op">-&gt;</span>FullName<span class="op">());</span></span>
<span id="cb17-548"><a href="#cb17-548" aria-hidden="true" tabindex="-1"></a>        <span class="dv">548</span>   <span class="op">}</span></span>
<span id="cb17-549"><a href="#cb17-549" aria-hidden="true" tabindex="-1"></a>        <span class="dv">549</span> <span class="op">}</span></span>
<span id="cb17-550"><a href="#cb17-550" aria-hidden="true" tabindex="-1"></a>        <span class="dv">550</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb17-551"><a href="#cb17-551" aria-hidden="true" tabindex="-1"></a>        <span class="dv">551</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_deps_ut.cpp">example/deps/dependency/ut/cpp_deps_ut.cpp
<a id="SS_3_1_18"></a></h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_deps.h&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>cpp_deps<span class="op">,</span> GenDepRels<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/&quot;</span><span class="op">});</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="kw">auto</span> <span class="at">const</span> assign <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="kw">auto</span> <span class="at">const</span> srcs_db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="kw">auto</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{};</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pair <span class="op">:</span> assign<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>     cpp_dirs<span class="op">.</span>emplace_back<span class="op">(</span>CppDir<span class="op">{</span>pair<span class="op">.</span>first<span class="op">,</span> GenCppSrc<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> srcs_db<span class="op">)});</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="op">}</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="kw">auto</span> dep_all <span class="op">=</span> GenDepRels<span class="op">(</span>cpp_dirs<span class="op">);</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="kw">auto</span> <span class="at">const</span> app1 <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">};</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="kw">auto</span> <span class="at">const</span> mod1 <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">};</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="kw">auto</span> <span class="at">const</span> mod2_2 <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="op">{</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod1 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> app1<span class="op">,</span> mod1<span class="op">);</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>     ASSERT_EQ<span class="op">(</span><span class="dv">6</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod1_IncsAtoB <span class="op">=</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">};</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     ASSERT_EQ<span class="op">(</span>app1_mod1_IncsAtoB<span class="op">,</span> app1_mod1<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span> app1_mod1<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="op">}</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="op">{</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod1 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> mod1<span class="op">,</span> app1<span class="op">);</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     ASSERT_EQ<span class="op">(</span><span class="dv">6</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> app1_mod1<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod1_IncsAtoB <span class="op">=</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">};</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> </span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     ASSERT_EQ<span class="op">(</span>app1_mod1_IncsAtoB<span class="op">,</span> app1_mod1<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span> app1_mod1<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   <span class="op">}</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="op">{</span></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     <span class="kw">auto</span> <span class="at">const</span> mod1_mod2_2 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> mod1<span class="op">,</span> mod2_2<span class="op">);</span></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>     <span class="kw">auto</span> <span class="at">const</span> mod1_mod2_2_IncsAtoB <span class="op">=</span></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     ASSERT_EQ<span class="op">(</span>mod1_mod2_2_IncsAtoB<span class="op">,</span> mod1_mod2_2<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     ASSERT_EQ<span class="op">((</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>                        <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}),</span></span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>               mod1_mod2_2<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="op">}</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>   <span class="op">{</span></span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod2_2 <span class="op">=</span> FindDepRels<span class="op">(</span>dep_all<span class="op">,</span> app1<span class="op">,</span> mod2_2<span class="op">);</span></span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_EQ<span class="op">(</span><span class="dv">3</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     ASSERT_EQ<span class="op">(</span><span class="dv">2</span><span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> </span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>               app1_mod2_2<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="kw">auto</span> <span class="at">const</span> app1_mod2_2_IncsAtoB <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">};</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     ASSERT_EQ<span class="op">(</span>app1_mod2_2_IncsAtoB<span class="op">,</span> app1_mod2_2<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   <span class="op">}</span></span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> <span class="op">}</span></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_dir_ut.cpp">example/deps/dependency/ut/cpp_dir_ut.cpp
<a id="SS_3_1_19"></a></h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_dir.h&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> GenCppDirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_dirs <span class="op">=</span> <span class="dt">CppDirs_t</span><span class="op">{</span>GenCppDirs<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">)};</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="kw">auto</span> a_1_cpp <span class="op">=</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>       <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span> <span class="op">[](</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>         <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;a_1_cpp.cpp&quot;</span><span class="op">;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>       <span class="op">});</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   ASSERT_NE<span class="op">(</span>a_1_cpp<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="kw">auto</span> a_1_cpp_h <span class="op">=</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>       <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>                    <span class="op">[](</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;a_1_cpp.h&quot;</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   ASSERT_NE<span class="op">(</span>a_1_cpp_h<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="kw">auto</span> mod2_2_1_h <span class="op">=</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>       <span class="bu">std::</span>find_if<span class="op">(</span>cpp_dirs<span class="op">.</span>begin<span class="op">(),</span> cpp_dirs<span class="op">.</span>end<span class="op">(),</span> <span class="op">[](</span>CppDir <span class="at">const</span> <span class="op">&amp;</span>pkg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>         <span class="cf">return</span> pkg<span class="op">.</span>Path<span class="op">()</span> <span class="op">==</span> <span class="st">&quot;mod2_2_1.h&quot;</span><span class="op">;</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>       <span class="op">});</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   ASSERT_NE<span class="op">(</span>mod2_2_1_h<span class="op">,</span> cpp_dirs<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="kw">auto</span> ret_a_1_cpp <span class="op">=</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>       <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>a_1_cpp<span class="op">-&gt;</span>DependsOn<span class="op">(*</span>a_1_cpp_h<span class="op">)};</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_a_1_cpp<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="kw">auto</span> ret_mod2_2_1_h <span class="op">=</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>       <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>mod2_2_1_h<span class="op">-&gt;</span>DependsOn<span class="op">(*</span>a_1_cpp_h<span class="op">)};</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   ASSERT_EQ<span class="op">(</span><span class="dv">1</span><span class="op">,</span> ret_mod2_2_1_h<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="op">}</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> CppDir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="kw">auto</span> <span class="at">const</span> packagae_srcs <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="kw">auto</span> mod1 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>                      GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="kw">auto</span> app2 <span class="op">=</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>       CppDir<span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> </span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">));</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">));</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   ASSERT_TRUE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">));</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   ASSERT_FALSE<span class="op">(</span>mod1<span class="op">.</span>Contains<span class="op">(</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">));</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> </span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>   <span class="kw">auto</span> ret_mod1 <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>mod1<span class="op">.</span>DependsOn<span class="op">(</span>app2<span class="op">)};</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>   ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_mod1<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>   ASSERT_EQ<span class="op">(</span><span class="dv">0</span><span class="op">,</span> ret_mod1<span class="op">.</span>second<span class="op">.</span>size<span class="op">());</span></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> </span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="kw">auto</span> ret_app2 <span class="op">=</span> <span class="bu">std::</span>pair<span class="op">&lt;</span><span class="dt">uint32_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;{</span>app2<span class="op">.</span>DependsOn<span class="op">(</span>mod1<span class="op">)};</span></span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>   ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> ret_app2<span class="op">.</span>first<span class="op">);</span></span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   ASSERT_EQ<span class="op">(</span></span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>       <span class="op">(</span><span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}),</span></span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>       ret_app2<span class="op">.</span>second<span class="op">);</span></span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="op">}</span></span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> TEST<span class="op">(</span>cpp_dir<span class="op">,</span> operator_eq_tl<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>dirs<span class="op">,</span> srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="kw">auto</span> <span class="at">const</span> packagae_srcs <span class="op">=</span> FileUtils<span class="op">::</span>AssginSrcsToDirs<span class="op">(</span>dirs<span class="op">,</span> srcs<span class="op">);</span></span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>srcs<span class="op">);</span></span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>   <span class="kw">auto</span> mod1_0 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>                        GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>   <span class="kw">auto</span> mod1_1 <span class="op">=</span> CppDir<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>                        GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="kw">auto</span> app2 <span class="op">=</span></span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>       CppDir<span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> GenCppSrc<span class="op">(</span>packagae_srcs<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">),</span> db<span class="op">)};</span></span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> </span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>   ASSERT_EQ<span class="op">(</span>mod1_0<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   ASSERT_EQ<span class="op">(</span>mod1_0<span class="op">,</span> mod1_1<span class="op">);</span></span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>   ASSERT_EQ<span class="op">(</span>mod1_1<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb19-86"><a href="#cb19-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   ASSERT_NE<span class="op">(</span>mod1_0<span class="op">,</span> app2<span class="op">);</span></span>
<span id="cb19-87"><a href="#cb19-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   ASSERT_LT<span class="op">(</span>mod1_0<span class="op">,</span> app2<span class="op">);</span></span>
<span id="cb19-88"><a href="#cb19-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   ASSERT_GT<span class="op">(</span>app2<span class="op">,</span> mod1_0<span class="op">);</span></span>
<span id="cb19-89"><a href="#cb19-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">}</span></span>
<span id="cb19-90"><a href="#cb19-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb19-91"><a href="#cb19-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutcpp_src_ut.cpp">example/deps/dependency/ut/cpp_src_ut.cpp
<a id="SS_3_1_20"></a></h3>
<div class="sourceCode" id="cb20"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;cpp_src.h&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> CppSrc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="kw">auto</span> <span class="at">const</span> exp_incs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>                                 <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   ASSERT_EQ<span class="op">(</span>cpp_src<span class="op">.</span>GetIncs<span class="op">(),</span> exp_incs<span class="op">);</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="kw">auto</span> <span class="at">const</span> exp_not_found <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">};</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   ASSERT_EQ<span class="op">(</span>cpp_src<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> exp_not_found<span class="op">);</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src2 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="kw">auto</span> <span class="at">const</span> exp_incs2 <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>       <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>       <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">};</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   ASSERT_EQ<span class="op">(</span>cpp_src2<span class="op">.</span>GetIncs<span class="op">(),</span> exp_incs2<span class="op">);</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   ASSERT_EQ<span class="op">(</span>cpp_src2<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src3 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   ASSERT_EQ<span class="op">(</span>cpp_src3<span class="op">.</span>GetIncs<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   ASSERT_EQ<span class="op">(</span>cpp_src3<span class="op">.</span>GetIncsNotFound<span class="op">(),</span> <span class="dt">Paths_t</span><span class="op">{});</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">}</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> GenCppSrc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="kw">auto</span> <span class="at">const</span> srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                             <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">};</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_srcs_act <span class="op">=</span> GenCppSrc<span class="op">(</span>srcs<span class="op">,</span> db<span class="op">);</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   ASSERT_EQ<span class="op">(</span>cpp_srcs_act<span class="op">.</span>size<span class="op">(),</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> </span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   <span class="dt">Paths_t</span> <span class="at">const</span> exp_incs<span class="op">[]{</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>        <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>        <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>        <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>        <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>        <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>       <span class="op">{},</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="op">};</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>   <span class="dt">Paths_t</span> <span class="at">const</span> exp_not_found<span class="op">[]{</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>       <span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">},</span></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>       <span class="op">{</span><span class="st">&quot;stdio.h&quot;</span><span class="op">,</span> <span class="st">&quot;string.h&quot;</span><span class="op">},</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>       <span class="op">{},</span></span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>   <span class="op">};</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   <span class="kw">auto</span> it_exp_srcs <span class="op">=</span> srcs<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>   <span class="kw">auto</span> it_exp_incs <span class="op">=</span> <span class="bu">std::</span>cbegin<span class="op">(</span>exp_incs<span class="op">);</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="kw">auto</span> it_exp_not_found <span class="op">=</span> <span class="bu">std::</span>cbegin<span class="op">(</span>exp_not_found<span class="op">);</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> it_act <span class="op">=</span> cpp_srcs_act<span class="op">.</span>cbegin<span class="op">();</span> it_act <span class="op">!=</span> cpp_srcs_act<span class="op">.</span>cend<span class="op">();</span></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>        <span class="op">++</span>it_act<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     ASSERT_EQ<span class="op">(*</span>it_exp_srcs<span class="op">,</span> it_act<span class="op">-&gt;</span>Path<span class="op">());</span></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     ASSERT_EQ<span class="op">(*</span>it_exp_incs<span class="op">,</span> it_act<span class="op">-&gt;</span>GetIncs<span class="op">());</span></span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>     ASSERT_EQ<span class="op">(*</span>it_exp_not_found<span class="op">,</span> it_act<span class="op">-&gt;</span>GetIncsNotFound<span class="op">());</span></span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="op">++</span>it_exp_srcs<span class="op">;</span></span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="op">++</span>it_exp_incs<span class="op">;</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="op">++</span>it_exp_not_found<span class="op">;</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> </span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   ASSERT_EQ<span class="op">(</span>it_exp_srcs<span class="op">,</span> srcs<span class="op">.</span>cend<span class="op">());</span></span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   ASSERT_EQ<span class="op">(</span>it_exp_incs<span class="op">,</span> <span class="bu">std::</span>cend<span class="op">(</span>exp_incs<span class="op">));</span></span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   ASSERT_EQ<span class="op">(</span>it_exp_not_found<span class="op">,</span> <span class="bu">std::</span>cend<span class="op">(</span>exp_not_found<span class="op">));</span></span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> <span class="op">}</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> operator_equal<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> </span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src_0 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src_1 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src_2 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> </span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   ASSERT_EQ<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>   ASSERT_EQ<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_1<span class="op">);</span></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   ASSERT_EQ<span class="op">(</span>cpp_src_1<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>   ASSERT_NE<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_2<span class="op">);</span></span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> <span class="op">}</span></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> operator_lt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> </span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src_0 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src_1 <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>   ASSERT_LT<span class="op">(</span>cpp_src_0<span class="op">,</span> cpp_src_1<span class="op">);</span></span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   ASSERT_GT<span class="op">(</span>cpp_src_1<span class="op">,</span> cpp_src_0<span class="op">);</span></span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> <span class="op">}</span></span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> </span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> ToString<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>   <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">});</span></span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>   <span class="kw">auto</span> <span class="at">const</span> db <span class="op">=</span> FileUtils<span class="op">::</span>GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>   <span class="kw">auto</span> <span class="at">const</span> cpp_src <span class="op">=</span> CppSrc<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> db<span class="op">};</span></span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span></span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>       <span class="st">&quot;file              : a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>       <span class="st">&quot;path              : ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>       <span class="st">&quot;include           : ut_data/app1/a_1_c.h ut_data/app1/a_1_cpp.h &quot;</span></span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>       <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp &quot;</span></span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>       <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h &quot;</span></span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>       <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>       <span class="st">&quot;include not found : stdio.h string.h</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> </span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>   ASSERT_EQ<span class="op">(</span>ToStringCppSrc<span class="op">(</span>cpp_src<span class="op">),</span> exp<span class="op">);</span></span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> <span class="op">}</span></span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> </span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> TEST<span class="op">(</span>cpp_src<span class="op">,</span> GetCppDirsSrcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> </span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>   <span class="op">{</span></span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>                                   <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>                                   <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb20-147"><a href="#cb20-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>                                   <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb20-148"><a href="#cb20-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>                                   <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>                                   <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-163"><a href="#cb20-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-164"><a href="#cb20-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>                                   <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>                                   <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> </span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span></span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;./ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2///&quot;</span><span class="op">});</span></span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> </span>
<span id="cb20-173"><a href="#cb20-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>     ASSERT_EQ<span class="op">(</span>act_dirs<span class="op">,</span> exp_dirs<span class="op">);</span></span>
<span id="cb20-174"><a href="#cb20-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     ASSERT_EQ<span class="op">(</span>act_srcs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>   <span class="op">}</span></span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>   <span class="op">{</span></span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>                                   <span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>                                   <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>                                   <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>                                   <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>                                   <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb20-189"><a href="#cb20-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb20-190"><a href="#cb20-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>                                   <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-199"><a href="#cb20-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-200"><a href="#cb20-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>                                   <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>                                   <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>     <span class="kw">auto</span> <span class="at">const</span> <span class="op">[</span>act_dirs<span class="op">,</span> act_srcs<span class="op">]</span> <span class="op">=</span> GetCppDirsSrcs<span class="op">({</span><span class="st">&quot;././ut_data&quot;</span><span class="op">});</span></span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>     ASSERT_EQ<span class="op">(</span>act_dirs<span class="op">,</span> exp_dirs<span class="op">);</span></span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>     ASSERT_EQ<span class="op">(</span>act_srcs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>   <span class="op">}</span></span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span> <span class="op">}</span></span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutdeps_scenario_ut.cpp">example/deps/dependency/ut/deps_scenario_ut.cpp
<a id="SS_3_1_21"></a></h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;dependency/deps_scenario.h&quot;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> PkgGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="op">{</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>                            <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="op">}</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   <span class="op">{</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   <span class="op">}</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="op">}</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> PkgGenerator2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="op">{</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     <span class="kw">auto</span> pg <span class="op">=</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> </span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>   <span class="op">}</span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>   <span class="op">{</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>                            <span class="st">&quot;hehe&quot;</span><span class="op">};</span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="op">}</span></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>   <span class="op">{</span></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>                            <span class="st">&quot;.*/app2&quot;</span><span class="op">};</span></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> </span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> </span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>   <span class="op">{</span></span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="kw">auto</span> pg <span class="op">=</span></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>         PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> </span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   <span class="op">}</span></span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   <span class="op">{</span></span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>                            <span class="st">&quot;.*/mod2/.*&quot;</span><span class="op">};</span></span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>     pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="op">}</span></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="kw">auto</span> pg <span class="op">=</span> PkgGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                            <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c not directory&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>   <span class="op">}</span></span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> <span class="op">}</span></span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> SrcsGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>   <span class="op">{</span></span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>     <span class="kw">auto</span> sg <span class="op">=</span> SrcsGenerator<span class="op">{</span></span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>         <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     <span class="co">// clang-format off</span></span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>             <span class="st">&quot;mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>             <span class="st">&quot;file              : mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>             <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>             <span class="st">&quot;include not found : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>             <span class="st">&quot;mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>             <span class="st">&quot;file              : mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>             <span class="st">&quot;mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>             <span class="st">&quot;file              : mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>             <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>             <span class="st">&quot;mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>             <span class="st">&quot;file              : mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>             <span class="st">&quot;path              : ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>             <span class="st">&quot;include           : ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>             <span class="st">&quot;include not found : a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>     <span class="co">// clang-format on</span></span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> </span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span> </span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>   <span class="op">}</span></span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>   <span class="op">{</span></span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>     <span class="kw">auto</span> sg <span class="op">=</span> SrcsGenerator<span class="op">{</span></span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">},</span></span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>         <span class="st">&quot;.*/mod2_2&quot;</span><span class="op">};</span></span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> </span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>         <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>         <span class="st">&quot;mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>         <span class="st">&quot;file              : mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>         <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>         <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>         <span class="st">&quot;include not found : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>         <span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>         <span class="st">&quot;mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>         <span class="st">&quot;file              : mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>         <span class="st">&quot;path              : ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>         <span class="st">&quot;include           : </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>         <span class="st">&quot;include not found : mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span> </span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span> </span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>     sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span>   <span class="op">}</span></span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span> <span class="op">}</span></span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span> </span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2SrcsGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> </span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span> </span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>                                   <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c is illegal&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>   <span class="op">}</span></span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span> </span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>   <span class="op">{</span></span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>                                   <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span> </span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-219"><a href="#cb21-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-222"><a href="#cb21-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-223"><a href="#cb21-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>                            <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>                            <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span>                            <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span> </span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span> </span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span>   <span class="op">}</span></span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span>   <span class="op">{</span></span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>                                   <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2</span><span class="sc">\\</span><span class="st">b.*&quot;</span><span class="op">};</span></span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span> </span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span>                            <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span>                            <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>                            <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span> </span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span> </span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span>   <span class="op">}</span></span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span>   <span class="op">{</span></span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>                                   <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span> </span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>                            <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>        <span class="dv">323</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a>        <span class="dv">324</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a>        <span class="dv">325</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a>        <span class="dv">326</span>                            <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a>        <span class="dv">327</span>                            <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a>        <span class="dv">328</span>                            <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>        <span class="dv">329</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a>        <span class="dv">330</span> </span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>        <span class="dv">331</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a>        <span class="dv">332</span> </span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a>        <span class="dv">333</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a>        <span class="dv">334</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a>        <span class="dv">335</span>   <span class="op">}</span></span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a>        <span class="dv">336</span>   <span class="op">{</span></span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>        <span class="dv">337</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a>        <span class="dv">338</span>                                   <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a>        <span class="dv">339</span> </span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a>        <span class="dv">340</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a>        <span class="dv">341</span>                            <span class="st">&quot;no_package</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a>        <span class="dv">342</span>                            <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a>        <span class="dv">343</span>                            <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a>        <span class="dv">344</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a>        <span class="dv">345</span>                            <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a>        <span class="dv">346</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-347"><a href="#cb21-347" aria-hidden="true" tabindex="-1"></a>        <span class="dv">347</span>                            <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-348"><a href="#cb21-348" aria-hidden="true" tabindex="-1"></a>        <span class="dv">348</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a>        <span class="dv">349</span>                            <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a>        <span class="dv">350</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-351"><a href="#cb21-351" aria-hidden="true" tabindex="-1"></a>        <span class="dv">351</span>                            <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-352"><a href="#cb21-352" aria-hidden="true" tabindex="-1"></a>        <span class="dv">352</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a>        <span class="dv">353</span>                            <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a>        <span class="dv">354</span>                            <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a>        <span class="dv">355</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a>        <span class="dv">356</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a>        <span class="dv">357</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>        <span class="dv">358</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a>        <span class="dv">359</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a>        <span class="dv">360</span>                            <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a>        <span class="dv">361</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a>        <span class="dv">362</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a>        <span class="dv">363</span>                            <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a>        <span class="dv">364</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a>        <span class="dv">365</span>                            <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a>        <span class="dv">366</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a>        <span class="dv">367</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a>        <span class="dv">368</span>                            <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a>        <span class="dv">369</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a>        <span class="dv">370</span>                            <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a>        <span class="dv">371</span>                            <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a>        <span class="dv">372</span> </span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a>        <span class="dv">373</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a>        <span class="dv">374</span> </span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a>        <span class="dv">375</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a>        <span class="dv">376</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-377"><a href="#cb21-377" aria-hidden="true" tabindex="-1"></a>        <span class="dv">377</span>   <span class="op">}</span></span>
<span id="cb21-378"><a href="#cb21-378" aria-hidden="true" tabindex="-1"></a>        <span class="dv">378</span> <span class="op">}</span></span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a>        <span class="dv">379</span> </span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a>        <span class="dv">380</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2SrcsGenerator2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a>        <span class="dv">381</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a>        <span class="dv">382</span> </span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a>        <span class="dv">383</span>   <span class="op">{</span></span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a>        <span class="dv">384</span>     <span class="kw">auto</span> dirs2srcs_org_str <span class="op">=</span></span>
<span id="cb21-385"><a href="#cb21-385" aria-hidden="true" tabindex="-1"></a>        <span class="dv">385</span>         <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-386"><a href="#cb21-386" aria-hidden="true" tabindex="-1"></a>        <span class="dv">386</span>                     <span class="st">&quot;ut_data</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-387"><a href="#cb21-387" aria-hidden="true" tabindex="-1"></a>        <span class="dv">387</span>                     <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-388"><a href="#cb21-388" aria-hidden="true" tabindex="-1"></a>        <span class="dv">388</span>                     <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-389"><a href="#cb21-389" aria-hidden="true" tabindex="-1"></a>        <span class="dv">389</span>                     <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-390"><a href="#cb21-390" aria-hidden="true" tabindex="-1"></a>        <span class="dv">390</span>                     <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-391"><a href="#cb21-391" aria-hidden="true" tabindex="-1"></a>        <span class="dv">391</span>                     <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-392"><a href="#cb21-392" aria-hidden="true" tabindex="-1"></a>        <span class="dv">392</span>                     <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-393"><a href="#cb21-393" aria-hidden="true" tabindex="-1"></a>        <span class="dv">393</span>                     <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-394"><a href="#cb21-394" aria-hidden="true" tabindex="-1"></a>        <span class="dv">394</span>                     <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-395"><a href="#cb21-395" aria-hidden="true" tabindex="-1"></a>        <span class="dv">395</span>                     <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-396"><a href="#cb21-396" aria-hidden="true" tabindex="-1"></a>        <span class="dv">396</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-397"><a href="#cb21-397" aria-hidden="true" tabindex="-1"></a>        <span class="dv">397</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-398"><a href="#cb21-398" aria-hidden="true" tabindex="-1"></a>        <span class="dv">398</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-399"><a href="#cb21-399" aria-hidden="true" tabindex="-1"></a>        <span class="dv">399</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-400"><a href="#cb21-400" aria-hidden="true" tabindex="-1"></a>        <span class="dv">400</span>                     <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-401"><a href="#cb21-401" aria-hidden="true" tabindex="-1"></a>        <span class="dv">401</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a>        <span class="dv">402</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a>        <span class="dv">403</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a>        <span class="dv">404</span>                     <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>        <span class="dv">405</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-406"><a href="#cb21-406" aria-hidden="true" tabindex="-1"></a>        <span class="dv">406</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-407"><a href="#cb21-407" aria-hidden="true" tabindex="-1"></a>        <span class="dv">407</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-408"><a href="#cb21-408" aria-hidden="true" tabindex="-1"></a>        <span class="dv">408</span>                     <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-409"><a href="#cb21-409" aria-hidden="true" tabindex="-1"></a>        <span class="dv">409</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-410"><a href="#cb21-410" aria-hidden="true" tabindex="-1"></a>        <span class="dv">410</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-411"><a href="#cb21-411" aria-hidden="true" tabindex="-1"></a>        <span class="dv">411</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a>        <span class="dv">412</span>                     <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a>        <span class="dv">413</span>                     <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-414"><a href="#cb21-414" aria-hidden="true" tabindex="-1"></a>        <span class="dv">414</span>                     <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-415"><a href="#cb21-415" aria-hidden="true" tabindex="-1"></a>        <span class="dv">415</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a>        <span class="dv">416</span> </span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a>        <span class="dv">417</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a>        <span class="dv">418</span>                                   <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a>        <span class="dv">419</span> </span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a>        <span class="dv">420</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a>        <span class="dv">421</span> </span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a>        <span class="dv">422</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a>        <span class="dv">423</span>     ASSERT_EQ<span class="op">(</span>dirs2srcs_org_str<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a>        <span class="dv">424</span>   <span class="op">}</span></span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>        <span class="dv">425</span>   <span class="op">{</span></span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a>        <span class="dv">426</span>     <span class="kw">auto</span> dirs2srcs_org_str <span class="op">=</span></span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a>        <span class="dv">427</span>         <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a>        <span class="dv">428</span>                     <span class="st">&quot;ut_data</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a>        <span class="dv">429</span>                     <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-430"><a href="#cb21-430" aria-hidden="true" tabindex="-1"></a>        <span class="dv">430</span>                     <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-431"><a href="#cb21-431" aria-hidden="true" tabindex="-1"></a>        <span class="dv">431</span>                     <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-432"><a href="#cb21-432" aria-hidden="true" tabindex="-1"></a>        <span class="dv">432</span>                     <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-433"><a href="#cb21-433" aria-hidden="true" tabindex="-1"></a>        <span class="dv">433</span>                     <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-434"><a href="#cb21-434" aria-hidden="true" tabindex="-1"></a>        <span class="dv">434</span>                     <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-435"><a href="#cb21-435" aria-hidden="true" tabindex="-1"></a>        <span class="dv">435</span>                     <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-436"><a href="#cb21-436" aria-hidden="true" tabindex="-1"></a>        <span class="dv">436</span>                     <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-437"><a href="#cb21-437" aria-hidden="true" tabindex="-1"></a>        <span class="dv">437</span>                     <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-438"><a href="#cb21-438" aria-hidden="true" tabindex="-1"></a>        <span class="dv">438</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-439"><a href="#cb21-439" aria-hidden="true" tabindex="-1"></a>        <span class="dv">439</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-440"><a href="#cb21-440" aria-hidden="true" tabindex="-1"></a>        <span class="dv">440</span>                     <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-441"><a href="#cb21-441" aria-hidden="true" tabindex="-1"></a>        <span class="dv">441</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-442"><a href="#cb21-442" aria-hidden="true" tabindex="-1"></a>        <span class="dv">442</span>                     <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-443"><a href="#cb21-443" aria-hidden="true" tabindex="-1"></a>        <span class="dv">443</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-444"><a href="#cb21-444" aria-hidden="true" tabindex="-1"></a>        <span class="dv">444</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-445"><a href="#cb21-445" aria-hidden="true" tabindex="-1"></a>        <span class="dv">445</span>                     <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-446"><a href="#cb21-446" aria-hidden="true" tabindex="-1"></a>        <span class="dv">446</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-447"><a href="#cb21-447" aria-hidden="true" tabindex="-1"></a>        <span class="dv">447</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-448"><a href="#cb21-448" aria-hidden="true" tabindex="-1"></a>        <span class="dv">448</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-449"><a href="#cb21-449" aria-hidden="true" tabindex="-1"></a>        <span class="dv">449</span>                     <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-450"><a href="#cb21-450" aria-hidden="true" tabindex="-1"></a>        <span class="dv">450</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-451"><a href="#cb21-451" aria-hidden="true" tabindex="-1"></a>        <span class="dv">451</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-452"><a href="#cb21-452" aria-hidden="true" tabindex="-1"></a>        <span class="dv">452</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-453"><a href="#cb21-453" aria-hidden="true" tabindex="-1"></a>        <span class="dv">453</span>                     <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-454"><a href="#cb21-454" aria-hidden="true" tabindex="-1"></a>        <span class="dv">454</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-455"><a href="#cb21-455" aria-hidden="true" tabindex="-1"></a>        <span class="dv">455</span>                     <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-456"><a href="#cb21-456" aria-hidden="true" tabindex="-1"></a>        <span class="dv">456</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-457"><a href="#cb21-457" aria-hidden="true" tabindex="-1"></a>        <span class="dv">457</span>                     <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-458"><a href="#cb21-458" aria-hidden="true" tabindex="-1"></a>        <span class="dv">458</span>                     <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-459"><a href="#cb21-459" aria-hidden="true" tabindex="-1"></a>        <span class="dv">459</span>                     <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-460"><a href="#cb21-460" aria-hidden="true" tabindex="-1"></a>        <span class="dv">460</span>                     <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-461"><a href="#cb21-461" aria-hidden="true" tabindex="-1"></a>        <span class="dv">461</span> </span>
<span id="cb21-462"><a href="#cb21-462" aria-hidden="true" tabindex="-1"></a>        <span class="dv">462</span>     <span class="kw">auto</span> <span class="at">const</span> dirs <span class="op">=</span></span>
<span id="cb21-463"><a href="#cb21-463" aria-hidden="true" tabindex="-1"></a>        <span class="dv">463</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb21-464"><a href="#cb21-464" aria-hidden="true" tabindex="-1"></a>        <span class="dv">464</span>                 <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb21-465"><a href="#cb21-465" aria-hidden="true" tabindex="-1"></a>        <span class="dv">465</span> </span>
<span id="cb21-466"><a href="#cb21-466" aria-hidden="true" tabindex="-1"></a>        <span class="dv">466</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> dirs<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-467"><a href="#cb21-467" aria-hidden="true" tabindex="-1"></a>        <span class="dv">467</span> </span>
<span id="cb21-468"><a href="#cb21-468" aria-hidden="true" tabindex="-1"></a>        <span class="dv">468</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-469"><a href="#cb21-469" aria-hidden="true" tabindex="-1"></a>        <span class="dv">469</span> </span>
<span id="cb21-470"><a href="#cb21-470" aria-hidden="true" tabindex="-1"></a>        <span class="dv">470</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-471"><a href="#cb21-471" aria-hidden="true" tabindex="-1"></a>        <span class="dv">471</span>     ASSERT_EQ<span class="op">(</span>dirs2srcs_org_str<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-472"><a href="#cb21-472" aria-hidden="true" tabindex="-1"></a>        <span class="dv">472</span>   <span class="op">}</span></span>
<span id="cb21-473"><a href="#cb21-473" aria-hidden="true" tabindex="-1"></a>        <span class="dv">473</span>   <span class="op">{</span></span>
<span id="cb21-474"><a href="#cb21-474" aria-hidden="true" tabindex="-1"></a>        <span class="dv">474</span>     <span class="kw">auto</span> p2sg <span class="op">=</span> Pkg2SrcsGenerator<span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-475"><a href="#cb21-475" aria-hidden="true" tabindex="-1"></a>        <span class="dv">475</span> </span>
<span id="cb21-476"><a href="#cb21-476" aria-hidden="true" tabindex="-1"></a>        <span class="dv">476</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;#dir2srcs</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-477"><a href="#cb21-477" aria-hidden="true" tabindex="-1"></a>        <span class="dv">477</span>                                  <span class="st">&quot;ut_data/app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-478"><a href="#cb21-478" aria-hidden="true" tabindex="-1"></a>        <span class="dv">478</span>                                  <span class="st">&quot;    ut_data/app1/a_1_c.c</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-479"><a href="#cb21-479" aria-hidden="true" tabindex="-1"></a>        <span class="dv">479</span>                                  <span class="st">&quot;    ut_data/app1/a_1_c.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-480"><a href="#cb21-480" aria-hidden="true" tabindex="-1"></a>        <span class="dv">480</span>                                  <span class="st">&quot;    ut_data/app1/a_1_cpp.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-481"><a href="#cb21-481" aria-hidden="true" tabindex="-1"></a>        <span class="dv">481</span>                                  <span class="st">&quot;    ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-482"><a href="#cb21-482" aria-hidden="true" tabindex="-1"></a>        <span class="dv">482</span>                                  <span class="st">&quot;    ut_data/app1/a_2_c.C</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-483"><a href="#cb21-483" aria-hidden="true" tabindex="-1"></a>        <span class="dv">483</span>                                  <span class="st">&quot;    ut_data/app1/a_2_c.H</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-484"><a href="#cb21-484" aria-hidden="true" tabindex="-1"></a>        <span class="dv">484</span>                                  <span class="st">&quot;    ut_data/app1/a_2_cpp.cxx</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-485"><a href="#cb21-485" aria-hidden="true" tabindex="-1"></a>        <span class="dv">485</span>                                  <span class="st">&quot;    ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-486"><a href="#cb21-486" aria-hidden="true" tabindex="-1"></a>        <span class="dv">486</span>                                  <span class="st">&quot;    ut_data/app1/a_3_cpp.cc</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-487"><a href="#cb21-487" aria-hidden="true" tabindex="-1"></a>        <span class="dv">487</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-488"><a href="#cb21-488" aria-hidden="true" tabindex="-1"></a>        <span class="dv">488</span>                                  <span class="st">&quot;ut_data/app1/mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-489"><a href="#cb21-489" aria-hidden="true" tabindex="-1"></a>        <span class="dv">489</span>                                  <span class="st">&quot;    ut_data/app1/mod1/mod1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-490"><a href="#cb21-490" aria-hidden="true" tabindex="-1"></a>        <span class="dv">490</span>                                  <span class="st">&quot;    ut_data/app1/mod1/mod1_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-491"><a href="#cb21-491" aria-hidden="true" tabindex="-1"></a>        <span class="dv">491</span>                                  <span class="st">&quot;    ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-492"><a href="#cb21-492" aria-hidden="true" tabindex="-1"></a>        <span class="dv">492</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-493"><a href="#cb21-493" aria-hidden="true" tabindex="-1"></a>        <span class="dv">493</span>                                  <span class="st">&quot;ut_data/app1/mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-494"><a href="#cb21-494" aria-hidden="true" tabindex="-1"></a>        <span class="dv">494</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-495"><a href="#cb21-495" aria-hidden="true" tabindex="-1"></a>        <span class="dv">495</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-496"><a href="#cb21-496" aria-hidden="true" tabindex="-1"></a>        <span class="dv">496</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-497"><a href="#cb21-497" aria-hidden="true" tabindex="-1"></a>        <span class="dv">497</span>                                  <span class="st">&quot;ut_data/app1/mod2/mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-498"><a href="#cb21-498" aria-hidden="true" tabindex="-1"></a>        <span class="dv">498</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-499"><a href="#cb21-499" aria-hidden="true" tabindex="-1"></a>        <span class="dv">499</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-500"><a href="#cb21-500" aria-hidden="true" tabindex="-1"></a>        <span class="dv">500</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-501"><a href="#cb21-501" aria-hidden="true" tabindex="-1"></a>        <span class="dv">501</span>                                  <span class="st">&quot;ut_data/app1/mod2/mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-502"><a href="#cb21-502" aria-hidden="true" tabindex="-1"></a>        <span class="dv">502</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-503"><a href="#cb21-503" aria-hidden="true" tabindex="-1"></a>        <span class="dv">503</span>                                  <span class="st">&quot;    ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-504"><a href="#cb21-504" aria-hidden="true" tabindex="-1"></a>        <span class="dv">504</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-505"><a href="#cb21-505" aria-hidden="true" tabindex="-1"></a>        <span class="dv">505</span>                                  <span class="st">&quot;ut_data/app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-506"><a href="#cb21-506" aria-hidden="true" tabindex="-1"></a>        <span class="dv">506</span>                                  <span class="st">&quot;    ut_data/app2/b_1.cpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-507"><a href="#cb21-507" aria-hidden="true" tabindex="-1"></a>        <span class="dv">507</span>                                  <span class="st">&quot;    ut_data/app2/b_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-508"><a href="#cb21-508" aria-hidden="true" tabindex="-1"></a>        <span class="dv">508</span>                                  <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-509"><a href="#cb21-509" aria-hidden="true" tabindex="-1"></a>        <span class="dv">509</span> </span>
<span id="cb21-510"><a href="#cb21-510" aria-hidden="true" tabindex="-1"></a>        <span class="dv">510</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-511"><a href="#cb21-511" aria-hidden="true" tabindex="-1"></a>        <span class="dv">511</span> </span>
<span id="cb21-512"><a href="#cb21-512" aria-hidden="true" tabindex="-1"></a>        <span class="dv">512</span>     p2sg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-513"><a href="#cb21-513" aria-hidden="true" tabindex="-1"></a>        <span class="dv">513</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-514"><a href="#cb21-514" aria-hidden="true" tabindex="-1"></a>        <span class="dv">514</span>   <span class="op">}</span></span>
<span id="cb21-515"><a href="#cb21-515" aria-hidden="true" tabindex="-1"></a>        <span class="dv">515</span> <span class="op">}</span></span>
<span id="cb21-516"><a href="#cb21-516" aria-hidden="true" tabindex="-1"></a>        <span class="dv">516</span> </span>
<span id="cb21-517"><a href="#cb21-517" aria-hidden="true" tabindex="-1"></a>        <span class="dv">517</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Pkg2PkgGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-518"><a href="#cb21-518" aria-hidden="true" tabindex="-1"></a>        <span class="dv">518</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-519"><a href="#cb21-519" aria-hidden="true" tabindex="-1"></a>        <span class="dv">519</span> </span>
<span id="cb21-520"><a href="#cb21-520" aria-hidden="true" tabindex="-1"></a>        <span class="dv">520</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-521"><a href="#cb21-521" aria-hidden="true" tabindex="-1"></a>        <span class="dv">521</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-522"><a href="#cb21-522" aria-hidden="true" tabindex="-1"></a>        <span class="dv">522</span>     <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-523"><a href="#cb21-523" aria-hidden="true" tabindex="-1"></a>        <span class="dv">523</span>                                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-524"><a href="#cb21-524" aria-hidden="true" tabindex="-1"></a>        <span class="dv">524</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-525"><a href="#cb21-525" aria-hidden="true" tabindex="-1"></a>        <span class="dv">525</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-526"><a href="#cb21-526" aria-hidden="true" tabindex="-1"></a>        <span class="dv">526</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;ut_data/app1/a_1_c.c is illegal&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-527"><a href="#cb21-527" aria-hidden="true" tabindex="-1"></a>        <span class="dv">527</span>   <span class="op">}</span></span>
<span id="cb21-528"><a href="#cb21-528" aria-hidden="true" tabindex="-1"></a>        <span class="dv">528</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-529"><a href="#cb21-529" aria-hidden="true" tabindex="-1"></a>        <span class="dv">529</span> </span>
<span id="cb21-530"><a href="#cb21-530" aria-hidden="true" tabindex="-1"></a>        <span class="dv">530</span>   <span class="op">{</span></span>
<span id="cb21-531"><a href="#cb21-531" aria-hidden="true" tabindex="-1"></a>        <span class="dv">531</span>     <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-532"><a href="#cb21-532" aria-hidden="true" tabindex="-1"></a>        <span class="dv">532</span>                                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-533"><a href="#cb21-533" aria-hidden="true" tabindex="-1"></a>        <span class="dv">533</span> </span>
<span id="cb21-534"><a href="#cb21-534" aria-hidden="true" tabindex="-1"></a>        <span class="dv">534</span>     <span class="co">// clang-format off</span></span>
<span id="cb21-535"><a href="#cb21-535" aria-hidden="true" tabindex="-1"></a>        <span class="dv">535</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb21-536"><a href="#cb21-536" aria-hidden="true" tabindex="-1"></a>        <span class="dv">536</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-537"><a href="#cb21-537" aria-hidden="true" tabindex="-1"></a>        <span class="dv">537</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 6 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-538"><a href="#cb21-538" aria-hidden="true" tabindex="-1"></a>        <span class="dv">538</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 1 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-539"><a href="#cb21-539" aria-hidden="true" tabindex="-1"></a>        <span class="dv">539</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-540"><a href="#cb21-540" aria-hidden="true" tabindex="-1"></a>        <span class="dv">540</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-541"><a href="#cb21-541" aria-hidden="true" tabindex="-1"></a>        <span class="dv">541</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-542"><a href="#cb21-542" aria-hidden="true" tabindex="-1"></a>        <span class="dv">542</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-543"><a href="#cb21-543" aria-hidden="true" tabindex="-1"></a>        <span class="dv">543</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 3 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-544"><a href="#cb21-544" aria-hidden="true" tabindex="-1"></a>        <span class="dv">544</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 1 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-545"><a href="#cb21-545" aria-hidden="true" tabindex="-1"></a>        <span class="dv">545</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-546"><a href="#cb21-546" aria-hidden="true" tabindex="-1"></a>        <span class="dv">546</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_2 : 3 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-547"><a href="#cb21-547" aria-hidden="true" tabindex="-1"></a>        <span class="dv">547</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-548"><a href="#cb21-548" aria-hidden="true" tabindex="-1"></a>        <span class="dv">548</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-549"><a href="#cb21-549" aria-hidden="true" tabindex="-1"></a>        <span class="dv">549</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-550"><a href="#cb21-550" aria-hidden="true" tabindex="-1"></a>        <span class="dv">550</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-551"><a href="#cb21-551" aria-hidden="true" tabindex="-1"></a>        <span class="dv">551</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-552"><a href="#cb21-552" aria-hidden="true" tabindex="-1"></a>        <span class="dv">552</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 1 ut_data/app1/mod2/mod2_1.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-553"><a href="#cb21-553" aria-hidden="true" tabindex="-1"></a>        <span class="dv">553</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-554"><a href="#cb21-554" aria-hidden="true" tabindex="-1"></a>        <span class="dv">554</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-555"><a href="#cb21-555" aria-hidden="true" tabindex="-1"></a>        <span class="dv">555</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-556"><a href="#cb21-556" aria-hidden="true" tabindex="-1"></a>        <span class="dv">556</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-557"><a href="#cb21-557" aria-hidden="true" tabindex="-1"></a>        <span class="dv">557</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-558"><a href="#cb21-558" aria-hidden="true" tabindex="-1"></a>        <span class="dv">558</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_2 : 1 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-559"><a href="#cb21-559" aria-hidden="true" tabindex="-1"></a>        <span class="dv">559</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-560"><a href="#cb21-560" aria-hidden="true" tabindex="-1"></a>        <span class="dv">560</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-561"><a href="#cb21-561" aria-hidden="true" tabindex="-1"></a>        <span class="dv">561</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-562"><a href="#cb21-562" aria-hidden="true" tabindex="-1"></a>        <span class="dv">562</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-563"><a href="#cb21-563" aria-hidden="true" tabindex="-1"></a>        <span class="dv">563</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-564"><a href="#cb21-564" aria-hidden="true" tabindex="-1"></a>        <span class="dv">564</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-565"><a href="#cb21-565" aria-hidden="true" tabindex="-1"></a>        <span class="dv">565</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-566"><a href="#cb21-566" aria-hidden="true" tabindex="-1"></a>        <span class="dv">566</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-567"><a href="#cb21-567" aria-hidden="true" tabindex="-1"></a>        <span class="dv">567</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-568"><a href="#cb21-568" aria-hidden="true" tabindex="-1"></a>        <span class="dv">568</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-569"><a href="#cb21-569" aria-hidden="true" tabindex="-1"></a>        <span class="dv">569</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-570"><a href="#cb21-570" aria-hidden="true" tabindex="-1"></a>        <span class="dv">570</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-571"><a href="#cb21-571" aria-hidden="true" tabindex="-1"></a>        <span class="dv">571</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-572"><a href="#cb21-572" aria-hidden="true" tabindex="-1"></a>        <span class="dv">572</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-573"><a href="#cb21-573" aria-hidden="true" tabindex="-1"></a>        <span class="dv">573</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2/mod2_2 : 1 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-574"><a href="#cb21-574" aria-hidden="true" tabindex="-1"></a>        <span class="dv">574</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-575"><a href="#cb21-575" aria-hidden="true" tabindex="-1"></a>        <span class="dv">575</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-576"><a href="#cb21-576" aria-hidden="true" tabindex="-1"></a>        <span class="dv">576</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-577"><a href="#cb21-577" aria-hidden="true" tabindex="-1"></a>        <span class="dv">577</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-578"><a href="#cb21-578" aria-hidden="true" tabindex="-1"></a>        <span class="dv">578</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-579"><a href="#cb21-579" aria-hidden="true" tabindex="-1"></a>        <span class="dv">579</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-580"><a href="#cb21-580" aria-hidden="true" tabindex="-1"></a>        <span class="dv">580</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_2 : 2 ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-581"><a href="#cb21-581" aria-hidden="true" tabindex="-1"></a>        <span class="dv">581</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-582"><a href="#cb21-582" aria-hidden="true" tabindex="-1"></a>        <span class="dv">582</span>     <span class="co">// clang-format on</span></span>
<span id="cb21-583"><a href="#cb21-583" aria-hidden="true" tabindex="-1"></a>        <span class="dv">583</span> </span>
<span id="cb21-584"><a href="#cb21-584" aria-hidden="true" tabindex="-1"></a>        <span class="dv">584</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-585"><a href="#cb21-585" aria-hidden="true" tabindex="-1"></a>        <span class="dv">585</span> </span>
<span id="cb21-586"><a href="#cb21-586" aria-hidden="true" tabindex="-1"></a>        <span class="dv">586</span>     p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-587"><a href="#cb21-587" aria-hidden="true" tabindex="-1"></a>        <span class="dv">587</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-588"><a href="#cb21-588" aria-hidden="true" tabindex="-1"></a>        <span class="dv">588</span>   <span class="op">}</span></span>
<span id="cb21-589"><a href="#cb21-589" aria-hidden="true" tabindex="-1"></a>        <span class="dv">589</span>   <span class="op">{</span></span>
<span id="cb21-590"><a href="#cb21-590" aria-hidden="true" tabindex="-1"></a>        <span class="dv">590</span>     <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-591"><a href="#cb21-591" aria-hidden="true" tabindex="-1"></a>        <span class="dv">591</span>                                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;.*/mod2</span><span class="sc">\\</span><span class="st">b.*&quot;</span><span class="op">};</span></span>
<span id="cb21-592"><a href="#cb21-592" aria-hidden="true" tabindex="-1"></a>        <span class="dv">592</span> </span>
<span id="cb21-593"><a href="#cb21-593" aria-hidden="true" tabindex="-1"></a>        <span class="dv">593</span>     <span class="co">// clang-format off</span></span>
<span id="cb21-594"><a href="#cb21-594" aria-hidden="true" tabindex="-1"></a>        <span class="dv">594</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb21-595"><a href="#cb21-595" aria-hidden="true" tabindex="-1"></a>        <span class="dv">595</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-596"><a href="#cb21-596" aria-hidden="true" tabindex="-1"></a>        <span class="dv">596</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 12 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-597"><a href="#cb21-597" aria-hidden="true" tabindex="-1"></a>        <span class="dv">597</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 4 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-598"><a href="#cb21-598" aria-hidden="true" tabindex="-1"></a>        <span class="dv">598</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-599"><a href="#cb21-599" aria-hidden="true" tabindex="-1"></a>        <span class="dv">599</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-600"><a href="#cb21-600" aria-hidden="true" tabindex="-1"></a>        <span class="dv">600</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 7 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_1/mod2_1_1.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-601"><a href="#cb21-601" aria-hidden="true" tabindex="-1"></a>        <span class="dv">601</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-602"><a href="#cb21-602" aria-hidden="true" tabindex="-1"></a>        <span class="dv">602</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-603"><a href="#cb21-603" aria-hidden="true" tabindex="-1"></a>        <span class="dv">603</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-604"><a href="#cb21-604" aria-hidden="true" tabindex="-1"></a>        <span class="dv">604</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-605"><a href="#cb21-605" aria-hidden="true" tabindex="-1"></a>        <span class="dv">605</span>     <span class="co">// clang-format on</span></span>
<span id="cb21-606"><a href="#cb21-606" aria-hidden="true" tabindex="-1"></a>        <span class="dv">606</span> </span>
<span id="cb21-607"><a href="#cb21-607" aria-hidden="true" tabindex="-1"></a>        <span class="dv">607</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-608"><a href="#cb21-608" aria-hidden="true" tabindex="-1"></a>        <span class="dv">608</span> </span>
<span id="cb21-609"><a href="#cb21-609" aria-hidden="true" tabindex="-1"></a>        <span class="dv">609</span>     p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-610"><a href="#cb21-610" aria-hidden="true" tabindex="-1"></a>        <span class="dv">610</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-611"><a href="#cb21-611" aria-hidden="true" tabindex="-1"></a>        <span class="dv">611</span>   <span class="op">}</span></span>
<span id="cb21-612"><a href="#cb21-612" aria-hidden="true" tabindex="-1"></a>        <span class="dv">612</span>   <span class="op">{</span></span>
<span id="cb21-613"><a href="#cb21-613" aria-hidden="true" tabindex="-1"></a>        <span class="dv">613</span>     <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-614"><a href="#cb21-614" aria-hidden="true" tabindex="-1"></a>        <span class="dv">614</span>                                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb21-615"><a href="#cb21-615" aria-hidden="true" tabindex="-1"></a>        <span class="dv">615</span> </span>
<span id="cb21-616"><a href="#cb21-616" aria-hidden="true" tabindex="-1"></a>        <span class="dv">616</span>     <span class="co">// clang-format off</span></span>
<span id="cb21-617"><a href="#cb21-617" aria-hidden="true" tabindex="-1"></a>        <span class="dv">617</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb21-618"><a href="#cb21-618" aria-hidden="true" tabindex="-1"></a>        <span class="dv">618</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-619"><a href="#cb21-619" aria-hidden="true" tabindex="-1"></a>        <span class="dv">619</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 10 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-620"><a href="#cb21-620" aria-hidden="true" tabindex="-1"></a>        <span class="dv">620</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-621"><a href="#cb21-621" aria-hidden="true" tabindex="-1"></a>        <span class="dv">621</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-622"><a href="#cb21-622" aria-hidden="true" tabindex="-1"></a>        <span class="dv">622</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-623"><a href="#cb21-623" aria-hidden="true" tabindex="-1"></a>        <span class="dv">623</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-624"><a href="#cb21-624" aria-hidden="true" tabindex="-1"></a>        <span class="dv">624</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-625"><a href="#cb21-625" aria-hidden="true" tabindex="-1"></a>        <span class="dv">625</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 5 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-626"><a href="#cb21-626" aria-hidden="true" tabindex="-1"></a>        <span class="dv">626</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-627"><a href="#cb21-627" aria-hidden="true" tabindex="-1"></a>        <span class="dv">627</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-628"><a href="#cb21-628" aria-hidden="true" tabindex="-1"></a>        <span class="dv">628</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-629"><a href="#cb21-629" aria-hidden="true" tabindex="-1"></a>        <span class="dv">629</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1 : 5 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-630"><a href="#cb21-630" aria-hidden="true" tabindex="-1"></a>        <span class="dv">630</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-631"><a href="#cb21-631" aria-hidden="true" tabindex="-1"></a>        <span class="dv">631</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-632"><a href="#cb21-632" aria-hidden="true" tabindex="-1"></a>        <span class="dv">632</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-633"><a href="#cb21-633" aria-hidden="true" tabindex="-1"></a>        <span class="dv">633</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-634"><a href="#cb21-634" aria-hidden="true" tabindex="-1"></a>        <span class="dv">634</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-635"><a href="#cb21-635" aria-hidden="true" tabindex="-1"></a>        <span class="dv">635</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-636"><a href="#cb21-636" aria-hidden="true" tabindex="-1"></a>        <span class="dv">636</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-637"><a href="#cb21-637" aria-hidden="true" tabindex="-1"></a>        <span class="dv">637</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-638"><a href="#cb21-638" aria-hidden="true" tabindex="-1"></a>        <span class="dv">638</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-639"><a href="#cb21-639" aria-hidden="true" tabindex="-1"></a>        <span class="dv">639</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-640"><a href="#cb21-640" aria-hidden="true" tabindex="-1"></a>        <span class="dv">640</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-641"><a href="#cb21-641" aria-hidden="true" tabindex="-1"></a>        <span class="dv">641</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-642"><a href="#cb21-642" aria-hidden="true" tabindex="-1"></a>        <span class="dv">642</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-643"><a href="#cb21-643" aria-hidden="true" tabindex="-1"></a>        <span class="dv">643</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-644"><a href="#cb21-644" aria-hidden="true" tabindex="-1"></a>        <span class="dv">644</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-645"><a href="#cb21-645" aria-hidden="true" tabindex="-1"></a>        <span class="dv">645</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-646"><a href="#cb21-646" aria-hidden="true" tabindex="-1"></a>        <span class="dv">646</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-647"><a href="#cb21-647" aria-hidden="true" tabindex="-1"></a>        <span class="dv">647</span>             <span class="st">&quot;ut_data/app2 -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-648"><a href="#cb21-648" aria-hidden="true" tabindex="-1"></a>        <span class="dv">648</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-649"><a href="#cb21-649" aria-hidden="true" tabindex="-1"></a>        <span class="dv">649</span>     <span class="co">// clang-format on</span></span>
<span id="cb21-650"><a href="#cb21-650" aria-hidden="true" tabindex="-1"></a>        <span class="dv">650</span> </span>
<span id="cb21-651"><a href="#cb21-651" aria-hidden="true" tabindex="-1"></a>        <span class="dv">651</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-652"><a href="#cb21-652" aria-hidden="true" tabindex="-1"></a>        <span class="dv">652</span> </span>
<span id="cb21-653"><a href="#cb21-653" aria-hidden="true" tabindex="-1"></a>        <span class="dv">653</span>     p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-654"><a href="#cb21-654" aria-hidden="true" tabindex="-1"></a>        <span class="dv">654</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-655"><a href="#cb21-655" aria-hidden="true" tabindex="-1"></a>        <span class="dv">655</span>   <span class="op">}</span></span>
<span id="cb21-656"><a href="#cb21-656" aria-hidden="true" tabindex="-1"></a>        <span class="dv">656</span>   <span class="op">{</span></span>
<span id="cb21-657"><a href="#cb21-657" aria-hidden="true" tabindex="-1"></a>        <span class="dv">657</span>     <span class="kw">auto</span> p2pg <span class="op">=</span> Pkg2PkgGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb21-658"><a href="#cb21-658" aria-hidden="true" tabindex="-1"></a>        <span class="dv">658</span>                                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app3/&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb21-659"><a href="#cb21-659" aria-hidden="true" tabindex="-1"></a>        <span class="dv">659</span> </span>
<span id="cb21-660"><a href="#cb21-660" aria-hidden="true" tabindex="-1"></a>        <span class="dv">660</span>     <span class="co">// clang-format off</span></span>
<span id="cb21-661"><a href="#cb21-661" aria-hidden="true" tabindex="-1"></a>        <span class="dv">661</span>         <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string <span class="op">{</span></span>
<span id="cb21-662"><a href="#cb21-662" aria-hidden="true" tabindex="-1"></a>        <span class="dv">662</span>             <span class="st">&quot;#deps</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-663"><a href="#cb21-663" aria-hidden="true" tabindex="-1"></a>        <span class="dv">663</span>             <span class="st">&quot;no_package -&gt; ut_data/app1 : 5 ut_data/app1/a_1_cpp.h ut_data/app1/a_2_cpp.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-664"><a href="#cb21-664" aria-hidden="true" tabindex="-1"></a>        <span class="dv">664</span>             <span class="st">&quot;ut_data/app1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-665"><a href="#cb21-665" aria-hidden="true" tabindex="-1"></a>        <span class="dv">665</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-666"><a href="#cb21-666" aria-hidden="true" tabindex="-1"></a>        <span class="dv">666</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod1 : 4 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-667"><a href="#cb21-667" aria-hidden="true" tabindex="-1"></a>        <span class="dv">667</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-668"><a href="#cb21-668" aria-hidden="true" tabindex="-1"></a>        <span class="dv">668</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-669"><a href="#cb21-669" aria-hidden="true" tabindex="-1"></a>        <span class="dv">669</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-670"><a href="#cb21-670" aria-hidden="true" tabindex="-1"></a>        <span class="dv">670</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-671"><a href="#cb21-671" aria-hidden="true" tabindex="-1"></a>        <span class="dv">671</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-672"><a href="#cb21-672" aria-hidden="true" tabindex="-1"></a>        <span class="dv">672</span>             <span class="st">&quot;no_package -&gt; ut_data/app1/mod2/mod2_1 : 2 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-673"><a href="#cb21-673" aria-hidden="true" tabindex="-1"></a>        <span class="dv">673</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; no_package : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-674"><a href="#cb21-674" aria-hidden="true" tabindex="-1"></a>        <span class="dv">674</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-675"><a href="#cb21-675" aria-hidden="true" tabindex="-1"></a>        <span class="dv">675</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod1 : 10 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-676"><a href="#cb21-676" aria-hidden="true" tabindex="-1"></a>        <span class="dv">676</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1 : 3 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_1.hpp ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-677"><a href="#cb21-677" aria-hidden="true" tabindex="-1"></a>        <span class="dv">677</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-678"><a href="#cb21-678" aria-hidden="true" tabindex="-1"></a>        <span class="dv">678</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-679"><a href="#cb21-679" aria-hidden="true" tabindex="-1"></a>        <span class="dv">679</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-680"><a href="#cb21-680" aria-hidden="true" tabindex="-1"></a>        <span class="dv">680</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-681"><a href="#cb21-681" aria-hidden="true" tabindex="-1"></a>        <span class="dv">681</span>             <span class="st">&quot;ut_data/app1 -&gt; ut_data/app1/mod2/mod2_1 : 5 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-682"><a href="#cb21-682" aria-hidden="true" tabindex="-1"></a>        <span class="dv">682</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1 : 2 ut_data/app1/a_1_cpp.h ut_data/app1/mod2/mod2_2/mod2_2_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-683"><a href="#cb21-683" aria-hidden="true" tabindex="-1"></a>        <span class="dv">683</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-684"><a href="#cb21-684" aria-hidden="true" tabindex="-1"></a>        <span class="dv">684</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-685"><a href="#cb21-685" aria-hidden="true" tabindex="-1"></a>        <span class="dv">685</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-686"><a href="#cb21-686" aria-hidden="true" tabindex="-1"></a>        <span class="dv">686</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-687"><a href="#cb21-687" aria-hidden="true" tabindex="-1"></a>        <span class="dv">687</span>             <span class="st">&quot;ut_data/app1/mod1 -&gt; ut_data/app1/mod2/mod2_1 : 1 ut_data/app1/mod2/mod2_1/mod2_1_1.h</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-688"><a href="#cb21-688" aria-hidden="true" tabindex="-1"></a>        <span class="dv">688</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod1 : 2 ut_data/app1/mod1/mod1_1.hpp ut_data/app1/mod1/mod1_2.hpp</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-689"><a href="#cb21-689" aria-hidden="true" tabindex="-1"></a>        <span class="dv">689</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-690"><a href="#cb21-690" aria-hidden="true" tabindex="-1"></a>        <span class="dv">690</span>             <span class="st">&quot;ut_data/app1/mod2 -&gt; ut_data/app1/mod2/mod2_1 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-691"><a href="#cb21-691" aria-hidden="true" tabindex="-1"></a>        <span class="dv">691</span>             <span class="st">&quot;ut_data/app1/mod2/mod2_1 -&gt; ut_data/app1/mod2 : 0 </span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-692"><a href="#cb21-692" aria-hidden="true" tabindex="-1"></a>        <span class="dv">692</span>             <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-693"><a href="#cb21-693" aria-hidden="true" tabindex="-1"></a>        <span class="dv">693</span>     <span class="co">// clang-format on</span></span>
<span id="cb21-694"><a href="#cb21-694" aria-hidden="true" tabindex="-1"></a>        <span class="dv">694</span> </span>
<span id="cb21-695"><a href="#cb21-695" aria-hidden="true" tabindex="-1"></a>        <span class="dv">695</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb21-696"><a href="#cb21-696" aria-hidden="true" tabindex="-1"></a>        <span class="dv">696</span> </span>
<span id="cb21-697"><a href="#cb21-697" aria-hidden="true" tabindex="-1"></a>        <span class="dv">697</span>     p2pg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-698"><a href="#cb21-698" aria-hidden="true" tabindex="-1"></a>        <span class="dv">698</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-699"><a href="#cb21-699" aria-hidden="true" tabindex="-1"></a>        <span class="dv">699</span>   <span class="op">}</span></span>
<span id="cb21-700"><a href="#cb21-700" aria-hidden="true" tabindex="-1"></a>        <span class="dv">700</span> <span class="op">}</span></span>
<span id="cb21-701"><a href="#cb21-701" aria-hidden="true" tabindex="-1"></a>        <span class="dv">701</span> </span>
<span id="cb21-702"><a href="#cb21-702" aria-hidden="true" tabindex="-1"></a>        <span class="dv">702</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> ArchGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-703"><a href="#cb21-703" aria-hidden="true" tabindex="-1"></a>        <span class="dv">703</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb21-704"><a href="#cb21-704" aria-hidden="true" tabindex="-1"></a>        <span class="dv">704</span> </span>
<span id="cb21-705"><a href="#cb21-705" aria-hidden="true" tabindex="-1"></a>        <span class="dv">705</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-706"><a href="#cb21-706" aria-hidden="true" tabindex="-1"></a>        <span class="dv">706</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-707"><a href="#cb21-707" aria-hidden="true" tabindex="-1"></a>        <span class="dv">707</span>     <span class="kw">auto</span> ag <span class="op">=</span> ArchGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb21-708"><a href="#cb21-708" aria-hidden="true" tabindex="-1"></a>        <span class="dv">708</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-709"><a href="#cb21-709" aria-hidden="true" tabindex="-1"></a>        <span class="dv">709</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-710"><a href="#cb21-710" aria-hidden="true" tabindex="-1"></a>        <span class="dv">710</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-711"><a href="#cb21-711" aria-hidden="true" tabindex="-1"></a>        <span class="dv">711</span>   <span class="op">}</span></span>
<span id="cb21-712"><a href="#cb21-712" aria-hidden="true" tabindex="-1"></a>        <span class="dv">712</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-713"><a href="#cb21-713" aria-hidden="true" tabindex="-1"></a>        <span class="dv">713</span> </span>
<span id="cb21-714"><a href="#cb21-714" aria-hidden="true" tabindex="-1"></a>        <span class="dv">714</span>   <span class="op">{</span></span>
<span id="cb21-715"><a href="#cb21-715" aria-hidden="true" tabindex="-1"></a>        <span class="dv">715</span>     <span class="kw">auto</span> ag <span class="op">=</span> ArchGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb21-716"><a href="#cb21-716" aria-hidden="true" tabindex="-1"></a>        <span class="dv">716</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb21-717"><a href="#cb21-717" aria-hidden="true" tabindex="-1"></a>        <span class="dv">717</span> </span>
<span id="cb21-718"><a href="#cb21-718" aria-hidden="true" tabindex="-1"></a>        <span class="dv">718</span>     ag<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-719"><a href="#cb21-719" aria-hidden="true" tabindex="-1"></a>        <span class="dv">719</span> </span>
<span id="cb21-720"><a href="#cb21-720" aria-hidden="true" tabindex="-1"></a>        <span class="dv">720</span>     <span class="kw">auto</span> act <span class="op">=</span></span>
<span id="cb21-721"><a href="#cb21-721" aria-hidden="true" tabindex="-1"></a>        <span class="dv">721</span>         <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>FileUtils<span class="op">::</span>Load_Strings<span class="op">(</span>ss<span class="op">)};</span></span>
<span id="cb21-722"><a href="#cb21-722" aria-hidden="true" tabindex="-1"></a>        <span class="dv">722</span> </span>
<span id="cb21-723"><a href="#cb21-723" aria-hidden="true" tabindex="-1"></a>        <span class="dv">723</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span></span>
<span id="cb21-724"><a href="#cb21-724" aria-hidden="true" tabindex="-1"></a>        <span class="dv">724</span>         <span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb21-725"><a href="#cb21-725" aria-hidden="true" tabindex="-1"></a>        <span class="dv">725</span> </span>
<span id="cb21-726"><a href="#cb21-726" aria-hidden="true" tabindex="-1"></a>        <span class="dv">726</span>     ASSERT_TRUE<span class="op">(</span>exp<span class="op">);</span></span>
<span id="cb21-727"><a href="#cb21-727" aria-hidden="true" tabindex="-1"></a>        <span class="dv">727</span> </span>
<span id="cb21-728"><a href="#cb21-728" aria-hidden="true" tabindex="-1"></a>        <span class="dv">728</span>     ASSERT_EQ<span class="op">(*</span>act<span class="op">,</span> <span class="op">*</span>exp<span class="op">);</span></span>
<span id="cb21-729"><a href="#cb21-729" aria-hidden="true" tabindex="-1"></a>        <span class="dv">729</span>   <span class="op">}</span></span>
<span id="cb21-730"><a href="#cb21-730" aria-hidden="true" tabindex="-1"></a>        <span class="dv">730</span> <span class="op">}</span></span>
<span id="cb21-731"><a href="#cb21-731" aria-hidden="true" tabindex="-1"></a>        <span class="dv">731</span> </span>
<span id="cb21-732"><a href="#cb21-732" aria-hidden="true" tabindex="-1"></a>        <span class="dv">732</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> Arch2PUmlGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-733"><a href="#cb21-733" aria-hidden="true" tabindex="-1"></a>        <span class="dv">733</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-734"><a href="#cb21-734" aria-hidden="true" tabindex="-1"></a>        <span class="dv">734</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-735"><a href="#cb21-735" aria-hidden="true" tabindex="-1"></a>        <span class="dv">735</span>     <span class="kw">auto</span> ag <span class="op">=</span> Arch2PUmlGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb21-736"><a href="#cb21-736" aria-hidden="true" tabindex="-1"></a>        <span class="dv">736</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-737"><a href="#cb21-737" aria-hidden="true" tabindex="-1"></a>        <span class="dv">737</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-738"><a href="#cb21-738" aria-hidden="true" tabindex="-1"></a>        <span class="dv">738</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-739"><a href="#cb21-739" aria-hidden="true" tabindex="-1"></a>        <span class="dv">739</span>   <span class="op">}</span></span>
<span id="cb21-740"><a href="#cb21-740" aria-hidden="true" tabindex="-1"></a>        <span class="dv">740</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-741"><a href="#cb21-741" aria-hidden="true" tabindex="-1"></a>        <span class="dv">741</span> </span>
<span id="cb21-742"><a href="#cb21-742" aria-hidden="true" tabindex="-1"></a>        <span class="dv">742</span>   <span class="op">{</span></span>
<span id="cb21-743"><a href="#cb21-743" aria-hidden="true" tabindex="-1"></a>        <span class="dv">743</span>     <span class="kw">auto</span> ag <span class="op">=</span> Arch2PUmlGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb21-744"><a href="#cb21-744" aria-hidden="true" tabindex="-1"></a>        <span class="dv">744</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb21-745"><a href="#cb21-745" aria-hidden="true" tabindex="-1"></a>        <span class="dv">745</span> </span>
<span id="cb21-746"><a href="#cb21-746" aria-hidden="true" tabindex="-1"></a>        <span class="dv">746</span>     ag<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">);</span></span>
<span id="cb21-747"><a href="#cb21-747" aria-hidden="true" tabindex="-1"></a>        <span class="dv">747</span> </span>
<span id="cb21-748"><a href="#cb21-748" aria-hidden="true" tabindex="-1"></a>        <span class="dv">748</span>     <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span></span>
<span id="cb21-749"><a href="#cb21-749" aria-hidden="true" tabindex="-1"></a>        <span class="dv">749</span>         <span class="st">&quot;@startuml</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-750"><a href="#cb21-750" aria-hidden="true" tabindex="-1"></a>        <span class="dv">750</span>         <span class="st">&quot;scale max 730 width</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-751"><a href="#cb21-751" aria-hidden="true" tabindex="-1"></a>        <span class="dv">751</span>         <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-752"><a href="#cb21-752" aria-hidden="true" tabindex="-1"></a>        <span class="dv">752</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-753"><a href="#cb21-753" aria-hidden="true" tabindex="-1"></a>        <span class="dv">753</span>         <span class="st">&quot;    rectangle </span><span class="sc">\&quot;</span><span class="st">mod2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2 {</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-754"><a href="#cb21-754" aria-hidden="true" tabindex="-1"></a>        <span class="dv">754</span>         <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_1</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-755"><a href="#cb21-755" aria-hidden="true" tabindex="-1"></a>        <span class="dv">755</span>         <span class="st">&quot;        rectangle </span><span class="sc">\&quot;</span><span class="st">mod2_2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-756"><a href="#cb21-756" aria-hidden="true" tabindex="-1"></a>        <span class="dv">756</span>         <span class="st">&quot;    }</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-757"><a href="#cb21-757" aria-hidden="true" tabindex="-1"></a>        <span class="dv">757</span>         <span class="st">&quot;}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-758"><a href="#cb21-758" aria-hidden="true" tabindex="-1"></a>        <span class="dv">758</span>         <span class="st">&quot;rectangle </span><span class="sc">\&quot;</span><span class="st">app2</span><span class="sc">\&quot;</span><span class="st"> as ut_data___app2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-759"><a href="#cb21-759" aria-hidden="true" tabindex="-1"></a>        <span class="dv">759</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-760"><a href="#cb21-760" aria-hidden="true" tabindex="-1"></a>        <span class="dv">760</span>         <span class="st">&quot;ut_data___app1 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-761"><a href="#cb21-761" aria-hidden="true" tabindex="-1"></a>        <span class="dv">761</span>         <span class="st">&quot;ut_data___app1___mod2___mod2_2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-762"><a href="#cb21-762" aria-hidden="true" tabindex="-1"></a>        <span class="dv">762</span>         <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-763"><a href="#cb21-763" aria-hidden="true" tabindex="-1"></a>        <span class="dv">763</span>         <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-764"><a href="#cb21-764" aria-hidden="true" tabindex="-1"></a>        <span class="dv">764</span>         <span class="st">&quot;ut_data___app1___mod1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> -[#orange]-&gt; &quot;</span></span>
<span id="cb21-765"><a href="#cb21-765" aria-hidden="true" tabindex="-1"></a>        <span class="dv">765</span>         <span class="st">&quot;ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-766"><a href="#cb21-766" aria-hidden="true" tabindex="-1"></a>        <span class="dv">766</span>         <span class="st">&quot;ut_data___app2 </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> -[#green]-&gt; ut_data___app1___mod1</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-767"><a href="#cb21-767" aria-hidden="true" tabindex="-1"></a>        <span class="dv">767</span>         <span class="st">&quot;ut_data___app1___mod2___mod2_1 </span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st"> &lt;-[#red]-&gt; </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st"> &quot;</span></span>
<span id="cb21-768"><a href="#cb21-768" aria-hidden="true" tabindex="-1"></a>        <span class="dv">768</span>         <span class="st">&quot;ut_data___app1___mod2___mod2_2</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-769"><a href="#cb21-769" aria-hidden="true" tabindex="-1"></a>        <span class="dv">769</span>         <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb21-770"><a href="#cb21-770" aria-hidden="true" tabindex="-1"></a>        <span class="dv">770</span>         <span class="st">&quot;@enduml</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb21-771"><a href="#cb21-771" aria-hidden="true" tabindex="-1"></a>        <span class="dv">771</span> </span>
<span id="cb21-772"><a href="#cb21-772" aria-hidden="true" tabindex="-1"></a>        <span class="dv">772</span>     ASSERT_EQ<span class="op">(</span>exp<span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-773"><a href="#cb21-773" aria-hidden="true" tabindex="-1"></a>        <span class="dv">773</span>   <span class="op">}</span></span>
<span id="cb21-774"><a href="#cb21-774" aria-hidden="true" tabindex="-1"></a>        <span class="dv">774</span> <span class="op">}</span></span>
<span id="cb21-775"><a href="#cb21-775" aria-hidden="true" tabindex="-1"></a>        <span class="dv">775</span> </span>
<span id="cb21-776"><a href="#cb21-776" aria-hidden="true" tabindex="-1"></a>        <span class="dv">776</span> TEST<span class="op">(</span>deps_scenario<span class="op">,</span> CyclicGenerator<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-777"><a href="#cb21-777" aria-hidden="true" tabindex="-1"></a>        <span class="dv">777</span>   <span class="kw">auto</span> exception_occured <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb21-778"><a href="#cb21-778" aria-hidden="true" tabindex="-1"></a>        <span class="dv">778</span>   <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb21-779"><a href="#cb21-779" aria-hidden="true" tabindex="-1"></a>        <span class="dv">779</span>     <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb21-780"><a href="#cb21-780" aria-hidden="true" tabindex="-1"></a>        <span class="dv">780</span>   <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>runtime_error <span class="at">const</span> <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-781"><a href="#cb21-781" aria-hidden="true" tabindex="-1"></a>        <span class="dv">781</span>     exception_occured <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb21-782"><a href="#cb21-782" aria-hidden="true" tabindex="-1"></a>        <span class="dv">782</span>     ASSERT_STREQ<span class="op">(</span><span class="st">&quot;IN-file load error&quot;</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb21-783"><a href="#cb21-783" aria-hidden="true" tabindex="-1"></a>        <span class="dv">783</span>   <span class="op">}</span></span>
<span id="cb21-784"><a href="#cb21-784" aria-hidden="true" tabindex="-1"></a>        <span class="dv">784</span>   ASSERT_TRUE<span class="op">(</span>exception_occured<span class="op">);</span></span>
<span id="cb21-785"><a href="#cb21-785" aria-hidden="true" tabindex="-1"></a>        <span class="dv">785</span> </span>
<span id="cb21-786"><a href="#cb21-786" aria-hidden="true" tabindex="-1"></a>        <span class="dv">786</span>   <span class="op">{</span></span>
<span id="cb21-787"><a href="#cb21-787" aria-hidden="true" tabindex="-1"></a>        <span class="dv">787</span>     <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb21-788"><a href="#cb21-788" aria-hidden="true" tabindex="-1"></a>        <span class="dv">788</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb21-789"><a href="#cb21-789" aria-hidden="true" tabindex="-1"></a>        <span class="dv">789</span> </span>
<span id="cb21-790"><a href="#cb21-790" aria-hidden="true" tabindex="-1"></a>        <span class="dv">790</span>     ASSERT_FALSE<span class="op">(</span>cg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">));</span></span>
<span id="cb21-791"><a href="#cb21-791" aria-hidden="true" tabindex="-1"></a>        <span class="dv">791</span> </span>
<span id="cb21-792"><a href="#cb21-792" aria-hidden="true" tabindex="-1"></a>        <span class="dv">792</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;cyclic dependencies found</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-793"><a href="#cb21-793" aria-hidden="true" tabindex="-1"></a>        <span class="dv">793</span>   <span class="op">}</span></span>
<span id="cb21-794"><a href="#cb21-794" aria-hidden="true" tabindex="-1"></a>        <span class="dv">794</span>   <span class="op">{</span></span>
<span id="cb21-795"><a href="#cb21-795" aria-hidden="true" tabindex="-1"></a>        <span class="dv">795</span>     <span class="kw">auto</span> cg <span class="op">=</span> CyclicGenerator<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org2&quot;</span><span class="op">};</span></span>
<span id="cb21-796"><a href="#cb21-796" aria-hidden="true" tabindex="-1"></a>        <span class="dv">796</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>stringstream<span class="op">{};</span></span>
<span id="cb21-797"><a href="#cb21-797" aria-hidden="true" tabindex="-1"></a>        <span class="dv">797</span> </span>
<span id="cb21-798"><a href="#cb21-798" aria-hidden="true" tabindex="-1"></a>        <span class="dv">798</span>     ASSERT_TRUE<span class="op">(</span>cg<span class="op">.</span>Output<span class="op">(</span>ss<span class="op">));</span></span>
<span id="cb21-799"><a href="#cb21-799" aria-hidden="true" tabindex="-1"></a>        <span class="dv">799</span> </span>
<span id="cb21-800"><a href="#cb21-800" aria-hidden="true" tabindex="-1"></a>        <span class="dv">800</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;cyclic dependencies not found</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb21-801"><a href="#cb21-801" aria-hidden="true" tabindex="-1"></a>        <span class="dv">801</span>   <span class="op">}</span></span>
<span id="cb21-802"><a href="#cb21-802" aria-hidden="true" tabindex="-1"></a>        <span class="dv">802</span> <span class="op">}</span></span>
<span id="cb21-803"><a href="#cb21-803" aria-hidden="true" tabindex="-1"></a>        <span class="dv">803</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb21-804"><a href="#cb21-804" aria-hidden="true" tabindex="-1"></a>        <span class="dv">804</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsdependencyutload_store_format_ut.cpp">example/deps/dependency/ut/load_store_format_ut.cpp
<a id="SS_3_1_22"></a></h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;load_store_format.h&quot;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> Dependency <span class="op">{</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Paths_t</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="kw">auto</span> <span class="at">const</span> pkg_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">};</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="kw">auto</span> <span class="at">const</span> pkg_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_act&quot;</span><span class="op">};</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>pkg_act<span class="op">);</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="kw">auto</span> <span class="at">const</span> dir_in <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>                               <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   ASSERT_FALSE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dir_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>pkg_act<span class="op">,</span> dir_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   <span class="kw">auto</span> dir_out0 <span class="op">=</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>       <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>pkg_org<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   ASSERT_TRUE<span class="op">(</span>dir_out0<span class="op">);</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="kw">auto</span> dir_out1 <span class="op">=</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>       <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">Paths_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>pkg_act<span class="op">,</span> Load_Paths<span class="op">)};</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   ASSERT_TRUE<span class="op">(</span>dir_out1<span class="op">);</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   ASSERT_EQ<span class="op">(</span>dir_in<span class="op">,</span> <span class="op">*</span>dir_out0<span class="op">);</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   ASSERT_EQ<span class="op">(</span>dir_in<span class="op">,</span> <span class="op">*</span>dir_out1<span class="op">);</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>pkg_act<span class="op">);</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">}</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Dirs2Srcs_t</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   <span class="kw">auto</span> <span class="at">const</span> dirs2srcs_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_org&quot;</span><span class="op">};</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="kw">auto</span> <span class="at">const</span> dirs2srcs_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/dirs2srcs_act&quot;</span><span class="op">};</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>dirs2srcs_act<span class="op">);</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="at">const</span> <span class="kw">auto</span> dir2srcs_in <span class="op">=</span> FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>       <span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>         <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>         <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>         <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>         <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>         <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>       <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="op">};</span></span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>   ASSERT_FALSE<span class="op">(</span></span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>       FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dir2srcs_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> </span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   ASSERT_TRUE<span class="op">(</span></span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>       FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>dirs2srcs_act<span class="op">,</span> dir2srcs_in<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> </span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="kw">auto</span> dir2srcs_out0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>       FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>dirs2srcs_org<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>   ASSERT_TRUE<span class="op">(</span>dir2srcs_out0<span class="op">);</span></span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> </span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>   <span class="kw">auto</span> dir2srcs_out1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>FileUtils<span class="op">::</span><span class="dt">Dirs2Srcs_t</span><span class="op">&gt;{</span></span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>       FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>dirs2srcs_act<span class="op">,</span> Load_Dirs2Srcs<span class="op">)};</span></span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   ASSERT_TRUE<span class="op">(</span>dir2srcs_out1<span class="op">);</span></span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> </span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>   ASSERT_EQ<span class="op">(</span>dir2srcs_in<span class="op">,</span> <span class="op">*</span>dir2srcs_out0<span class="op">);</span></span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   ASSERT_EQ<span class="op">(</span>dir2srcs_in<span class="op">,</span> <span class="op">*</span>dir2srcs_out1<span class="op">);</span></span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> </span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>dirs2srcs_act<span class="op">);</span></span>
<span id="cb22-84"><a href="#cb22-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="op">}</span></span>
<span id="cb22-85"><a href="#cb22-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb22-86"><a href="#cb22-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb22-87"><a href="#cb22-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> <span class="kw">using</span> FileUtils<span class="op">::</span><span class="dt">Paths_t</span><span class="op">;</span></span>
<span id="cb22-88"><a href="#cb22-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> </span>
<span id="cb22-89"><a href="#cb22-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="dt">DepRels_t</span> <span class="at">const</span> dep_rels<span class="op">{</span></span>
<span id="cb22-90"><a href="#cb22-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>     <span class="op">{</span>DepRelation<span class="op">{</span></span>
<span id="cb22-91"><a href="#cb22-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>         <span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb22-92"><a href="#cb22-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">},</span></span>
<span id="cb22-93"><a href="#cb22-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>         <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-94"><a href="#cb22-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb22-95"><a href="#cb22-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-96"><a href="#cb22-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb22-97"><a href="#cb22-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-98"><a href="#cb22-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb22-99"><a href="#cb22-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">}}},</span></span>
<span id="cb22-100"><a href="#cb22-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb22-101"><a href="#cb22-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb22-102"><a href="#cb22-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb22-103"><a href="#cb22-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">},</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb22-104"><a href="#cb22-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-105"><a href="#cb22-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb22-106"><a href="#cb22-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-107"><a href="#cb22-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb22-108"><a href="#cb22-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb22-109"><a href="#cb22-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-110"><a href="#cb22-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb22-111"><a href="#cb22-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb22-112"><a href="#cb22-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>                          <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}}},</span></span>
<span id="cb22-113"><a href="#cb22-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb22-114"><a href="#cb22-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-115"><a href="#cb22-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb22-116"><a href="#cb22-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>                  <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-117"><a href="#cb22-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb22-118"><a href="#cb22-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-119"><a href="#cb22-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb22-120"><a href="#cb22-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">},</span></span>
<span id="cb22-121"><a href="#cb22-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>                  <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb22-122"><a href="#cb22-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>                  <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}}},</span></span>
<span id="cb22-123"><a href="#cb22-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb22-124"><a href="#cb22-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-125"><a href="#cb22-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     <span class="op">{</span>DepRelation<span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">{},</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb22-126"><a href="#cb22-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>                  <span class="dt">Paths_t</span><span class="op">{}}},</span></span>
<span id="cb22-127"><a href="#cb22-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="op">};</span></span>
<span id="cb22-128"><a href="#cb22-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb22-129"><a href="#cb22-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> </span>
<span id="cb22-130"><a href="#cb22-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">DepRels_t</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-131"><a href="#cb22-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>   <span class="kw">auto</span> <span class="at">const</span> deps_org <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_org&quot;</span><span class="op">};</span></span>
<span id="cb22-132"><a href="#cb22-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>   <span class="kw">auto</span> <span class="at">const</span> deps_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/deps_act&quot;</span><span class="op">};</span></span>
<span id="cb22-133"><a href="#cb22-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> </span>
<span id="cb22-134"><a href="#cb22-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>deps_act<span class="op">);</span></span>
<span id="cb22-135"><a href="#cb22-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> </span>
<span id="cb22-136"><a href="#cb22-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>   <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb22-137"><a href="#cb22-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>   ASSERT_FALSE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> dep_rels<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-138"><a href="#cb22-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> </span>
<span id="cb22-139"><a href="#cb22-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>   ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>deps_act<span class="op">,</span> dep_rels<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-140"><a href="#cb22-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> </span>
<span id="cb22-141"><a href="#cb22-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>   <span class="kw">auto</span> deps_out0 <span class="op">=</span></span>
<span id="cb22-142"><a href="#cb22-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>       <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>deps_org<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb22-143"><a href="#cb22-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>   ASSERT_TRUE<span class="op">(</span>deps_out0<span class="op">);</span></span>
<span id="cb22-144"><a href="#cb22-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span> </span>
<span id="cb22-145"><a href="#cb22-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>   <span class="kw">auto</span> exp_it <span class="op">=</span> dep_rels<span class="op">.</span>cbegin<span class="op">();</span></span>
<span id="cb22-146"><a href="#cb22-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>   <span class="kw">auto</span> exp_it_end <span class="op">=</span> dep_rels<span class="op">.</span>cend<span class="op">();</span></span>
<span id="cb22-147"><a href="#cb22-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>   <span class="kw">auto</span> act_it <span class="op">=</span> deps_out0<span class="op">-&gt;</span>cbegin<span class="op">();</span></span>
<span id="cb22-148"><a href="#cb22-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> </span>
<span id="cb22-149"><a href="#cb22-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>   <span class="cf">while</span> <span class="op">(</span>exp_it <span class="op">!=</span> exp_it_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-150"><a href="#cb22-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="kw">auto</span> exp_str <span class="op">=</span> ToStringDepRel<span class="op">(*</span>exp_it<span class="op">);</span></span>
<span id="cb22-151"><a href="#cb22-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>     <span class="kw">auto</span> act_str <span class="op">=</span> ToStringDepRel<span class="op">(*</span>act_it<span class="op">);</span></span>
<span id="cb22-152"><a href="#cb22-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>     ASSERT_EQ<span class="op">(</span>exp_str<span class="op">,</span> act_str<span class="op">);</span></span>
<span id="cb22-153"><a href="#cb22-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>PackageA<span class="op">,</span> act_it<span class="op">-&gt;</span>PackageA<span class="op">);</span></span>
<span id="cb22-154"><a href="#cb22-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>CountAtoB<span class="op">,</span> act_it<span class="op">-&gt;</span>CountAtoB<span class="op">);</span></span>
<span id="cb22-155"><a href="#cb22-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>IncsAtoB<span class="op">,</span> act_it<span class="op">-&gt;</span>IncsAtoB<span class="op">);</span></span>
<span id="cb22-156"><a href="#cb22-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>PackageB<span class="op">,</span> act_it<span class="op">-&gt;</span>PackageB<span class="op">);</span></span>
<span id="cb22-157"><a href="#cb22-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>CountBtoA<span class="op">,</span> act_it<span class="op">-&gt;</span>CountBtoA<span class="op">);</span></span>
<span id="cb22-158"><a href="#cb22-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span>     ASSERT_EQ<span class="op">(</span>exp_it<span class="op">-&gt;</span>IncsBtoA<span class="op">,</span> act_it<span class="op">-&gt;</span>IncsBtoA<span class="op">);</span></span>
<span id="cb22-159"><a href="#cb22-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     ASSERT_EQ<span class="op">(*</span>exp_it<span class="op">,</span> <span class="op">*</span>act_it<span class="op">);</span></span>
<span id="cb22-160"><a href="#cb22-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb22-161"><a href="#cb22-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="op">++</span>exp_it<span class="op">;</span></span>
<span id="cb22-162"><a href="#cb22-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="op">++</span>act_it<span class="op">;</span></span>
<span id="cb22-163"><a href="#cb22-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>   <span class="op">}</span></span>
<span id="cb22-164"><a href="#cb22-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>   ASSERT_EQ<span class="op">(</span>dep_rels<span class="op">,</span> <span class="op">*</span>deps_out0<span class="op">);</span></span>
<span id="cb22-165"><a href="#cb22-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span> </span>
<span id="cb22-166"><a href="#cb22-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>   <span class="kw">auto</span> deps_out1 <span class="op">=</span></span>
<span id="cb22-167"><a href="#cb22-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>       <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="dt">DepRels_t</span><span class="op">&gt;{</span>FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>deps_act<span class="op">,</span> Load_DepRels<span class="op">)};</span></span>
<span id="cb22-168"><a href="#cb22-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>   ASSERT_TRUE<span class="op">(</span>deps_out1<span class="op">);</span></span>
<span id="cb22-169"><a href="#cb22-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> </span>
<span id="cb22-170"><a href="#cb22-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>   ASSERT_EQ<span class="op">(</span>dep_rels<span class="op">,</span> <span class="op">*</span>deps_out1<span class="op">);</span></span>
<span id="cb22-171"><a href="#cb22-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span> </span>
<span id="cb22-172"><a href="#cb22-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>deps_act<span class="op">);</span></span>
<span id="cb22-173"><a href="#cb22-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> <span class="op">}</span></span>
<span id="cb22-174"><a href="#cb22-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> </span>
<span id="cb22-175"><a href="#cb22-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span> TEST<span class="op">(</span>load_store_format<span class="op">,</span> <span class="dt">Arch_t</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-176"><a href="#cb22-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>   <span class="kw">auto</span> <span class="at">const</span> arch_exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_org&quot;</span><span class="op">};</span></span>
<span id="cb22-177"><a href="#cb22-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>   <span class="kw">auto</span> <span class="at">const</span> arch_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/arch_act&quot;</span><span class="op">};</span></span>
<span id="cb22-178"><a href="#cb22-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span> </span>
<span id="cb22-179"><a href="#cb22-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>arch_act<span class="op">);</span></span>
<span id="cb22-180"><a href="#cb22-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> </span>
<span id="cb22-181"><a href="#cb22-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>   <span class="kw">auto</span> row_exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb22-182"><a href="#cb22-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>       FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>arch_exp<span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb22-183"><a href="#cb22-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   ASSERT_TRUE<span class="op">(</span>row_exp<span class="op">);</span></span>
<span id="cb22-184"><a href="#cb22-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> </span>
<span id="cb22-185"><a href="#cb22-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>   <span class="kw">auto</span> <span class="at">const</span> arch <span class="op">=</span> ArchPkg<span class="op">::</span>GenArch<span class="op">(</span>dep_rels<span class="op">);</span></span>
<span id="cb22-186"><a href="#cb22-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>   ASSERT_TRUE<span class="op">(</span>FileUtils<span class="op">::</span>StoreToFile<span class="op">(</span>arch_act<span class="op">,</span> arch<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb22-187"><a href="#cb22-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span> </span>
<span id="cb22-188"><a href="#cb22-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>   <span class="kw">auto</span> row_act <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb22-189"><a href="#cb22-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>       FileUtils<span class="op">::</span>LoadFromFile<span class="op">(</span>arch_act<span class="op">,</span> FileUtils<span class="op">::</span>Load_Strings<span class="op">)};</span></span>
<span id="cb22-190"><a href="#cb22-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>   ASSERT_TRUE<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb22-191"><a href="#cb22-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> </span>
<span id="cb22-192"><a href="#cb22-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>   ASSERT_EQ<span class="op">(</span>row_exp<span class="op">,</span> <span class="op">*</span>row_act<span class="op">);</span></span>
<span id="cb22-193"><a href="#cb22-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span> </span>
<span id="cb22-194"><a href="#cb22-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>   FileUtils<span class="op">::</span>RemoveFile<span class="op">(</span>arch_act<span class="op">);</span></span>
<span id="cb22-195"><a href="#cb22-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span> <span class="op">}</span></span>
<span id="cb22-196"><a href="#cb22-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb22-197"><a href="#cb22-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> <span class="op">}</span> <span class="co">// namespace Dependency</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilsload_store.h">example/deps/file_utils/h/file_utils/load_store.h
<a id="SS_3_1_23"></a></h3>
<div class="sourceCode" id="cb23"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">bool</span> StoreToFile<span class="op">(</span><span class="bu">std::</span>string_view filename<span class="op">,</span> T <span class="at">const</span> <span class="op">&amp;</span>t<span class="op">,</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>                  <span class="dt">bool</span> <span class="op">(*</span>ss<span class="op">)(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> T <span class="at">const</span> <span class="op">&amp;))</span> <span class="op">{</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">auto</span> fout <span class="op">=</span> <span class="bu">std::</span>ofstream<span class="op">{</span>filename<span class="op">.</span>data<span class="op">()};</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   <span class="cf">if</span> <span class="op">(!</span>fout<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="op">}</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="cf">return</span> <span class="op">(*</span>ss<span class="op">)(</span>fout<span class="op">,</span> t<span class="op">);</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="op">}</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="bu">std::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;</span> LoadFromFile<span class="op">(</span><span class="bu">std::</span>string_view filename<span class="op">,</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>                               <span class="bu">std::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">(*</span>ls<span class="op">)(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>os<span class="op">))</span> <span class="op">{</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="kw">auto</span> fin <span class="op">=</span> <span class="bu">std::</span>ifstream<span class="op">{</span>filename<span class="op">.</span>data<span class="op">()};</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="cf">if</span> <span class="op">(!</span>fin<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="op">}</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="cf">return</span> <span class="op">(*</span>ls<span class="op">)(</span>fin<span class="op">);</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> <span class="op">}</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilsload_store_row.h">example/deps/file_utils/h/file_utils/load_store_row.h
<a id="SS_3_1_24"></a></h3>
<div class="sourceCode" id="cb24"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> <span class="at">const</span> <span class="op">&amp;</span>lines<span class="op">);</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;</span> Load_Strings<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">);</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilshfile_utilspath_utils.h">example/deps/file_utils/h/file_utils/path_utils.h
<a id="SS_3_1_25"></a></h3>
<div class="sourceCode" id="cb25"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;map&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">using</span> <span class="dt">Path_t</span> <span class="op">=</span> <span class="bu">std::</span>filesystem::path<span class="op">;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="bu">std::</span>string ToStringPath<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">);</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">using</span> <span class="dt">Paths_t</span> <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="dt">Paths_t</span> NotDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">);</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> <span class="bu">std::</span>string ToStringPaths<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">,</span> <span class="bu">std::</span>string_view sep <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>                           <span class="bu">std::</span>string_view indent <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringPaths<span class="op">(</span>paths<span class="op">);</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">}</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="co">// first path:  filename</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="co">// second path: pathname</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="kw">using</span> <span class="dt">Filename2Path_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">&gt;;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="dt">Filename2Path_t</span> GenFilename2Path<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">);</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="co">// first  : package name(directory name)</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> <span class="co">// second : srcs assigned to package</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> <span class="kw">using</span> <span class="dt">Dirs2Srcs_t</span> <span class="op">=</span> <span class="bu">std::</span>map<span class="op">&lt;</span><span class="dt">Path_t</span><span class="op">,</span> <span class="dt">Paths_t</span><span class="op">&gt;;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="dt">Dirs2Srcs_t</span> AssginSrcsToDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">);</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="bu">std::</span>string ToStringDirs2Srcs<span class="op">(</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs2srcs<span class="op">);</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="kw">inline</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>                                 <span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="cf">return</span> os <span class="op">&lt;&lt;</span> ToStringDirs2Srcs<span class="op">(</span>dirs2srcs<span class="op">);</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="dt">Path_t</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>path<span class="op">);</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> <span class="dt">void</span> RemoveFile<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>filename<span class="op">);</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilssrcload_store_row.cpp">example/deps/file_utils/src/load_store_row.cpp
<a id="SS_3_1_26"></a></h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;cassert&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;optional&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="dt">bool</span> StoreToStream<span class="op">(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> <span class="at">const</span> <span class="op">&amp;</span>lines<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>line <span class="op">:</span> lines<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     os <span class="op">&lt;&lt;</span> line<span class="op">;</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="op">}</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="op">}</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;</span> Load_Strings<span class="op">(</span><span class="bu">std::</span>istream <span class="op">&amp;</span>is<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="kw">auto</span> content <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{};</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="kw">auto</span> line <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{};</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="cf">while</span> <span class="op">(</span><span class="bu">std::</span>getline<span class="op">(</span>is<span class="op">,</span> line<span class="op">))</span> <span class="op">{</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     ss <span class="op">&lt;&lt;</span> line <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     content<span class="op">.</span>emplace_back<span class="op">(</span>ss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="op">}</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="cf">return</span> content<span class="op">;</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="op">}</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilssrcpath_utils.cpp">example/deps/file_utils/src/path_utils.cpp
<a id="SS_3_1_27"></a></h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="bu">std::</span>string ToStringPath<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>   <span class="kw">auto</span> pn <span class="op">=</span> path<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> </span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="cf">if</span> <span class="op">(</span>pn<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     pn <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   <span class="op">}</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="cf">return</span> pn<span class="op">;</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="op">}</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="bu">std::</span>string ToStringPaths<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">,</span> <span class="bu">std::</span>string_view sep<span class="op">,</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>                           <span class="bu">std::</span>string_view indent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> </span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>p <span class="op">:</span> paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>       ss <span class="op">&lt;&lt;</span> sep<span class="op">;</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="op">}</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     ss <span class="op">&lt;&lt;</span> indent <span class="op">&lt;&lt;</span> ToStringPath<span class="op">(</span>p<span class="op">);</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="op">}</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">}</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="bu">std::</span>string ToStringDirs2Srcs<span class="op">(</span><span class="dt">Dirs2Srcs_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="kw">auto</span> ss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="dt">bool</span><span class="op">{</span><span class="kw">true</span><span class="op">};</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>pair <span class="op">:</span> dirs2srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     <span class="cf">if</span> <span class="op">(</span>first<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>       first <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>       ss <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>     <span class="op">}</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     ss <span class="op">&lt;&lt;</span> ToStringPath<span class="op">(</span>pair<span class="op">.</span>first<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     ss <span class="op">&lt;&lt;</span> ToStringPaths<span class="op">(</span>pair<span class="op">.</span>second<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;    &quot;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="op">}</span></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> </span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="cf">return</span> ss<span class="op">.</span>str<span class="op">();</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> <span class="op">}</span></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span> </span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span> <span class="dt">Paths_t</span> NotDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   <span class="bu">std::</span>copy_if<span class="op">(</span>dirs<span class="op">.</span>cbegin<span class="op">(),</span> dirs<span class="op">.</span>cend<span class="op">(),</span> <span class="bu">std::</span>back_inserter<span class="op">(</span>ret<span class="op">),</span></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>                <span class="op">[](</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dir<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>                  <span class="cf">return</span> <span class="op">!</span><span class="bu">std::</span>filesystem::is_directory<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>                <span class="op">});</span></span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="op">}</span></span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="dt">Filename2Path_t</span> GenFilename2Path<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Filename2Path_t</span><span class="op">{};</span></span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> </span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>p <span class="op">:</span> paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>     ret<span class="op">[</span>p<span class="op">.</span>filename<span class="op">()]</span> <span class="op">=</span> p<span class="op">;</span></span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>   <span class="op">}</span></span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> <span class="op">}</span></span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> </span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> <span class="dt">Path_t</span> <span class="at">const</span> current_dir<span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">};</span></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> </span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> <span class="dt">size_t</span> match_count<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>dir<span class="op">,</span> <span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   <span class="kw">auto</span> <span class="at">const</span> dir_str <span class="op">=</span> dir<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="kw">auto</span> <span class="at">const</span> src_str <span class="op">=</span> dir <span class="op">==</span> current_dir <span class="op">?</span> <span class="st">&quot;./&quot;</span> <span class="op">+</span> src<span class="op">.</span>string<span class="op">()</span> <span class="op">:</span> src<span class="op">.</span>string<span class="op">();</span></span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> </span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>   <span class="cf">if</span> <span class="op">(</span>dir_str<span class="op">.</span>size<span class="op">()</span> <span class="op">&gt;=</span> src_str<span class="op">.</span>size<span class="op">())</span> <span class="op">{</span></span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> </span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>   <span class="kw">auto</span> count <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>   <span class="kw">auto</span> count_max <span class="op">=</span> dir_str<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span> </span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="cf">for</span> <span class="op">(;</span> count <span class="op">&lt;</span> count_max<span class="op">;</span> <span class="op">++</span>count<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span>     <span class="cf">if</span> <span class="op">(</span>dir_str<span class="op">[</span>count<span class="op">]</span> <span class="op">!=</span> src_str<span class="op">[</span>count<span class="op">])</span> <span class="op">{</span></span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span>       <span class="cf">break</span><span class="op">;</span></span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     <span class="op">}</span></span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>   <span class="op">}</span></span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> </span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   <span class="cf">if</span> <span class="op">(</span>count <span class="op">==</span> count_max <span class="op">&amp;&amp;</span> src_str<span class="op">[</span>count<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>     <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   <span class="op">}</span></span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> </span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>   <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> <span class="op">}</span></span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb27-101"><a href="#cb27-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> <span class="dt">Path_t</span> select_package<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>src<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-102"><a href="#cb27-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   <span class="dt">Path_t</span> <span class="at">const</span> <span class="op">*</span>best_match<span class="op">{</span><span class="kw">nullptr</span><span class="op">};</span></span>
<span id="cb27-103"><a href="#cb27-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span>   <span class="kw">auto</span> count_max <span class="op">=</span> <span class="dv">0</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb27-104"><a href="#cb27-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb27-105"><a href="#cb27-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-106"><a href="#cb27-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>     <span class="kw">auto</span> count <span class="op">=</span> match_count<span class="op">(</span>dir<span class="op">,</span> src<span class="op">);</span></span>
<span id="cb27-107"><a href="#cb27-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>     <span class="cf">if</span> <span class="op">(</span>count_max <span class="op">&lt;</span> count<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-108"><a href="#cb27-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>       best_match <span class="op">=</span> <span class="op">&amp;</span>dir<span class="op">;</span></span>
<span id="cb27-109"><a href="#cb27-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>       count_max <span class="op">=</span> count<span class="op">;</span></span>
<span id="cb27-110"><a href="#cb27-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>     <span class="op">}</span></span>
<span id="cb27-111"><a href="#cb27-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   <span class="op">}</span></span>
<span id="cb27-112"><a href="#cb27-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb27-113"><a href="#cb27-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>   <span class="cf">if</span> <span class="op">(</span>best_match <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-114"><a href="#cb27-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>     <span class="cf">return</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;no_package&quot;</span><span class="op">);</span></span>
<span id="cb27-115"><a href="#cb27-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb27-116"><a href="#cb27-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>     <span class="cf">return</span> <span class="op">*</span>best_match<span class="op">;</span></span>
<span id="cb27-117"><a href="#cb27-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>   <span class="op">}</span></span>
<span id="cb27-118"><a href="#cb27-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> <span class="op">}</span></span>
<span id="cb27-119"><a href="#cb27-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb27-120"><a href="#cb27-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="dt">Paths_t</span> gen_parent_dirs<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-121"><a href="#cb27-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb27-122"><a href="#cb27-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> </span>
<span id="cb27-123"><a href="#cb27-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> p <span class="op">=</span> dir<span class="op">.</span>parent_path<span class="op">(),</span> pp <span class="op">=</span> p<span class="op">.</span>parent_path<span class="op">();</span> <span class="op">!</span>p<span class="op">.</span>empty<span class="op">()</span> <span class="op">&amp;&amp;</span> p <span class="op">!=</span> pp<span class="op">;</span></span>
<span id="cb27-124"><a href="#cb27-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>        p <span class="op">=</span> pp<span class="op">,</span> pp <span class="op">=</span> p<span class="op">.</span>parent_path<span class="op">())</span> <span class="op">{</span></span>
<span id="cb27-125"><a href="#cb27-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>     ret<span class="op">.</span>push_front<span class="op">(</span>p<span class="op">);</span></span>
<span id="cb27-126"><a href="#cb27-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>   <span class="op">}</span></span>
<span id="cb27-127"><a href="#cb27-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> </span>
<span id="cb27-128"><a href="#cb27-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb27-129"><a href="#cb27-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> <span class="op">}</span></span>
<span id="cb27-130"><a href="#cb27-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span> </span>
<span id="cb27-131"><a href="#cb27-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span> <span class="co">// a/</span></span>
<span id="cb27-132"><a href="#cb27-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span> <span class="co">//   a0.c</span></span>
<span id="cb27-133"><a href="#cb27-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span> <span class="co">//   b/</span></span>
<span id="cb27-134"><a href="#cb27-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span> <span class="co">//     c/</span></span>
<span id="cb27-135"><a href="#cb27-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span> <span class="co">//       d/</span></span>
<span id="cb27-136"><a href="#cb27-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> <span class="co">//         d.c</span></span>
<span id="cb27-137"><a href="#cb27-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> <span class="co">// のようなファイ構造があった場合、</span></span>
<span id="cb27-138"><a href="#cb27-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="co">// d2sには a、a/b/c/d が登録され、a/b、a/b/cは登録されていない。</span></span>
<span id="cb27-139"><a href="#cb27-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="co">// a/b、a/b/cを埋めるのがpad_parent_dirsである。</span></span>
<span id="cb27-140"><a href="#cb27-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span> <span class="dt">void</span> pad_parent_dirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span> <span class="dt">Dirs2Srcs_t</span> <span class="op">&amp;</span>d2s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-141"><a href="#cb27-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>dir <span class="op">:</span> dirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-142"><a href="#cb27-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>     <span class="kw">auto</span> parent_found <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb27-143"><a href="#cb27-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span> </span>
<span id="cb27-144"><a href="#cb27-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>     <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>p <span class="op">:</span> gen_parent_dirs<span class="op">(</span>dir<span class="op">))</span> <span class="op">{</span></span>
<span id="cb27-145"><a href="#cb27-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>       <span class="cf">if</span> <span class="op">(!</span>parent_found <span class="op">&amp;&amp;</span> d2s<span class="op">.</span>count<span class="op">(</span>p<span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-146"><a href="#cb27-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>         parent_found <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb27-147"><a href="#cb27-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>       <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>parent_found <span class="op">&amp;&amp;</span> d2s<span class="op">.</span>count<span class="op">(</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-148"><a href="#cb27-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>         d2s<span class="op">[</span>p<span class="op">]</span> <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">();</span></span>
<span id="cb27-149"><a href="#cb27-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>       <span class="op">}</span></span>
<span id="cb27-150"><a href="#cb27-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>     <span class="op">}</span></span>
<span id="cb27-151"><a href="#cb27-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="op">}</span></span>
<span id="cb27-152"><a href="#cb27-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span> <span class="op">}</span></span>
<span id="cb27-153"><a href="#cb27-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb27-154"><a href="#cb27-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span> </span>
<span id="cb27-155"><a href="#cb27-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="dt">Dirs2Srcs_t</span> AssginSrcsToDirs<span class="op">(</span><span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>dirs<span class="op">,</span> <span class="dt">Paths_t</span> <span class="at">const</span> <span class="op">&amp;</span>srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-156"><a href="#cb27-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>   <span class="kw">auto</span> ret <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{};</span></span>
<span id="cb27-157"><a href="#cb27-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>   <span class="kw">auto</span> add_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{};</span></span>
<span id="cb27-158"><a href="#cb27-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> </span>
<span id="cb27-159"><a href="#cb27-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>src <span class="op">:</span> srcs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-160"><a href="#cb27-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>     <span class="kw">auto</span> dir <span class="op">=</span> select_package<span class="op">(</span>src<span class="op">,</span> dirs<span class="op">);</span></span>
<span id="cb27-161"><a href="#cb27-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span> </span>
<span id="cb27-162"><a href="#cb27-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>     <span class="cf">if</span> <span class="op">(</span>ret<span class="op">.</span>count<span class="op">(</span>dir<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-163"><a href="#cb27-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>       ret<span class="op">[</span>dir<span class="op">]</span> <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">();</span></span>
<span id="cb27-164"><a href="#cb27-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>       add_dirs<span class="op">.</span>push_back<span class="op">(</span>dir<span class="op">);</span></span>
<span id="cb27-165"><a href="#cb27-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>     <span class="op">}</span></span>
<span id="cb27-166"><a href="#cb27-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>     ret<span class="op">[</span>dir<span class="op">].</span>push_back<span class="op">(</span>src<span class="op">);</span></span>
<span id="cb27-167"><a href="#cb27-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>   <span class="op">}</span></span>
<span id="cb27-168"><a href="#cb27-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span> </span>
<span id="cb27-169"><a href="#cb27-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>   pad_parent_dirs<span class="op">(</span>add_dirs<span class="op">,</span> ret<span class="op">);</span></span>
<span id="cb27-170"><a href="#cb27-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span> </span>
<span id="cb27-171"><a href="#cb27-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>   <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb27-172"><a href="#cb27-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span> <span class="op">}</span></span>
<span id="cb27-173"><a href="#cb27-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span> </span>
<span id="cb27-174"><a href="#cb27-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span> <span class="dt">Path_t</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-175"><a href="#cb27-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>   <span class="co">// lexically_normalは&quot;a/../b&quot;を&quot;b&quot;にする</span></span>
<span id="cb27-176"><a href="#cb27-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>   <span class="co">// 最後の&#39;/&#39;を削除</span></span>
<span id="cb27-177"><a href="#cb27-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>   <span class="kw">auto</span> path_lex <span class="op">=</span> <span class="dt">Path_t</span><span class="op">(</span>path<span class="op">.</span>string<span class="op">()</span> <span class="op">+</span> <span class="ch">&#39;/&#39;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">();</span></span>
<span id="cb27-178"><a href="#cb27-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>   path_lex<span class="op">.</span>pop_back<span class="op">();</span></span>
<span id="cb27-179"><a href="#cb27-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span> </span>
<span id="cb27-180"><a href="#cb27-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>   <span class="cf">if</span> <span class="op">(</span>path_lex<span class="op">.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-181"><a href="#cb27-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span>     <span class="cf">return</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">);</span></span>
<span id="cb27-182"><a href="#cb27-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>   <span class="op">}</span></span>
<span id="cb27-183"><a href="#cb27-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   <span class="cf">return</span> path_lex<span class="op">;</span></span>
<span id="cb27-184"><a href="#cb27-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span> <span class="op">}</span></span>
<span id="cb27-185"><a href="#cb27-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span> </span>
<span id="cb27-186"><a href="#cb27-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span> <span class="dt">void</span> RemoveFile<span class="op">(</span><span class="dt">Path_t</span> <span class="at">const</span> <span class="op">&amp;</span>filename<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-187"><a href="#cb27-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>   <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>filesystem::exists<span class="op">(</span>filename<span class="op">))</span> <span class="op">{</span></span>
<span id="cb27-188"><a href="#cb27-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>     <span class="bu">std::</span>filesystem::remove<span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb27-189"><a href="#cb27-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span>   <span class="op">}</span></span>
<span id="cb27-190"><a href="#cb27-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span> <span class="op">}</span></span>
<span id="cb27-191"><a href="#cb27-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilsutload_store_row_ut.cpp">example/deps/file_utils/ut/load_store_row_ut.cpp
<a id="SS_3_1_28"></a></h3>
<div class="sourceCode" id="cb28"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> TEST<span class="op">(</span>load_store<span class="op">,</span> Row<span class="op">)</span> <span class="op">{</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="kw">auto</span> <span class="at">const</span> row_exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_org&quot;</span><span class="op">};</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">auto</span> <span class="at">const</span> row_act <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/load_store/pkg_act&quot;</span><span class="op">};</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   RemoveFile<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="kw">auto</span> row_data0 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>       LoadFromFile<span class="op">(</span>row_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="co">// row_actはないのでエラーなはず</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   ASSERT_FALSE<span class="op">(</span>row_data0<span class="op">);</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   <span class="co">// ディレクトリなのでエラーなはず</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   ASSERT_FALSE<span class="op">(</span>StoreToFile<span class="op">(</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="op">*</span>row_data0<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> </span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   row_data0 <span class="op">=</span> LoadFromFile<span class="op">(</span>row_exp<span class="op">,</span> Load_Strings<span class="op">);</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>   ASSERT_TRUE<span class="op">(</span>row_data0<span class="op">);</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   ASSERT_TRUE<span class="op">(</span>StoreToFile<span class="op">(</span>row_act<span class="op">,</span> <span class="op">*</span>row_data0<span class="op">,</span> StoreToStream<span class="op">));</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>   <span class="kw">auto</span> row_data1 <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>       LoadFromFile<span class="op">(</span>row_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>   ASSERT_TRUE<span class="op">(</span>row_data1<span class="op">);</span></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   ASSERT_EQ<span class="op">(*</span>row_data0<span class="op">,</span> <span class="op">*</span>row_data1<span class="op">);</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   RemoveFile<span class="op">(</span>row_act<span class="op">);</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="op">}</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3
id="exampledepsfile_utilsutpath_utils_ut.cpp">example/deps/file_utils/ut/path_utils_ut.cpp
<a id="SS_3_1_29"></a></h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;file_utils/load_store.h&quot;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &quot;file_utils/load_store_row.h&quot;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;file_utils/path_utils.h&quot;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> <span class="er">#define SCAN_BUILD_ERROR 0</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="er">#if SCAN_BUILD_ERROR == 1</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">struct</span> X <span class="op">{};</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="dt">void</span> potential_leak<span class="op">(</span><span class="dt">int</span> a<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   X <span class="op">*</span>x<span class="op">{</span><span class="kw">new</span> X<span class="op">};</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> <span class="co">// aが2ならメモリリーク</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="op">}</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span> </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="kw">delete</span> x<span class="op">;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">}</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="er">#endif</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span> <span class="kw">namespace</span> FileUtils <span class="op">{</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> Logger<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>   <span class="kw">auto</span> log_file_org <span class="op">=</span> <span class="st">&quot;ut_data/load_store/logger_org&quot;</span><span class="op">;</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="kw">auto</span> log_file_act <span class="op">=</span> <span class="st">&quot;ut_data/load_store/logger_act&quot;</span><span class="op">;</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span> </span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   RemoveFile<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   LOGGER_INIT<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   LOGGER<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   LOGGER<span class="op">(</span><span class="st">&quot;xyz&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="kw">auto</span> <span class="at">const</span> dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>                             <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>                             <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>                             <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>                             <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>                             <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> </span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span>   LOGGER<span class="op">(</span>ToStringPaths<span class="op">(</span>dirs<span class="op">));</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   LOGGER<span class="op">(</span>dirs<span class="op">);</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> </span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   Logging<span class="op">::</span>Logger<span class="op">::</span>Inst<span class="op">().</span>Close<span class="op">();</span></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="kw">auto</span> exp <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>       LoadFromFile<span class="op">(</span>log_file_org<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   ASSERT_TRUE<span class="op">(</span>exp<span class="op">);</span></span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;&gt;{</span></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>       LoadFromFile<span class="op">(</span>log_file_act<span class="op">,</span> Load_Strings<span class="op">)};</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>   ASSERT_TRUE<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   ASSERT_EQ<span class="op">(*</span>exp<span class="op">,</span> <span class="op">*</span>act<span class="op">);</span></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> </span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   RemoveFile<span class="op">(</span>log_file_act<span class="op">);</span></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> <span class="op">}</span></span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> NotDirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>   <span class="op">{</span></span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>     <span class="kw">auto</span> <span class="at">const</span> dir_in <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>                                 <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>                                 <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>                                 <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span>     <span class="kw">auto</span> <span class="at">const</span> dir_act <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span>NotDirs<span class="op">(</span>dir_in<span class="op">)};</span></span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> </span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span>     ASSERT_EQ<span class="op">(</span><span class="dt">Paths_t</span><span class="op">{},</span> dir_act<span class="op">);</span></span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>   <span class="op">}</span></span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>   <span class="op">{</span></span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>     <span class="kw">auto</span> <span class="at">const</span> dir_in <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>                                 <span class="st">&quot;ut_data/app1/notdir&quot;</span><span class="op">,</span></span>
<span id="cb29-76"><a href="#cb29-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>                                 <span class="st">&quot;ut_data/notdir2&quot;</span><span class="op">,</span></span>
<span id="cb29-77"><a href="#cb29-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>                                 <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="kw">auto</span> <span class="at">const</span> dir_act <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span>NotDirs<span class="op">(</span>dir_in<span class="op">)};</span></span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="kw">auto</span> <span class="at">const</span> dir_exp <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span></span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>         <span class="st">&quot;ut_data/app1/notdir&quot;</span><span class="op">,</span></span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>         <span class="st">&quot;ut_data/notdir2&quot;</span><span class="op">,</span></span>
<span id="cb29-84"><a href="#cb29-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>     <span class="op">};</span></span>
<span id="cb29-85"><a href="#cb29-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> </span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     ASSERT_EQ<span class="op">(</span>dir_exp<span class="op">,</span> dir_act<span class="op">);</span></span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>   <span class="op">}</span></span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> <span class="op">}</span></span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> </span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> NormalizeLexically<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>   <span class="co">// こうなるのでNormalizeLexicallyが必要</span></span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>   ASSERT_EQ<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">),</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">));</span></span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   ASSERT_NE<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a/&quot;</span><span class="op">),</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">));</span></span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;a/&quot;</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">());</span></span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a&quot;</span><span class="op">).</span>lexically_normal<span class="op">().</span>string<span class="op">());</span></span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> </span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>   <span class="co">// テストはここから</span></span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;./x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a/&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a////&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;../a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="st">&quot;.././x/../a/./././&quot;</span><span class="op">).</span>string<span class="op">());</span></span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> </span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;a&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;x/../a/&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> </span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;./&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>   ASSERT_EQ<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> NormalizeLexically<span class="op">(</span><span class="dt">Path_t</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">)).</span>string<span class="op">());</span></span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> <span class="op">}</span></span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> </span>
<span id="cb29-110"><a href="#cb29-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> GenFilename2Path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-111"><a href="#cb29-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span>   <span class="kw">auto</span> <span class="at">const</span> act_srcs <span class="op">=</span></span>
<span id="cb29-112"><a href="#cb29-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span>       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb29-113"><a href="#cb29-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>               <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb29-114"><a href="#cb29-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span>               <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">};</span></span>
<span id="cb29-115"><a href="#cb29-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> </span>
<span id="cb29-116"><a href="#cb29-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> GenFilename2Path<span class="op">(</span>act_srcs<span class="op">);</span></span>
<span id="cb29-117"><a href="#cb29-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> </span>
<span id="cb29-118"><a href="#cb29-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Filename2Path_t</span><span class="op">{</span></span>
<span id="cb29-119"><a href="#cb29-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>       <span class="op">{</span><span class="st">&quot;a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">},</span></span>
<span id="cb29-120"><a href="#cb29-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>       <span class="op">{</span><span class="st">&quot;a_1_c.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">},</span></span>
<span id="cb29-121"><a href="#cb29-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>       <span class="op">{</span><span class="st">&quot;a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">},</span></span>
<span id="cb29-122"><a href="#cb29-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>       <span class="op">{</span><span class="st">&quot;a_1_cpp.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">},</span></span>
<span id="cb29-123"><a href="#cb29-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>       <span class="op">{</span><span class="st">&quot;a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">},</span></span>
<span id="cb29-124"><a href="#cb29-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>   <span class="op">};</span></span>
<span id="cb29-125"><a href="#cb29-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> </span>
<span id="cb29-126"><a href="#cb29-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span>   ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-127"><a href="#cb29-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> <span class="op">}</span></span>
<span id="cb29-128"><a href="#cb29-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> </span>
<span id="cb29-129"><a href="#cb29-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> AssginSrcsToDirs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-130"><a href="#cb29-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>   <span class="op">{</span></span>
<span id="cb29-131"><a href="#cb29-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb29-132"><a href="#cb29-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>                                   <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb29-133"><a href="#cb29-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>                                   <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb29-134"><a href="#cb29-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-135"><a href="#cb29-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-136"><a href="#cb29-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span>                                   <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-137"><a href="#cb29-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> </span>
<span id="cb29-138"><a href="#cb29-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb29-139"><a href="#cb29-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>                                   <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb29-140"><a href="#cb29-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-141"><a href="#cb29-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>                                   <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb29-142"><a href="#cb29-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb29-143"><a href="#cb29-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>                                   <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb29-144"><a href="#cb29-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb29-145"><a href="#cb29-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>                                   <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-146"><a href="#cb29-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span>                                   <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb29-147"><a href="#cb29-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-148"><a href="#cb29-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-149"><a href="#cb29-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>                                   <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-150"><a href="#cb29-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-151"><a href="#cb29-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-152"><a href="#cb29-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-153"><a href="#cb29-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-154"><a href="#cb29-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-155"><a href="#cb29-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span>                                   <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-156"><a href="#cb29-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span>                                   <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-157"><a href="#cb29-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span>                                   <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb29-158"><a href="#cb29-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> </span>
<span id="cb29-159"><a href="#cb29-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb29-160"><a href="#cb29-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span> </span>
<span id="cb29-161"><a href="#cb29-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb29-162"><a href="#cb29-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span></span>
<span id="cb29-163"><a href="#cb29-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb29-164"><a href="#cb29-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>           <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb29-165"><a href="#cb29-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>           <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb29-166"><a href="#cb29-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>           <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-167"><a href="#cb29-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>           <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">}},</span></span>
<span id="cb29-168"><a href="#cb29-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb29-169"><a href="#cb29-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-170"><a href="#cb29-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>           <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-171"><a href="#cb29-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb29-172"><a href="#cb29-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-173"><a href="#cb29-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-174"><a href="#cb29-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-175"><a href="#cb29-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>           <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-176"><a href="#cb29-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-177"><a href="#cb29-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-178"><a href="#cb29-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>           <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-179"><a href="#cb29-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>         <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-180"><a href="#cb29-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span>     <span class="op">};</span></span>
<span id="cb29-181"><a href="#cb29-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> </span>
<span id="cb29-182"><a href="#cb29-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-183"><a href="#cb29-183" aria-hidden="true" tabindex="-1"></a>        <span class="dv">183</span>   <span class="op">}</span></span>
<span id="cb29-184"><a href="#cb29-184" aria-hidden="true" tabindex="-1"></a>        <span class="dv">184</span>   <span class="op">{</span></span>
<span id="cb29-185"><a href="#cb29-185" aria-hidden="true" tabindex="-1"></a>        <span class="dv">185</span>     <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">};</span></span>
<span id="cb29-186"><a href="#cb29-186" aria-hidden="true" tabindex="-1"></a>        <span class="dv">186</span>     <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span></span>
<span id="cb29-187"><a href="#cb29-187" aria-hidden="true" tabindex="-1"></a>        <span class="dv">187</span>         <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;path_utils.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-188"><a href="#cb29-188" aria-hidden="true" tabindex="-1"></a>        <span class="dv">188</span>                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">};</span></span>
<span id="cb29-189"><a href="#cb29-189" aria-hidden="true" tabindex="-1"></a>        <span class="dv">189</span> </span>
<span id="cb29-190"><a href="#cb29-190" aria-hidden="true" tabindex="-1"></a>        <span class="dv">190</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb29-191"><a href="#cb29-191" aria-hidden="true" tabindex="-1"></a>        <span class="dv">191</span> </span>
<span id="cb29-192"><a href="#cb29-192" aria-hidden="true" tabindex="-1"></a>        <span class="dv">192</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb29-193"><a href="#cb29-193" aria-hidden="true" tabindex="-1"></a>        <span class="dv">193</span>         <span class="op">{</span><span class="st">&quot;.&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;path_utils.cpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-194"><a href="#cb29-194" aria-hidden="true" tabindex="-1"></a>        <span class="dv">194</span>         <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1&quot;</span><span class="op">,</span></span>
<span id="cb29-195"><a href="#cb29-195" aria-hidden="true" tabindex="-1"></a>        <span class="dv">195</span>          <span class="op">{</span><span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-196"><a href="#cb29-196" aria-hidden="true" tabindex="-1"></a>        <span class="dv">196</span>     <span class="op">};</span></span>
<span id="cb29-197"><a href="#cb29-197" aria-hidden="true" tabindex="-1"></a>        <span class="dv">197</span> </span>
<span id="cb29-198"><a href="#cb29-198" aria-hidden="true" tabindex="-1"></a>        <span class="dv">198</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-199"><a href="#cb29-199" aria-hidden="true" tabindex="-1"></a>        <span class="dv">199</span>   <span class="op">}</span></span>
<span id="cb29-200"><a href="#cb29-200" aria-hidden="true" tabindex="-1"></a>        <span class="dv">200</span> <span class="op">}</span></span>
<span id="cb29-201"><a href="#cb29-201" aria-hidden="true" tabindex="-1"></a>        <span class="dv">201</span> </span>
<span id="cb29-202"><a href="#cb29-202" aria-hidden="true" tabindex="-1"></a>        <span class="dv">202</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> PackageSrcMatcher2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-203"><a href="#cb29-203" aria-hidden="true" tabindex="-1"></a>        <span class="dv">203</span>   <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span></span>
<span id="cb29-204"><a href="#cb29-204" aria-hidden="true" tabindex="-1"></a>        <span class="dv">204</span>       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-205"><a href="#cb29-205" aria-hidden="true" tabindex="-1"></a>        <span class="dv">205</span>               <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-206"><a href="#cb29-206" aria-hidden="true" tabindex="-1"></a>        <span class="dv">206</span> </span>
<span id="cb29-207"><a href="#cb29-207" aria-hidden="true" tabindex="-1"></a>        <span class="dv">207</span>   <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb29-208"><a href="#cb29-208" aria-hidden="true" tabindex="-1"></a>        <span class="dv">208</span>                                 <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb29-209"><a href="#cb29-209" aria-hidden="true" tabindex="-1"></a>        <span class="dv">209</span>                                 <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-210"><a href="#cb29-210" aria-hidden="true" tabindex="-1"></a>        <span class="dv">210</span>                                 <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb29-211"><a href="#cb29-211" aria-hidden="true" tabindex="-1"></a>        <span class="dv">211</span>                                 <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span></span>
<span id="cb29-212"><a href="#cb29-212" aria-hidden="true" tabindex="-1"></a>        <span class="dv">212</span>                                 <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb29-213"><a href="#cb29-213" aria-hidden="true" tabindex="-1"></a>        <span class="dv">213</span>                                 <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span></span>
<span id="cb29-214"><a href="#cb29-214" aria-hidden="true" tabindex="-1"></a>        <span class="dv">214</span>                                 <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-215"><a href="#cb29-215" aria-hidden="true" tabindex="-1"></a>        <span class="dv">215</span>                                 <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span></span>
<span id="cb29-216"><a href="#cb29-216" aria-hidden="true" tabindex="-1"></a>        <span class="dv">216</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-217"><a href="#cb29-217" aria-hidden="true" tabindex="-1"></a>        <span class="dv">217</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-218"><a href="#cb29-218" aria-hidden="true" tabindex="-1"></a>        <span class="dv">218</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-219"><a href="#cb29-219" aria-hidden="true" tabindex="-1"></a>        <span class="dv">219</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-220"><a href="#cb29-220" aria-hidden="true" tabindex="-1"></a>        <span class="dv">220</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-221"><a href="#cb29-221" aria-hidden="true" tabindex="-1"></a>        <span class="dv">221</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-222"><a href="#cb29-222" aria-hidden="true" tabindex="-1"></a>        <span class="dv">222</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-223"><a href="#cb29-223" aria-hidden="true" tabindex="-1"></a>        <span class="dv">223</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-224"><a href="#cb29-224" aria-hidden="true" tabindex="-1"></a>        <span class="dv">224</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-225"><a href="#cb29-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">225</span>                                 <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-226"><a href="#cb29-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">226</span>                                 <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb29-227"><a href="#cb29-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">227</span> </span>
<span id="cb29-228"><a href="#cb29-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">228</span>   <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb29-229"><a href="#cb29-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">229</span> </span>
<span id="cb29-230"><a href="#cb29-230" aria-hidden="true" tabindex="-1"></a>        <span class="dv">230</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb29-231"><a href="#cb29-231" aria-hidden="true" tabindex="-1"></a>        <span class="dv">231</span>       <span class="op">{</span><span class="st">&quot;ut_data&quot;</span><span class="op">,</span></span>
<span id="cb29-232"><a href="#cb29-232" aria-hidden="true" tabindex="-1"></a>        <span class="dv">232</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_c.h&quot;</span><span class="op">,</span></span>
<span id="cb29-233"><a href="#cb29-233" aria-hidden="true" tabindex="-1"></a>        <span class="dv">233</span>         <span class="st">&quot;ut_data/app1/a_1_cpp.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_1_cpp.h&quot;</span><span class="op">,</span></span>
<span id="cb29-234"><a href="#cb29-234" aria-hidden="true" tabindex="-1"></a>        <span class="dv">234</span>         <span class="st">&quot;ut_data/app1/a_2_c.C&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_c.H&quot;</span><span class="op">,</span></span>
<span id="cb29-235"><a href="#cb29-235" aria-hidden="true" tabindex="-1"></a>        <span class="dv">235</span>         <span class="st">&quot;ut_data/app1/a_2_cpp.cxx&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/a_2_cpp.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-236"><a href="#cb29-236" aria-hidden="true" tabindex="-1"></a>        <span class="dv">236</span>         <span class="st">&quot;ut_data/app1/a_3_cpp.cc&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-237"><a href="#cb29-237" aria-hidden="true" tabindex="-1"></a>        <span class="dv">237</span>         <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-238"><a href="#cb29-238" aria-hidden="true" tabindex="-1"></a>        <span class="dv">238</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1&quot;</span><span class="op">,</span> <span class="op">{}},</span></span>
<span id="cb29-239"><a href="#cb29-239" aria-hidden="true" tabindex="-1"></a>        <span class="dv">239</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2&quot;</span><span class="op">,</span></span>
<span id="cb29-240"><a href="#cb29-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">240</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-241"><a href="#cb29-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">241</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-242"><a href="#cb29-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">242</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-243"><a href="#cb29-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">243</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-244"><a href="#cb29-244" aria-hidden="true" tabindex="-1"></a>        <span class="dv">244</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-245"><a href="#cb29-245" aria-hidden="true" tabindex="-1"></a>        <span class="dv">245</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-246"><a href="#cb29-246" aria-hidden="true" tabindex="-1"></a>        <span class="dv">246</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-247"><a href="#cb29-247" aria-hidden="true" tabindex="-1"></a>        <span class="dv">247</span>       <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-248"><a href="#cb29-248" aria-hidden="true" tabindex="-1"></a>        <span class="dv">248</span>   <span class="op">};</span></span>
<span id="cb29-249"><a href="#cb29-249" aria-hidden="true" tabindex="-1"></a>        <span class="dv">249</span> </span>
<span id="cb29-250"><a href="#cb29-250" aria-hidden="true" tabindex="-1"></a>        <span class="dv">250</span>   ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-251"><a href="#cb29-251" aria-hidden="true" tabindex="-1"></a>        <span class="dv">251</span> <span class="op">}</span></span>
<span id="cb29-252"><a href="#cb29-252" aria-hidden="true" tabindex="-1"></a>        <span class="dv">252</span> </span>
<span id="cb29-253"><a href="#cb29-253" aria-hidden="true" tabindex="-1"></a>        <span class="dv">253</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> PackageSrcMatcher3<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-254"><a href="#cb29-254" aria-hidden="true" tabindex="-1"></a>        <span class="dv">254</span>   <span class="kw">auto</span> <span class="at">const</span> exp_dirs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-255"><a href="#cb29-255" aria-hidden="true" tabindex="-1"></a>        <span class="dv">255</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2&quot;</span><span class="op">};</span></span>
<span id="cb29-256"><a href="#cb29-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">256</span> </span>
<span id="cb29-257"><a href="#cb29-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">257</span>   <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span> <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span></span>
<span id="cb29-258"><a href="#cb29-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">258</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-259"><a href="#cb29-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">259</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-260"><a href="#cb29-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">260</span>                                 <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-261"><a href="#cb29-261" aria-hidden="true" tabindex="-1"></a>        <span class="dv">261</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-262"><a href="#cb29-262" aria-hidden="true" tabindex="-1"></a>        <span class="dv">262</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-263"><a href="#cb29-263" aria-hidden="true" tabindex="-1"></a>        <span class="dv">263</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-264"><a href="#cb29-264" aria-hidden="true" tabindex="-1"></a>        <span class="dv">264</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-265"><a href="#cb29-265" aria-hidden="true" tabindex="-1"></a>        <span class="dv">265</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-266"><a href="#cb29-266" aria-hidden="true" tabindex="-1"></a>        <span class="dv">266</span>                                 <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">,</span></span>
<span id="cb29-267"><a href="#cb29-267" aria-hidden="true" tabindex="-1"></a>        <span class="dv">267</span>                                 <span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-268"><a href="#cb29-268" aria-hidden="true" tabindex="-1"></a>        <span class="dv">268</span>                                 <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb29-269"><a href="#cb29-269" aria-hidden="true" tabindex="-1"></a>        <span class="dv">269</span> </span>
<span id="cb29-270"><a href="#cb29-270" aria-hidden="true" tabindex="-1"></a>        <span class="dv">270</span>   <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> AssginSrcsToDirs<span class="op">(</span>exp_dirs<span class="op">,</span> exp_srcs<span class="op">);</span></span>
<span id="cb29-271"><a href="#cb29-271" aria-hidden="true" tabindex="-1"></a>        <span class="dv">271</span> </span>
<span id="cb29-272"><a href="#cb29-272" aria-hidden="true" tabindex="-1"></a>        <span class="dv">272</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="dt">Dirs2Srcs_t</span><span class="op">{</span></span>
<span id="cb29-273"><a href="#cb29-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">273</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1&quot;</span><span class="op">,</span></span>
<span id="cb29-274"><a href="#cb29-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">274</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-275"><a href="#cb29-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">275</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-276"><a href="#cb29-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">276</span>       <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2&quot;</span><span class="op">,</span></span>
<span id="cb29-277"><a href="#cb29-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">277</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-278"><a href="#cb29-278" aria-hidden="true" tabindex="-1"></a>        <span class="dv">278</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_2/mod2_2_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-279"><a href="#cb29-279" aria-hidden="true" tabindex="-1"></a>        <span class="dv">279</span>       <span class="op">{</span><span class="st">&quot;ut_data/app2&quot;</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;ut_data/app2/b_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">}},</span></span>
<span id="cb29-280"><a href="#cb29-280" aria-hidden="true" tabindex="-1"></a>        <span class="dv">280</span>       <span class="op">{</span><span class="st">&quot;no_package&quot;</span><span class="op">,</span></span>
<span id="cb29-281"><a href="#cb29-281" aria-hidden="true" tabindex="-1"></a>        <span class="dv">281</span>        <span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-282"><a href="#cb29-282" aria-hidden="true" tabindex="-1"></a>        <span class="dv">282</span>         <span class="st">&quot;ut_data/app1/mod1/mod1_1.hpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_2.hpp&quot;</span><span class="op">,</span></span>
<span id="cb29-283"><a href="#cb29-283" aria-hidden="true" tabindex="-1"></a>        <span class="dv">283</span>         <span class="st">&quot;ut_data/app1/mod2/mod2_1.cpp&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod2/mod2_1.hpp&quot;</span><span class="op">}},</span></span>
<span id="cb29-284"><a href="#cb29-284" aria-hidden="true" tabindex="-1"></a>        <span class="dv">284</span>   <span class="op">};</span></span>
<span id="cb29-285"><a href="#cb29-285" aria-hidden="true" tabindex="-1"></a>        <span class="dv">285</span> </span>
<span id="cb29-286"><a href="#cb29-286" aria-hidden="true" tabindex="-1"></a>        <span class="dv">286</span>   ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-287"><a href="#cb29-287" aria-hidden="true" tabindex="-1"></a>        <span class="dv">287</span> <span class="op">}</span></span>
<span id="cb29-288"><a href="#cb29-288" aria-hidden="true" tabindex="-1"></a>        <span class="dv">288</span> </span>
<span id="cb29-289"><a href="#cb29-289" aria-hidden="true" tabindex="-1"></a>        <span class="dv">289</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> ToString_Path<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-290"><a href="#cb29-290" aria-hidden="true" tabindex="-1"></a>        <span class="dv">290</span>   <span class="op">{</span></span>
<span id="cb29-291"><a href="#cb29-291" aria-hidden="true" tabindex="-1"></a>        <span class="dv">291</span>     <span class="kw">auto</span> <span class="at">const</span> exp_path <span class="op">=</span> <span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">};</span></span>
<span id="cb29-292"><a href="#cb29-292" aria-hidden="true" tabindex="-1"></a>        <span class="dv">292</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">};</span></span>
<span id="cb29-293"><a href="#cb29-293" aria-hidden="true" tabindex="-1"></a>        <span class="dv">293</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> ToStringPath<span class="op">(</span>exp_path<span class="op">);</span></span>
<span id="cb29-294"><a href="#cb29-294" aria-hidden="true" tabindex="-1"></a>        <span class="dv">294</span> </span>
<span id="cb29-295"><a href="#cb29-295" aria-hidden="true" tabindex="-1"></a>        <span class="dv">295</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-296"><a href="#cb29-296" aria-hidden="true" tabindex="-1"></a>        <span class="dv">296</span>   <span class="op">}</span></span>
<span id="cb29-297"><a href="#cb29-297" aria-hidden="true" tabindex="-1"></a>        <span class="dv">297</span>   <span class="op">{</span></span>
<span id="cb29-298"><a href="#cb29-298" aria-hidden="true" tabindex="-1"></a>        <span class="dv">298</span>     <span class="kw">auto</span> <span class="at">const</span> exp_path <span class="op">=</span> <span class="dt">Path_t</span><span class="op">{</span><span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb29-299"><a href="#cb29-299" aria-hidden="true" tabindex="-1"></a>        <span class="dv">299</span>     <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span><span class="st">&quot;</span><span class="op">};</span></span>
<span id="cb29-300"><a href="#cb29-300" aria-hidden="true" tabindex="-1"></a>        <span class="dv">300</span>     <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> ToStringPath<span class="op">(</span>exp_path<span class="op">);</span></span>
<span id="cb29-301"><a href="#cb29-301" aria-hidden="true" tabindex="-1"></a>        <span class="dv">301</span> </span>
<span id="cb29-302"><a href="#cb29-302" aria-hidden="true" tabindex="-1"></a>        <span class="dv">302</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-303"><a href="#cb29-303" aria-hidden="true" tabindex="-1"></a>        <span class="dv">303</span>   <span class="op">}</span></span>
<span id="cb29-304"><a href="#cb29-304" aria-hidden="true" tabindex="-1"></a>        <span class="dv">304</span> <span class="op">}</span></span>
<span id="cb29-305"><a href="#cb29-305" aria-hidden="true" tabindex="-1"></a>        <span class="dv">305</span> </span>
<span id="cb29-306"><a href="#cb29-306" aria-hidden="true" tabindex="-1"></a>        <span class="dv">306</span> TEST<span class="op">(</span>path_utils<span class="op">,</span> ToString_Paths<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-307"><a href="#cb29-307" aria-hidden="true" tabindex="-1"></a>        <span class="dv">307</span>   <span class="kw">auto</span> <span class="at">const</span> exp_srcs <span class="op">=</span></span>
<span id="cb29-308"><a href="#cb29-308" aria-hidden="true" tabindex="-1"></a>        <span class="dv">308</span>       <span class="dt">Paths_t</span><span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-309"><a href="#cb29-309" aria-hidden="true" tabindex="-1"></a>        <span class="dv">309</span>               <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp&quot;</span><span class="op">,</span></span>
<span id="cb29-310"><a href="#cb29-310" aria-hidden="true" tabindex="-1"></a>        <span class="dv">310</span>               <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h&quot;</span><span class="op">,</span> <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb29-311"><a href="#cb29-311" aria-hidden="true" tabindex="-1"></a>        <span class="dv">311</span> </span>
<span id="cb29-312"><a href="#cb29-312" aria-hidden="true" tabindex="-1"></a>        <span class="dv">312</span>   <span class="kw">auto</span> <span class="at">const</span> exp <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;ut_data/app1/a_1_c.c &quot;</span></span>
<span id="cb29-313"><a href="#cb29-313" aria-hidden="true" tabindex="-1"></a>        <span class="dv">313</span>                                <span class="st">&quot;ut_data/app1/mod1/mod1_1.cpp &quot;</span></span>
<span id="cb29-314"><a href="#cb29-314" aria-hidden="true" tabindex="-1"></a>        <span class="dv">314</span>                                <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.cpp &quot;</span></span>
<span id="cb29-315"><a href="#cb29-315" aria-hidden="true" tabindex="-1"></a>        <span class="dv">315</span>                                <span class="st">&quot;ut_data/app1/mod2/mod2_1/mod2_1_1.h &quot;</span></span>
<span id="cb29-316"><a href="#cb29-316" aria-hidden="true" tabindex="-1"></a>        <span class="dv">316</span>                                <span class="st">&quot;ut_data/app2/b_1.h&quot;</span><span class="op">};</span></span>
<span id="cb29-317"><a href="#cb29-317" aria-hidden="true" tabindex="-1"></a>        <span class="dv">317</span>   <span class="kw">auto</span> <span class="at">const</span> act <span class="op">=</span> ToStringPaths<span class="op">(</span>exp_srcs<span class="op">,</span> <span class="st">&quot; &quot;</span><span class="op">);</span></span>
<span id="cb29-318"><a href="#cb29-318" aria-hidden="true" tabindex="-1"></a>        <span class="dv">318</span> </span>
<span id="cb29-319"><a href="#cb29-319" aria-hidden="true" tabindex="-1"></a>        <span class="dv">319</span>   ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb29-320"><a href="#cb29-320" aria-hidden="true" tabindex="-1"></a>        <span class="dv">320</span> <span class="op">}</span></span>
<span id="cb29-321"><a href="#cb29-321" aria-hidden="true" tabindex="-1"></a>        <span class="dv">321</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb29-322"><a href="#cb29-322" aria-hidden="true" tabindex="-1"></a>        <span class="dv">322</span> <span class="op">}</span> <span class="co">// namespace FileUtils</span></span></code></pre></div>
<h3 id="exampledepslibhlibnstd.h">example/deps/lib/h/lib/nstd.h
<a id="SS_3_1_30"></a></h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;algorithm&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;utility&gt;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &lt;vector&gt;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="kw">namespace</span> Nstd <span class="op">{</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">,</span> <span class="dt">size_t</span> N<span class="op">&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">constexpr</span> <span class="dt">size_t</span> ArrayLength<span class="op">(</span>T <span class="at">const</span> <span class="op">(&amp;)[</span>N<span class="op">])</span> <span class="kw">noexcept</span> <span class="op">{</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="cf">return</span> N<span class="op">;</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="op">}</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> <span class="dt">void</span> SortUnique<span class="op">(</span><span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;</span>v<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="bu">std::</span>sort<span class="op">(</span>v<span class="op">.</span>begin<span class="op">(),</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="kw">auto</span> result <span class="op">=</span> <span class="bu">std::</span>unique<span class="op">(</span>v<span class="op">.</span>begin<span class="op">(),</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   v<span class="op">.</span>erase<span class="op">(</span>result<span class="op">,</span> v<span class="op">.</span>end<span class="op">());</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="op">}</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> <span class="dt">void</span> SortUnique<span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;</span>v<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>   v<span class="op">.</span>sort<span class="op">();</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   v<span class="op">.</span>unique<span class="op">();</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span> <span class="op">}</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> <span class="dt">void</span> Concatenate<span class="op">(</span><span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;</span>v0<span class="op">,</span> <span class="bu">std::</span>vector<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;&amp;</span>v1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;</span>v1_elem <span class="op">:</span> v1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     v0<span class="op">.</span>insert<span class="op">(</span>v0<span class="op">.</span>end<span class="op">(),</span> <span class="bu">std::</span>move<span class="op">(</span>v1_elem<span class="op">));</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>   <span class="op">}</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> <span class="op">}</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> <span class="dt">void</span> Concatenate<span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;</span>v0<span class="op">,</span> <span class="bu">std::</span>list<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;&amp;</span>v1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   v0<span class="op">.</span>splice<span class="op">(</span>v0<span class="op">.</span>end<span class="op">(),</span> <span class="bu">std::</span>move<span class="op">(</span>v1<span class="op">));</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> <span class="op">}</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> </span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> F<span class="op">&gt;</span> <span class="kw">class</span> ScopedGuard <span class="op">{</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="kw">explicit</span> ScopedGuard<span class="op">(</span>F <span class="op">&amp;&amp;</span>f<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">:</span> <span class="va">f_</span><span class="op">{</span>f<span class="op">}</span> <span class="op">{}</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="op">~</span>ScopedGuard<span class="op">()</span> <span class="op">{</span> <span class="va">f_</span><span class="op">();</span> <span class="op">}</span></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   ScopedGuard<span class="op">(</span>ScopedGuard <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   ScopedGuard <span class="op">&amp;</span><span class="kw">operator</span><span class="op">=(</span>ScopedGuard <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   F <span class="va">f_</span><span class="op">;</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span> <span class="op">};</span></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span> </span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> <span class="kw">inline</span> <span class="bu">std::</span>string Replace<span class="op">(</span><span class="bu">std::</span>string in<span class="op">,</span> <span class="bu">std::</span>string_view from<span class="op">,</span></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>                            <span class="bu">std::</span>string_view to<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>   <span class="kw">auto</span> pos <span class="op">=</span> in<span class="op">.</span>find<span class="op">(</span>from<span class="op">);</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span> </span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="cf">while</span> <span class="op">(</span>pos <span class="op">!=</span> <span class="bu">std::</span>string::npos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     in<span class="op">.</span>replace<span class="op">(</span>pos<span class="op">,</span> from<span class="op">.</span>length<span class="op">(),</span> to<span class="op">);</span></span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     pos <span class="op">=</span> in<span class="op">.</span>find<span class="op">(</span>from<span class="op">,</span> pos <span class="op">+</span> to<span class="op">.</span>length<span class="op">());</span></span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>   <span class="op">}</span></span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span> </span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>   <span class="cf">return</span> in<span class="op">;</span></span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span> <span class="op">}</span></span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span> </span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="co">//</span></span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> <span class="co">// operator&lt;&lt; for range</span></span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> <span class="co">//</span></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> <span class="kw">namespace</span> Inner_ <span class="op">{</span></span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> <span class="co">//</span></span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="co">// exists_put_to_as_member</span></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="co">//</span></span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="bu">std::</span>ostream <span class="op">&amp;&gt;</span></span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="kw">struct</span> exists_put_to_as_member <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{};</span></span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="kw">struct</span> exists_put_to_as_member<span class="op">&lt;</span></span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span>     T<span class="op">,</span> <span class="kw">decltype</span><span class="op">(</span><span class="bu">std::</span>declval<span class="op">&lt;</span><span class="bu">std::</span>ostream <span class="op">&amp;&gt;().</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()))&gt;</span></span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span>     <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{};</span></span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span> </span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_as_member_v<span class="op">{</span>exists_put_to_as_member<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span> </span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span> <span class="co">//</span></span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span> <span class="co">// exists_put_to_as_non_member</span></span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span> <span class="co">//</span></span>
<span id="cb30-81"><a href="#cb30-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="bu">std::</span>ostream <span class="op">&amp;&gt;</span></span>
<span id="cb30-82"><a href="#cb30-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span> <span class="kw">struct</span> exists_put_to_as_non_member <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{};</span></span>
<span id="cb30-83"><a href="#cb30-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span> </span>
<span id="cb30-84"><a href="#cb30-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-85"><a href="#cb30-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span> <span class="kw">struct</span> exists_put_to_as_non_member<span class="op">&lt;</span></span>
<span id="cb30-86"><a href="#cb30-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     T<span class="op">,</span> <span class="kw">decltype</span><span class="op">(</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>declval<span class="op">&lt;</span><span class="bu">std::</span>ostream <span class="op">&amp;&gt;(),</span> <span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()))&gt;</span></span>
<span id="cb30-87"><a href="#cb30-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{};</span></span>
<span id="cb30-88"><a href="#cb30-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span> </span>
<span id="cb30-89"><a href="#cb30-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-90"><a href="#cb30-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_as_non_member_v<span class="op">{</span></span>
<span id="cb30-91"><a href="#cb30-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span>     exists_put_to_as_non_member<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb30-92"><a href="#cb30-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span> </span>
<span id="cb30-93"><a href="#cb30-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span> <span class="co">//</span></span>
<span id="cb30-94"><a href="#cb30-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span> <span class="co">// exists_put_to_v</span></span>
<span id="cb30-95"><a href="#cb30-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> <span class="co">//</span></span>
<span id="cb30-96"><a href="#cb30-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-97"><a href="#cb30-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span> <span class="kw">constexpr</span> <span class="dt">bool</span> exists_put_to_v<span class="op">{</span>Nstd<span class="op">::</span>Inner_<span class="op">::</span>exists_put_to_as_member_v<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">||</span></span>
<span id="cb30-98"><a href="#cb30-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>                                Nstd<span class="op">::</span>Inner_<span class="op">::</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>T<span class="op">&gt;};</span></span>
<span id="cb30-99"><a href="#cb30-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span> </span>
<span id="cb30-100"><a href="#cb30-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> <span class="co">//</span></span>
<span id="cb30-101"><a href="#cb30-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span> <span class="co">// is_range</span></span>
<span id="cb30-102"><a href="#cb30-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="co">//</span></span>
<span id="cb30-103"><a href="#cb30-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">,</span> <span class="kw">typename</span> <span class="op">=</span> <span class="dt">bool</span><span class="op">&gt;</span> <span class="kw">struct</span> is_range <span class="op">:</span> <span class="bu">std::</span>false_type <span class="op">{};</span></span>
<span id="cb30-104"><a href="#cb30-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb30-105"><a href="#cb30-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-106"><a href="#cb30-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> <span class="kw">struct</span> is_range<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;</span></span>
<span id="cb30-107"><a href="#cb30-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span>                        <span class="op">!</span><span class="bu">std::</span>is_array_v<span class="op">&lt;</span>T<span class="op">&gt;,</span></span>
<span id="cb30-108"><a href="#cb30-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span>                        <span class="kw">decltype</span><span class="op">(</span><span class="bu">std::</span>begin<span class="op">(</span><span class="bu">std::</span>declval<span class="op">&lt;</span>T<span class="op">&gt;()),</span> <span class="dt">bool</span><span class="op">{})&gt;&gt;</span></span>
<span id="cb30-109"><a href="#cb30-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span>     <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{};</span></span>
<span id="cb30-110"><a href="#cb30-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span> </span>
<span id="cb30-111"><a href="#cb30-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-112"><a href="#cb30-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> <span class="kw">struct</span> is_range<span class="op">&lt;</span>T<span class="op">,</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;</span><span class="bu">std::</span>is_array_v<span class="op">&lt;</span>T<span class="op">&gt;,</span> <span class="dt">bool</span><span class="op">&gt;&gt;</span></span>
<span id="cb30-113"><a href="#cb30-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span>     <span class="op">:</span> <span class="bu">std::</span>true_type <span class="op">{};</span></span>
<span id="cb30-114"><a href="#cb30-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb30-115"><a href="#cb30-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> <span class="co">//</span></span>
<span id="cb30-116"><a href="#cb30-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span> <span class="co">// is_range_v</span></span>
<span id="cb30-117"><a href="#cb30-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span> <span class="co">//</span></span>
<span id="cb30-118"><a href="#cb30-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> <span class="kw">constexpr</span> <span class="dt">bool</span> is_range_v<span class="op">{</span>is_range<span class="op">&lt;</span>T<span class="op">&gt;::</span>value<span class="op">};</span></span>
<span id="cb30-119"><a href="#cb30-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span> </span>
<span id="cb30-120"><a href="#cb30-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span> <span class="op">}</span> <span class="co">// namespace Inner_</span></span>
<span id="cb30-121"><a href="#cb30-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span> </span>
<span id="cb30-122"><a href="#cb30-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span> <span class="co">//</span></span>
<span id="cb30-123"><a href="#cb30-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span> <span class="co">// operator&lt;&lt; for range</span></span>
<span id="cb30-124"><a href="#cb30-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span> <span class="co">//</span></span>
<span id="cb30-125"><a href="#cb30-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span> <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-126"><a href="#cb30-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> <span class="kw">auto</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> T <span class="at">const</span> <span class="op">&amp;</span>t<span class="op">)</span> <span class="op">-&gt;</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if_t<span class="op">&lt;</span></span>
<span id="cb30-127"><a href="#cb30-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span>     Inner_<span class="op">::</span>is_range_v<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>Inner_<span class="op">::</span>exists_put_to_v<span class="op">&lt;</span>T<span class="op">&gt;,</span> <span class="bu">std::</span>ostream <span class="op">&amp;&gt;</span> <span class="op">{</span></span>
<span id="cb30-128"><a href="#cb30-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span>   <span class="kw">auto</span> first <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb30-129"><a href="#cb30-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span> </span>
<span id="cb30-130"><a href="#cb30-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>   <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>i <span class="op">:</span> t<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-131"><a href="#cb30-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>     <span class="cf">if</span> <span class="op">(!</span><span class="bu">std::</span>exchange<span class="op">(</span>first<span class="op">,</span> <span class="kw">false</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb30-132"><a href="#cb30-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>       os <span class="op">&lt;&lt;</span> <span class="st">&quot;, &quot;</span><span class="op">;</span></span>
<span id="cb30-133"><a href="#cb30-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>     <span class="op">}</span></span>
<span id="cb30-134"><a href="#cb30-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>     os <span class="op">&lt;&lt;</span> i<span class="op">;</span></span>
<span id="cb30-135"><a href="#cb30-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>   <span class="op">}</span></span>
<span id="cb30-136"><a href="#cb30-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> </span>
<span id="cb30-137"><a href="#cb30-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span>   <span class="cf">return</span> os<span class="op">;</span></span>
<span id="cb30-138"><a href="#cb30-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> <span class="op">}</span></span>
<span id="cb30-139"><a href="#cb30-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span> <span class="op">}</span> <span class="co">// namespace Nstd</span></span></code></pre></div>
<h3 id="exampledepslibutnstd_ut.cpp">example/deps/lib/ut/nstd_ut.cpp
<a id="SS_3_1_31"></a></h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> <span class="er">#include &lt;list&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;ostream&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;regex&gt;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">namespace</span> Nstd <span class="op">{</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> ArrayLength<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="op">{</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>     <span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>act<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>     ASSERT_EQ<span class="op">(</span><span class="dv">4</span><span class="op">,</span> ArrayLength<span class="op">(</span>act<span class="op">));</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="op">}</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>   <span class="op">{</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="bu">std::</span>string <span class="at">const</span> act<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;Ab&quot;</span><span class="op">};</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> </span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     ASSERT_EQ<span class="op">(</span><span class="dv">3</span><span class="op">,</span> ArrayLength<span class="op">(</span>act<span class="op">));</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>   <span class="op">}</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> <span class="op">}</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span> </span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> SortUnique<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>   <span class="op">{</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span> </span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     SortUnique<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span> </span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>     ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">}),</span> act<span class="op">);</span></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span>   <span class="op">}</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="op">{</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>     <span class="kw">auto</span> act <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;Ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">};</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> </span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>     SortUnique<span class="op">(</span>act<span class="op">);</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> </span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>     ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;Ab&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">}),</span> act<span class="op">);</span></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span>   <span class="op">}</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span> <span class="op">}</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> Concatenate<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="op">{</span></span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="kw">auto</span> act0 <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">};</span></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="kw">auto</span> act1 <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">};</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span> </span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>     Concatenate<span class="op">(</span>act0<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>act1<span class="op">));</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span>     ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">}),</span> act0<span class="op">);</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="op">}</span></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="op">{</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="kw">auto</span> act0 <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">};</span></span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="kw">auto</span> act1 <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">};</span></span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span> </span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>     Concatenate<span class="op">(</span>act0<span class="op">,</span> <span class="bu">std::</span>move<span class="op">(</span>act1<span class="op">));</span></span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span>     ASSERT_EQ<span class="op">((</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;ab&quot;</span><span class="op">,</span> <span class="st">&quot;bcd&quot;</span><span class="op">,</span> <span class="st">&quot;ef&quot;</span><span class="op">}),</span></span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>               act0<span class="op">);</span></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>   <span class="op">}</span></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> <span class="op">}</span></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span> </span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> ScopedGuard<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span>   <span class="kw">auto</span> s <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;not called&quot;</span><span class="op">};</span></span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span> </span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span>   <span class="op">{</span></span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span>     <span class="kw">auto</span> sg <span class="op">=</span> ScopedGuard<span class="op">{[&amp;</span>s<span class="op">]()</span> <span class="kw">noexcept</span> <span class="op">{</span> s <span class="op">=</span> <span class="st">&quot;called&quot;</span><span class="op">;</span> <span class="op">}};</span></span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span>     ASSERT_EQ<span class="op">(</span>s<span class="op">,</span> <span class="st">&quot;not called&quot;</span><span class="op">);</span></span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span>   <span class="op">}</span></span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> </span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span>   ASSERT_EQ<span class="op">(</span>s<span class="op">,</span> <span class="st">&quot;called&quot;</span><span class="op">);</span></span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>         <span class="dv">71</span> <span class="op">}</span></span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a>         <span class="dv">72</span> </span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a>         <span class="dv">73</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> Replace<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a>         <span class="dv">74</span>   <span class="op">{</span></span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a>         <span class="dv">75</span>     <span class="kw">auto</span> in <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a>         <span class="dv">76</span>     <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">);</span></span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a>         <span class="dv">77</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;a/b/c/d&quot;</span><span class="op">);</span></span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a>         <span class="dv">78</span>   <span class="op">}</span></span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a>         <span class="dv">79</span>   <span class="op">{</span></span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a>         <span class="dv">80</span>     <span class="kw">auto</span> in <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a>         <span class="dv">81</span>     <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;///////&quot;</span><span class="op">);</span></span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a>         <span class="dv">82</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;a///////b///////c///////d&quot;</span><span class="op">);</span></span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a>         <span class="dv">83</span>   <span class="op">}</span></span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a>         <span class="dv">84</span>   <span class="op">{</span></span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a>         <span class="dv">85</span>     <span class="kw">auto</span> in <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">&quot;a-b-c-d&quot;</span><span class="op">};</span></span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a>         <span class="dv">86</span>     <span class="kw">auto</span> act <span class="op">=</span> Replace<span class="op">(</span>in<span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">);</span></span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a>         <span class="dv">87</span>     ASSERT_EQ<span class="op">(</span>act<span class="op">,</span> <span class="st">&quot;abcd&quot;</span><span class="op">);</span></span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a>         <span class="dv">88</span>   <span class="op">}</span></span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a>         <span class="dv">89</span> <span class="op">}</span></span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a>         <span class="dv">90</span> </span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a>         <span class="dv">91</span> TEST<span class="op">(</span>stl_try<span class="op">,</span> exclude<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a>         <span class="dv">92</span>   <span class="kw">auto</span> dirs <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="st">&quot;A/e&quot;</span><span class="op">,</span> <span class="st">&quot;A/e/f&quot;</span><span class="op">,</span> <span class="st">&quot;B/xxx/ef&quot;</span><span class="op">};</span></span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a>         <span class="dv">93</span>   <span class="kw">auto</span> exclude <span class="op">=</span> <span class="bu">std::</span>string<span class="op">{</span><span class="st">R&quot;(</span><span class="vs">.*/e\b.*</span><span class="st">)&quot;</span><span class="op">};</span></span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a>         <span class="dv">94</span>   <span class="kw">auto</span> <span class="at">const</span> pattern <span class="op">=</span> <span class="bu">std::</span>regex<span class="op">{</span>exclude<span class="op">};</span></span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a>         <span class="dv">95</span> </span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a>         <span class="dv">96</span>   dirs<span class="op">.</span>remove_if<span class="op">([&amp;</span>pattern<span class="op">](</span><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a>         <span class="dv">97</span>     <span class="kw">auto</span> results <span class="op">=</span> <span class="bu">std::</span>smatch<span class="op">{};</span></span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a>         <span class="dv">98</span>     <span class="cf">return</span> <span class="bu">std::</span>regex_match<span class="op">(</span>d<span class="op">,</span> results<span class="op">,</span> pattern<span class="op">);</span></span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a>         <span class="dv">99</span>   <span class="op">});</span></span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a>        <span class="dv">100</span> </span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span>   ASSERT_EQ<span class="op">(</span>dirs<span class="op">,</span> <span class="op">(</span><span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;A&quot;</span><span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">,</span> <span class="st">&quot;B/xxx/ef&quot;</span><span class="op">}));</span></span>
<span id="cb31-102"><a href="#cb31-102" aria-hidden="true" tabindex="-1"></a>        <span class="dv">102</span> <span class="op">}</span></span>
<span id="cb31-103"><a href="#cb31-103" aria-hidden="true" tabindex="-1"></a>        <span class="dv">103</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb31-104"><a href="#cb31-104" aria-hidden="true" tabindex="-1"></a>        <span class="dv">104</span> </span>
<span id="cb31-105"><a href="#cb31-105" aria-hidden="true" tabindex="-1"></a>        <span class="dv">105</span> <span class="kw">namespace</span> Inner_ <span class="op">{</span></span>
<span id="cb31-106"><a href="#cb31-106" aria-hidden="true" tabindex="-1"></a>        <span class="dv">106</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb31-107"><a href="#cb31-107" aria-hidden="true" tabindex="-1"></a>        <span class="dv">107</span> <span class="kw">class</span> test_class_exits_put_to <span class="op">{};</span></span>
<span id="cb31-108"><a href="#cb31-108" aria-hidden="true" tabindex="-1"></a>        <span class="dv">108</span> </span>
<span id="cb31-109"><a href="#cb31-109" aria-hidden="true" tabindex="-1"></a>        <span class="dv">109</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="bu">std::</span>ostream <span class="op">&amp;</span>os<span class="op">,</span> test_class_exits_put_to<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-110"><a href="#cb31-110" aria-hidden="true" tabindex="-1"></a>        <span class="dv">110</span>   <span class="cf">return</span> os<span class="op">;</span></span>
<span id="cb31-111"><a href="#cb31-111" aria-hidden="true" tabindex="-1"></a>        <span class="dv">111</span> <span class="op">}</span></span>
<span id="cb31-112"><a href="#cb31-112" aria-hidden="true" tabindex="-1"></a>        <span class="dv">112</span> </span>
<span id="cb31-113"><a href="#cb31-113" aria-hidden="true" tabindex="-1"></a>        <span class="dv">113</span> <span class="kw">class</span> test_class_not_exits_put_to <span class="op">{};</span></span>
<span id="cb31-114"><a href="#cb31-114" aria-hidden="true" tabindex="-1"></a>        <span class="dv">114</span> </span>
<span id="cb31-115"><a href="#cb31-115" aria-hidden="true" tabindex="-1"></a>        <span class="dv">115</span> TEST<span class="op">(</span>Nstd<span class="op">,</span> exists_put_to_as_member<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-116"><a href="#cb31-116" aria-hidden="true" tabindex="-1"></a>        <span class="dv">116</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb31-117"><a href="#cb31-117" aria-hidden="true" tabindex="-1"></a>        <span class="dv">117</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="dt">char</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-118"><a href="#cb31-118" aria-hidden="true" tabindex="-1"></a>        <span class="dv">118</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb31-119"><a href="#cb31-119" aria-hidden="true" tabindex="-1"></a>        <span class="dv">119</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb31-120"><a href="#cb31-120" aria-hidden="true" tabindex="-1"></a>        <span class="dv">120</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> <span class="op">*&gt;);</span></span>
<span id="cb31-121"><a href="#cb31-121" aria-hidden="true" tabindex="-1"></a>        <span class="dv">121</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-122"><a href="#cb31-122" aria-hidden="true" tabindex="-1"></a>        <span class="dv">122</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-123"><a href="#cb31-123" aria-hidden="true" tabindex="-1"></a>        <span class="dv">123</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-124"><a href="#cb31-124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">124</span>   <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb31-125"><a href="#cb31-125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">125</span>   oss <span class="op">&lt;&lt;</span> test_class_exits_put_to<span class="op">{};</span></span>
<span id="cb31-126"><a href="#cb31-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">126</span> <span class="op">}</span></span>
<span id="cb31-127"><a href="#cb31-127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">127</span> </span>
<span id="cb31-128"><a href="#cb31-128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">128</span> TEST<span class="op">(</span>Template<span class="op">,</span> exists_put_to_as_non_member<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-129"><a href="#cb31-129" aria-hidden="true" tabindex="-1"></a>        <span class="dv">129</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb31-130"><a href="#cb31-130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">130</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb31-131"><a href="#cb31-131" aria-hidden="true" tabindex="-1"></a>        <span class="dv">131</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb31-132"><a href="#cb31-132" aria-hidden="true" tabindex="-1"></a>        <span class="dv">132</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> <span class="op">*&gt;);</span></span>
<span id="cb31-133"><a href="#cb31-133" aria-hidden="true" tabindex="-1"></a>        <span class="dv">133</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-134"><a href="#cb31-134" aria-hidden="true" tabindex="-1"></a>        <span class="dv">134</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-135"><a href="#cb31-135" aria-hidden="true" tabindex="-1"></a>        <span class="dv">135</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_as_non_member_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-136"><a href="#cb31-136" aria-hidden="true" tabindex="-1"></a>        <span class="dv">136</span> <span class="op">}</span></span>
<span id="cb31-137"><a href="#cb31-137" aria-hidden="true" tabindex="-1"></a>        <span class="dv">137</span> </span>
<span id="cb31-138"><a href="#cb31-138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">138</span> TEST<span class="op">(</span>Template<span class="op">,</span> exists_put_to_v<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-139"><a href="#cb31-139" aria-hidden="true" tabindex="-1"></a>        <span class="dv">139</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;);</span></span>
<span id="cb31-140"><a href="#cb31-140" aria-hidden="true" tabindex="-1"></a>        <span class="dv">140</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb31-141"><a href="#cb31-141" aria-hidden="true" tabindex="-1"></a>        <span class="dv">141</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&gt;);</span></span>
<span id="cb31-142"><a href="#cb31-142" aria-hidden="true" tabindex="-1"></a>        <span class="dv">142</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> <span class="op">*&gt;);</span></span>
<span id="cb31-143"><a href="#cb31-143" aria-hidden="true" tabindex="-1"></a>        <span class="dv">143</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span>test_class_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-144"><a href="#cb31-144" aria-hidden="true" tabindex="-1"></a>        <span class="dv">144</span>   <span class="kw">static_assert</span><span class="op">(!</span>exists_put_to_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">&gt;);</span></span>
<span id="cb31-145"><a href="#cb31-145" aria-hidden="true" tabindex="-1"></a>        <span class="dv">145</span>   <span class="kw">static_assert</span><span class="op">(</span>exists_put_to_v<span class="op">&lt;</span>test_class_not_exits_put_to<span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-146"><a href="#cb31-146" aria-hidden="true" tabindex="-1"></a>        <span class="dv">146</span> <span class="op">}</span></span>
<span id="cb31-147"><a href="#cb31-147" aria-hidden="true" tabindex="-1"></a>        <span class="dv">147</span> </span>
<span id="cb31-148"><a href="#cb31-148" aria-hidden="true" tabindex="-1"></a>        <span class="dv">148</span> TEST<span class="op">(</span>Template<span class="op">,</span> is_range<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-149"><a href="#cb31-149" aria-hidden="true" tabindex="-1"></a>        <span class="dv">149</span>   <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;);</span></span>
<span id="cb31-150"><a href="#cb31-150" aria-hidden="true" tabindex="-1"></a>        <span class="dv">150</span>   <span class="kw">static_assert</span><span class="op">(!</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;);</span></span>
<span id="cb31-151"><a href="#cb31-151" aria-hidden="true" tabindex="-1"></a>        <span class="dv">151</span>   <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span> <span class="at">const</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-152"><a href="#cb31-152" aria-hidden="true" tabindex="-1"></a>        <span class="dv">152</span>   <span class="kw">static_assert</span><span class="op">(</span>is_range_v<span class="op">&lt;</span><span class="dt">int</span><span class="op">[</span><span class="dv">3</span><span class="op">]&gt;);</span></span>
<span id="cb31-153"><a href="#cb31-153" aria-hidden="true" tabindex="-1"></a>        <span class="dv">153</span> <span class="op">}</span></span>
<span id="cb31-154"><a href="#cb31-154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">154</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb31-155"><a href="#cb31-155" aria-hidden="true" tabindex="-1"></a>        <span class="dv">155</span> <span class="op">}</span> <span class="co">// namespace Inner_</span></span>
<span id="cb31-156"><a href="#cb31-156" aria-hidden="true" tabindex="-1"></a>        <span class="dv">156</span> </span>
<span id="cb31-157"><a href="#cb31-157" aria-hidden="true" tabindex="-1"></a>        <span class="dv">157</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb31-158"><a href="#cb31-158" aria-hidden="true" tabindex="-1"></a>        <span class="dv">158</span> TEST<span class="op">(</span>Template<span class="op">,</span> PutTo<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-159"><a href="#cb31-159" aria-hidden="true" tabindex="-1"></a>        <span class="dv">159</span>   <span class="op">{</span></span>
<span id="cb31-160"><a href="#cb31-160" aria-hidden="true" tabindex="-1"></a>        <span class="dv">160</span>     <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb31-161"><a href="#cb31-161" aria-hidden="true" tabindex="-1"></a>        <span class="dv">161</span>     <span class="dt">char</span> c<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;c3&quot;</span><span class="op">;</span></span>
<span id="cb31-162"><a href="#cb31-162" aria-hidden="true" tabindex="-1"></a>        <span class="dv">162</span> </span>
<span id="cb31-163"><a href="#cb31-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">163</span>     oss <span class="op">&lt;&lt;</span> c<span class="op">;</span></span>
<span id="cb31-164"><a href="#cb31-164" aria-hidden="true" tabindex="-1"></a>        <span class="dv">164</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;c3&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb31-165"><a href="#cb31-165" aria-hidden="true" tabindex="-1"></a>        <span class="dv">165</span>   <span class="op">}</span></span>
<span id="cb31-166"><a href="#cb31-166" aria-hidden="true" tabindex="-1"></a>        <span class="dv">166</span>   <span class="op">{</span></span>
<span id="cb31-167"><a href="#cb31-167" aria-hidden="true" tabindex="-1"></a>        <span class="dv">167</span>     <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb31-168"><a href="#cb31-168" aria-hidden="true" tabindex="-1"></a>        <span class="dv">168</span>     <span class="kw">auto</span> str <span class="op">=</span> <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;{</span><span class="st">&quot;1&quot;</span><span class="op">,</span> <span class="st">&quot;2&quot;</span><span class="op">,</span> <span class="st">&quot;3&quot;</span><span class="op">};</span></span>
<span id="cb31-169"><a href="#cb31-169" aria-hidden="true" tabindex="-1"></a>        <span class="dv">169</span> </span>
<span id="cb31-170"><a href="#cb31-170" aria-hidden="true" tabindex="-1"></a>        <span class="dv">170</span>     oss <span class="op">&lt;&lt;</span> str<span class="op">;</span></span>
<span id="cb31-171"><a href="#cb31-171" aria-hidden="true" tabindex="-1"></a>        <span class="dv">171</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;1, 2, 3&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb31-172"><a href="#cb31-172" aria-hidden="true" tabindex="-1"></a>        <span class="dv">172</span>   <span class="op">}</span></span>
<span id="cb31-173"><a href="#cb31-173" aria-hidden="true" tabindex="-1"></a>        <span class="dv">173</span>   <span class="op">{</span></span>
<span id="cb31-174"><a href="#cb31-174" aria-hidden="true" tabindex="-1"></a>        <span class="dv">174</span>     <span class="kw">auto</span> oss <span class="op">=</span> <span class="bu">std::</span>ostringstream<span class="op">{};</span></span>
<span id="cb31-175"><a href="#cb31-175" aria-hidden="true" tabindex="-1"></a>        <span class="dv">175</span>     <span class="kw">auto</span> p <span class="op">=</span> <span class="bu">std::</span>list<span class="op">&lt;</span><span class="bu">std::</span>filesystem::path<span class="op">&gt;{</span><span class="st">&quot;1&quot;</span><span class="op">,</span> <span class="st">&quot;2&quot;</span><span class="op">,</span> <span class="st">&quot;3&quot;</span><span class="op">};</span></span>
<span id="cb31-176"><a href="#cb31-176" aria-hidden="true" tabindex="-1"></a>        <span class="dv">176</span> </span>
<span id="cb31-177"><a href="#cb31-177" aria-hidden="true" tabindex="-1"></a>        <span class="dv">177</span>     oss <span class="op">&lt;&lt;</span> p<span class="op">;</span></span>
<span id="cb31-178"><a href="#cb31-178" aria-hidden="true" tabindex="-1"></a>        <span class="dv">178</span>     ASSERT_EQ<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">1</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">2</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">3</span><span class="sc">\&quot;</span><span class="st">&quot;</span><span class="op">,</span> oss<span class="op">.</span>str<span class="op">());</span></span>
<span id="cb31-179"><a href="#cb31-179" aria-hidden="true" tabindex="-1"></a>        <span class="dv">179</span>   <span class="op">}</span></span>
<span id="cb31-180"><a href="#cb31-180" aria-hidden="true" tabindex="-1"></a>        <span class="dv">180</span> <span class="op">}</span></span>
<span id="cb31-181"><a href="#cb31-181" aria-hidden="true" tabindex="-1"></a>        <span class="dv">181</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb31-182"><a href="#cb31-182" aria-hidden="true" tabindex="-1"></a>        <span class="dv">182</span> <span class="op">}</span> <span class="co">// namespace Nstd</span></span></code></pre></div>
<h3
id="exampledepslogginghlogginglogger.h">example/deps/logging/h/logging/logger.h
<a id="SS_3_1_32"></a></h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#pragma once</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &lt;fstream&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="er">#include &lt;iostream&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &lt;sstream&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> <span class="er">#include &lt;string&gt;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="er">#include &lt;string_view&gt;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> <span class="er">#include &quot;lib/nstd.h&quot;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="co">// @@@ sample begin 0:0</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span> <span class="kw">namespace</span> Logging <span class="op">{</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span> <span class="kw">class</span> Logger <span class="op">{</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>   <span class="at">static</span> Logger <span class="op">&amp;</span>Inst<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename <span class="op">=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> </span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="dt">void</span> Set<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename<span class="op">,</span> <span class="dt">uint32_t</span> line_no<span class="op">,</span> HEAD <span class="at">const</span> <span class="op">&amp;</span>head<span class="op">,</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span>            TAIL<span class="op">...</span> tails<span class="op">)</span> <span class="op">{</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span>     <span class="kw">auto</span> path <span class="op">=</span> <span class="bu">std::</span>string_view<span class="op">{</span>filename<span class="op">};</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span>     <span class="dt">size_t</span> npos <span class="op">=</span> path<span class="op">.</span>find_last_of<span class="op">(</span><span class="ch">&#39;/&#39;</span><span class="op">);</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>     <span class="kw">auto</span> basename <span class="op">=</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>         <span class="op">(</span>npos <span class="op">!=</span> <span class="bu">std::</span>string_view::npos<span class="op">)</span> <span class="op">?</span> path<span class="op">.</span>substr<span class="op">(</span>npos <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> path<span class="op">;</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span> </span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="va">os_</span><span class="op">.</span>width<span class="op">(</span><span class="dv">12</span><span class="op">);</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>     <span class="va">os_</span> <span class="op">&lt;&lt;</span> basename <span class="op">&lt;&lt;</span> <span class="st">&quot;:&quot;</span><span class="op">;</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span> </span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>     <span class="va">os_</span><span class="op">.</span>width<span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>     <span class="va">os_</span> <span class="op">&lt;&lt;</span> line_no<span class="op">;</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span> </span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>     set_inner<span class="op">(</span>head<span class="op">,</span> tails<span class="op">...);</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span>   <span class="op">}</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> </span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span>   <span class="co">// @@@ ignore begin</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>   <span class="dt">void</span> Close<span class="op">();</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span>   Logger<span class="op">(</span>Logger <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span>   Logger <span class="op">&amp;</span><span class="kw">operator</span><span class="op">=(</span>Logger <span class="at">const</span> <span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span>   <span class="co">// @@@ ignore end</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span> </span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="dt">void</span> set_inner<span class="op">()</span> <span class="op">{</span> <span class="va">os_</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> <span class="op">}</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> </span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span>   <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span>   <span class="dt">void</span> set_inner<span class="op">(</span>HEAD <span class="at">const</span> <span class="op">&amp;</span>head<span class="op">,</span> TAIL<span class="op">...</span> tails<span class="op">)</span> <span class="op">{</span></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>     <span class="kw">using</span> Nstd<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="va">os_</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;:&quot;</span> <span class="op">&lt;&lt;</span> head<span class="op">;</span></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>     set_inner<span class="op">(</span>tails<span class="op">...);</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span>   <span class="op">}</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> </span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>         <span class="dv">51</span>   <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> HEAD<span class="op">,</span> <span class="kw">typename</span><span class="op">...</span> TAIL<span class="op">&gt;</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>         <span class="dv">52</span>   <span class="dt">void</span> set_inner<span class="op">(</span><span class="dt">char</span> sep<span class="op">,</span> HEAD <span class="at">const</span> <span class="op">&amp;</span>head<span class="op">,</span> TAIL<span class="op">...</span> tails<span class="op">)</span> <span class="op">{</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>         <span class="dv">53</span>     <span class="kw">using</span> Nstd<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;;</span></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>         <span class="dv">54</span>     <span class="va">os_</span> <span class="op">&lt;&lt;</span> sep <span class="op">&lt;&lt;</span> head<span class="op">;</span></span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>     set_inner<span class="op">(</span>tails<span class="op">...);</span></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>   <span class="op">}</span></span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>         <span class="dv">57</span> </span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>         <span class="dv">58</span>   <span class="co">// @@@ ignore begin</span></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>         <span class="dv">59</span>   <span class="kw">explicit</span> Logger<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>         <span class="dv">60</span> </span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>         <span class="dv">61</span>   <span class="bu">std::</span>ofstream <span class="va">ofs_</span><span class="op">{};</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>         <span class="dv">62</span>   <span class="bu">std::</span>ostream <span class="op">&amp;</span><span class="va">os_</span><span class="op">;</span></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>         <span class="dv">63</span> </span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>         <span class="dv">64</span>   <span class="co">// @@@ ignore end</span></span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>         <span class="dv">65</span> <span class="op">};</span></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>         <span class="dv">66</span> <span class="op">}</span> <span class="co">// namespace Logging</span></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>         <span class="dv">67</span> </span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>         <span class="dv">68</span> <span class="er">#define LOGGER_INIT(filename) Logging::Logger::Inst(filename)</span></span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>         <span class="dv">69</span> <span class="er">#define LOGGER(...) Logging::Logger::Inst().Set(__FILE__, __LINE__, __VA_ARGS__)</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>         <span class="dv">70</span> <span class="co">// @@@ sample end</span></span></code></pre></div>
<h3
id="exampledepsloggingsrclogger.cpp">example/deps/logging/src/logger.cpp
<a id="SS_3_1_33"></a></h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> <span class="kw">class</span> null_ostream <span class="op">:</span> <span class="kw">private</span> <span class="bu">std::</span>streambuf<span class="op">,</span> <span class="kw">public</span> <span class="bu">std::</span>ostream <span class="op">{</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="kw">public</span><span class="op">:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span>   <span class="at">static</span> null_ostream <span class="op">&amp;</span>Inst<span class="op">()</span> <span class="op">{</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span>     <span class="at">static</span> null_ostream inst<span class="op">;</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span>     <span class="cf">return</span> inst<span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span>   <span class="op">}</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span> </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span> <span class="kw">protected</span><span class="op">:</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span>   <span class="kw">virtual</span> <span class="dt">int</span> overflow<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>     setp<span class="op">(</span><span class="va">buf_</span><span class="op">,</span> <span class="va">buf_</span> <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="va">buf_</span><span class="op">));</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>     <span class="cf">return</span> <span class="op">(</span>c <span class="op">==</span> eof<span class="op">()</span> <span class="op">?</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span> <span class="op">:</span> c<span class="op">);</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   <span class="op">}</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span> <span class="kw">private</span><span class="op">:</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   null_ostream<span class="op">()</span> <span class="op">:</span> <span class="bu">std::</span>ostream<span class="op">{</span><span class="kw">this</span><span class="op">}</span> <span class="op">{}</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span>   <span class="dt">char</span> <span class="va">buf_</span><span class="op">[</span><span class="dv">128</span><span class="op">];</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">};</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>         <span class="dv">21</span> </span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>         <span class="dv">22</span> <span class="bu">std::</span>ostream <span class="op">&amp;</span>init_os<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename<span class="op">,</span> <span class="bu">std::</span>ofstream <span class="op">&amp;</span>ofs<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>         <span class="dv">23</span>   <span class="cf">if</span> <span class="op">(</span>filename <span class="op">==</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>         <span class="dv">24</span>     <span class="cf">return</span> <span class="bu">std::</span>cout<span class="op">;</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>         <span class="dv">26</span>     <span class="cf">if</span> <span class="op">(</span><span class="bu">std::</span>string<span class="op">{</span>filename<span class="op">}.</span>size<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>         <span class="dv">27</span>       <span class="cf">return</span> null_ostream<span class="op">::</span>Inst<span class="op">();</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>         <span class="dv">28</span>     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>         <span class="dv">29</span>       ofs<span class="op">.</span>open<span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>         <span class="dv">30</span>       <span class="cf">return</span> ofs<span class="op">;</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>         <span class="dv">31</span>     <span class="op">}</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>         <span class="dv">32</span>   <span class="op">}</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>         <span class="dv">33</span> <span class="op">}</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>         <span class="dv">34</span> <span class="op">}</span> <span class="co">// namespace</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>         <span class="dv">35</span> </span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span> <span class="kw">namespace</span> Logging <span class="op">{</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>         <span class="dv">37</span> Logger<span class="op">::</span>Logger<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename<span class="op">)</span> <span class="op">:</span> <span class="va">os_</span><span class="op">{</span>init_os<span class="op">(</span>filename<span class="op">,</span> <span class="va">ofs_</span><span class="op">)}</span> <span class="op">{}</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>         <span class="dv">38</span> </span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>         <span class="dv">39</span> Logger <span class="op">&amp;</span>Logger<span class="op">::</span>Inst<span class="op">(</span><span class="dt">char</span> <span class="at">const</span> <span class="op">*</span>filename<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>         <span class="dv">40</span>   <span class="at">static</span> <span class="kw">auto</span> inst <span class="op">=</span> Logger<span class="op">{</span>filename<span class="op">};</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>         <span class="dv">41</span> </span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>         <span class="dv">42</span>   <span class="cf">return</span> inst<span class="op">;</span></span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>         <span class="dv">43</span> <span class="op">}</span></span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>         <span class="dv">44</span> </span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>         <span class="dv">45</span> <span class="dt">void</span> Logger<span class="op">::</span>Close<span class="op">()</span> <span class="op">{</span></span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>         <span class="dv">46</span>   <span class="cf">if</span> <span class="op">(&amp;</span><span class="bu">std::</span>cout <span class="op">!=</span> <span class="op">&amp;</span><span class="va">os_</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>         <span class="dv">47</span>     <span class="va">ofs_</span><span class="op">.</span>close<span class="op">();</span></span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>         <span class="dv">48</span>   <span class="op">}</span></span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>         <span class="dv">49</span> <span class="op">}</span></span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>         <span class="dv">50</span> <span class="op">}</span> <span class="co">// namespace Logging</span></span></code></pre></div>
<h3
id="exampledepsloggingutlogger_ut.cpp">example/deps/logging/ut/logger_ut.cpp
<a id="SS_3_1_34"></a></h3>
<div class="sourceCode" id="cb34"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>          <span class="dv">1</span> <span class="er">#include &lt;filesystem&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>          <span class="dv">3</span> <span class="er">#include &quot;gtest_wrapper.h&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>          <span class="dv">4</span> </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>          <span class="dv">5</span> <span class="er">#include &quot;logging/logger.h&quot;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>          <span class="dv">6</span> </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>          <span class="dv">7</span> <span class="kw">namespace</span> <span class="op">{</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>          <span class="dv">8</span> </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>          <span class="dv">9</span> TEST<span class="op">(</span>log<span class="op">,</span> Logger<span class="op">)</span> <span class="op">{</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>   <span class="co">// loggingのテストは他のライブラリで行う。</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">11</span>   <span class="co">// ここではコンパイルできることの確認のみ。</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">12</span> </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">13</span>   LOGGER_INIT<span class="op">(</span><span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">14</span>   LOGGER<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>         <span class="dv">15</span>   LOGGER<span class="op">(</span><span class="st">&quot;xyz&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span> </span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>         <span class="dv">17</span>   <span class="kw">auto</span> file <span class="op">=</span> <span class="bu">std::</span>filesystem::path<span class="op">{</span><span class="st">&quot;hehe&quot;</span><span class="op">};</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>         <span class="dv">18</span>   LOGGER<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>         <span class="dv">19</span> <span class="op">}</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>         <span class="dv">20</span> <span class="op">}</span> <span class="co">// namespace</span></span></code></pre></div>
<h2 id="etc">etc <a id="SS_3_2"></a></h2>
<h3 id="exampledepscmakelists.txt">example/deps/CMakeLists.txt
<a id="SS_3_2_1"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(main_project)
          4 
          5 set(CMAKE_CXX_STANDARD 17)
          6 set(CMAKE_CXX_STANDARD_REQUIRED True)
          7 
          8 # CMakeオプションを定義
          9 option(USE_SANITIZERS &quot;Enable sanitizers&quot; OFF)
         10 
         11 # USE_SANITIZERS オプションをチェック
         12 if(USE_SANITIZERS)
         13     message(STATUS &quot;Sanitizers are enabled&quot;)
         14     set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fsanitize=address,leak,undefined,float-divide-by-zero,float-cast-overflow&quot;)
         15     set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -fsanitize=address,leak,undefined,float-divide-by-zero,float-cast-overflow&quot;)
         16 else()
         17     message(STATUS &quot;Sanitizers are disabled&quot;)
         18 endif()
         19 
         20 
         21 set(GTEST_DIR &quot;../../googletest&quot;)
         22 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
         23 
         24 include_directories(&quot;${GTEST_DIR}/googletest/include&quot;)
         25 
         26 # googletestサブディレクトリを追加
         27 add_subdirectory(${GTEST_DIR} ${CMAKE_BINARY_DIR}/googletest EXCLUDE_FROM_ALL)
         28 
         29 add_subdirectory(lib)
         30 add_subdirectory(logging)
         31 add_subdirectory(file_utils)
         32 add_subdirectory(dependency)
         33 add_subdirectory(app)
         34 
         35 # すべてのテストを実行するカスタムターゲットを追加
         36 add_custom_target(tests
         37     DEPENDS app_ut dependency_ut file_utils_ut lib_ut logging_ut deps_it
         38     WORKING_DIRECTORY ${CMAKE_BINARY_DIR}
         39 )
         40 </code></pre>
<h3
id="exampledepsdependencycmakelists.txt">example/deps/dependency/CMakeLists.txt
<a id="SS_3_2_2"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(dependency VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          8 
          9 # ライブラリのソースファイルを追加
         10 add_library(dependency STATIC
         11     src/arch_pkg.cpp
         12     src/cpp_deps.cpp
         13     src/cpp_dir.cpp
         14     src/cpp_src.cpp
         15     src/deps_scenario.cpp
         16     src/load_store_format.cpp
         17 )
         18 
         19 # @@@ sample begin 0:0
         20 
         21 # dependency.aをリンクするファイルに
         22 # ../dependency/h ../file_utils/h ../lib/h
         23 # のヘッダファイルを公開する
         24 
         25 target_include_directories(dependency PUBLIC ../dependency/h ../file_utils/h ../lib/h)
         26 # @@@ sample end
         27 
         28 # テスト用のソースファイルを追加して単一の実行ファイルを生成
         29 add_executable(dependency_ut_exe
         30     ut/arch_pkg_ut.cpp
         31     ut/cpp_deps_ut.cpp
         32     ut/cpp_dir_ut.cpp
         33     ut/cpp_src_ut.cpp
         34     ut/deps_scenario_ut.cpp
         35     ut/load_store_format_ut.cpp
         36 )
         37 
         38 # @@@ sample begin 1:0
         39 
         40 # dependency_ut_exeはdependency.aの単体テスト
         41 # dependency_ut_exeが使用するライブラリのヘッダは下記の記述で公開される
         42 target_link_libraries(dependency_ut_exe dependency file_utils logging gtest gtest_main)
         43 
         44 # dependency_ut_exeに上記では公開範囲が不十分である場合、
         45 # dependency_ut_exeが使用するライブラリのヘッダは下記の記述で限定的に公開される
         46 # dependency_ut_exeにはdependency/src/*.hへのアクセスが必要
         47 target_include_directories(dependency_ut_exe PRIVATE ../../../deep/h src)
         48 # @@@ sample end
         49 
         50 # テストを追加
         51 enable_testing()
         52 add_test(NAME dependency_ut COMMAND dependency_ut_exe)
         53 
         54 add_custom_target(dependency_ut_copy_test_data
         55     COMMAND ${CMAKE_COMMAND} -E copy_directory 
         56     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:dependency_ut_exe&gt;/ut_data
         57 )
         58 
         59 # カスタムターゲットを追加して、ビルド後にテストを実行
         60 add_custom_target(dependency_ut
         61     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         62     DEPENDS dependency_ut_exe dependency_ut_copy_test_data
         63 )
         64 </code></pre>
<h3
id="exampledepsfile_utilscmakelists.txt">example/deps/file_utils/CMakeLists.txt
<a id="SS_3_2_3"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(file_utils VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          8 
          9 add_library(file_utils STATIC
         10     src/load_store_row.cpp
         11     src/path_utils.cpp
         12 )
         13 
         14 target_include_directories(file_utils PUBLIC ../file_utils/h)
         15 
         16 add_executable(file_utils_ut_exe ut/load_store_row_ut.cpp ut/path_utils_ut.cpp)
         17 
         18 target_link_libraries(file_utils_ut_exe file_utils logging gtest gtest_main)
         19 
         20 target_include_directories(file_utils_ut_exe PRIVATE h ../../../deep/h ../logging/h ../lib/h)
         21 
         22 add_custom_command(TARGET file_utils_ut_exe POST_BUILD
         23     COMMAND ${CMAKE_COMMAND} -E copy_directory
         24     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:file_utils_ut_exe&gt;/ut_data
         25 )
         26 
         27 enable_testing()
         28 add_test(NAME file_utils_ut COMMAND file_utils_ut_exe)
         29 
         30 add_custom_target(file_utils_ut_copy_test_data
         31     COMMAND ${CMAKE_COMMAND} -E copy_directory 
         32     ${CMAKE_SOURCE_DIR}/ut_data $&lt;TARGET_FILE_DIR:file_utils_ut_exe&gt;/ut_data
         33 )
         34 
         35 # カスタムターゲットを追加して、ビルド後にテストを実行
         36 add_custom_target(file_utils_ut
         37     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         38     DEPENDS file_utils_ut_exe file_utils_ut_copy_test_data
         39 )
         40 </code></pre>
<h3 id="exampledepslibcmakelists.txt">example/deps/lib/CMakeLists.txt
<a id="SS_3_2_4"></a></h3>
<pre><code>          1 cmake_minimum_required(VERSION 3.10)
          2 
          3 project(lib VERSION 1.0)
          4 
          5 # C++の標準を設定
          6 set(CMAKE_CXX_STANDARD 17)
          7 set(CMAKE_CXX_STANDARD_REQUIRED True)
          8 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
          9 
         10 add_executable(lib_ut_exe ut/nstd_ut.cpp)
         11 
         12 if(NOT TARGET gtest)
         13     message(FATAL_ERROR &quot;gtest target not found. Make sure googletest is added at the top level CMakeLists.txt&quot;)
         14 endif()
         15 
         16 target_include_directories(lib_ut_exe PRIVATE h ../../h/ ../../../deep/h)
         17 target_link_libraries(lib_ut_exe gtest gtest_main)
         18 
         19 enable_testing()
         20 add_test(NAME lib_ut COMMAND lib_ut_exe)
         21 
         22 add_custom_target(lib_ut
         23     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         24     DEPENDS lib_ut_exe
         25 )
         26 </code></pre>
<h3
id="exampledepsloggingcmakelists.txt">example/deps/logging/CMakeLists.txt
<a id="SS_3_2_5"></a></h3>
<pre><code>          1 #logging/CMakeLists.txt
          2 
          3 cmake_minimum_required(VERSION 3.10)
          4 
          5 project(logging VERSION 1.0)
          6 
          7 # C++の標準を設定
          8 set(CMAKE_CXX_STANDARD 17)
          9 set(CMAKE_CXX_STANDARD_REQUIRED True)
         10 set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
         11 
         12 add_library(logging STATIC src/logger.cpp)
         13 
         14 target_include_directories(logging PUBLIC h ../lib/h)
         15 
         16 add_executable(logging_ut_exe ut/logger_ut.cpp)
         17 
         18 target_include_directories(logging_ut_exe PRIVATE ../../../deep/h ../lib/h)
         19 target_link_libraries(logging_ut_exe logging gtest gtest_main)
         20 
         21 enable_testing()
         22 add_test(NAME logging_ut COMMAND logging_ut_exe)
         23 
         24 add_custom_target(logging_ut
         25     COMMAND ${CMAKE_CTEST_COMMAND} --output-on-failure
         26     DEPENDS logging_ut_exe
         27 )
         28 </code></pre>
</body>
</html>
